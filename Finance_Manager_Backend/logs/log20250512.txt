2025-05-12 21:48:47.680 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-12 21:48:58.484 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:49:01.884 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2025-05-12 21:49:06.010 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<User>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        User entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            User instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(User);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (User)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Email>k__BackingField = dataReader.GetString(2);
                                instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                instance.<Role>k__BackingField = dataReader.GetString(5);
                                instance.<Salt>k__BackingField = dataReader.GetString(6);
                                instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-12 21:49:07.528 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:49:10.095 +03:00 [DBG] Created DbConnection. (3154ms).
2025-05-12 21:49:10.101 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:24.133 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:24.141 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:24.692 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (550ms).
2025-05-12 21:49:24.695 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (558ms).
2025-05-12 21:49:24.932 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-12 21:49:29.618 +03:00 [INF] Executed DbCommand (4,914ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-12 21:49:30.392 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:30.639 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:30.651 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:30.653 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:30.775 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:30.785 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1158ms reading results.
2025-05-12 21:49:30.788 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:30.795 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (6ms).
2025-05-12 21:49:30.801 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 21:49:30.942 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 21:49:30.957 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 21:49:32.066 +03:00 [DBG] Executing 2 update commands as a batch.
2025-05-12 21:49:32.073 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:32.076 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:32.080 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-12 21:49:32.088 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-12 21:49:32.094 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:32.096 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:49:32.247 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (153ms).
2025-05-12 21:49:32.253 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 21:49:35.595 +03:00 [INF] Executed DbCommand (3,345ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 21:49:35.854 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:35.858 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 259ms reading results.
2025-05-12 21:49:35.996 +03:00 [DBG] Committing transaction.
2025-05-12 21:49:36.000 +03:00 [DBG] Committed transaction.
2025-05-12 21:49:36.003 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:36.005 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:49:36.008 +03:00 [DBG] Disposing transaction.
2025-05-12 21:49:36.015 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:36.017 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:36.020 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-05-12 21:49:36.023 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-12 21:49:36.031 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-12 21:49:36.074 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:36.076 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:36.078 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:36.079 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:49:36.080 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:49:36.082 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 21:49:36.154 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 21:49:36.237 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:36.250 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:36.254 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:36.255 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:36.257 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:36.259 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:36.261 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:36.262 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:36.264 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:36.267 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:36.269 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:36.271 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 114ms reading results.
2025-05-12 21:49:36.273 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:36.274 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:49:36.276 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 21:49:36.277 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 21:49:36.287 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 21:49:36.290 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-12 21:49:36.291 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:36.293 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:36.294 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-12 21:49:36.295 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-12 21:49:36.297 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:36.298 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:49:36.300 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 21:49:36.302 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-12 21:49:38.056 +03:00 [INF] Executed DbCommand (1,754ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-12 21:49:38.059 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:38.060 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 21:49:38.061 +03:00 [DBG] Committing transaction.
2025-05-12 21:49:38.062 +03:00 [DBG] Committed transaction.
2025-05-12 21:49:38.063 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:38.064 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:49:38.066 +03:00 [DBG] Disposing transaction.
2025-05-12 21:49:38.067 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:38.069 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:38.071 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:38.073 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:38.076 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:38.078 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-12 21:49:38.081 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:49:38.084 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:38.086 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 21:49:38.986 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:49:39.043 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-12 21:49:39.979 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-12 21:49:40.000 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:49:40.003 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-12 21:49:40.004 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:40.007 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:40.008 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:40.009 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:49:40.011 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:49:40.012 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-12 21:49:40.178 +03:00 [INF] Executed DbCommand (165ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-12 21:49:40.183 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:40.184 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-12 21:49:40.186 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:40.187 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:49:40.218 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:40.224 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:40.226 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 21:49:40.227 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 21:49:40.229 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 21:49:40.351 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:40.353 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:40.355 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:40.356 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:49:40.358 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 21:49:40.360 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-12 21:49:40.413 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-12 21:49:42.506 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:42.526 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:42.527 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2112ms reading results.
2025-05-12 21:49:42.530 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:42.531 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:49:42.535 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:42.537 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 21:49:46.019 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.032 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.036 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.038 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 21:49:46.040 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 21:49:46.047 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 21:49:46.053 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.055 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.057 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:46.058 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:49:46.060 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 21:49:46.062 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 21:49:46.172 +03:00 [INF] Executed DbCommand (110ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 21:49:46.178 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.181 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.182 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-12 21:49:46.184 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.185 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:49:46.187 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.190 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 21:49:46.193 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __authData_UserDTO_Id_0)'
2025-05-12 21:49:46.200 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-12 21:49:46.204 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.206 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.207 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:46.208 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:49:46.210 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:49:46.211 +03:00 [DBG] Executing DbCommand [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-12 21:49:46.301 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-12 21:49:46.304 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.306 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 21:49:46.307 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.309 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:49:46.314 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.316 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.319 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.320 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.322 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.324 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.325 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.327 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.328 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.330 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.332 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 21:49:46.333 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 21:49:46.334 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 21:49:46.339 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-12 21:49:46.342 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.344 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.346 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:46.347 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:49:46.348 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:49:46.350 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-12 21:49:46.443 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-12 21:49:46.448 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.451 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.453 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.454 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.456 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.458 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.460 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 13ms reading results.
2025-05-12 21:49:46.463 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.464 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:49:46.466 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.469 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.472 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.473 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.475 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.478 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-12 21:49:46.483 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.626 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.629 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.630 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.632 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.634 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.635 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.636 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.638 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.640 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.641 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.643 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.645 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.647 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.649 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.650 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.652 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.654 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.655 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.657 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.658 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.661 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.663 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.664 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.666 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.667 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.669 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.671 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.672 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.764 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.765 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.768 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.769 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.771 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.772 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.774 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.775 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.777 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.779 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.781 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.782 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 21:49:46.783 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 21:49:46.788 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 21:49:46.791 +03:00 [DBG] Executing 20 update commands as a batch.
2025-05-12 21:49:46.792 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.793 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.795 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:46.796 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:49:46.797 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:49:46.799 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-12 21:49:46.850 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-12 21:49:46.854 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.857 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.858 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.860 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.861 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.863 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.864 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.865 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.867 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.869 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.870 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.872 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.873 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.875 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.876 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.877 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.879 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.880 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.882 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.883 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:46.885 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.886 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 32ms reading results.
2025-05-12 21:49:46.889 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.890 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:49:46.893 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.896 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.898 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.901 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.903 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.906 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.908 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.910 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.913 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.915 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.917 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.920 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.922 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.924 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.926 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.930 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.932 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.935 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.938 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.940 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.942 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 20 entities written to the database.
2025-05-12 21:49:46.947 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.961 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.963 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.965 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.968 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.970 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.971 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.973 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:46.974 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 21:49:46.976 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 21:49:46.982 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 21:49:46.984 +03:00 [DBG] Executing 4 update commands as a batch.
2025-05-12 21:49:46.986 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.987 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:46.990 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:46.992 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:49:46.994 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 21:49:46.996 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-12 21:49:47.134 +03:00 [INF] Executed DbCommand (138ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-12 21:49:47.138 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:47.140 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:47.141 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:47.143 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:47.144 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:47.146 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-12 21:49:47.148 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:47.150 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 21:49:47.155 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:47.157 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:47.160 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:47.162 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:47.166 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 4 entities written to the database.
2025-05-12 21:49:47.168 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:49:47.170 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:47.171 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 21:49:47.251 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:49:47.316 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:49:47.318 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 21:49:47.319 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:47.321 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:47.322 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:47.323 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:49:47.325 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:49:47.326 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-12 21:49:47.331 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-12 21:49:47.333 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:47.335 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 21:49:47.336 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:47.338 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:49:47.351 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:47.353 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:47.355 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 21:49:47.356 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 21:49:47.357 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 21:49:47.358 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:47.360 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:47.362 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:47.363 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:49:47.364 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:49:47.365 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-12 21:49:47.369 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-12 21:49:47.371 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:49:47.373 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:47.374 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 21:49:47.376 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:47.378 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:49:47.380 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:49:47.382 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 21:49:47.383 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:49:47.384 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:47.386 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 21:49:48.654 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-12 21:49:48.747 +03:00 [DBG] Hosting starting
2025-05-12 21:49:49.377 +03:00 [INF] User profile is available. Using 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-12 21:49:49.401 +03:00 [DBG] Reading data from file 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys\key-036e1e5f-5347-47d7-8236-0b64ed0a76a1.xml'.
2025-05-12 21:49:49.408 +03:00 [DBG] Found key {036e1e5f-5347-47d7-8236-0b64ed0a76a1}.
2025-05-12 21:49:49.416 +03:00 [DBG] Considering key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} with expiration date 2025-07-16 20:11:06Z as default key.
2025-05-12 21:49:49.420 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-12 21:49:49.422 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-12 21:49:49.424 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-12 21:49:49.429 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-12 21:49:49.432 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-12 21:49:49.435 +03:00 [DBG] Using key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} as the default key.
2025-05-12 21:49:49.436 +03:00 [DBG] Key ring with default key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} was loaded during application startup.
2025-05-12 21:49:49.450 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:49:49.457 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.ExpiresAt < DateTime.UtcNow)'
2025-05-12 21:49:49.723 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<RefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE()) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE(), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        RefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            RefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(RefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (RefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                        {
                            return 
                            {
                                RefreshToken instance;
                                instance = new RefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Token>k__BackingField = dataReader.GetString(4);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(RefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-12 21:49:49.728 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:49:49.729 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 21:49:49.730 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:49.732 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:49.734 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:49:49.735 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:49:49.737 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:49:49.738 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-12 21:49:49.785 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-12 21:49:49.790 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:49.792 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 21:49:49.794 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:49.796 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:49:49.799 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:49:49.800 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:49:49.802 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 21:49:50.206 +03:00 [INF] Now listening on: https://localhost:49464
2025-05-12 21:49:50.210 +03:00 [INF] Now listening on: http://localhost:49465
2025-05-12 21:49:50.211 +03:00 [DBG] Loaded hosting startup assembly Finance_Manager_Backend
2025-05-12 21:49:50.212 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-12 21:49:50.213 +03:00 [INF] Hosting environment: Development
2025-05-12 21:49:50.214 +03:00 [INF] Content root path: G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend
2025-05-12 21:49:50.215 +03:00 [DBG] Hosting started
2025-05-12 21:55:09.727 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" accepted.
2025-05-12 21:55:09.730 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" started.
2025-05-12 21:55:10.196 +03:00 [DBG] Connection 0HNCHGQ2DS0VS established using the following protocol: "Tls12"
2025-05-12 21:55:11.078 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 21:55:11.082 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-12 21:55:11.541 +03:00 [DBG] POST requests are not supported
2025-05-12 21:55:11.584 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 21:55:11.587 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 21:55:11.589 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 21:55:11.998 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 21:55:12.003 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 21:55:12.034 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 21:55:12.038 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 21:55:12.042 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 21:55:12.045 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 21:55:12.047 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 21:55:12.048 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 21:55:12.052 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 21:55:12.055 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 21:55:12.128 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 21:55:12.142 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 21:55:12.145 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 21:55:12.148 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 21:55:12.196 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS", Request id "0HNCHGQ2DS0VS:00000001": started reading request body.
2025-05-12 21:55:12.197 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS", Request id "0HNCHGQ2DS0VS:00000001": done reading request body.
2025-05-12 21:55:12.987 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 21:55:12.989 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 21:55:12.993 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 21:55:12.998 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 21:55:13.004 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:55:13.007 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .FirstOrDefault(rt => rt.Token == __refreshToken_0)'
2025-05-12 21:55:13.012 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RefreshToken>(
    asyncEnumerable: SingleQueryingEnumerable.Create<RefreshToken>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
            SELECT TOP(1) r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
            FROM refresh_tokens AS r
            WHERE r.token == @__refreshToken_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
            SELECT TOP(1) r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
            FROM refresh_tokens AS r
            WHERE r.token == @__refreshToken_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            RefreshToken entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                RefreshToken instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(RefreshToken);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (RefreshToken)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                            {
                                return 
                                {
                                    RefreshToken instance;
                                    instance = new RefreshToken();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                    instance.<Token>k__BackingField = dataReader.GetString(4);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(RefreshToken)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-12 21:55:13.016 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:55:13.017 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 21:55:13.019 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:13.020 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:13.022 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:55:13.023 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:55:13.024 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:55:13.026 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 21:55:13.112 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 21:55:13.114 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:13.115 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 21:55:13.116 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:13.118 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:55:13.128 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 1074.2342ms
2025-05-12 21:55:13.131 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 21:55:13.135 +03:00 [ERR] Invalid refresh token
System.InvalidOperationException: Invalid refresh token
   at Finance_Manager_Backend.BusinessLogic.Services.AuthServices.AuthService.AuthenticateUserWithRefreshTokenAsync(String refreshToken) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\BusinessLogic\Services\AuthServices\AuthService.cs:line 89
   at Finance_Manager_Backend.Controllers.AuthController.RefreshToken(String refreshToken) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Controllers\AuthController.cs:line 84
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Finance_Manager_Backend.Middleware.ExceptionsHandler.InvokeAsync(HttpContext httpContext) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Middleware\ExceptionsHandler.cs:line 23
2025-05-12 21:55:14.139 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" completed keep alive response.
2025-05-12 21:55:14.142 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:55:14.145 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:14.147 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 21:55:14.149 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 400 null application/json 3073.1149ms
2025-05-12 21:55:46.773 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/authenticate - application/json-patch+json 63
2025-05-12 21:55:46.776 +03:00 [DBG] POST requests are not supported
2025-05-12 21:55:46.780 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/authenticate'
2025-05-12 21:55:46.781 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)' with route pattern 'api/Auth/authenticate' is valid for the request path '/api/Auth/authenticate'
2025-05-12 21:55:46.782 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-12 21:55:46.784 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 21:55:46.786 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-12 21:55:46.792 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] Authenticate(Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 21:55:46.794 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 21:55:46.796 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 21:55:46.797 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 21:55:46.799 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 21:55:46.800 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 21:55:46.803 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 21:55:46.804 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 21:55:46.806 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-12 21:55:46.807 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' using the name '' in request data ...
2025-05-12 21:55:46.809 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 21:55:46.810 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 21:55:46.811 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS", Request id "0HNCHGQ2DS0VS:00000002": started reading request body.
2025-05-12 21:55:46.812 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS", Request id "0HNCHGQ2DS0VS:00000002": done reading request body.
2025-05-12 21:55:46.866 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-12 21:55:46.868 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-12 21:55:46.869 +03:00 [DBG] Attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-12 21:55:46.874 +03:00 [DBG] Done attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-12 21:55:46.932 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:55:46.935 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:55:46.935 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 21:55:46.937 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:46.938 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:46.939 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:55:46.941 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:55:46.942 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:55:46.944 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-12 21:55:46.953 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-12 21:55:46.955 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:46.957 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:46.958 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-12 21:55:46.960 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:46.961 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:55:46.976 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:46.979 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:46.980 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:46.982 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 21:55:46.983 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 21:55:46.984 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 21:55:46.986 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:46.987 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:46.989 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:55:46.990 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:55:46.991 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:55:46.993 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 21:55:46.997 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 21:55:46.999 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:55:47.000 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:47.001 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 21:55:47.002 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:47.003 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:55:47.005 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:47.007 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 21:55:47.010 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 21:55:47.014 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 21:55:47.015 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 21:55:47.017 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 21:55:47.017 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 21:55:47.019 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 21:55:47.021 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 21:55:47.080 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend) in 276.8991ms
2025-05-12 21:55:47.094 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-12 21:55:47.095 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" completed keep alive response.
2025-05-12 21:55:47.096 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:55:47.097 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:47.100 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 21:55:47.102 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/authenticate - 200 521 application/json; charset=utf-8 329.5035ms
2025-05-12 21:55:47.768 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 21:55:47.794 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 21:55:47.798 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 21:55:47.799 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 21:55:47.801 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 21:55:47.949 +03:00 [DBG] Successfully validated the token.
2025-05-12 21:55:47.951 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 21:55:47.953 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 21:55:47.958 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 21:55:47.960 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 21:55:47.962 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 21:55:47.964 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 21:55:47.966 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 21:55:47.968 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 21:55:47.969 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 21:55:47.976 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 21:55:47.978 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 21:55:47.979 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 21:55:47.982 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 21:55:47.983 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 21:55:47.985 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 21:55:47.986 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 21:55:48.016 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 21:55:48.019 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 21:55:48.021 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 21:55:48.022 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 21:55:48.024 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 21:55:48.024 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 21:55:48.026 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 21:55:48.030 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 61.0959ms
2025-05-12 21:55:48.032 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 21:55:48.033 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" completed keep alive response.
2025-05-12 21:55:48.034 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 265.8429ms
2025-05-12 21:55:48.041 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 21:55:48.046 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 21:55:48.047 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 21:55:48.048 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 21:55:48.050 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 21:55:48.052 +03:00 [DBG] Successfully validated the token.
2025-05-12 21:55:48.054 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 21:55:48.056 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 21:55:48.060 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 21:55:48.062 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 21:55:48.064 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 21:55:48.065 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 21:55:48.067 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 21:55:48.068 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 21:55:48.071 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 21:55:48.073 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 21:55:48.077 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:55:48.080 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-12 21:55:48.085 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-12 21:55:48.089 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:55:48.091 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 21:55:48.092 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.094 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.095 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:55:48.096 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:55:48.098 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:55:48.099 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 21:55:48.105 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 21:55:48.109 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.110 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.112 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.113 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.115 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.117 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.118 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-12 21:55:48.120 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.122 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 21:55:48.135 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 21:55:48.139 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 21:55:48.140 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 21:55:48.141 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 21:55:48.142 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 21:55:48.143 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 21:55:48.144 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 21:55:48.153 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 81.2928ms
2025-05-12 21:55:48.155 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 21:55:48.156 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" completed keep alive response.
2025-05-12 21:55:48.157 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:55:48.158 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.161 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 21:55:48.163 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 121.3083ms
2025-05-12 21:55:48.186 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T18%3A55%3A48&pageSize=10 - null null
2025-05-12 21:55:48.190 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 21:55:48.191 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 21:55:48.192 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 21:55:48.194 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 21:55:48.195 +03:00 [DBG] Successfully validated the token.
2025-05-12 21:55:48.196 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 21:55:48.198 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 21:55:48.207 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 21:55:48.209 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 21:55:48.211 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 21:55:48.212 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 21:55:48.214 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 21:55:48.216 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 21:55:48.218 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 21:55:48.221 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 21:55:48.227 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 21:55:48.229 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 21:55:48.233 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 21:55:48.236 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 21:55:48.239 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 21:55:48.241 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 21:55:48.243 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 21:55:48.245 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 21:55:48.247 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 21:55:48.248 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 21:55:48.250 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 21:55:48.252 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 21:55:48.276 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:55:48.282 +03:00 [DBG] Compiling query expression: 
'DbSet<Transaction>()
    .Where(t => t.UserId == __userId_0)
    .OrderByDescending(t => t.Date)
    .Where(t => t.Date < __lastDate_Value_1)
    .OrderByDescending(t => t.Date)
    .Take(__p_2)'
2025-05-12 21:55:48.290 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Transaction>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Transaction.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Transaction.CategoryId (int) Required FK Index, 1], [Property: Transaction.Date (DateTime) Required, 2], [Property: Transaction.InnerCategoryId (int?) FK Index, 3], [Property: Transaction.Name (string) Required MaxLength(50), 4], [Property: Transaction.Price (decimal) Required, 5], [Property: Transaction.UserId (int) Required FK Index, 6] }
        SELECT TOP(@__p_2) t.id, t.category_fk, t.date, t.inner_category_fk, t.name, t.price, t.user_fk
        FROM transactions AS t
        WHERE (t.user_fk == @__userId_0) && (t.date < @__lastDate_Value_1)
        ORDER BY t.date DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Transaction.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Transaction.CategoryId (int) Required FK Index, 1], [Property: Transaction.Date (DateTime) Required, 2], [Property: Transaction.InnerCategoryId (int?) FK Index, 3], [Property: Transaction.Name (string) Required MaxLength(50), 4], [Property: Transaction.Price (decimal) Required, 5], [Property: Transaction.UserId (int) Required FK Index, 6] }
        SELECT TOP(@__p_2) t.id, t.category_fk, t.date, t.inner_category_fk, t.name, t.price, t.user_fk
        FROM transactions AS t
        WHERE (t.user_fk == @__userId_0) && (t.date < @__lastDate_Value_1)
        ORDER BY t.date DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Transaction entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Transaction instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Transaction);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Transaction.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Transaction").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Transaction)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Transaction | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Transaction")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Transaction | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Transaction")]: 
                        {
                            return 
                            {
                                Transaction instance;
                                instance = new Transaction();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(1);
                                instance.<Date>k__BackingField = dataReader.GetDateTime(2);
                                instance.<InnerCategoryId>k__BackingField = dataReader.IsDBNull(3) ? default(int?) : (int?)dataReader.GetInt32(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<Price>k__BackingField = dataReader.GetDecimal(5);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(6);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Transaction | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Transaction")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Transaction)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-12 21:55:48.297 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:55:48.298 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 21:55:48.300 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.302 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.305 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:55:48.306 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:55:48.307 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:55:48.309 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 21:55:48.523 +03:00 [INF] Executed DbCommand (214ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 21:55:48.527 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.528 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.530 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.531 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.533 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.534 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.536 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.538 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.539 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.541 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.543 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.545 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 19ms reading results.
2025-05-12 21:55:48.547 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.549 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:55:48.556 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 21:55:48.558 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 21:55:48.559 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 21:55:48.561 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 21:55:48.563 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 21:55:48.564 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 21:55:48.566 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 21:55:48.574 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 356.4221ms
2025-05-12 21:55:48.584 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 21:55:48.585 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" completed keep alive response.
2025-05-12 21:55:48.588 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:55:48.591 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.594 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 21:55:48.595 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T18%3A55%3A48&pageSize=10 - 200 1343 application/json; charset=utf-8 408.4722ms
2025-05-12 21:55:48.598 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 21:55:48.601 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 21:55:48.605 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 21:55:48.606 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 21:55:48.608 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 21:55:48.609 +03:00 [DBG] Successfully validated the token.
2025-05-12 21:55:48.610 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 21:55:48.611 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 21:55:48.616 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 21:55:48.618 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 21:55:48.619 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 21:55:48.621 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 21:55:48.624 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 21:55:48.625 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 21:55:48.627 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 21:55:48.630 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 21:55:48.631 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 21:55:48.632 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 21:55:48.634 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 21:55:48.636 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 21:55:48.638 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 21:55:48.640 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 21:55:48.641 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 21:55:48.643 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 21:55:48.645 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 21:55:48.646 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 21:55:48.648 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 21:55:48.649 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 21:55:48.657 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:55:48.660 +03:00 [DBG] Compiling query expression: 
'DbSet<Saving>()
    .Where(s => s.UserId == __userId_0 && s.Id > __previousSavingId_1)
    .Take(__p_2)'
2025-05-12 21:55:48.664 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-12 21:55:48.668 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Saving>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Saving.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Saving.CurrentAmount (decimal) Required ValueGenerated.OnAdd, 1], [Property: Saving.Goal (decimal) Required, 2], [Property: Saving.Name (string) Required MaxLength(50), 3], [Property: Saving.UserId (int) Required FK Index, 4] }
        SELECT TOP(@__p_2) s.id, s.current_amount, s.goal, s.name, s.user_fk
        FROM savings AS s
        WHERE (s.user_fk == @__userId_0) && (s.id > @__previousSavingId_1)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Saving.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Saving.CurrentAmount (decimal) Required ValueGenerated.OnAdd, 1], [Property: Saving.Goal (decimal) Required, 2], [Property: Saving.Name (string) Required MaxLength(50), 3], [Property: Saving.UserId (int) Required FK Index, 4] }
        SELECT TOP(@__p_2) s.id, s.current_amount, s.goal, s.name, s.user_fk
        FROM savings AS s
        WHERE (s.user_fk == @__userId_0) && (s.id > @__previousSavingId_1), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Saving entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Saving instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Saving);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Saving.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Saving").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Saving)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Saving | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Saving")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Saving | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Saving")]: 
                        {
                            return 
                            {
                                Saving instance;
                                instance = new Saving();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CurrentAmount>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Goal>k__BackingField = dataReader.GetDecimal(2);
                                instance.<Name>k__BackingField = dataReader.GetString(3);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(4);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Saving | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Saving")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Saving)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-12 21:55:48.673 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:55:48.673 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 21:55:48.674 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.676 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.677 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:55:48.678 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 21:55:48.679 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:55:48.680 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 21:55:48.703 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 21:55:48.706 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.707 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.709 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.710 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:55:48.712 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.713 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-12 21:55:48.715 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.716 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:55:48.721 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 21:55:48.725 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 21:55:48.726 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 21:55:48.728 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 21:55:48.729 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 21:55:48.729 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 21:55:48.731 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 21:55:48.735 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 107.5954ms
2025-05-12 21:55:48.736 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 21:55:48.737 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" completed keep alive response.
2025-05-12 21:55:48.738 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:55:48.739 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:55:48.741 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 21:55:48.742 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 143.7102ms
2025-05-12 21:56:00.027 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-02-23T00%3A00%3A00&pageSize=10 - null null
2025-05-12 21:56:00.030 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 21:56:00.031 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 21:56:00.033 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 21:56:00.034 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 21:56:00.036 +03:00 [DBG] Successfully validated the token.
2025-05-12 21:56:00.037 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 21:56:00.038 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 21:56:00.039 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 21:56:00.040 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 21:56:00.042 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 21:56:00.047 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 21:56:00.049 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 21:56:00.051 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 21:56:00.052 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 21:56:00.054 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 21:56:00.055 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 21:56:00.056 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 21:56:00.058 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 21:56:00.059 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 21:56:00.061 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 21:56:00.062 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 21:56:00.064 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 21:56:00.066 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 21:56:00.067 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 21:56:00.068 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 21:56:00.070 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 21:56:00.071 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 21:56:00.078 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:56:00.083 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:56:00.084 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 21:56:00.085 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:56:00.086 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:56:00.088 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:56:00.089 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:56:00.091 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:56:00.093 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 21:56:00.100 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 21:56:00.104 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:56:00.105 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:56:00.107 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:56:00.109 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:56:00.111 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:56:00.113 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:56:00.115 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:56:00.116 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:56:00.118 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:56:00.121 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:56:00.122 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 18ms reading results.
2025-05-12 21:56:00.124 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:56:00.126 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:56:00.129 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 21:56:00.132 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 21:56:00.134 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 21:56:00.136 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 21:56:00.137 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 21:56:00.138 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 21:56:00.139 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 21:56:00.141 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 89.3241ms
2025-05-12 21:56:00.146 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 21:56:00.147 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" completed keep alive response.
2025-05-12 21:56:00.149 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:56:00.150 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:56:00.152 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 21:56:00.154 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-02-23T00%3A00%3A00&pageSize=10 - 200 1206 application/json; charset=utf-8 126.8629ms
2025-05-12 21:57:06.523 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-01-04T00%3A00%3A00&pageSize=10 - null null
2025-05-12 21:57:06.525 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 21:57:06.526 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 21:57:06.527 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 21:57:06.528 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 21:57:06.529 +03:00 [DBG] Successfully validated the token.
2025-05-12 21:57:06.531 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 21:57:06.533 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 21:57:06.534 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 21:57:06.536 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 21:57:06.537 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 21:57:06.539 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 21:57:06.541 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 21:57:06.542 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 21:57:06.544 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 21:57:06.549 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 21:57:06.552 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 21:57:06.553 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 21:57:06.554 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 21:57:06.555 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 21:57:06.557 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 21:57:06.558 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 21:57:06.559 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 21:57:06.561 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 21:57:06.562 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 21:57:06.563 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 21:57:06.564 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 21:57:06.565 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 21:57:06.568 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:57:06.570 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:57:06.571 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 21:57:06.572 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:57:06.574 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:57:06.575 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:57:06.577 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:57:06.578 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:57:06.579 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 21:57:06.589 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 21:57:06.591 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:57:06.592 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 21:57:06.594 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:57:06.595 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:57:06.596 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 21:57:06.598 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 21:57:06.599 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 21:57:06.601 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 21:57:06.601 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 21:57:06.604 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 21:57:06.606 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 21:57:06.607 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 63.9258ms
2025-05-12 21:57:06.611 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 21:57:06.612 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" completed keep alive response.
2025-05-12 21:57:06.613 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:57:06.614 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:57:06.617 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 21:57:06.619 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-01-04T00%3A00%3A00&pageSize=10 - 200 2 application/json; charset=utf-8 96.4779ms
2025-05-12 21:57:16.446 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" reset.
2025-05-12 21:57:16.456 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 21:57:16.461 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" disconnecting.
2025-05-12 21:57:16.467 +03:00 [DBG] Connection id "0HNCHGQ2DS0VS" stopped.
2025-05-12 21:57:47.976 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-12 21:57:57.991 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 21:57:57.994 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0236ms - processed: 0 items - remaining: 1 items
2025-05-12 21:58:07.995 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 21:58:07.996 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.006ms - processed: 0 items - remaining: 1 items
2025-05-12 21:58:18.012 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 21:58:18.013 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-05-12 21:58:28.031 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 21:58:28.034 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-05-12 21:58:38.037 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 21:58:38.041 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0044ms - processed: 0 items - remaining: 1 items
2025-05-12 21:58:42.364 +03:00 [DBG] Connection id "0HNCHGQ2DS0VT" accepted.
2025-05-12 21:58:42.373 +03:00 [DBG] Connection id "0HNCHGQ2DS0VT" started.
2025-05-12 21:58:42.429 +03:00 [DBG] Connection 0HNCHGQ2DS0VT established using the following protocol: "Tls12"
2025-05-12 21:58:42.537 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 21:58:42.553 +03:00 [DBG] POST requests are not supported
2025-05-12 21:58:42.554 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 21:58:42.556 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 21:58:42.557 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 21:58:42.559 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 21:58:42.560 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 21:58:42.562 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 21:58:42.564 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 21:58:42.565 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 21:58:42.567 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 21:58:42.570 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 21:58:42.571 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 21:58:42.572 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 21:58:42.574 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 21:58:42.576 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 21:58:42.578 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 21:58:42.580 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 21:58:42.581 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 21:58:42.583 +03:00 [DBG] Connection id "0HNCHGQ2DS0VT", Request id "0HNCHGQ2DS0VT:00000001": started reading request body.
2025-05-12 21:58:42.584 +03:00 [DBG] Connection id "0HNCHGQ2DS0VT", Request id "0HNCHGQ2DS0VT:00000001": done reading request body.
2025-05-12 21:58:42.585 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 21:58:42.586 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 21:58:42.587 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 21:58:42.589 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 21:58:42.591 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:58:42.593 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:58:42.594 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 21:58:42.595 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.596 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.598 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:58:42.599 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:58:42.600 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:58:42.601 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 21:58:42.606 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 21:58:42.608 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:42.610 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.611 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-12 21:58:42.613 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.614 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:58:42.616 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __existingToken_UserId_0)'
2025-05-12 21:58:42.621 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__existingToken_UserId_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__existingToken_UserId_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-12 21:58:42.625 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.627 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.628 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:58:42.630 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:58:42.631 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 21:58:42.633 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 21:58:42.690 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 21:58:42.695 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:42.696 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:42.697 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.698 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-12 21:58:42.700 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.701 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:58:42.703 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 21:58:42.705 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 21:58:42.710 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:58:42.713 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:42.714 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 21:58:42.717 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.719 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.720 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:58:42.721 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:58:42.722 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:58:42.724 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 21:58:42.815 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 21:58:42.818 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.819 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 21:58:42.821 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.822 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:58:42.824 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:42.826 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 21:58:42.829 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:42.831 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:42.832 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:42.834 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 21:58:42.835 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 21:58:42.836 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 21:58:42.837 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.839 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.840 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:58:42.841 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:58:42.843 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:58:42.845 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 21:58:42.849 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 21:58:42.851 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 21:58:42.852 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.854 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 21:58:42.855 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.857 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 21:58:42.859 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:42.860 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 21:58:42.862 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 21:58:42.868 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 21:58:42.874 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 21:58:42.876 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 21:58:42.877 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 21:58:42.904 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 21:58:42.905 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 21:58:42.906 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 333.8874ms
2025-05-12 21:58:42.907 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 21:58:42.908 +03:00 [DBG] Connection id "0HNCHGQ2DS0VT" completed keep alive response.
2025-05-12 21:58:42.909 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:58:42.918 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:42.971 +03:00 [DBG] Disposed connection to database '' on server '' (53ms).
2025-05-12 21:58:42.984 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 446.3155ms
2025-05-12 21:58:45.032 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 21:58:45.057 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 21:58:45.069 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 21:58:45.070 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 21:58:45.071 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 21:58:45.072 +03:00 [DBG] Successfully validated the token.
2025-05-12 21:58:45.081 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 21:58:45.082 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 21:58:45.086 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 21:58:45.090 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 21:58:45.091 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 21:58:45.093 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 21:58:45.106 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 21:58:45.108 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 21:58:45.109 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 21:58:45.116 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 21:58:45.118 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 21:58:45.120 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 21:58:45.121 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 21:58:45.122 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 21:58:45.124 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 21:58:45.125 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 21:58:45.126 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 21:58:45.130 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 21:58:45.132 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 21:58:45.133 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 21:58:45.134 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 21:58:45.134 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 21:58:45.141 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 21:58:45.143 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 33.7992ms
2025-05-12 21:58:45.144 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 21:58:45.147 +03:00 [DBG] Connection id "0HNCHGQ2DS0VT" completed keep alive response.
2025-05-12 21:58:45.154 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 121.684ms
2025-05-12 21:58:45.169 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 21:58:45.186 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 21:58:45.187 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 21:58:45.189 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 21:58:45.191 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 21:58:45.193 +03:00 [DBG] Successfully validated the token.
2025-05-12 21:58:45.194 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 21:58:45.203 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 21:58:45.204 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 21:58:45.206 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 21:58:45.208 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 21:58:45.210 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 21:58:45.216 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 21:58:45.220 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 21:58:45.222 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 21:58:45.224 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 21:58:45.227 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:58:45.231 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:58:45.233 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 21:58:45.235 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:45.237 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:45.241 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:58:45.243 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:58:45.250 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-05-12 21:58:45.253 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 21:58:45.270 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 21:58:45.273 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:45.275 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:45.284 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:45.357 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:45.359 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:45.361 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:45.364 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 90ms reading results.
2025-05-12 21:58:45.377 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:45.383 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (6ms).
2025-05-12 21:58:45.386 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 21:58:45.389 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 21:58:45.392 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 21:58:45.394 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 21:58:45.401 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 21:58:45.413 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 21:58:45.414 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 21:58:45.415 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 193.163ms
2025-05-12 21:58:45.434 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 21:58:45.435 +03:00 [DBG] Connection id "0HNCHGQ2DS0VT" completed keep alive response.
2025-05-12 21:58:45.437 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:58:45.438 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:45.441 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-12 21:58:45.443 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 274.5663ms
2025-05-12 21:58:45.486 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T18%3A58%3A45&pageSize=10 - null null
2025-05-12 21:58:45.490 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 21:58:45.492 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 21:58:45.493 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 21:58:45.496 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 21:58:45.498 +03:00 [DBG] Successfully validated the token.
2025-05-12 21:58:45.500 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 21:58:45.503 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 21:58:45.504 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 21:58:45.506 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 21:58:45.507 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 21:58:45.508 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 21:58:45.509 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 21:58:45.511 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 21:58:45.550 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 21:58:45.557 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 21:58:45.564 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 21:58:45.566 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 21:58:45.568 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 21:58:45.571 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 21:58:45.573 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 21:58:45.576 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 21:58:45.578 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 21:58:45.582 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 21:58:45.584 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 21:58:45.964 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 21:58:45.988 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 21:58:45.990 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 21:58:45.992 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:58:45.995 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:58:45.997 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-12 21:58:45.998 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:46.000 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:46.001 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:58:46.002 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 21:58:46.004 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 21:58:46.006 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 21:58:46.011 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 21:58:46.056 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.059 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.061 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.071 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.073 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.074 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.078 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.081 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.083 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.085 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.087 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:46.088 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 32ms reading results.
2025-05-12 21:58:46.091 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:46.093 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:58:46.098 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 21:58:46.101 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 21:58:46.102 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 21:58:46.103 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 21:58:46.104 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 21:58:46.105 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 21:58:46.107 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 21:58:46.108 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 558.5032ms
2025-05-12 21:58:46.127 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 21:58:46.128 +03:00 [DBG] Connection id "0HNCHGQ2DS0VT" completed keep alive response.
2025-05-12 21:58:46.131 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:58:46.133 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:46.135 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 21:58:46.139 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T18%3A58%3A45&pageSize=10 - 200 1343 application/json; charset=utf-8 652.8008ms
2025-05-12 21:58:46.143 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 21:58:46.145 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 21:58:46.147 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 21:58:46.148 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 21:58:46.149 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 21:58:46.151 +03:00 [DBG] Successfully validated the token.
2025-05-12 21:58:46.151 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 21:58:46.152 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 21:58:46.153 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 21:58:46.155 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 21:58:46.157 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 21:58:46.159 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 21:58:46.162 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 21:58:46.165 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 21:58:46.166 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 21:58:46.167 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 21:58:46.169 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 21:58:46.171 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 21:58:46.172 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 21:58:46.173 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 21:58:46.175 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 21:58:46.177 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 21:58:46.179 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 21:58:46.181 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 21:58:46.183 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 21:58:46.184 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 21:58:46.185 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 21:58:46.187 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 21:58:46.189 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 21:58:46.191 +03:00 [DBG] Creating DbConnection.
2025-05-12 21:58:46.192 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 21:58:46.193 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:46.194 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:46.195 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 21:58:46.199 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-12 21:58:46.200 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-12 21:58:46.202 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 21:58:46.213 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 21:58:46.216 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.218 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.219 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.220 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 21:58:46.221 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:46.223 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-12 21:58:46.225 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:46.226 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 21:58:46.228 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 21:58:46.230 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 21:58:46.232 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 21:58:46.233 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 21:58:46.234 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 21:58:46.235 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 21:58:46.237 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 21:58:46.238 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 72.4845ms
2025-05-12 21:58:46.240 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 21:58:46.240 +03:00 [DBG] Connection id "0HNCHGQ2DS0VT" completed keep alive response.
2025-05-12 21:58:46.241 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 21:58:46.242 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 21:58:46.243 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 21:58:46.245 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 102.1863ms
2025-05-12 21:58:48.053 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 21:58:48.056 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.1022ms - processed: 1 items - remaining: 0 items
2025-05-12 21:59:57.221 +03:00 [DBG] Connection id "0HNCHGQ2DS0VT" received FIN.
2025-05-12 21:59:57.224 +03:00 [DBG] Connection id "0HNCHGQ2DS0VT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 21:59:57.226 +03:00 [DBG] Connection id "0HNCHGQ2DS0VT" disconnecting.
2025-05-12 21:59:57.228 +03:00 [DBG] Connection id "0HNCHGQ2DS0VT" stopped.
2025-05-12 22:00:45.118 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-12 22:00:55.143 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:00:55.150 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0044ms - processed: 0 items - remaining: 1 items
2025-05-12 22:01:05.158 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:01:05.160 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0172ms - processed: 1 items - remaining: 0 items
2025-05-12 22:01:49.446 +03:00 [DBG] Connection id "0HNCHGQ2DS0VU" accepted.
2025-05-12 22:01:49.451 +03:00 [DBG] Connection id "0HNCHGQ2DS0VU" started.
2025-05-12 22:01:49.498 +03:00 [DBG] Connection 0HNCHGQ2DS0VU established using the following protocol: "Tls12"
2025-05-12 22:01:49.597 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 22:01:49.608 +03:00 [DBG] POST requests are not supported
2025-05-12 22:01:49.609 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 22:01:49.610 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 22:01:49.612 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:01:49.613 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 22:01:49.614 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:01:49.615 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 22:01:49.618 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:01:49.620 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:01:49.621 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:01:49.624 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:01:49.625 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:01:49.627 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 22:01:49.628 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 22:01:49.630 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 22:01:49.632 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 22:01:49.635 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 22:01:49.636 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 22:01:49.637 +03:00 [DBG] Connection id "0HNCHGQ2DS0VU", Request id "0HNCHGQ2DS0VU:00000001": started reading request body.
2025-05-12 22:01:49.638 +03:00 [DBG] Connection id "0HNCHGQ2DS0VU", Request id "0HNCHGQ2DS0VU:00000001": done reading request body.
2025-05-12 22:01:49.640 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:01:49.641 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:01:49.642 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 22:01:49.643 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:01:49.646 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:01:49.651 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:01:49.652 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 22:01:49.653 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:49.655 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:49.656 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:01:49.657 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 22:01:49.658 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:01:49.659 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 22:01:49.721 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 22:01:49.849 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:49.860 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:49.868 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 19ms reading results.
2025-05-12 22:01:49.870 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:49.872 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 22:01:49.876 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:49.880 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:49.882 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:01:49.889 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-05-12 22:01:49.891 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-05-12 22:01:49.892 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 22:01:49.897 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 22:01:49.900 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:50.069 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:50.075 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.099 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 199ms reading results.
2025-05-12 22:01:50.101 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.102 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:01:50.104 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 22:01:50.105 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 22:01:50.106 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 22:01:50.108 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:50.110 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 22:01:50.113 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.114 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.116 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:01:50.117 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:01:50.118 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:01:50.120 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 22:01:50.188 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 22:01:50.332 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.347 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 15ms reading results.
2025-05-12 22:01:50.351 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.353 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:01:50.365 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:50.370 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 22:01:50.373 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:50.385 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:50.386 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:50.388 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 22:01:50.389 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 22:01:50.390 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 22:01:50.392 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.396 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.399 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:01:50.403 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-12 22:01:50.405 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-12 22:01:50.406 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 22:01:50.434 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 22:01:50.453 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 22:01:50.458 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.464 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 10ms reading results.
2025-05-12 22:01:50.469 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.471 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 22:01:50.473 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:50.476 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 22:01:50.477 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:01:50.480 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:01:50.483 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:01:50.484 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:01:50.485 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:01:50.486 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:01:50.488 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 22:01:50.490 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 863.0567ms
2025-05-12 22:01:50.492 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:01:50.493 +03:00 [DBG] Connection id "0HNCHGQ2DS0VU" completed keep alive response.
2025-05-12 22:01:50.498 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:01:50.502 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.506 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-12 22:01:50.509 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 911.2165ms
2025-05-12 22:01:50.779 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 22:01:50.818 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:01:50.820 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 22:01:50.822 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 22:01:50.824 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:01:50.826 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:01:50.853 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:01:50.856 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:01:50.863 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 22:01:50.866 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:01:50.867 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:01:50.869 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:01:50.871 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:01:50.872 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:01:50.874 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 22:01:50.876 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 22:01:50.877 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 22:01:50.878 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 22:01:50.880 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 22:01:50.882 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 22:01:50.883 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 22:01:50.885 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 22:01:50.886 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:01:50.888 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:01:50.889 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:01:50.890 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:01:50.891 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:01:50.892 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:01:50.893 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 22:01:50.895 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 20.6799ms
2025-05-12 22:01:50.898 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:01:50.899 +03:00 [DBG] Connection id "0HNCHGQ2DS0VU" completed keep alive response.
2025-05-12 22:01:50.900 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 121.385ms
2025-05-12 22:01:50.936 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 22:01:50.939 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:01:50.940 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 22:01:50.941 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 22:01:50.942 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:01:50.944 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:01:50.944 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:01:50.947 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:01:50.948 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 22:01:50.951 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:01:50.952 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:01:50.954 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:01:50.956 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:01:50.957 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:01:50.958 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 22:01:50.960 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 22:01:50.962 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:01:50.966 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:01:50.967 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 22:01:50.968 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.969 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.971 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:01:50.972 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:01:50.973 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:01:50.974 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 22:01:50.978 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 22:01:50.983 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:50.984 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:50.986 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:50.987 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:50.989 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:50.991 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.993 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-12 22:01:50.994 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:50.999 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (4ms).
2025-05-12 22:01:51.001 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:01:51.003 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:01:51.004 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:01:51.006 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:01:51.006 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:01:51.007 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:01:51.008 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:01:51.010 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 51.5888ms
2025-05-12 22:01:51.035 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:01:51.038 +03:00 [DBG] Connection id "0HNCHGQ2DS0VU" completed keep alive response.
2025-05-12 22:01:51.039 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:01:51.040 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:51.041 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:01:51.043 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 106.7552ms
2025-05-12 22:01:51.058 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T19%3A01%3A51&pageSize=10 - null null
2025-05-12 22:01:51.063 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:01:51.064 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 22:01:51.104 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 22:01:51.106 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:01:51.108 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:01:51.109 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:01:51.110 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:01:51.111 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 22:01:51.114 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:01:51.116 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:01:51.117 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:01:51.119 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:01:51.121 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:01:51.122 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:01:51.124 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:01:51.125 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:01:51.126 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 22:01:51.128 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:01:51.131 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:01:51.132 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 22:01:51.134 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 22:01:51.135 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:01:51.136 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:01:51.137 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:01:51.139 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:01:51.140 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:01:51.141 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:01:51.143 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:01:51.145 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:01:51.147 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 22:01:51.151 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:51.153 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:51.154 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:01:51.155 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 22:01:51.156 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:01:51.157 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:01:51.164 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:01:51.166 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.168 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.172 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.174 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.175 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.177 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.179 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.181 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.182 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.184 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.185 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:51.187 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 20ms reading results.
2025-05-12 22:01:51.188 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:51.195 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (6ms).
2025-05-12 22:01:51.197 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:01:51.199 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:01:51.201 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:01:51.202 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:01:51.203 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:01:51.204 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:01:51.205 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:01:51.207 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 84.5222ms
2025-05-12 22:01:51.208 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:01:51.209 +03:00 [DBG] Connection id "0HNCHGQ2DS0VU" completed keep alive response.
2025-05-12 22:01:51.210 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:01:51.211 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:51.214 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 22:01:51.217 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T19%3A01%3A51&pageSize=10 - 200 1343 application/json; charset=utf-8 159.5521ms
2025-05-12 22:01:51.231 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 22:01:51.241 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:01:51.243 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 22:01:51.245 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 22:01:51.250 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:01:51.252 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:01:51.253 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:01:51.254 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:01:51.256 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 22:01:51.259 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:01:51.264 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:01:51.269 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:01:51.272 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:01:51.274 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:01:51.277 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 22:01:51.284 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 22:01:51.286 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 22:01:51.288 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 22:01:51.290 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:01:51.292 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:01:51.298 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 22:01:51.301 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 22:01:51.303 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:01:51.305 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:01:51.307 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:01:51.309 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:01:51.314 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 22:01:51.317 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:01:51.321 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:01:51.327 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:01:51.328 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 22:01:51.332 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:51.335 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:51.339 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:01:51.340 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:01:51.349 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-05-12 22:01:51.352 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 22:01:51.358 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 22:01:51.361 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.363 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.365 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.367 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:01:51.368 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:51.371 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 10ms reading results.
2025-05-12 22:01:51.374 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:51.375 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:01:51.377 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:01:51.380 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:01:51.382 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:01:51.383 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:01:51.384 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:01:51.385 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:01:51.386 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:01:51.388 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 111.0619ms
2025-05-12 22:01:51.389 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:01:51.392 +03:00 [DBG] Connection id "0HNCHGQ2DS0VU" completed keep alive response.
2025-05-12 22:01:51.394 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:01:51.394 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:01:51.397 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 22:01:51.399 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 168.2828ms
2025-05-12 22:03:04.382 +03:00 [DBG] Connection id "0HNCHGQ2DS0VU" received FIN.
2025-05-12 22:03:04.385 +03:00 [DBG] Connection id "0HNCHGQ2DS0VU" disconnecting.
2025-05-12 22:03:04.386 +03:00 [DBG] Connection id "0HNCHGQ2DS0VU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 22:03:04.403 +03:00 [DBG] Connection id "0HNCHGQ2DS0VU" stopped.
2025-05-12 22:03:50.880 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-12 22:03:54.052 +03:00 [DBG] Connection id "0HNCHGQ2DS0VV" accepted.
2025-05-12 22:03:54.055 +03:00 [DBG] Connection id "0HNCHGQ2DS0VV" started.
2025-05-12 22:03:54.058 +03:00 [DBG] Connection 0HNCHGQ2DS0VV established using the following protocol: "Tls12"
2025-05-12 22:03:54.059 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-02-23T00%3A00%3A00&pageSize=10 - null null
2025-05-12 22:03:54.063 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:03:54.064 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 22:03:54.066 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 22:03:54.067 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:03:54.069 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:03:54.070 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:03:54.071 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:03:54.074 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 22:03:54.076 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:03:54.077 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:03:54.078 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:03:54.080 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:03:54.082 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:03:54.083 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:03:54.084 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:03:54.086 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:03:54.087 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 22:03:54.091 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:03:54.093 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:03:54.095 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 22:03:54.098 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 22:03:54.099 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:03:54.101 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:03:54.102 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:03:54.104 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:03:54.105 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:03:54.106 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:03:54.109 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:03:54.111 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:03:54.112 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 22:03:54.113 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:03:54.114 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:03:54.115 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:03:54.116 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 22:03:54.117 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:03:54.118 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:03:54.124 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:03:54.126 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:03:54.128 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:03:54.129 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:03:54.131 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:03:54.133 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:03:54.134 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:03:54.135 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:03:54.137 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:03:54.138 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:03:54.139 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:03:54.141 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 14ms reading results.
2025-05-12 22:03:54.142 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:03:54.144 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:03:54.145 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:03:54.148 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:03:54.149 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:03:54.151 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:03:54.152 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:03:54.152 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:03:54.154 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:03:54.155 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 72.305ms
2025-05-12 22:03:54.157 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:03:54.157 +03:00 [DBG] Connection id "0HNCHGQ2DS0VV" completed keep alive response.
2025-05-12 22:03:54.158 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:03:54.159 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:03:54.160 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:03:54.165 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-02-23T00%3A00%3A00&pageSize=10 - 200 1206 application/json; charset=utf-8 105.139ms
2025-05-12 22:03:59.786 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-01-04T00%3A00%3A00&pageSize=10 - null null
2025-05-12 22:03:59.802 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:03:59.804 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 22:03:59.805 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 22:03:59.806 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:03:59.808 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:03:59.809 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:03:59.820 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:03:59.821 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 22:03:59.824 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:03:59.831 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:03:59.835 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:03:59.839 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:03:59.841 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:03:59.844 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:03:59.846 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:03:59.848 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:03:59.852 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 22:03:59.858 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:03:59.861 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:03:59.862 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 22:03:59.865 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 22:03:59.868 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:03:59.871 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:03:59.873 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:03:59.875 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:03:59.877 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:03:59.878 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:03:59.882 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:03:59.888 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:03:59.888 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 22:03:59.890 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:03:59.891 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:03:59.893 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:03:59.894 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:03:59.896 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:03:59.897 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:03:59.903 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:03:59.905 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:03:59.907 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 22:03:59.909 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:03:59.910 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:03:59.913 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:03:59.915 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:03:59.917 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:03:59.918 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:03:59.919 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:03:59.920 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:03:59.921 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:03:59.923 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 79.213ms
2025-05-12 22:03:59.925 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:03:59.926 +03:00 [DBG] Connection id "0HNCHGQ2DS0VV" completed keep alive response.
2025-05-12 22:03:59.928 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:03:59.930 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:03:59.931 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:03:59.933 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-01-04T00%3A00%3A00&pageSize=10 - 200 2 application/json; charset=utf-8 146.8873ms
2025-05-12 22:04:00.886 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:04:00.888 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0741ms - processed: 1 items - remaining: 0 items
2025-05-12 22:04:26.208 +03:00 [DBG] Connection id "0HNCHGQ2DS0VV" reset.
2025-05-12 22:04:26.212 +03:00 [DBG] Connection id "0HNCHGQ2DS0VV" disconnecting.
2025-05-12 22:04:26.213 +03:00 [DBG] Connection id "0HNCHGQ2DS0VV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 22:04:26.215 +03:00 [DBG] Connection id "0HNCHGQ2DS0VV" stopped.
2025-05-12 22:04:40.965 +03:00 [DBG] Connection id "0HNCHGQ2DS100" accepted.
2025-05-12 22:04:41.063 +03:00 [DBG] Connection id "0HNCHGQ2DS100" started.
2025-05-12 22:04:41.129 +03:00 [DBG] Connection 0HNCHGQ2DS100 established using the following protocol: "Tls12"
2025-05-12 22:04:41.211 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 22:04:41.220 +03:00 [DBG] POST requests are not supported
2025-05-12 22:04:41.221 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 22:04:41.222 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 22:04:41.224 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:04:41.326 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 22:04:41.328 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:04:41.330 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 22:04:41.336 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:04:41.338 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:04:41.341 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:04:41.344 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:04:41.347 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:04:41.353 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 22:04:41.360 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 22:04:41.362 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 22:04:41.367 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 22:04:41.370 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 22:04:41.373 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 22:04:41.381 +03:00 [DBG] Connection id "0HNCHGQ2DS100", Request id "0HNCHGQ2DS100:00000001": started reading request body.
2025-05-12 22:04:41.385 +03:00 [DBG] Connection id "0HNCHGQ2DS100", Request id "0HNCHGQ2DS100:00000001": done reading request body.
2025-05-12 22:04:41.387 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:04:41.391 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:04:41.394 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 22:04:41.420 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:04:41.424 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:04:41.426 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:04:41.427 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 22:04:41.428 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.430 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.431 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:04:41.432 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:04:41.435 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 22:04:41.436 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 22:04:41.441 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 22:04:41.443 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:41.445 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.446 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 22:04:41.447 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.448 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:04:41.451 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.453 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.454 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:04:41.455 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 22:04:41.456 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:04:41.457 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 22:04:41.461 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 22:04:41.463 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:41.465 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:41.468 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.469 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-12 22:04:41.471 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.473 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:04:41.474 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 22:04:41.476 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 22:04:41.477 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 22:04:41.478 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:41.480 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 22:04:41.482 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.484 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.486 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:04:41.487 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:04:41.488 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:04:41.489 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 22:04:41.531 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 22:04:41.535 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.537 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 22:04:41.538 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.540 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:04:41.542 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:41.543 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 22:04:41.545 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:41.547 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:41.548 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:41.553 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 22:04:41.555 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 22:04:41.556 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 22:04:41.558 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.560 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.562 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:04:41.562 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 22:04:41.564 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:04:41.565 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 22:04:41.577 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 22:04:41.579 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 22:04:41.580 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.581 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 22:04:41.583 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.614 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (30ms).
2025-05-12 22:04:41.629 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:41.668 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 22:04:41.669 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:04:41.671 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:04:41.672 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:04:41.673 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:04:41.674 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:04:41.675 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:04:41.676 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 22:04:41.677 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 323.9122ms
2025-05-12 22:04:41.678 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:04:41.679 +03:00 [DBG] Connection id "0HNCHGQ2DS100" completed keep alive response.
2025-05-12 22:04:41.680 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:04:41.680 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:41.682 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:04:41.685 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 473.8934ms
2025-05-12 22:04:42.810 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 22:04:42.825 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:04:43.023 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 22:04:43.024 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 22:04:43.026 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:04:43.029 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:04:43.031 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:04:43.032 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:04:43.033 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 22:04:43.046 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:04:43.049 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:04:43.052 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:04:43.055 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:04:43.056 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:04:43.058 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 22:04:43.059 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 22:04:43.062 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 22:04:43.065 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 22:04:43.066 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 22:04:43.079 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 22:04:43.081 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 22:04:43.083 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 22:04:43.094 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:04:43.193 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:04:43.195 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:04:43.197 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:04:43.204 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:04:43.205 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:04:43.206 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 22:04:43.208 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 150.9402ms
2025-05-12 22:04:43.239 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:04:43.240 +03:00 [DBG] Connection id "0HNCHGQ2DS100" completed keep alive response.
2025-05-12 22:04:43.243 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 432.407ms
2025-05-12 22:04:43.254 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 22:04:43.259 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:04:43.267 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 22:04:43.271 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 22:04:43.274 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:04:43.286 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:04:43.287 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:04:43.288 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:04:43.289 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 22:04:43.294 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:04:43.297 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:04:43.298 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:04:43.305 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:04:43.311 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:04:43.313 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 22:04:43.315 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 22:04:43.317 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:04:43.321 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:04:43.323 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 22:04:43.324 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.326 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.327 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:04:43.328 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:04:43.330 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 22:04:43.333 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 22:04:43.339 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 22:04:43.342 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.343 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.345 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.346 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.348 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.350 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.353 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 10ms reading results.
2025-05-12 22:04:43.355 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.356 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:04:43.358 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:04:43.360 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:04:43.362 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:04:43.364 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:04:43.365 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:04:43.365 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:04:43.367 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:04:43.372 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 58.9843ms
2025-05-12 22:04:43.401 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:04:43.404 +03:00 [DBG] Connection id "0HNCHGQ2DS100" completed keep alive response.
2025-05-12 22:04:43.407 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:04:43.408 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.409 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:04:43.410 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 156.0355ms
2025-05-12 22:04:43.430 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T19%3A04%3A43&pageSize=10 - null null
2025-05-12 22:04:43.433 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:04:43.435 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 22:04:43.437 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 22:04:43.439 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:04:43.440 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:04:43.441 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:04:43.443 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:04:43.445 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 22:04:43.449 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:04:43.451 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:04:43.453 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:04:43.455 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:04:43.457 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:04:43.459 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:04:43.460 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:04:43.462 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:04:43.463 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 22:04:43.465 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:04:43.467 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:04:43.470 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 22:04:43.472 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 22:04:43.473 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:04:43.475 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:04:43.476 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:04:43.478 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:04:43.479 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:04:43.481 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:04:43.483 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:04:43.485 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:04:43.486 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 22:04:43.487 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.489 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.490 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:04:43.491 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:04:43.492 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:04:43.494 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:04:43.500 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:04:43.504 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.506 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.507 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.508 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.510 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.512 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.514 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.515 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.516 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.520 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.521 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.522 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 18ms reading results.
2025-05-12 22:04:43.524 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.525 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:04:43.527 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:04:43.530 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:04:43.531 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:04:43.533 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:04:43.534 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:04:43.535 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:04:43.536 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:04:43.538 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 79.057ms
2025-05-12 22:04:43.539 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:04:43.540 +03:00 [DBG] Connection id "0HNCHGQ2DS100" completed keep alive response.
2025-05-12 22:04:43.541 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:04:43.547 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.549 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 22:04:43.558 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T19%3A04%3A43&pageSize=10 - 200 1343 application/json; charset=utf-8 127.5256ms
2025-05-12 22:04:43.571 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 22:04:43.583 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:04:43.585 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 22:04:43.590 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 22:04:43.630 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:04:43.632 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:04:43.634 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:04:43.639 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:04:43.641 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 22:04:43.644 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:04:43.647 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:04:43.650 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:04:43.656 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:04:43.661 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:04:43.663 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 22:04:43.665 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 22:04:43.668 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 22:04:43.673 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 22:04:43.674 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:04:43.676 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:04:43.709 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 22:04:43.713 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 22:04:43.714 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:04:43.741 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:04:43.743 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:04:43.744 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:04:43.745 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 22:04:43.746 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:04:43.750 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:04:43.757 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:04:43.760 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-12 22:04:43.761 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.763 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.764 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:04:43.765 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:04:43.767 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:04:43.769 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 22:04:43.777 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 22:04:43.782 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.784 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.786 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.788 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:04:43.790 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.792 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-12 22:04:43.793 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:43.795 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:04:43.804 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:04:43.807 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:04:43.815 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:04:43.817 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:04:43.834 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:04:43.837 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:04:43.839 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:04:43.845 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 182.1807ms
2025-05-12 22:04:43.881 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:04:43.886 +03:00 [DBG] Connection id "0HNCHGQ2DS100" completed keep alive response.
2025-05-12 22:04:43.894 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:04:43.895 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:04:44.154 +03:00 [DBG] Disposed connection to database '' on server '' (259ms).
2025-05-12 22:04:44.163 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 591.4746ms
2025-05-12 22:05:54.082 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-12 22:05:55.871 +03:00 [DBG] Connection id "0HNCHGQ2DS100" received FIN.
2025-05-12 22:05:55.880 +03:00 [DBG] Connection id "0HNCHGQ2DS100" disconnecting.
2025-05-12 22:05:55.883 +03:00 [DBG] Connection id "0HNCHGQ2DS100" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 22:05:55.889 +03:00 [DBG] Connection id "0HNCHGQ2DS100" stopped.
2025-05-12 22:06:04.096 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:06:04.101 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0092ms - processed: 1 items - remaining: 0 items
2025-05-12 22:10:27.667 +03:00 [DBG] Connection id "0HNCHGQ2DS101" accepted.
2025-05-12 22:10:27.694 +03:00 [DBG] Connection id "0HNCHGQ2DS101" started.
2025-05-12 22:10:27.748 +03:00 [DBG] Connection 0HNCHGQ2DS101 established using the following protocol: "Tls12"
2025-05-12 22:10:27.845 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 22:10:28.290 +03:00 [DBG] POST requests are not supported
2025-05-12 22:10:28.299 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 22:10:28.300 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 22:10:28.301 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:10:28.302 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 22:10:28.304 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:10:28.305 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 22:10:28.309 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:10:28.317 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:10:28.319 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:10:28.325 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:10:28.326 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:10:28.328 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 22:10:28.404 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 22:10:28.406 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 22:10:28.407 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 22:10:28.408 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 22:10:28.410 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 22:10:28.414 +03:00 [DBG] Connection id "0HNCHGQ2DS101", Request id "0HNCHGQ2DS101:00000001": started reading request body.
2025-05-12 22:10:28.417 +03:00 [DBG] Connection id "0HNCHGQ2DS101", Request id "0HNCHGQ2DS101:00000001": done reading request body.
2025-05-12 22:10:28.419 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:10:28.421 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:10:28.423 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 22:10:28.424 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:10:28.427 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:10:28.449 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:10:28.455 +03:00 [DBG] Created DbConnection. (5ms).
2025-05-12 22:10:28.456 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.513 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.527 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:10:28.529 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:10:28.533 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-12 22:10:28.534 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 22:10:28.543 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 22:10:28.548 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:28.550 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.554 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-12 22:10:28.556 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.558 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 22:10:28.561 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.566 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.568 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:10:28.569 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:10:28.570 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:10:28.572 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 22:10:28.577 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 22:10:28.582 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:28.584 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:28.585 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.587 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-12 22:10:28.589 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.590 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:10:28.593 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 22:10:28.594 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 22:10:28.599 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 22:10:28.601 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:28.605 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 22:10:28.606 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.608 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.610 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:10:28.612 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:10:28.618 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-05-12 22:10:28.622 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 22:10:28.652 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 22:10:28.658 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.660 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 22:10:28.666 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.668 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 22:10:28.671 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:28.675 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 22:10:28.678 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:28.681 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:28.682 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:28.684 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 22:10:28.685 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 22:10:28.686 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 22:10:28.687 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.689 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.690 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:10:28.691 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:10:28.693 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 22:10:28.695 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 22:10:28.712 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 22:10:28.714 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 22:10:28.716 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.717 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 22:10:28.718 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.720 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:10:28.721 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:28.724 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 22:10:28.725 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:10:28.727 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:10:28.729 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:10:28.730 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:10:28.730 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:10:28.731 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:10:28.733 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 22:10:28.734 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 406.0165ms
2025-05-12 22:10:28.736 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:10:28.737 +03:00 [DBG] Connection id "0HNCHGQ2DS101" completed keep alive response.
2025-05-12 22:10:28.741 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:10:28.742 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:28.743 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:10:28.745 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 900.6133ms
2025-05-12 22:10:28.934 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 22:10:28.956 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:10:28.957 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 22:10:28.959 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 22:10:28.960 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:10:28.961 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:10:28.962 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:10:28.964 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:10:28.966 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 22:10:28.967 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:10:28.969 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:10:28.971 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:10:28.973 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:10:28.975 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:10:28.976 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 22:10:28.978 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 22:10:28.979 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 22:10:28.980 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 22:10:28.982 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 22:10:28.983 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 22:10:28.984 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 22:10:28.985 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 22:10:28.986 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:10:28.988 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:10:28.989 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:10:28.991 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:10:28.992 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:10:28.993 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:10:28.994 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 22:10:28.995 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 19.0977ms
2025-05-12 22:10:28.997 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:10:28.998 +03:00 [DBG] Connection id "0HNCHGQ2DS101" completed keep alive response.
2025-05-12 22:10:29.000 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 65.5992ms
2025-05-12 22:10:29.016 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 22:10:29.037 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:10:29.039 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 22:10:29.041 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 22:10:29.045 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:10:29.049 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:10:29.050 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:10:29.058 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:10:29.060 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 22:10:29.066 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:10:29.072 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:10:29.075 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:10:29.079 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:10:29.090 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:10:29.094 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 22:10:29.096 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 22:10:29.109 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:10:29.117 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:10:29.121 +03:00 [DBG] Created DbConnection. (3ms).
2025-05-12 22:10:29.124 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:29.126 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:29.135 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:10:29.137 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:10:29.139 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-12 22:10:29.144 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 22:10:29.166 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 22:10:29.173 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.185 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.186 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.187 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.188 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.189 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:29.192 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 19ms reading results.
2025-05-12 22:10:29.194 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:29.195 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:10:29.197 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:10:29.201 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:10:29.202 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:10:29.204 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:10:29.204 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:10:29.206 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:10:29.207 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:10:29.208 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 114.9123ms
2025-05-12 22:10:29.216 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:10:29.217 +03:00 [DBG] Connection id "0HNCHGQ2DS101" completed keep alive response.
2025-05-12 22:10:29.218 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:10:29.219 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:29.223 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-12 22:10:29.225 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 208.5833ms
2025-05-12 22:10:29.251 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T19%3A10%3A29&pageSize=10 - null null
2025-05-12 22:10:29.254 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:10:29.255 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 22:10:29.256 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 22:10:29.258 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:10:29.259 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:10:29.260 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:10:29.261 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:10:29.263 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 22:10:29.271 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:10:29.275 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:10:29.277 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:10:29.285 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:10:29.287 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:10:29.292 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:10:29.295 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:10:29.301 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:10:29.304 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 22:10:29.306 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:10:29.309 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:10:29.315 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 22:10:29.317 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 22:10:29.319 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:10:29.324 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:10:29.326 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:10:29.333 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:10:29.335 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:10:29.338 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:10:29.343 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:10:29.351 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:10:29.353 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 22:10:29.355 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:29.358 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:29.428 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:10:29.429 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 22:10:29.430 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:10:29.433 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:10:29.441 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:10:29.446 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.450 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.451 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.452 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.457 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.458 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.460 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.461 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.463 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.470 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.471 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:29.473 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 26ms reading results.
2025-05-12 22:10:29.474 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:29.476 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:10:29.477 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:10:29.479 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:10:29.484 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:10:29.486 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:10:29.486 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:10:29.487 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:10:29.488 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:10:29.489 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 197.237ms
2025-05-12 22:10:29.494 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:10:29.495 +03:00 [DBG] Connection id "0HNCHGQ2DS101" completed keep alive response.
2025-05-12 22:10:29.501 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:10:29.504 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:29.505 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:10:29.506 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T19%3A10%3A29&pageSize=10 - 200 1343 application/json; charset=utf-8 255.5119ms
2025-05-12 22:10:29.530 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 22:10:29.763 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:10:29.764 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 22:10:29.772 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 22:10:29.779 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:10:29.780 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:10:29.785 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:10:29.786 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:10:29.796 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 22:10:29.807 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:10:29.821 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:10:29.822 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:10:29.857 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:10:29.875 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:10:29.889 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 22:10:29.895 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 22:10:29.906 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 22:10:29.911 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 22:10:29.929 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:10:29.934 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:10:29.940 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 22:10:29.944 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 22:10:29.945 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:10:29.949 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:10:29.953 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:10:29.954 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:10:29.955 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 22:10:29.957 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:10:29.959 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:10:29.961 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:10:29.962 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 22:10:29.963 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:29.967 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:29.969 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:10:29.970 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:10:29.971 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:10:29.973 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 22:10:29.978 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 22:10:29.985 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.987 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.988 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.993 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:10:29.995 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:29.997 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 11ms reading results.
2025-05-12 22:10:30.002 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:30.004 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 22:10:30.006 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:10:30.008 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:10:30.010 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:10:30.011 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:10:30.012 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:10:30.013 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:10:30.026 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:10:30.029 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 140.9167ms
2025-05-12 22:10:30.091 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:10:30.094 +03:00 [DBG] Connection id "0HNCHGQ2DS101" completed keep alive response.
2025-05-12 22:10:30.100 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:10:30.102 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:10:30.105 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-12 22:10:30.109 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 579.2161ms
2025-05-12 22:11:42.616 +03:00 [DBG] Connection id "0HNCHGQ2DS101" received FIN.
2025-05-12 22:11:42.619 +03:00 [DBG] Connection id "0HNCHGQ2DS101" disconnecting.
2025-05-12 22:11:42.620 +03:00 [DBG] Connection id "0HNCHGQ2DS101" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 22:11:42.632 +03:00 [DBG] Connection id "0HNCHGQ2DS101" stopped.
2025-05-12 22:12:28.993 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-12 22:12:38.998 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:12:39.003 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0088ms - processed: 1 items - remaining: 0 items
2025-05-12 22:24:55.616 +03:00 [DBG] Connection id "0HNCHGQ2DS102" accepted.
2025-05-12 22:24:55.617 +03:00 [DBG] Connection id "0HNCHGQ2DS102" started.
2025-05-12 22:24:55.627 +03:00 [DBG] Connection 0HNCHGQ2DS102 established using the following protocol: "Tls12"
2025-05-12 22:24:55.718 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 22:24:55.869 +03:00 [DBG] POST requests are not supported
2025-05-12 22:24:55.878 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 22:24:55.901 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 22:24:55.904 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:24:55.916 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 22:24:55.962 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:24:55.975 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 22:24:56.060 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:24:56.096 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:24:56.100 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:24:56.105 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:24:56.108 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:24:56.278 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 22:24:56.286 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 22:24:56.288 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 22:24:56.291 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 22:24:56.293 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 22:24:56.294 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 22:24:56.295 +03:00 [DBG] Connection id "0HNCHGQ2DS102", Request id "0HNCHGQ2DS102:00000001": started reading request body.
2025-05-12 22:24:56.300 +03:00 [DBG] Connection id "0HNCHGQ2DS102", Request id "0HNCHGQ2DS102:00000001": done reading request body.
2025-05-12 22:24:56.301 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:24:56.303 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:24:56.305 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 22:24:56.306 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:24:56.309 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:24:56.317 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:24:56.318 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 22:24:56.319 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.372 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.374 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:24:56.377 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:24:56.378 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 22:24:56.379 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 22:24:56.387 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 22:24:56.389 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:56.391 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.393 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-12 22:24:56.398 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.400 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:24:56.401 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.403 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.404 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:24:56.406 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:24:56.408 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 22:24:56.409 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 22:24:56.415 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 22:24:56.418 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:56.419 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:56.421 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.450 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 31ms reading results.
2025-05-12 22:24:56.473 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.475 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 22:24:56.477 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 22:24:56.482 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 22:24:56.486 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 22:24:56.488 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:56.489 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 22:24:56.491 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.496 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.509 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:24:56.511 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:24:56.532 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (22ms).
2025-05-12 22:24:56.534 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 22:24:56.708 +03:00 [INF] Executed DbCommand (174ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 22:24:56.710 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.711 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 22:24:56.713 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.715 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 22:24:56.717 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:56.849 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 22:24:56.851 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:56.852 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:56.853 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:56.855 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 22:24:56.856 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 22:24:56.857 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 22:24:56.858 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.860 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.861 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:24:56.862 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:24:56.863 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:24:56.865 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 22:24:56.930 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 22:24:56.933 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 22:24:56.934 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.936 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 22:24:56.937 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.941 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (4ms).
2025-05-12 22:24:56.944 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:56.946 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 22:24:56.947 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:24:56.949 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:24:56.951 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:24:56.952 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:24:56.953 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:24:56.954 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:24:56.955 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 22:24:56.957 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 679.1328ms
2025-05-12 22:24:56.963 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:24:56.965 +03:00 [DBG] Connection id "0HNCHGQ2DS102" completed keep alive response.
2025-05-12 22:24:56.967 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:24:56.968 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:56.969 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:24:56.971 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 1252.2641ms
2025-05-12 22:24:57.444 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 22:24:57.508 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:24:57.511 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 22:24:57.514 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 22:24:57.578 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:24:57.584 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:24:57.587 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:24:57.590 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:24:57.593 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 22:24:57.670 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:24:57.672 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:24:57.676 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:24:57.679 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:24:57.684 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:24:57.685 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 22:24:57.687 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 22:24:57.690 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 22:24:57.696 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 22:24:57.699 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 22:24:57.701 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 22:24:57.702 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 22:24:57.705 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 22:24:57.706 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:24:57.708 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:24:57.709 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:24:57.711 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:24:57.711 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:24:57.712 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:24:57.714 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 22:24:57.716 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 30.9999ms
2025-05-12 22:24:57.719 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:24:57.725 +03:00 [DBG] Connection id "0HNCHGQ2DS102" completed keep alive response.
2025-05-12 22:24:57.726 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 281.7214ms
2025-05-12 22:24:57.741 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 22:24:57.751 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:24:57.754 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 22:24:57.755 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 22:24:57.758 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:24:57.760 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:24:57.761 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:24:57.764 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:24:57.821 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 22:24:57.824 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:24:57.826 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:24:57.828 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:24:57.838 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:24:57.841 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:24:57.844 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 22:24:57.849 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 22:24:57.853 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:24:57.856 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:24:57.858 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 22:24:57.860 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:57.866 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:57.869 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:24:57.871 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:24:57.873 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-12 22:24:57.878 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 22:24:57.887 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 22:24:57.892 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:57.896 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:57.897 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:57.900 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:57.902 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:57.903 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:57.904 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 12ms reading results.
2025-05-12 22:24:57.906 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:57.908 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 22:24:57.910 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:24:57.912 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:24:57.913 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:24:57.916 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:24:57.917 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:24:57.918 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:24:57.919 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:24:57.921 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 76.8725ms
2025-05-12 22:24:57.923 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:24:57.925 +03:00 [DBG] Connection id "0HNCHGQ2DS102" completed keep alive response.
2025-05-12 22:24:57.926 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:24:57.927 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:57.928 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:24:57.930 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 188.433ms
2025-05-12 22:24:57.963 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T19%3A24%3A57&pageSize=10 - null null
2025-05-12 22:24:57.967 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:24:57.968 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 22:24:57.969 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 22:24:57.970 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:24:57.972 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:24:57.973 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:24:57.974 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:24:57.975 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 22:24:57.977 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:24:57.979 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:24:57.981 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:24:57.984 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:24:57.986 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:24:57.989 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:24:57.991 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:24:57.993 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:24:57.997 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 22:24:58.002 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:24:58.005 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:24:58.008 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 22:24:58.010 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 22:24:58.012 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:24:58.019 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:24:58.022 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:24:58.025 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:24:58.027 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:24:58.029 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:24:58.032 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:24:58.037 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:24:58.038 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 22:24:58.040 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:58.043 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:58.051 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:24:58.052 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:24:58.054 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 22:24:58.057 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:24:58.068 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:24:58.072 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.074 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.076 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.078 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.097 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.101 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.103 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.106 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.108 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.110 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.114 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:58.118 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 45ms reading results.
2025-05-12 22:24:58.120 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:58.122 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:24:58.125 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:24:58.150 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:24:58.151 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:24:58.153 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:24:58.153 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:24:58.154 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:24:58.156 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:24:58.157 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 167.9767ms
2025-05-12 22:24:58.197 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:24:58.200 +03:00 [DBG] Connection id "0HNCHGQ2DS102" completed keep alive response.
2025-05-12 22:24:58.201 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:24:58.202 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:58.203 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:24:58.210 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T19%3A24%3A57&pageSize=10 - 200 1343 application/json; charset=utf-8 247.2152ms
2025-05-12 22:24:58.286 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 22:24:58.289 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:24:58.307 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 22:24:58.308 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 22:24:58.310 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:24:58.311 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:24:58.328 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:24:58.329 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:24:58.340 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 22:24:58.348 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:24:58.351 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:24:58.354 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:24:58.356 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:24:58.358 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:24:58.359 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 22:24:58.368 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 22:24:58.369 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 22:24:58.371 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 22:24:58.373 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:24:58.376 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:24:58.379 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 22:24:58.381 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 22:24:58.385 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:24:58.387 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:24:58.389 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:24:58.391 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:24:58.393 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 22:24:58.397 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:24:58.405 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:24:58.408 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:24:58.412 +03:00 [DBG] Created DbConnection. (4ms).
2025-05-12 22:24:58.413 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:58.416 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:58.417 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:24:58.418 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 22:24:58.419 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:24:58.421 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 22:24:58.426 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 22:24:58.429 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.430 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.434 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.435 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:24:58.436 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:58.438 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-12 22:24:58.439 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:58.440 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:24:58.448 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:24:58.451 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:24:58.452 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:24:58.454 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:24:58.455 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:24:58.456 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:24:58.457 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:24:58.459 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 99.9544ms
2025-05-12 22:24:58.461 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:24:58.462 +03:00 [DBG] Connection id "0HNCHGQ2DS102" completed keep alive response.
2025-05-12 22:24:58.464 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:24:58.469 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:24:58.470 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:24:58.471 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 185.8525ms
2025-05-12 22:25:12.887 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-02-23T00%3A00%3A00&pageSize=10 - null null
2025-05-12 22:25:12.892 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:25:12.894 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 22:25:12.896 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 22:25:12.899 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:25:12.902 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:25:12.909 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:25:12.912 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:25:12.914 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 22:25:12.920 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:25:12.924 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:25:12.928 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:25:12.932 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:25:12.936 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:25:12.939 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:25:12.943 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:25:12.946 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:25:12.950 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 22:25:12.951 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:25:12.955 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:25:12.957 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 22:25:12.959 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 22:25:12.963 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:25:12.965 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:25:12.967 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:25:12.970 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:25:12.971 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:25:12.974 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:25:12.978 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:25:12.982 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:25:12.986 +03:00 [DBG] Created DbConnection. (3ms).
2025-05-12 22:25:12.989 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:25:12.992 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:25:12.998 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:25:13.002 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-05-12 22:25:13.004 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-12 22:25:13.006 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:25:13.016 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:25:13.021 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:25:13.023 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:25:13.025 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:25:13.028 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:25:13.031 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:25:13.036 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:25:13.037 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:25:13.039 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:25:13.041 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:25:13.043 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:25:13.045 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 23ms reading results.
2025-05-12 22:25:13.047 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:25:13.049 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:25:13.051 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:25:13.054 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:25:13.055 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:25:13.056 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:25:13.057 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:25:13.058 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:25:13.060 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:25:13.062 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 122.3353ms
2025-05-12 22:25:13.066 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:25:13.070 +03:00 [DBG] Connection id "0HNCHGQ2DS102" completed keep alive response.
2025-05-12 22:25:13.072 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:25:13.073 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:25:13.075 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:25:13.077 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-02-23T00%3A00%3A00&pageSize=10 - 200 1206 application/json; charset=utf-8 189.6539ms
2025-05-12 22:26:25.548 +03:00 [DBG] Connection id "0HNCHGQ2DS102" received FIN.
2025-05-12 22:26:25.550 +03:00 [DBG] Connection id "0HNCHGQ2DS102" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 22:26:25.552 +03:00 [DBG] Connection id "0HNCHGQ2DS102" disconnecting.
2025-05-12 22:26:25.553 +03:00 [DBG] Connection id "0HNCHGQ2DS102" stopped.
2025-05-12 22:26:57.697 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-12 22:27:07.713 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:27:07.714 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0068ms - processed: 1 items - remaining: 0 items
2025-05-12 22:46:48.645 +03:00 [DBG] Connection id "0HNCHGQ2DS103" accepted.
2025-05-12 22:46:48.647 +03:00 [DBG] Connection id "0HNCHGQ2DS103" started.
2025-05-12 22:46:48.712 +03:00 [DBG] Connection 0HNCHGQ2DS103 established using the following protocol: "Tls12"
2025-05-12 22:46:48.768 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 22:46:48.771 +03:00 [DBG] POST requests are not supported
2025-05-12 22:46:48.772 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 22:46:48.774 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 22:46:48.776 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:46:48.777 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 22:46:48.778 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:46:48.778 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 22:46:48.781 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:46:48.782 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:46:48.783 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:46:48.808 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:46:48.809 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:46:48.811 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 22:46:48.813 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 22:46:48.815 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 22:46:48.837 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 22:46:48.849 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 22:46:48.852 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 22:46:48.853 +03:00 [DBG] Connection id "0HNCHGQ2DS103", Request id "0HNCHGQ2DS103:00000001": started reading request body.
2025-05-12 22:46:48.856 +03:00 [DBG] Connection id "0HNCHGQ2DS103", Request id "0HNCHGQ2DS103:00000001": done reading request body.
2025-05-12 22:46:48.858 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:46:48.859 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:46:48.860 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 22:46:48.861 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 22:46:48.864 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:46:48.868 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:46:48.869 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 22:46:48.870 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:48.877 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:48.879 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:46:48.880 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:46:48.882 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:46:48.883 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 22:46:48.897 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 22:46:48.902 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:48.904 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:48.909 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-12 22:46:48.910 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:48.911 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:46:48.913 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:48.914 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:48.915 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:46:48.916 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 22:46:48.968 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (52ms).
2025-05-12 22:46:48.969 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 22:46:48.973 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 22:46:48.975 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:48.976 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:48.977 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:48.979 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-12 22:46:48.980 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:48.982 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:46:48.983 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 22:46:48.984 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 22:46:48.985 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 22:46:48.986 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:48.988 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 22:46:48.990 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:48.992 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:48.993 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:46:48.995 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:46:48.996 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:46:48.998 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 22:46:49.033 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 22:46:49.037 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:49.042 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-12 22:46:49.043 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:49.045 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:46:49.046 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:49.048 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 22:46:49.049 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:49.053 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:49.055 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:49.058 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 22:46:49.059 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 22:46:49.060 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 22:46:49.061 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:49.063 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:49.065 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:46:49.068 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-12 22:46:49.069 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-12 22:46:49.076 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 22:46:49.106 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 22:46:49.110 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 22:46:49.171 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:49.174 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 64ms reading results.
2025-05-12 22:46:49.176 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:49.177 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:46:49.179 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:49.180 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 22:46:49.184 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:46:49.186 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:46:49.187 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:46:49.189 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:46:49.189 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:46:49.190 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:46:49.191 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 22:46:49.193 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 382.8043ms
2025-05-12 22:46:49.222 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 22:46:49.223 +03:00 [DBG] Connection id "0HNCHGQ2DS103" completed keep alive response.
2025-05-12 22:46:49.488 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:46:49.489 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:49.501 +03:00 [DBG] Disposed connection to database '' on server '' (12ms).
2025-05-12 22:46:49.614 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 846.2258ms
2025-05-12 22:46:49.697 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 22:46:49.700 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:46:49.702 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 22:46:49.703 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 22:46:49.705 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:46:49.706 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:46:49.707 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:46:49.709 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:46:49.710 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 22:46:49.712 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:46:49.713 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:46:49.715 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:46:49.716 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:46:49.717 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:46:49.719 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 22:46:49.720 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 22:46:49.723 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 22:46:49.724 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 22:46:49.727 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 22:46:49.728 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 22:46:49.729 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 22:46:49.730 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 22:46:49.730 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:46:49.732 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:46:49.734 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:46:49.735 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:46:49.735 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:46:49.757 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:46:49.759 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 22:46:49.761 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 42.2401ms
2025-05-12 22:46:49.768 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 22:46:49.769 +03:00 [DBG] Connection id "0HNCHGQ2DS103" completed keep alive response.
2025-05-12 22:46:49.770 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 73.0012ms
2025-05-12 22:46:49.781 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 22:46:49.788 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:46:49.789 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 22:46:49.793 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 22:46:49.795 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:46:49.796 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:46:49.797 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:46:49.797 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:46:49.798 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 22:46:49.800 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:46:49.802 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:46:49.804 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:46:49.806 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:46:49.809 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:46:49.810 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 22:46:49.812 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 22:46:49.815 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:46:49.817 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:46:49.818 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 22:46:49.819 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:49.820 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:49.822 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:46:49.830 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2025-05-12 22:46:49.832 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-05-12 22:46:49.834 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 22:46:49.839 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 22:46:49.853 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:49.855 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:49.856 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:49.857 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:49.866 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:49.867 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:49.868 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 14ms reading results.
2025-05-12 22:46:49.869 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:49.870 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (0ms).
2025-05-12 22:46:49.871 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:46:49.873 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:46:49.879 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:46:49.880 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:46:49.881 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:46:49.881 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:46:49.882 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:46:49.885 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 74.1343ms
2025-05-12 22:46:49.886 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 22:46:49.901 +03:00 [DBG] Connection id "0HNCHGQ2DS103" completed keep alive response.
2025-05-12 22:46:49.904 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:46:49.905 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:49.906 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:46:49.908 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 126.1342ms
2025-05-12 22:46:49.928 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T19%3A46%3A49&pageSize=10 - null null
2025-05-12 22:46:49.931 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:46:49.933 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 22:46:49.934 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 22:46:49.936 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:46:49.938 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:46:49.939 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:46:49.940 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:46:49.941 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 22:46:49.944 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:46:49.945 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:46:49.947 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:46:49.949 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:46:49.951 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:46:49.952 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:46:49.954 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:46:49.955 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:46:49.957 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 22:46:49.958 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:46:49.960 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:46:49.962 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 22:46:49.965 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 22:46:49.966 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:46:49.968 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:46:49.969 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:46:49.971 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:46:49.972 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:46:50.013 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:46:50.015 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:46:50.018 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:46:50.018 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 22:46:50.020 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:50.022 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:50.023 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:46:50.025 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:46:50.026 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:46:50.027 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:46:50.033 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:46:50.035 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.038 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.039 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.042 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.044 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.046 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.048 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.049 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.051 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.054 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.056 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:50.061 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 25ms reading results.
2025-05-12 22:46:50.065 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:50.066 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:46:50.067 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:46:50.079 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:46:50.080 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:46:50.082 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:46:50.083 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:46:50.084 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:46:50.085 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:46:50.088 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 135.2243ms
2025-05-12 22:46:50.090 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:46:50.109 +03:00 [DBG] Connection id "0HNCHGQ2DS103" completed keep alive response.
2025-05-12 22:46:50.110 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:46:50.111 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:50.117 +03:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-05-12 22:46:50.119 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T19%3A46%3A49&pageSize=10 - 200 1343 application/json; charset=utf-8 190.6154ms
2025-05-12 22:46:50.129 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 22:46:50.133 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:46:50.139 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 22:46:50.140 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 22:46:50.148 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:46:50.154 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:46:50.154 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:46:50.156 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:46:50.158 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 22:46:50.160 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:46:50.161 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:46:50.162 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:46:50.164 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:46:50.177 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:46:50.178 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 22:46:50.179 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 22:46:50.181 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 22:46:50.182 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 22:46:50.183 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:46:50.185 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:46:50.191 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 22:46:50.193 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 22:46:50.195 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:46:50.197 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:46:50.198 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:46:50.200 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:46:50.201 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 22:46:50.202 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 22:46:50.204 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:46:50.208 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:46:50.214 +03:00 [DBG] Created DbConnection. (6ms).
2025-05-12 22:46:50.216 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:50.217 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:50.218 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:46:50.219 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 22:46:50.221 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:46:50.222 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 22:46:50.300 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 22:46:50.302 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.304 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.305 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.307 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:50.309 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:50.311 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-12 22:46:50.314 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:50.322 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (9ms).
2025-05-12 22:46:50.324 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:46:50.328 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:46:50.329 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:46:50.332 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:46:50.333 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:46:50.334 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:46:50.338 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:46:50.340 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 161.9316ms
2025-05-12 22:46:50.377 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 22:46:50.379 +03:00 [DBG] Connection id "0HNCHGQ2DS103" completed keep alive response.
2025-05-12 22:46:50.380 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:46:50.381 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:50.382 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:46:50.383 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 254.878ms
2025-05-12 22:46:56.624 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-02-23T00%3A00%3A00&pageSize=10 - null null
2025-05-12 22:46:56.629 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 22:46:56.631 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 22:46:56.632 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 22:46:56.633 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:46:56.635 +03:00 [DBG] Successfully validated the token.
2025-05-12 22:46:56.636 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 22:46:56.637 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:46:56.638 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 22:46:56.639 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:46:56.641 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:46:56.646 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 22:46:56.650 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:46:56.654 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 22:46:56.656 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:46:56.658 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 22:46:56.660 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:46:56.661 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 22:46:56.664 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 22:46:56.666 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 22:46:56.668 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 22:46:56.670 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 22:46:56.672 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 22:46:56.674 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 22:46:56.676 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:46:56.678 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:46:56.680 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 22:46:56.682 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 22:46:56.684 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 22:46:56.686 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:46:56.687 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 22:46:56.688 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:56.690 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:56.691 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:46:56.692 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:46:56.694 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:46:56.695 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:46:56.702 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 22:46:56.704 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:56.705 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:56.707 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:56.708 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:56.709 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:56.711 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:56.712 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:56.714 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:56.716 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:56.717 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:56.719 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 15ms reading results.
2025-05-12 22:46:56.721 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:56.722 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 22:46:56.724 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 22:46:56.726 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 22:46:56.728 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 22:46:56.729 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 22:46:56.730 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 22:46:56.731 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 22:46:56.732 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 22:46:56.734 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 78.0066ms
2025-05-12 22:46:56.736 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 22:46:56.737 +03:00 [DBG] Connection id "0HNCHGQ2DS103" completed keep alive response.
2025-05-12 22:46:56.738 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 22:46:56.739 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 22:46:56.740 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:46:56.741 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-02-23T00%3A00%3A00&pageSize=10 - 200 1206 application/json; charset=utf-8 117.3595ms
2025-05-12 22:46:58.946 +03:00 [DBG] Connection id "0HNCHGQ2DS103" reset.
2025-05-12 22:46:58.947 +03:00 [DBG] Connection id "0HNCHGQ2DS103" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 22:46:58.949 +03:00 [DBG] Connection id "0HNCHGQ2DS103" disconnecting.
2025-05-12 22:46:58.964 +03:00 [DBG] Connection id "0HNCHGQ2DS103" stopped.
2025-05-12 22:48:49.717 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-12 22:48:59.728 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:48:59.730 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2025-05-12 22:49:09.746 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:49:09.748 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-05-12 22:49:19.751 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:49:19.753 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-05-12 22:49:29.764 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:49:29.790 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2025-05-12 22:49:39.805 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:49:39.806 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2025-05-12 22:49:49.810 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:49:49.811 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-05-12 22:49:59.821 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:49:59.822 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-05-12 22:50:09.830 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:50:09.831 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-05-12 22:50:19.838 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:50:19.840 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-05-12 22:50:29.854 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:50:29.856 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2025-05-12 22:50:39.874 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:50:39.876 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-05-12 22:50:49.887 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:50:49.889 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-05-12 22:50:59.893 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:50:59.895 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-05-12 22:51:09.921 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:51:09.922 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-05-12 22:51:19.923 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:51:19.925 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2025-05-12 22:51:29.930 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:51:29.932 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-05-12 22:51:39.946 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:51:39.948 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2025-05-12 22:51:49.956 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:51:49.957 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-05-12 22:51:59.976 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:51:59.980 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0049ms - processed: 0 items - remaining: 1 items
2025-05-12 22:52:09.983 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:52:09.986 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-05-12 22:52:19.990 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:52:19.991 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-05-12 22:52:29.994 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:52:29.997 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2025-05-12 22:52:39.998 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:52:40.000 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-05-12 22:52:49.999 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:52:50.002 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-05-12 22:53:00.016 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:53:00.018 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-12 22:53:10.030 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:53:10.032 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-12 22:53:20.032 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:53:20.034 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-05-12 22:53:30.042 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:53:30.045 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-05-12 22:53:40.043 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:53:40.047 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-05-12 22:53:50.052 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:53:50.057 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-12 22:54:00.059 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:54:00.061 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-05-12 22:54:10.064 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:54:10.066 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-05-12 22:54:20.076 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:54:20.078 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-12 22:54:30.094 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:54:30.096 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-05-12 22:54:40.112 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:54:40.113 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-12 22:54:50.130 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:54:50.132 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-05-12 22:55:00.136 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:55:00.139 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2025-05-12 22:55:10.141 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:55:10.142 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-12 22:55:20.153 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:55:20.154 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-05-12 22:55:30.157 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:55:30.159 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-12 22:55:40.174 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:55:40.176 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-12 22:55:50.182 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:55:50.183 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-12 22:56:00.183 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:56:00.185 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-05-12 22:56:10.200 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:56:10.201 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-12 22:56:20.219 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:56:20.220 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-05-12 22:56:30.236 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:56:30.239 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-05-12 22:56:40.243 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:56:40.245 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-05-12 22:56:50.252 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:56:50.254 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-05-12 22:57:00.260 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:57:00.261 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2025-05-12 22:57:10.273 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:57:10.275 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 22:57:20.290 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:57:20.291 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 22:57:30.308 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:57:30.309 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-05-12 22:57:40.317 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:57:40.318 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 22:57:50.334 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:57:50.335 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 22:58:00.348 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:58:00.351 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 22:58:10.358 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:58:10.360 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 22:58:20.366 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:58:20.368 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 22:58:30.380 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:58:30.381 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 22:58:40.386 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:58:40.387 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-05-12 22:58:50.402 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:58:50.403 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 22:59:00.419 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:59:00.422 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 22:59:10.439 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:59:10.442 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 22:59:20.451 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:59:20.453 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 22:59:30.462 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:59:30.463 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 22:59:40.472 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:59:40.473 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 22:59:50.490 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 22:59:50.491 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 23:00:00.493 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:00:00.495 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 23:00:10.504 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:00:10.505 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:00:20.514 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:00:20.515 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:00:30.517 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:00:30.519 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:00:40.537 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:00:40.539 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 23:00:50.542 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:00:50.544 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:01:00.549 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:01:00.550 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 23:01:10.558 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:01:10.559 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:01:20.567 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:01:20.569 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:01:30.568 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:01:30.569 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:01:40.571 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:01:40.572 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 23:01:50.578 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:01:50.580 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-05-12 23:02:00.592 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:02:00.595 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:02:10.603 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:02:10.608 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:02:20.606 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:02:20.756 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-12 23:02:30.796 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:02:30.812 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:02:40.827 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:02:40.828 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:02:50.834 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:02:50.835 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:03:00.840 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:03:00.843 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:03:10.861 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:03:10.862 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:03:20.876 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:03:20.877 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:03:30.891 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:03:30.892 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 23:03:40.909 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:03:40.913 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:03:50.924 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:03:50.925 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:04:00.939 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:04:00.962 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:04:10.967 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:04:10.969 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:04:20.976 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:04:20.978 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:04:30.983 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:04:30.985 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:04:41.002 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:04:41.003 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-05-12 23:04:51.013 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:04:51.014 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:05:01.035 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:05:01.036 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:05:11.051 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:05:11.052 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 23:05:21.061 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:05:21.064 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:05:31.081 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:05:31.083 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:05:41.088 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:05:41.089 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 23:05:51.102 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:05:51.104 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:06:01.108 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:06:01.111 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:06:11.115 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:06:11.116 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:06:21.124 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:06:21.127 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:06:31.129 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:06:31.131 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-05-12 23:06:41.153 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:06:41.154 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:06:51.174 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:06:51.176 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:07:01.186 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:07:01.188 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:07:11.206 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:07:11.209 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0134ms - processed: 0 items - remaining: 1 items
2025-05-12 23:07:21.221 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:07:21.223 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:07:31.225 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:07:31.230 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-12 23:07:41.235 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:07:41.238 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-12 23:07:51.243 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:07:51.244 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-05-12 23:08:01.255 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:08:01.257 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:08:11.267 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:08:11.274 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:08:21.284 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:08:21.285 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:08:31.335 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:08:31.352 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:08:41.363 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:08:41.364 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 23:08:51.380 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:08:51.382 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 23:09:01.394 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:09:01.395 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 23:09:11.411 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:09:11.414 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:09:21.431 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:09:21.432 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:09:31.440 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:09:31.442 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:09:41.447 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:09:41.449 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:09:51.462 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:09:51.464 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:10:01.467 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:10:01.468 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:10:11.484 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:10:11.488 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:10:21.498 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:10:21.500 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:10:31.504 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:10:31.506 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:10:41.519 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:10:41.520 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:10:51.526 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:10:51.528 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-05-12 23:11:01.536 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:11:01.537 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:11:11.551 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:11:11.552 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:11:21.594 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:11:22.028 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:11:29.376 +03:00 [DBG] Connection id "0HNCHGQ2DS104" accepted.
2025-05-12 23:11:29.411 +03:00 [DBG] Connection id "0HNCHGQ2DS104" started.
2025-05-12 23:11:29.439 +03:00 [DBG] Connection 0HNCHGQ2DS104 established using the following protocol: "Tls12"
2025-05-12 23:11:29.570 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 23:11:29.580 +03:00 [DBG] POST requests are not supported
2025-05-12 23:11:29.581 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 23:11:29.582 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 23:11:29.583 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:11:29.584 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:11:29.616 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:11:29.650 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 23:11:29.651 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:11:29.654 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:11:29.655 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:11:29.658 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:11:29.659 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:11:29.660 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:11:29.661 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:11:29.663 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:11:29.664 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 23:11:29.666 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:11:29.668 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:11:29.673 +03:00 [DBG] Connection id "0HNCHGQ2DS104", Request id "0HNCHGQ2DS104:00000001": started reading request body.
2025-05-12 23:11:29.677 +03:00 [DBG] Connection id "0HNCHGQ2DS104", Request id "0HNCHGQ2DS104:00000001": done reading request body.
2025-05-12 23:11:29.679 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:11:29.680 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:11:29.682 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:11:29.685 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:11:29.688 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:11:29.691 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:11:29.692 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 23:11:29.693 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:29.729 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:29.731 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:11:29.732 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:11:29.733 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:11:29.735 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:11:30.109 +03:00 [INF] Executed DbCommand (374ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:11:30.180 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.183 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.185 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-12 23:11:30.189 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.190 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:11:30.192 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.193 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.195 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:11:30.198 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:11:30.199 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:11:30.200 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:11:30.209 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:11:30.211 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.212 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.214 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.216 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-12 23:11:30.218 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.219 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:11:30.220 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:11:30.222 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:11:30.225 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:11:30.227 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.228 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:11:30.229 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.231 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.248 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:11:30.250 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:11:30.251 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:11:30.252 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:11:30.257 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:11:30.259 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.261 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 23:11:30.264 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.267 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 23:11:30.272 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.276 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:11:30.283 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.290 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.291 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.292 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:11:30.298 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:11:30.306 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:11:30.308 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.310 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.311 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:11:30.312 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:11:30.313 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:11:30.314 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:11:30.322 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:11:30.325 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:11:30.326 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.328 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 23:11:30.329 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.331 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:11:30.332 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.334 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:11:30.335 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:11:30.338 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:11:30.340 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:11:30.342 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:11:30.343 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:11:30.343 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:11:30.345 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 23:11:30.346 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 686.2077ms
2025-05-12 23:11:30.365 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:11:30.378 +03:00 [DBG] Connection id "0HNCHGQ2DS104" completed keep alive response.
2025-05-12 23:11:30.378 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:11:30.380 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.382 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:11:30.384 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 814.4455ms
2025-05-12 23:11:30.713 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 23:11:30.719 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:11:30.723 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 23:11:30.724 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 23:11:30.726 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:11:30.727 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:11:30.728 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:11:30.729 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:11:30.730 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 23:11:30.732 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:11:30.733 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:11:30.734 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:11:30.740 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:11:30.742 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:11:30.745 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:11:30.751 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:11:30.755 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 23:11:30.757 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 23:11:30.758 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:11:30.760 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:11:30.761 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 23:11:30.762 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 23:11:30.763 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:11:30.765 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:11:30.766 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:11:30.767 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:11:30.772 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:11:30.773 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:11:30.775 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 23:11:30.777 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 31.9349ms
2025-05-12 23:11:30.780 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:11:30.781 +03:00 [DBG] Connection id "0HNCHGQ2DS104" completed keep alive response.
2025-05-12 23:11:30.783 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 69.7499ms
2025-05-12 23:11:30.805 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 23:11:30.814 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:11:30.816 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 23:11:30.818 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 23:11:30.830 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:11:30.832 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:11:30.834 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:11:30.841 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:11:30.843 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 23:11:30.852 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:11:30.859 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:11:30.861 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:11:30.863 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:11:30.865 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:11:30.867 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:11:30.869 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:11:30.875 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:11:30.879 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:11:30.880 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 23:11:30.882 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.884 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.893 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:11:30.895 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:11:30.897 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-12 23:11:30.898 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:11:30.905 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:11:30.909 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.910 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.912 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.914 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.916 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:30.919 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.923 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 13ms reading results.
2025-05-12 23:11:30.925 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.926 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:11:30.928 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:11:30.930 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:11:30.932 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:11:30.933 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:11:30.934 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:11:30.935 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:11:30.936 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:11:30.940 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 72.44ms
2025-05-12 23:11:30.941 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:11:30.942 +03:00 [DBG] Connection id "0HNCHGQ2DS104" completed keep alive response.
2025-05-12 23:11:30.944 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:11:30.945 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:30.946 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:11:30.948 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 142.8706ms
2025-05-12 23:11:30.980 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A11%3A30&pageSize=10 - null null
2025-05-12 23:11:30.989 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:11:30.990 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 23:11:30.991 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 23:11:30.992 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:11:30.994 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:11:30.995 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:11:30.996 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:11:30.998 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 23:11:31.001 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:11:31.003 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:11:31.006 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:11:31.009 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:11:31.010 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:11:31.012 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:11:31.013 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:11:31.020 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:11:31.023 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 23:11:31.027 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:11:31.031 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:11:31.033 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 23:11:31.040 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 23:11:31.042 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:11:31.045 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:11:31.049 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:11:31.052 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:11:31.056 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:11:31.059 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:11:31.062 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:11:31.066 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:11:31.069 +03:00 [DBG] Created DbConnection. (3ms).
2025-05-12 23:11:31.073 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:31.075 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:31.082 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:11:31.084 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:11:31.103 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-05-12 23:11:31.136 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:11:31.180 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:11:31.186 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.189 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.190 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.192 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.193 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.198 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.202 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.205 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.206 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.208 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.209 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:31.212 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 26ms reading results.
2025-05-12 23:11:31.214 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:31.215 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:11:31.216 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:11:31.219 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:11:31.222 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:11:31.224 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:11:31.227 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:11:31.228 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:11:31.229 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:11:31.231 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 218.8385ms
2025-05-12 23:11:31.233 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:11:31.235 +03:00 [DBG] Connection id "0HNCHGQ2DS104" completed keep alive response.
2025-05-12 23:11:31.238 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:11:31.239 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:31.240 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:11:31.241 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A11%3A30&pageSize=10 - 200 1343 application/json; charset=utf-8 260.9765ms
2025-05-12 23:11:31.429 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 23:11:31.433 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:11:31.434 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 23:11:31.435 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 23:11:31.436 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:11:31.440 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:11:31.441 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:11:31.442 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:11:31.443 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 23:11:31.445 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:11:31.447 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:11:31.449 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:11:31.451 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:11:31.452 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:11:31.455 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:11:31.457 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:11:31.459 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:11:31.460 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 23:11:31.461 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:11:31.463 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:11:31.464 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 23:11:31.466 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 23:11:31.468 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:11:31.471 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:11:31.473 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:11:31.475 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:11:31.476 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:11:31.477 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:11:31.479 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:11:31.513 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:11:31.514 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 23:11:31.515 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:31.516 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:31.518 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:11:31.519 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:11:31.521 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:11:31.523 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:11:31.529 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:11:31.532 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.601 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.665 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.695 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:11:31.703 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:31.710 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 178ms reading results.
2025-05-12 23:11:31.712 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:31.714 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 23:11:31.717 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:11:31.719 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:11:31.722 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:11:31.723 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:11:31.724 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:11:31.725 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:11:31.726 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:11:31.728 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 272.4253ms
2025-05-12 23:11:31.748 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:11:31.757 +03:00 [DBG] Connection id "0HNCHGQ2DS104" completed keep alive response.
2025-05-12 23:11:31.758 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:11:31.759 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:11:31.760 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:11:31.769 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 339.6386ms
2025-05-12 23:11:32.032 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:11:32.040 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:11:42.051 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:11:42.052 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:11:52.067 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:11:52.068 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:11:58.367 +03:00 [DBG] Connection id "0HNCHGQ2DS104" reset.
2025-05-12 23:11:58.391 +03:00 [DBG] Connection id "0HNCHGQ2DS104" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:11:58.396 +03:00 [DBG] Connection id "0HNCHGQ2DS104" disconnecting.
2025-05-12 23:11:58.403 +03:00 [DBG] Connection id "0HNCHGQ2DS104" stopped.
2025-05-12 23:12:02.084 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:12:02.085 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:12:12.189 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:12:12.192 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:12:14.095 +03:00 [DBG] Connection id "0HNCHGQ2DS105" accepted.
2025-05-12 23:12:14.151 +03:00 [DBG] Connection id "0HNCHGQ2DS105" started.
2025-05-12 23:12:14.190 +03:00 [DBG] Connection 0HNCHGQ2DS105 established using the following protocol: "Tls12"
2025-05-12 23:12:14.261 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 23:12:14.267 +03:00 [DBG] POST requests are not supported
2025-05-12 23:12:14.272 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 23:12:14.273 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 23:12:14.275 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:12:14.276 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:12:14.277 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:12:14.278 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 23:12:14.280 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:12:14.281 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:12:14.283 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:12:14.286 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:12:14.287 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:12:14.290 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:12:14.292 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:12:14.293 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:12:14.294 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 23:12:14.295 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:12:14.297 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:12:14.298 +03:00 [DBG] Connection id "0HNCHGQ2DS105", Request id "0HNCHGQ2DS105:00000001": started reading request body.
2025-05-12 23:12:14.300 +03:00 [DBG] Connection id "0HNCHGQ2DS105", Request id "0HNCHGQ2DS105:00000001": done reading request body.
2025-05-12 23:12:14.376 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:12:14.378 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:12:14.379 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:12:14.380 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:12:14.383 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:12:14.385 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:12:14.386 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:12:14.388 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.390 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.391 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:14.392 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:12:14.394 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:12:14.396 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:12:14.463 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:12:14.471 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:14.475 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.695 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 223ms reading results.
2025-05-12 23:12:14.812 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.815 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-12 23:12:14.818 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.820 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.821 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:14.823 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:12:14.824 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:12:14.826 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:12:14.841 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:12:14.843 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:14.845 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:14.847 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.848 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-12 23:12:14.850 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.852 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:12:14.853 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:12:14.855 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:12:14.856 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:12:14.857 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:14.860 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:12:14.862 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.863 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.865 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:14.866 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:12:14.868 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:12:14.869 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:12:14.874 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:12:14.877 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.879 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 23:12:14.880 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.882 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:12:14.884 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:14.885 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:12:14.887 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:14.891 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:14.893 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:14.895 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:12:14.896 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:12:14.897 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:12:14.926 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.931 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.933 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:14.935 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:12:14.936 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:12:14.938 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:12:14.967 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:12:14.970 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:12:14.971 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:14.975 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-12 23:12:14.976 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:15.000 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (23ms).
2025-05-12 23:12:15.002 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.013 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:12:15.014 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:12:15.028 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:12:15.029 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:12:15.030 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:12:15.031 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:12:15.032 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:12:15.036 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 23:12:15.038 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 747.4001ms
2025-05-12 23:12:15.041 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:12:15.042 +03:00 [DBG] Connection id "0HNCHGQ2DS105" completed keep alive response.
2025-05-12 23:12:15.043 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:12:15.044 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:15.046 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:12:15.047 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 786.3722ms
2025-05-12 23:12:15.307 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 23:12:15.348 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:12:15.350 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 23:12:15.361 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 23:12:15.362 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:12:15.366 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:12:15.373 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:12:15.375 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:12:15.380 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 23:12:15.382 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:12:15.386 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:12:15.387 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:12:15.391 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:12:15.393 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:12:15.395 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:12:15.412 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:12:15.423 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 23:12:15.426 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 23:12:15.428 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:12:15.430 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:12:15.431 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 23:12:15.432 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 23:12:15.444 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:12:15.446 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:12:15.448 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:12:15.449 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:12:15.449 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:12:15.450 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:12:15.451 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 23:12:15.452 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 57.5828ms
2025-05-12 23:12:15.454 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:12:15.454 +03:00 [DBG] Connection id "0HNCHGQ2DS105" completed keep alive response.
2025-05-12 23:12:15.455 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 148.1314ms
2025-05-12 23:12:15.495 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 23:12:15.498 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:12:15.500 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 23:12:15.502 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 23:12:15.504 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:12:15.509 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:12:15.510 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:12:15.511 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:12:15.512 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 23:12:15.514 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:12:15.518 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:12:15.519 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:12:15.521 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:12:15.529 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:12:15.534 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:12:15.535 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:12:15.538 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:12:15.541 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:12:15.542 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:12:15.543 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:15.546 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:15.548 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:15.549 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:12:15.550 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:12:15.551 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:12:15.565 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:12:15.569 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.571 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.574 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.577 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.578 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.580 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:15.583 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 14ms reading results.
2025-05-12 23:12:15.585 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:15.586 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:12:15.588 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:12:15.592 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:12:15.593 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:12:15.594 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:12:15.595 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:12:15.596 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:12:15.598 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:12:15.600 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 66.1588ms
2025-05-12 23:12:15.602 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:12:15.603 +03:00 [DBG] Connection id "0HNCHGQ2DS105" completed keep alive response.
2025-05-12 23:12:15.604 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:12:15.605 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:15.613 +03:00 [DBG] Disposed connection to database '' on server '' (8ms).
2025-05-12 23:12:15.617 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 121.6981ms
2025-05-12 23:12:15.644 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A12%3A15&pageSize=10 - null null
2025-05-12 23:12:15.652 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:12:15.653 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 23:12:15.654 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 23:12:15.749 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:12:15.752 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:12:15.753 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:12:15.754 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:12:15.756 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 23:12:15.759 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:12:15.760 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:12:15.761 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:12:15.763 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:12:15.764 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:12:15.766 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:12:15.767 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:12:15.768 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:12:15.769 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 23:12:15.770 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:12:15.772 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:12:15.779 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 23:12:15.780 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 23:12:15.781 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:12:15.783 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:12:15.785 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:12:15.786 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:12:15.787 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:12:15.788 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:12:15.792 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:12:15.795 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:12:15.827 +03:00 [DBG] Created DbConnection. (32ms).
2025-05-12 23:12:15.833 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:15.834 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:15.838 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:15.839 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:12:15.841 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:12:15.843 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:12:15.893 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:12:15.901 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.902 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.903 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.905 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.908 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.910 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.913 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.914 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.917 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.919 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:15.920 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:15.921 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 20ms reading results.
2025-05-12 23:12:15.925 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:15.926 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:12:15.928 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:12:15.930 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:12:15.931 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:12:15.932 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:12:15.934 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:12:15.962 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:12:16.112 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:12:16.114 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 348.0532ms
2025-05-12 23:12:16.116 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:12:16.117 +03:00 [DBG] Connection id "0HNCHGQ2DS105" completed keep alive response.
2025-05-12 23:12:16.118 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:12:16.121 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:16.124 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 23:12:16.126 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A12%3A15&pageSize=10 - 200 1343 application/json; charset=utf-8 481.2943ms
2025-05-12 23:12:16.138 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 23:12:16.143 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:12:16.144 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 23:12:16.147 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 23:12:16.148 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:12:16.149 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:12:16.150 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:12:16.151 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:12:16.154 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 23:12:16.156 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:12:16.159 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:12:16.160 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:12:16.162 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:12:16.163 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:12:16.164 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:12:16.165 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:12:16.166 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:12:16.168 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 23:12:16.170 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:12:16.171 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:12:16.173 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 23:12:16.174 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 23:12:16.176 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:12:16.178 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:12:16.179 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:12:16.180 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:12:16.181 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:12:16.183 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:12:16.185 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:12:16.188 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:12:16.189 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:12:16.192 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:16.193 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:16.194 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:16.195 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:12:16.198 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:12:16.199 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:12:16.341 +03:00 [INF] Executed DbCommand (141ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:12:16.346 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:16.348 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:16.350 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:16.352 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:16.354 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:16.357 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 11ms reading results.
2025-05-12 23:12:16.359 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:16.361 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:12:16.363 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:12:16.366 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:12:16.368 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:12:16.369 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:12:16.370 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:12:16.371 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:12:16.373 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:12:16.374 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 210.6091ms
2025-05-12 23:12:16.378 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:12:16.379 +03:00 [DBG] Connection id "0HNCHGQ2DS105" completed keep alive response.
2025-05-12 23:12:16.382 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:12:16.387 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:16.389 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 23:12:16.392 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 253.783ms
2025-05-12 23:12:22.211 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:12:22.212 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:12:23.036 +03:00 [DBG] Connection id "0HNCHGQ2DS105" reset.
2025-05-12 23:12:23.042 +03:00 [DBG] Connection id "0HNCHGQ2DS105" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:12:23.043 +03:00 [DBG] Connection id "0HNCHGQ2DS105" disconnecting.
2025-05-12 23:12:23.061 +03:00 [DBG] Connection id "0HNCHGQ2DS105" stopped.
2025-05-12 23:12:32.265 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:12:32.280 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:12:40.408 +03:00 [DBG] Connection id "0HNCHGQ2DS106" accepted.
2025-05-12 23:12:40.471 +03:00 [DBG] Connection id "0HNCHGQ2DS106" started.
2025-05-12 23:12:40.530 +03:00 [DBG] Connection 0HNCHGQ2DS106 established using the following protocol: "Tls12"
2025-05-12 23:12:40.605 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 23:12:40.750 +03:00 [DBG] POST requests are not supported
2025-05-12 23:12:40.750 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 23:12:40.752 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 23:12:40.774 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:12:40.867 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:12:40.952 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:12:40.953 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 23:12:40.955 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:12:40.957 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:12:40.961 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:12:40.964 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:12:40.966 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:12:40.967 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:12:41.137 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:12:41.139 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:12:41.140 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 23:12:41.142 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:12:41.145 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:12:41.151 +03:00 [DBG] Connection id "0HNCHGQ2DS106", Request id "0HNCHGQ2DS106:00000001": started reading request body.
2025-05-12 23:12:41.155 +03:00 [DBG] Connection id "0HNCHGQ2DS106", Request id "0HNCHGQ2DS106:00000001": done reading request body.
2025-05-12 23:12:41.158 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:12:41.159 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:12:41.176 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:12:41.182 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:12:41.184 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:12:41.205 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:12:41.206 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:12:41.206 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.207 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.236 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:41.237 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:12:41.389 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (153ms).
2025-05-12 23:12:41.433 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:12:41.445 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:12:41.510 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:41.557 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.586 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 135ms reading results.
2025-05-12 23:12:41.592 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.593 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:12:41.758 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.761 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.764 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:41.772 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-05-12 23:12:41.783 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2025-05-12 23:12:41.786 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:12:41.797 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:12:41.803 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:41.805 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:41.808 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.812 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-12 23:12:41.815 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.820 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (4ms).
2025-05-12 23:12:41.822 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:12:41.824 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:12:41.826 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:12:41.830 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:41.836 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:12:41.838 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.839 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.841 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:41.841 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:12:41.842 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:12:41.845 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:12:41.899 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:12:41.902 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.903 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 23:12:41.905 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.906 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:12:41.908 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:41.914 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:12:41.916 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:41.919 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:41.920 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:41.921 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:12:41.922 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:12:41.924 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:12:41.926 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.929 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.930 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:41.931 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:12:41.932 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:12:41.938 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:12:41.949 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:12:41.951 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:12:41.952 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.953 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 23:12:41.955 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:41.956 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:12:41.958 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:41.962 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:12:41.963 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:12:41.965 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:12:41.966 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:12:41.967 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:12:41.969 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:12:41.970 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:12:41.974 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 23:12:41.976 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 1008.9228ms
2025-05-12 23:12:41.979 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:12:41.980 +03:00 [DBG] Connection id "0HNCHGQ2DS106" completed keep alive response.
2025-05-12 23:12:41.981 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:12:42.000 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:42.001 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:12:42.003 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 1398.1322ms
2025-05-12 23:12:42.208 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 23:12:42.272 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:12:42.274 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 23:12:42.275 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 23:12:42.280 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:12:42.281 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:12:42.287 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:12:42.288 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-05-12 23:12:42.289 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:12:42.291 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:12:42.292 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 23:12:42.294 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:12:42.297 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:12:42.302 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:12:42.303 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:12:42.305 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:12:42.306 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:12:42.308 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:12:42.310 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 23:12:42.314 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 23:12:42.315 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:12:42.316 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:12:42.318 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 23:12:42.319 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 23:12:42.320 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:12:42.323 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:12:42.325 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:12:42.330 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:12:42.331 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:12:42.332 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:12:42.333 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 23:12:42.335 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 28.7018ms
2025-05-12 23:12:42.349 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:12:42.350 +03:00 [DBG] Connection id "0HNCHGQ2DS106" completed keep alive response.
2025-05-12 23:12:42.351 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 142.6079ms
2025-05-12 23:12:42.355 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 23:12:42.369 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:12:42.382 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 23:12:42.385 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 23:12:42.389 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:12:42.391 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:12:42.393 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:12:42.396 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:12:42.399 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 23:12:42.401 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:12:42.403 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:12:42.409 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:12:42.414 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:12:42.416 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:12:42.417 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:12:42.419 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:12:42.422 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:12:42.424 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:12:42.425 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:12:42.426 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:42.429 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:42.430 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:42.431 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:12:42.432 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:12:42.434 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:12:42.441 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:12:42.443 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.446 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.448 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.449 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.451 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.453 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:42.454 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 11ms reading results.
2025-05-12 23:12:42.456 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:42.458 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:12:42.460 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:12:42.464 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:12:42.466 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:12:42.468 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:12:42.468 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:12:42.469 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:12:42.470 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:12:42.472 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 54.4386ms
2025-05-12 23:12:42.474 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:12:42.475 +03:00 [DBG] Connection id "0HNCHGQ2DS106" completed keep alive response.
2025-05-12 23:12:42.477 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:12:42.480 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:42.481 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:12:42.492 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 137.1182ms
2025-05-12 23:12:42.522 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A12%3A42&pageSize=10 - null null
2025-05-12 23:12:42.531 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:12:42.540 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 23:12:42.542 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 23:12:42.543 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:12:42.549 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:12:42.553 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:12:42.574 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:12:42.576 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 23:12:42.582 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:12:42.585 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:12:42.588 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:12:42.591 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:12:42.594 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:12:42.598 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:12:42.601 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:12:42.605 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:12:42.607 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 23:12:42.614 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:12:42.618 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:12:42.621 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 23:12:42.626 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 23:12:42.630 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:12:42.640 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:12:42.668 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:12:42.725 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:12:42.732 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:12:42.742 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:12:42.747 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:12:42.915 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:12:42.918 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-12 23:12:42.919 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:42.920 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:42.922 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:42.923 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:12:42.924 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:12:42.925 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:12:42.957 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:12:42.960 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.963 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.964 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.965 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.967 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.969 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.970 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.971 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.973 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.975 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:42.977 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:42.983 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 23ms reading results.
2025-05-12 23:12:42.985 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:42.986 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:12:42.991 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:12:42.996 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:12:43.085 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:12:43.092 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:12:43.093 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:12:43.094 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:12:43.098 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:12:43.101 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 503.583ms
2025-05-12 23:12:43.107 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:12:43.109 +03:00 [DBG] Connection id "0HNCHGQ2DS106" completed keep alive response.
2025-05-12 23:12:43.115 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:12:43.117 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:43.122 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-05-12 23:12:43.124 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A12%3A42&pageSize=10 - 200 1343 application/json; charset=utf-8 601.9658ms
2025-05-12 23:12:43.131 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 23:12:43.137 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:12:43.143 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 23:12:43.144 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 23:12:43.151 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:12:43.152 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:12:43.154 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:12:43.156 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:12:43.159 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 23:12:43.162 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:12:43.164 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:12:43.166 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:12:43.169 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:12:43.171 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:12:43.172 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:12:43.173 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:12:43.175 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:12:43.176 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 23:12:43.177 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:12:43.181 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:12:43.183 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 23:12:43.185 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 23:12:43.187 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:12:43.189 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:12:43.191 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:12:43.192 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:12:43.193 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:12:43.198 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:12:43.200 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:12:43.202 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:12:43.203 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:12:43.204 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:43.205 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:43.207 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:12:43.208 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:12:43.213 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-12 23:12:43.215 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:12:43.224 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:12:43.227 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:43.230 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:43.232 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:43.233 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:12:43.234 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:43.235 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-12 23:12:43.271 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:43.273 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 23:12:43.275 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:12:43.277 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:12:43.278 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:12:43.280 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:12:43.281 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:12:43.282 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:12:43.283 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:12:43.285 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 112.7532ms
2025-05-12 23:12:43.286 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:12:43.287 +03:00 [DBG] Connection id "0HNCHGQ2DS106" completed keep alive response.
2025-05-12 23:12:43.289 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:12:43.291 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:12:43.292 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:12:43.293 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 161.8588ms
2025-05-12 23:12:47.640 +03:00 [DBG] Connection id "0HNCHGQ2DS106" reset.
2025-05-12 23:12:47.658 +03:00 [DBG] Connection id "0HNCHGQ2DS106" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:12:47.661 +03:00 [DBG] Connection id "0HNCHGQ2DS106" disconnecting.
2025-05-12 23:12:47.662 +03:00 [DBG] Connection id "0HNCHGQ2DS106" stopped.
2025-05-12 23:12:52.294 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:12:52.299 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:13:02.315 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:13:02.323 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:13:12.325 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:13:12.329 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:13:22.334 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:13:22.337 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:13:30.752 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-12 23:13:32.345 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-12 23:13:32.347 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0173ms - processed: 1 items - remaining: 1 items
2025-05-12 23:13:42.354 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:13:42.358 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:13:52.365 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:13:52.366 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:14:02.400 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:14:02.507 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:14:02.753 +03:00 [DBG] Connection id "0HNCHGQ2DS107" accepted.
2025-05-12 23:14:02.849 +03:00 [DBG] Connection id "0HNCHGQ2DS107" started.
2025-05-12 23:14:02.860 +03:00 [DBG] Connection 0HNCHGQ2DS107 established using the following protocol: "Tls12"
2025-05-12 23:14:02.909 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 23:14:02.914 +03:00 [DBG] POST requests are not supported
2025-05-12 23:14:02.915 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 23:14:02.916 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 23:14:02.917 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:14:02.918 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:14:02.920 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:14:02.921 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 23:14:02.923 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:14:02.924 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:14:02.926 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:14:02.928 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:14:02.930 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:14:02.931 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:14:02.932 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:14:02.934 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:14:02.935 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 23:14:02.937 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:14:02.938 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:14:02.939 +03:00 [DBG] Connection id "0HNCHGQ2DS107", Request id "0HNCHGQ2DS107:00000001": started reading request body.
2025-05-12 23:14:02.940 +03:00 [DBG] Connection id "0HNCHGQ2DS107", Request id "0HNCHGQ2DS107:00000001": done reading request body.
2025-05-12 23:14:02.942 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:14:02.943 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:14:02.944 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:14:02.945 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:14:02.947 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:14:02.950 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:14:02.951 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 23:14:02.953 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:02.954 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:02.955 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:14:02.957 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:14:02.958 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:14:02.960 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:14:02.965 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:14:02.967 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:02.969 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:02.970 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 23:14:02.972 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:02.973 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:14:02.975 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:02.976 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:02.978 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:14:02.979 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:14:02.980 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:14:02.982 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:14:02.985 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:14:02.989 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:02.990 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:02.991 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:02.993 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-12 23:14:02.994 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:02.995 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:14:02.997 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:14:02.998 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:14:02.999 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:14:03.001 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:03.005 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:14:03.007 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:03.009 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:03.010 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:14:03.011 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:14:03.013 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:14:03.014 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:14:03.050 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:14:03.052 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:03.053 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 23:14:03.055 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:03.056 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:14:03.057 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:03.060 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:14:03.062 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:03.063 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:03.065 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:03.067 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:14:03.068 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:14:03.107 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:14:03.144 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:03.182 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:03.192 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:14:03.195 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:14:03.200 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-05-12 23:14:03.203 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:14:03.301 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:14:03.304 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:14:03.305 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:03.306 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 23:14:03.308 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:03.309 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:14:03.311 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:03.313 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:14:03.314 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:14:03.317 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:14:03.319 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:14:03.320 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:14:03.321 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:14:03.321 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:14:03.323 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 23:14:03.324 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 392.8609ms
2025-05-12 23:14:03.325 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:14:03.334 +03:00 [DBG] Connection id "0HNCHGQ2DS107" completed keep alive response.
2025-05-12 23:14:03.335 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:14:03.336 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:03.340 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-05-12 23:14:03.341 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 431.8487ms
2025-05-12 23:14:03.551 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 23:14:03.574 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:14:03.575 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 23:14:03.575 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 23:14:03.578 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:14:03.581 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:14:03.583 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:14:03.584 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:14:03.585 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 23:14:03.586 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:14:03.626 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:14:03.763 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:14:03.765 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:14:03.767 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:14:03.768 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:14:03.770 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:14:03.772 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 23:14:03.774 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 23:14:03.778 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:14:03.780 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:14:03.781 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 23:14:03.782 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 23:14:03.784 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:14:03.786 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:14:03.788 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:14:03.791 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:14:03.792 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:14:03.793 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:14:03.796 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 23:14:03.797 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 29.0376ms
2025-05-12 23:14:03.824 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:14:03.826 +03:00 [DBG] Connection id "0HNCHGQ2DS107" completed keep alive response.
2025-05-12 23:14:03.828 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 276.3088ms
2025-05-12 23:14:03.831 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 23:14:03.833 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:14:03.835 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 23:14:03.836 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 23:14:03.838 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:14:03.857 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:14:03.867 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:14:03.869 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:14:03.870 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 23:14:03.873 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:14:03.874 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:14:03.878 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:14:03.922 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:14:03.925 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:14:03.929 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:14:03.932 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:14:03.935 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:14:03.940 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:14:03.947 +03:00 [DBG] Created DbConnection. (7ms).
2025-05-12 23:14:03.950 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:03.951 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:03.953 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:14:03.955 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:14:03.958 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-12 23:14:03.962 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:14:03.970 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:14:03.976 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:03.980 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:03.983 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:03.985 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:03.988 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:03.992 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:03.996 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 19ms reading results.
2025-05-12 23:14:04.000 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:04.001 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:14:04.007 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:14:04.014 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:14:04.016 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:14:04.021 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:14:04.022 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:14:04.023 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:14:04.024 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:14:04.026 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 96.6538ms
2025-05-12 23:14:04.031 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:14:04.032 +03:00 [DBG] Connection id "0HNCHGQ2DS107" completed keep alive response.
2025-05-12 23:14:04.033 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:14:04.034 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:04.037 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 23:14:04.039 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 207.9552ms
2025-05-12 23:14:04.072 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A14%3A04&pageSize=10 - null null
2025-05-12 23:14:04.083 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:14:04.086 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 23:14:04.089 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 23:14:04.092 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:14:04.097 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:14:04.101 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:14:04.105 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:14:04.107 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 23:14:04.123 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:14:04.135 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:14:04.151 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:14:04.203 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:14:04.207 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:14:04.215 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:14:04.218 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:14:04.221 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:14:04.224 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 23:14:04.232 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:14:04.236 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:14:04.239 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 23:14:04.279 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 23:14:04.281 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:14:04.283 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:14:04.284 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:14:04.286 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:14:04.292 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:14:04.355 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:14:04.359 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:14:04.363 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:14:04.364 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:14:04.365 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:04.369 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:04.370 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:14:04.371 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:14:04.372 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:14:04.385 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:14:04.514 +03:00 [INF] Executed DbCommand (129ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:14:04.542 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:04.544 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:04.546 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:04.548 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:04.550 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:04.551 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:04.552 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:04.553 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:04.555 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:04.556 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:04.557 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:04.558 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 16ms reading results.
2025-05-12 23:14:04.560 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:04.564 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-12 23:14:04.566 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:14:04.570 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:14:04.572 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:14:04.573 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:14:04.575 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:14:04.575 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:14:04.577 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:14:04.581 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 365.504ms
2025-05-12 23:14:04.605 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:14:04.606 +03:00 [DBG] Connection id "0HNCHGQ2DS107" completed keep alive response.
2025-05-12 23:14:04.607 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:14:04.608 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:04.609 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:14:04.612 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A14%3A04&pageSize=10 - 200 1343 application/json; charset=utf-8 539.8479ms
2025-05-12 23:14:04.615 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 23:14:04.618 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:14:04.740 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 23:14:04.768 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 23:14:04.771 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:14:04.774 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:14:04.775 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:14:04.790 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:14:04.792 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 23:14:04.796 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:14:04.798 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:14:04.800 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:14:04.802 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:14:04.804 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:14:04.806 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:14:04.808 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:14:04.815 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:14:04.816 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 23:14:04.820 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:14:04.823 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:14:04.830 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 23:14:04.834 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 23:14:04.837 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:14:04.842 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:14:04.849 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:14:04.850 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:14:04.852 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:14:04.854 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:14:04.856 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:14:04.858 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:14:04.859 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 23:14:04.860 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:04.864 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:04.866 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:14:04.868 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:14:04.869 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:14:04.871 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:14:05.057 +03:00 [INF] Executed DbCommand (186ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:14:05.110 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:05.112 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:05.113 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:05.114 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:14:05.116 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:05.117 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-12 23:14:05.119 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:05.120 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:14:05.122 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:14:05.287 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:14:05.291 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:14:05.307 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:14:05.310 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:14:05.312 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:14:05.315 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:14:05.317 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 511.2397ms
2025-05-12 23:14:05.367 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:14:05.369 +03:00 [DBG] Connection id "0HNCHGQ2DS107" completed keep alive response.
2025-05-12 23:14:05.383 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:14:05.384 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:14:05.387 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 23:14:05.390 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 775.2303ms
2025-05-12 23:14:12.523 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:14:12.525 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:14:16.795 +03:00 [DBG] Connection id "0HNCHGQ2DS107" reset.
2025-05-12 23:14:16.813 +03:00 [DBG] Connection id "0HNCHGQ2DS107" disconnecting.
2025-05-12 23:14:16.816 +03:00 [DBG] Connection id "0HNCHGQ2DS107" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:14:16.817 +03:00 [DBG] Connection id "0HNCHGQ2DS107" stopped.
2025-05-12 23:14:22.555 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:14:22.606 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:14:32.617 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:14:32.620 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:14:42.638 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:14:42.639 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:14:52.646 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:14:52.660 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-12 23:15:02.719 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:15:02.721 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:15:12.737 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:15:12.741 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:15:22.756 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:15:22.760 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:15:30.425 +03:00 [DBG] Connection id "0HNCHGQ2DS108" accepted.
2025-05-12 23:15:30.461 +03:00 [DBG] Connection id "0HNCHGQ2DS108" started.
2025-05-12 23:15:30.508 +03:00 [DBG] Connection 0HNCHGQ2DS108 established using the following protocol: "Tls12"
2025-05-12 23:15:31.261 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 23:15:31.301 +03:00 [DBG] POST requests are not supported
2025-05-12 23:15:31.303 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 23:15:31.304 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 23:15:31.305 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:15:31.307 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:15:31.326 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:15:31.328 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 23:15:31.330 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:15:31.333 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:15:31.334 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:15:31.337 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:15:31.338 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:15:31.341 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:15:31.343 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:15:31.344 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:15:31.345 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 23:15:31.346 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:15:31.349 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:15:31.350 +03:00 [DBG] Connection id "0HNCHGQ2DS108", Request id "0HNCHGQ2DS108:00000001": started reading request body.
2025-05-12 23:15:31.352 +03:00 [DBG] Connection id "0HNCHGQ2DS108", Request id "0HNCHGQ2DS108:00000001": done reading request body.
2025-05-12 23:15:31.353 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:15:31.354 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:15:31.355 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:15:31.358 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:15:31.361 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:15:31.363 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:15:31.364 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:15:31.366 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.368 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.370 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:15:31.371 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:15:31.376 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-12 23:15:31.379 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:15:31.386 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:15:31.389 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.391 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.392 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 23:15:31.394 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.395 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:15:31.399 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.400 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.402 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:15:31.403 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:15:31.404 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:15:31.406 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:15:31.410 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:15:31.413 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.416 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.418 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.419 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-12 23:15:31.421 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.425 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (4ms).
2025-05-12 23:15:31.427 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:15:31.428 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:15:31.429 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:15:31.432 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.434 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:15:31.441 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.446 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.450 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:15:31.451 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:15:31.456 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-12 23:15:31.459 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:15:31.505 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:15:31.509 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.510 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 23:15:31.511 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.512 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:15:31.513 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.515 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:15:31.517 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.518 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.520 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.521 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:15:31.522 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:15:31.523 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:15:31.524 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.525 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.527 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:15:31.528 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:15:31.529 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:15:31.531 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:15:31.534 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:15:31.536 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:15:31.538 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.539 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 23:15:31.540 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.541 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:15:31.572 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.574 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:15:31.576 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:15:31.578 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:15:31.579 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:15:31.581 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:15:31.582 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:15:31.582 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:15:31.583 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 23:15:31.584 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 243.6918ms
2025-05-12 23:15:31.586 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:15:31.587 +03:00 [DBG] Connection id "0HNCHGQ2DS108" completed keep alive response.
2025-05-12 23:15:31.588 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:15:31.589 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.590 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:15:31.592 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 330.0075ms
2025-05-12 23:15:31.758 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 23:15:31.780 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:15:31.786 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 23:15:31.789 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 23:15:31.792 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:15:31.793 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:15:31.794 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:15:31.796 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:15:31.800 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 23:15:31.801 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:15:31.803 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:15:31.804 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:15:31.806 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:15:31.808 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:15:31.810 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:15:31.812 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:15:31.818 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 23:15:31.820 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 23:15:31.822 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:15:31.824 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:15:31.825 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 23:15:31.827 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 23:15:31.830 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:15:31.836 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:15:31.839 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:15:31.850 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:15:31.852 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:15:31.853 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:15:31.856 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 23:15:31.862 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 51.4619ms
2025-05-12 23:15:31.896 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:15:31.900 +03:00 [DBG] Connection id "0HNCHGQ2DS108" completed keep alive response.
2025-05-12 23:15:31.902 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 143.8131ms
2025-05-12 23:15:31.908 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 23:15:31.919 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:15:31.922 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 23:15:31.925 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 23:15:31.929 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:15:31.934 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:15:31.936 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:15:31.938 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:15:31.942 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 23:15:31.943 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:15:31.945 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:15:31.946 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:15:31.950 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:15:31.952 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:15:31.953 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:15:31.955 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:15:31.957 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:15:31.959 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:15:31.959 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:15:31.960 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.962 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.963 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:15:31.964 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:15:31.966 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:15:31.968 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:15:31.973 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:15:31.975 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.977 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.978 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.980 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.982 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:31.984 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.985 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-12 23:15:31.986 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:31.988 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:15:31.990 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:15:31.992 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:15:31.994 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:15:31.995 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:15:31.995 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:15:31.996 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:15:31.997 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:15:32.000 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 46.9918ms
2025-05-12 23:15:32.004 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:15:32.005 +03:00 [DBG] Connection id "0HNCHGQ2DS108" completed keep alive response.
2025-05-12 23:15:32.006 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:15:32.007 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:32.009 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:15:32.010 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 102.6886ms
2025-05-12 23:15:32.037 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A15%3A32&pageSize=10 - null null
2025-05-12 23:15:32.044 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:15:32.046 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 23:15:32.053 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 23:15:32.057 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:15:32.059 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:15:32.060 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:15:32.061 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:15:32.067 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 23:15:32.071 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:15:32.074 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:15:32.076 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:15:32.084 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:15:32.087 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:15:32.091 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:15:32.093 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:15:32.096 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:15:32.100 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 23:15:32.103 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:15:32.113 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:15:32.118 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 23:15:32.122 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 23:15:32.128 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:15:32.135 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:15:32.138 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:15:32.142 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:15:32.144 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:15:32.146 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:15:32.150 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:15:32.158 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:15:32.160 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-12 23:15:32.162 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:32.164 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:32.171 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:15:32.174 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:15:32.180 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-05-12 23:15:32.183 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:15:32.192 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:15:32.194 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.195 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.197 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.200 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.201 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.203 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.205 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.206 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.207 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.208 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.209 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:32.210 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 16ms reading results.
2025-05-12 23:15:32.212 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:32.213 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:15:32.216 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:15:32.219 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:15:32.220 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:15:32.221 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:15:32.222 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:15:32.223 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:15:32.224 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:15:32.225 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 134.5601ms
2025-05-12 23:15:32.228 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:15:32.229 +03:00 [DBG] Connection id "0HNCHGQ2DS108" completed keep alive response.
2025-05-12 23:15:32.230 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:15:32.232 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:32.235 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-12 23:15:32.237 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A15%3A32&pageSize=10 - 200 1343 application/json; charset=utf-8 199.6585ms
2025-05-12 23:15:32.250 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 23:15:32.253 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:15:32.254 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 23:15:32.255 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 23:15:32.257 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:15:32.258 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:15:32.259 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:15:32.260 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:15:32.262 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 23:15:32.267 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:15:32.269 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:15:32.270 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:15:32.272 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:15:32.274 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:15:32.276 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:15:32.277 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:15:32.356 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:15:32.359 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 23:15:32.370 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:15:32.380 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:15:32.387 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 23:15:32.395 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 23:15:32.404 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:15:32.410 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:15:32.413 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:15:32.417 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:15:32.472 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:15:32.483 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:15:32.500 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:15:32.537 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:15:32.539 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-12 23:15:32.542 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:32.545 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:32.548 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:15:32.551 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:15:32.554 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-12 23:15:32.556 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:15:32.701 +03:00 [INF] Executed DbCommand (145ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:15:32.721 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.723 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.724 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.726 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:15:32.727 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:32.730 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 26ms reading results.
2025-05-12 23:15:32.731 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:32.734 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 23:15:32.735 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:15:32.738 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:15:32.739 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:15:32.741 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:15:32.741 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:15:32.742 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:15:32.744 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:15:32.746 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 469.868ms
2025-05-12 23:15:32.747 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:15:32.752 +03:00 [DBG] Connection id "0HNCHGQ2DS108" completed keep alive response.
2025-05-12 23:15:32.753 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:15:32.755 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:15:32.756 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:15:32.758 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 508.7216ms
2025-05-12 23:15:32.767 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:15:32.768 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:15:42.772 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:15:42.773 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:15:50.952 +03:00 [DBG] Connection id "0HNCHGQ2DS108" reset.
2025-05-12 23:15:50.978 +03:00 [DBG] Connection id "0HNCHGQ2DS108" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:15:50.979 +03:00 [DBG] Connection id "0HNCHGQ2DS108" disconnecting.
2025-05-12 23:15:51.015 +03:00 [DBG] Connection id "0HNCHGQ2DS108" stopped.
2025-05-12 23:15:52.780 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:15:52.795 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:16:02.799 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:16:02.802 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:16:03.778 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-12 23:16:12.822 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-12 23:16:12.852 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0074ms - processed: 1 items - remaining: 1 items
2025-05-12 23:16:22.860 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:16:22.862 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:16:32.870 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:16:32.883 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:16:42.887 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:16:42.889 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:16:52.907 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:16:52.909 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:17:02.919 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:17:02.922 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:17:12.937 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:17:12.942 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:17:22.959 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:17:22.960 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:17:32.964 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:17:32.968 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:17:42.973 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:17:42.974 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-12 23:17:52.978 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:17:52.980 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:18:02.994 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:18:02.996 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:18:13.008 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:18:13.009 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:18:23.013 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:18:23.016 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:18:33.024 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:18:33.027 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:18:43.039 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:18:43.041 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:18:53.052 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:18:53.054 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:19:03.057 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:19:03.058 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-12 23:19:13.060 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:19:13.062 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:19:23.077 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:19:23.079 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-12 23:19:33.087 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:19:33.089 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:19:43.092 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:19:43.094 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:19:53.102 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:19:53.105 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:20:03.120 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:20:03.121 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:20:13.127 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:20:13.128 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:20:23.142 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:20:23.147 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:20:33.174 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:20:33.201 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:20:43.206 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:20:43.210 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:20:53.212 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:20:53.214 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-12 23:21:01.436 +03:00 [DBG] Connection id "0HNCHGQ2DS109" accepted.
2025-05-12 23:21:01.467 +03:00 [DBG] Connection id "0HNCHGQ2DS109" started.
2025-05-12 23:21:01.483 +03:00 [DBG] Connection 0HNCHGQ2DS109 established using the following protocol: "Tls12"
2025-05-12 23:21:01.594 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 23:21:01.598 +03:00 [DBG] POST requests are not supported
2025-05-12 23:21:01.599 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 23:21:01.601 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 23:21:01.603 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:21:01.604 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:21:01.609 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:21:01.610 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 23:21:01.612 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:21:01.614 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:21:01.617 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:21:01.620 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:21:01.622 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:21:01.623 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:21:01.626 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:21:01.627 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:21:01.628 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 23:21:01.630 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:21:01.635 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:21:01.637 +03:00 [DBG] Connection id "0HNCHGQ2DS109", Request id "0HNCHGQ2DS109:00000001": started reading request body.
2025-05-12 23:21:01.638 +03:00 [DBG] Connection id "0HNCHGQ2DS109", Request id "0HNCHGQ2DS109:00000001": done reading request body.
2025-05-12 23:21:01.640 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:21:01.641 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:21:01.643 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:21:01.644 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:21:01.648 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:21:01.652 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:21:01.653 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:21:01.654 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:01.700 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:01.706 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:21:01.708 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:21:01.711 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-12 23:21:01.712 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:21:01.742 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:21:01.744 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:01.746 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:01.749 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-12 23:21:01.751 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:01.752 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:21:01.754 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:01.757 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:01.759 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:21:01.760 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:21:01.761 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:21:01.762 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:21:01.770 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:21:01.774 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:01.776 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:01.777 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:01.779 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-12 23:21:01.780 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:01.782 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:21:01.785 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:21:01.786 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:21:01.787 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:21:01.789 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:01.791 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:21:01.793 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:01.796 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:01.800 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:21:01.802 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:21:01.803 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:21:01.812 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:21:01.906 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:21:02.001 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:02.002 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 23:21:02.006 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:02.007 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:21:02.009 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:02.010 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:21:02.040 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:02.044 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:02.049 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:02.051 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:21:02.053 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:21:02.054 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:21:02.055 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:02.057 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:02.058 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:21:02.059 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:21:02.061 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:21:02.062 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:21:02.069 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:21:02.071 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:21:02.073 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:02.074 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 23:21:02.076 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:02.077 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:21:02.079 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:02.081 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:21:02.085 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:21:02.087 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:21:02.089 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:21:02.090 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:21:02.091 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:21:02.092 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:21:02.093 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 23:21:02.095 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 471.3548ms
2025-05-12 23:21:02.097 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:21:02.101 +03:00 [DBG] Connection id "0HNCHGQ2DS109" completed keep alive response.
2025-05-12 23:21:02.102 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:21:02.103 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:02.105 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 23:21:02.107 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 513.4052ms
2025-05-12 23:21:02.325 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 23:21:02.364 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:21:02.368 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 23:21:02.369 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 23:21:02.372 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:21:02.437 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:21:02.438 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:21:02.440 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:21:02.442 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 23:21:02.473 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:21:02.475 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:21:02.479 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:21:02.503 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:21:02.504 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:21:02.506 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:21:02.508 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:21:02.511 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 23:21:02.512 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 23:21:02.513 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:21:02.521 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:21:02.535 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 23:21:02.536 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 23:21:02.539 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:21:02.542 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:21:02.544 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:21:02.557 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:21:02.557 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:21:02.559 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:21:02.560 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 23:21:02.563 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 57.4321ms
2025-05-12 23:21:02.568 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:21:02.569 +03:00 [DBG] Connection id "0HNCHGQ2DS109" completed keep alive response.
2025-05-12 23:21:02.573 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 247.171ms
2025-05-12 23:21:02.597 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 23:21:02.601 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:21:02.602 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 23:21:02.603 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 23:21:02.605 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:21:02.607 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:21:02.609 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:21:02.610 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:21:02.611 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 23:21:02.613 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:21:02.616 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:21:02.618 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:21:02.620 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:21:02.622 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:21:02.626 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:21:02.628 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:21:02.631 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:21:02.635 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:21:02.636 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 23:21:02.638 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:02.641 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:02.642 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:21:02.643 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:21:02.644 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:21:02.647 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:21:02.667 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:21:02.676 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:02.678 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:02.680 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:02.691 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:02.692 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:02.696 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:02.703 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 27ms reading results.
2025-05-12 23:21:02.709 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:02.710 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:21:02.717 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:21:02.721 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:21:02.723 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:21:02.726 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:21:02.726 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:21:02.727 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:21:02.728 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:21:02.729 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 102.793ms
2025-05-12 23:21:02.741 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:21:02.753 +03:00 [DBG] Connection id "0HNCHGQ2DS109" completed keep alive response.
2025-05-12 23:21:02.754 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:21:02.755 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:02.756 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:21:02.758 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 161.0142ms
2025-05-12 23:21:02.781 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A21%3A02&pageSize=10 - null null
2025-05-12 23:21:02.790 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:21:02.791 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 23:21:02.797 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 23:21:02.801 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:21:02.802 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:21:02.806 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:21:02.807 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:21:02.811 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 23:21:02.813 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:21:02.817 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:21:02.818 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:21:02.820 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:21:02.822 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:21:03.026 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:21:03.105 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:21:03.107 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:21:03.156 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 23:21:03.161 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:21:03.163 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:21:03.166 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 23:21:03.170 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 23:21:03.172 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:21:03.174 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:21:03.175 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:21:03.177 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:21:03.179 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:21:03.182 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:21:03.186 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:21:03.189 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:21:03.190 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:21:03.191 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:03.192 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:03.193 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:21:03.196 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:21:03.201 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-05-12 23:21:03.202 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:21:03.209 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:21:03.218 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.220 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.223 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.226 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.229 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.239 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:21:03.241 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.242 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:21:03.243 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.248 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.251 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.253 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.254 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:03.255 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 37ms reading results.
2025-05-12 23:21:03.257 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:03.258 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:21:03.260 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:21:03.262 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:21:03.263 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:21:03.264 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:21:03.267 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:21:03.268 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:21:03.269 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:21:03.270 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 244.4716ms
2025-05-12 23:21:03.272 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:21:03.273 +03:00 [DBG] Connection id "0HNCHGQ2DS109" completed keep alive response.
2025-05-12 23:21:03.274 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:21:03.275 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:03.277 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:21:03.278 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A21%3A02&pageSize=10 - 200 1343 application/json; charset=utf-8 497.715ms
2025-05-12 23:21:03.293 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 23:21:03.301 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:21:03.302 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 23:21:03.303 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 23:21:03.305 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:21:03.306 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:21:03.307 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:21:03.310 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:21:03.311 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 23:21:03.312 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:21:03.313 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:21:03.317 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:21:03.319 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:21:03.321 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:21:03.322 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:21:03.491 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:21:03.493 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:21:03.494 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 23:21:03.496 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:21:03.498 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:21:03.500 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 23:21:03.501 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 23:21:03.503 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:21:03.504 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:21:03.506 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:21:03.507 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:21:03.508 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:21:03.509 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:21:03.512 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:21:03.514 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:21:03.515 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:21:03.516 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:03.518 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:03.519 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:21:03.520 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:21:03.521 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:21:03.522 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:21:03.528 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:21:03.530 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.531 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.533 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.535 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:21:03.536 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:03.538 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-12 23:21:03.539 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:03.541 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:21:03.543 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:21:03.545 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:21:03.546 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:21:03.548 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:21:03.548 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:21:03.549 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:21:03.551 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:21:03.552 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 229.6505ms
2025-05-12 23:21:03.559 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:21:03.561 +03:00 [DBG] Connection id "0HNCHGQ2DS109" completed keep alive response.
2025-05-12 23:21:03.562 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:21:03.563 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:21:03.567 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-12 23:21:03.569 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 275.2643ms
2025-05-12 23:21:13.252 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:21:13.254 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:21:14.536 +03:00 [DBG] Connection id "0HNCHGQ2DS109" reset.
2025-05-12 23:21:14.540 +03:00 [DBG] Connection id "0HNCHGQ2DS109" disconnecting.
2025-05-12 23:21:14.544 +03:00 [DBG] Connection id "0HNCHGQ2DS109" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:21:14.545 +03:00 [DBG] Connection id "0HNCHGQ2DS109" stopped.
2025-05-12 23:21:23.260 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:21:23.265 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:21:33.276 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:21:33.278 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:21:43.285 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:21:43.287 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:21:53.298 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:21:53.302 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:22:03.308 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:22:03.310 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:22:13.325 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:22:13.327 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:22:23.330 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:22:23.332 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:22:33.348 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:22:33.350 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-12 23:22:43.356 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:22:43.358 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-05-12 23:22:53.374 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:22:53.376 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:23:02.516 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-12 23:23:03.393 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-12 23:23:03.414 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2025-05-12 23:23:13.423 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-12 23:23:13.424 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0146ms - processed: 1 items - remaining: 1 items
2025-05-12 23:23:23.436 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:23:23.438 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:23:33.441 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:23:33.442 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:23:43.457 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:23:43.460 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:23:45.491 +03:00 [DBG] Connection id "0HNCHGQ2DS10A" accepted.
2025-05-12 23:23:45.521 +03:00 [DBG] Connection id "0HNCHGQ2DS10A" started.
2025-05-12 23:23:45.538 +03:00 [DBG] Connection 0HNCHGQ2DS10A established using the following protocol: "Tls12"
2025-05-12 23:23:45.626 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 23:23:45.633 +03:00 [DBG] POST requests are not supported
2025-05-12 23:23:45.636 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 23:23:45.637 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 23:23:45.640 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:23:45.641 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:23:45.642 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:23:45.643 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 23:23:45.645 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:23:45.651 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:23:45.654 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:23:45.656 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:23:45.658 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:23:45.660 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:23:45.666 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:23:45.669 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:23:45.670 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 23:23:45.672 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:23:45.674 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:23:45.675 +03:00 [DBG] Connection id "0HNCHGQ2DS10A", Request id "0HNCHGQ2DS10A:00000001": started reading request body.
2025-05-12 23:23:45.677 +03:00 [DBG] Connection id "0HNCHGQ2DS10A", Request id "0HNCHGQ2DS10A:00000001": done reading request body.
2025-05-12 23:23:45.679 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:23:45.683 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:23:45.687 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:23:45.688 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:23:45.691 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:23:45.694 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:23:45.695 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 23:23:45.696 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.701 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.703 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:23:45.704 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:23:45.705 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:23:45.707 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:23:45.718 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:23:45.721 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:45.723 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.725 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-12 23:23:45.727 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.728 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:23:45.733 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.736 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.737 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:23:45.738 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:23:45.739 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:23:45.740 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:23:45.746 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:23:45.750 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:45.751 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:45.752 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.753 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-12 23:23:45.755 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.756 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:23:45.758 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:23:45.759 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:23:45.761 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:23:45.762 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:45.766 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:23:45.767 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.768 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.770 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:23:45.771 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:23:45.772 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:23:45.773 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:23:45.778 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:23:45.783 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.783 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 0ms reading results.
2025-05-12 23:23:45.784 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.785 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (0ms).
2025-05-12 23:23:45.786 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:45.787 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:23:45.789 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:45.791 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:45.792 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:45.793 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:23:45.793 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:23:45.794 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:23:45.795 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.799 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:45.802 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:23:45.803 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:23:45.805 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:23:45.806 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:23:45.911 +03:00 [INF] Executed DbCommand (105ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:23:45.977 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:23:46.008 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:46.129 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 151ms reading results.
2025-05-12 23:23:46.277 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:46.285 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (7ms).
2025-05-12 23:23:46.287 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:46.289 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:23:46.291 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:23:46.293 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:23:46.295 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:23:46.300 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:23:46.301 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:23:46.302 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:23:46.303 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 23:23:46.305 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 645.4428ms
2025-05-12 23:23:46.309 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:23:46.310 +03:00 [DBG] Connection id "0HNCHGQ2DS10A" completed keep alive response.
2025-05-12 23:23:46.312 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:23:46.318 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:46.320 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:23:46.323 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 697.8725ms
2025-05-12 23:23:46.746 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 23:23:46.757 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:23:46.758 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 23:23:46.759 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 23:23:46.761 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:23:46.762 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:23:46.762 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:23:46.768 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:23:46.770 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 23:23:46.771 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:23:46.773 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:23:46.775 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:23:46.777 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:23:46.778 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:23:46.782 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:23:46.784 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:23:46.785 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 23:23:46.786 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 23:23:46.787 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:23:46.788 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:23:46.789 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 23:23:46.790 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 23:23:46.791 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:23:46.792 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:23:46.793 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:23:46.794 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:23:46.795 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:23:46.803 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:23:46.803 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 23:23:46.804 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 22.9663ms
2025-05-12 23:23:46.826 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:23:46.827 +03:00 [DBG] Connection id "0HNCHGQ2DS10A" completed keep alive response.
2025-05-12 23:23:46.830 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 83.8806ms
2025-05-12 23:23:46.834 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 23:23:46.837 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:23:46.838 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 23:23:46.839 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 23:23:46.840 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:23:46.842 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:23:46.842 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:23:46.844 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:23:46.845 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 23:23:46.847 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:23:46.850 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:23:46.852 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:23:46.855 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:23:46.856 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:23:46.858 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:23:46.860 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:23:46.862 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:23:46.866 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:23:46.867 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:23:46.868 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:46.869 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:46.871 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:23:46.872 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:23:46.873 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:23:46.875 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:23:46.883 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:23:46.885 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:46.886 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:46.888 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:46.889 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:46.892 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:46.893 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:46.894 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-12 23:23:46.895 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:46.897 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 23:23:46.901 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:23:46.903 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:23:46.906 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:23:46.909 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:23:46.910 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:23:46.912 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:23:46.916 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:23:46.918 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 60.4198ms
2025-05-12 23:23:46.924 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:23:46.925 +03:00 [DBG] Connection id "0HNCHGQ2DS10A" completed keep alive response.
2025-05-12 23:23:46.927 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:23:46.930 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:46.935 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-05-12 23:23:46.974 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 139.7173ms
2025-05-12 23:23:46.994 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A23%3A46&pageSize=10 - null null
2025-05-12 23:23:47.055 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:23:47.057 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 23:23:47.058 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 23:23:47.059 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:23:47.061 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:23:47.064 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:23:47.067 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:23:47.069 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 23:23:47.071 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:23:47.072 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:23:47.074 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:23:47.076 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:23:47.078 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:23:47.085 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:23:47.087 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:23:47.090 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:23:47.091 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 23:23:47.093 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:23:47.097 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:23:47.103 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 23:23:47.104 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 23:23:47.106 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:23:47.109 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:23:47.116 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:23:47.118 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:23:47.120 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:23:47.122 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:23:47.125 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:23:47.128 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:23:47.129 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:23:47.130 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:47.133 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:47.134 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:23:47.136 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:23:47.137 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:23:47.138 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:23:47.151 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:23:47.154 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.161 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.171 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.179 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.190 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.193 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.201 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.212 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.219 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.225 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.229 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:47.238 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 84ms reading results.
2025-05-12 23:23:47.244 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:47.253 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (8ms).
2025-05-12 23:23:47.257 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:23:47.269 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:23:47.274 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:23:47.276 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:23:47.277 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:23:47.279 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:23:47.288 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:23:47.291 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 206.4604ms
2025-05-12 23:23:47.320 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:23:47.322 +03:00 [DBG] Connection id "0HNCHGQ2DS10A" completed keep alive response.
2025-05-12 23:23:47.323 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:23:47.324 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:47.326 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 23:23:47.329 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A23%3A46&pageSize=10 - 200 1343 application/json; charset=utf-8 334.8422ms
2025-05-12 23:23:47.334 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 23:23:47.337 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:23:47.337 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 23:23:47.338 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 23:23:47.340 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:23:47.341 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:23:47.342 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:23:47.342 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:23:47.343 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 23:23:47.345 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:23:47.346 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:23:47.350 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:23:47.352 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:23:47.354 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:23:47.355 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:23:47.357 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:23:47.358 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:23:47.360 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 23:23:47.362 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:23:47.366 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:23:47.367 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 23:23:47.369 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 23:23:47.370 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:23:47.372 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:23:47.373 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:23:47.374 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:23:47.375 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:23:47.377 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:23:47.379 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:23:47.381 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:23:47.384 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-12 23:23:47.385 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:47.386 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:47.387 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:23:47.388 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:23:47.390 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:23:47.391 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:23:47.397 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:23:47.401 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.402 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.404 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.405 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:23:47.407 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:47.411 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-12 23:23:47.416 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:47.419 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 23:23:47.425 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:23:47.428 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:23:47.435 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:23:47.437 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:23:47.511 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:23:47.513 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:23:47.519 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:23:47.523 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 167.3502ms
2025-05-12 23:23:47.529 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:23:47.530 +03:00 [DBG] Connection id "0HNCHGQ2DS10A" completed keep alive response.
2025-05-12 23:23:47.534 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:23:47.535 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:23:47.537 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:23:47.539 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 204.2515ms
2025-05-12 23:23:53.471 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:23:53.473 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:23:54.196 +03:00 [DBG] Connection id "0HNCHGQ2DS10A" reset.
2025-05-12 23:23:54.198 +03:00 [DBG] Connection id "0HNCHGQ2DS10A" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:23:54.201 +03:00 [DBG] Connection id "0HNCHGQ2DS10A" disconnecting.
2025-05-12 23:23:54.202 +03:00 [DBG] Connection id "0HNCHGQ2DS10A" stopped.
2025-05-12 23:24:03.481 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:24:03.486 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:24:13.494 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:24:13.496 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:24:23.515 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:24:23.519 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-05-12 23:24:33.534 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:24:33.536 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:24:43.539 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:24:43.541 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:24:53.545 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:24:53.549 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:25:03.564 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:25:03.566 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:25:13.570 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:25:13.571 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:25:23.587 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:25:23.589 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:25:33.591 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:25:33.592 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:25:43.596 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:25:43.598 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:25:46.795 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-12 23:25:53.614 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-12 23:25:53.616 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-05-12 23:26:03.627 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-12 23:26:03.637 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0108ms - processed: 1 items - remaining: 1 items
2025-05-12 23:26:13.643 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:26:13.645 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:26:23.664 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:26:23.665 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-12 23:26:33.679 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:26:33.681 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:26:43.685 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:26:43.686 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:26:53.712 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:26:53.768 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:27:03.783 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:27:03.784 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:27:13.792 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:27:13.793 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:27:23.810 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:27:23.814 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:27:33.817 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:27:33.819 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:27:43.822 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:27:43.824 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:27:53.825 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:27:53.826 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:28:03.826 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:28:03.828 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:28:13.836 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:28:13.838 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-05-12 23:28:23.843 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:28:23.844 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-05-12 23:28:33.847 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:28:33.848 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:28:43.864 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:28:43.865 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:28:53.878 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:28:53.881 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:29:03.895 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:29:03.897 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:29:13.909 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:29:13.911 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-05-12 23:29:23.917 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:29:23.919 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:29:33.931 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:29:33.933 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:29:43.945 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:29:43.947 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:29:53.955 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:29:53.957 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-12 23:30:03.970 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:30:03.972 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:30:13.976 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:30:13.981 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:30:23.983 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:30:23.990 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-12 23:30:34.000 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:30:34.005 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:30:44.019 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:30:44.020 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:30:54.023 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:30:54.030 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:31:04.035 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:31:04.037 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-05-12 23:31:14.051 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:31:14.055 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:31:24.057 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:31:24.059 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-12 23:31:34.073 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:31:34.076 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:31:44.091 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:31:44.093 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:31:54.099 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:31:54.101 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:32:04.105 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:32:04.107 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:32:14.119 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:32:14.126 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-05-12 23:32:24.136 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:32:24.139 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-12 23:32:34.149 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:32:34.195 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-12 23:32:44.200 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:32:44.203 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-12 23:32:54.213 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:32:54.228 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-05-12 23:33:04.232 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:33:04.236 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-05-12 23:33:14.253 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:33:14.256 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-12 23:33:24.286 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:33:24.313 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-12 23:33:28.841 +03:00 [DBG] Connection id "0HNCHGQ2DS10B" accepted.
2025-05-12 23:33:28.881 +03:00 [DBG] Connection id "0HNCHGQ2DS10B" started.
2025-05-12 23:33:28.898 +03:00 [DBG] Connection 0HNCHGQ2DS10B established using the following protocol: "Tls12"
2025-05-12 23:33:28.995 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 23:33:28.999 +03:00 [DBG] POST requests are not supported
2025-05-12 23:33:29.000 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 23:33:29.002 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 23:33:29.004 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:33:29.005 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:33:29.005 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:33:29.006 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 23:33:29.008 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:33:29.010 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:33:29.012 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:33:29.013 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:33:29.016 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:33:29.019 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:33:29.021 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:33:29.022 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:33:29.024 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 23:33:29.025 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:33:29.027 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:33:29.028 +03:00 [DBG] Connection id "0HNCHGQ2DS10B", Request id "0HNCHGQ2DS10B:00000001": started reading request body.
2025-05-12 23:33:29.030 +03:00 [DBG] Connection id "0HNCHGQ2DS10B", Request id "0HNCHGQ2DS10B:00000001": done reading request body.
2025-05-12 23:33:29.031 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:33:29.032 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:33:29.033 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:33:29.035 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:33:29.037 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:33:29.039 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:33:29.040 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:33:29.041 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.070 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.074 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:33:29.076 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:33:29.078 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-12 23:33:29.080 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:33:29.092 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:33:29.094 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:29.096 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.099 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-12 23:33:29.102 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.104 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:33:29.210 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.211 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.213 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:33:29.215 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:33:29.217 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:33:29.220 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:33:29.228 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:33:29.230 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:29.278 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:29.433 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.540 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 310ms reading results.
2025-05-12 23:33:29.542 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.544 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:33:29.546 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:33:29.548 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:33:29.550 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:33:29.555 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:29.557 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:33:29.558 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.561 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.563 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:33:29.564 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:33:29.566 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:33:29.572 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:33:29.580 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:33:29.583 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.592 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-12 23:33:29.594 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.596 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 23:33:29.599 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:29.606 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:33:29.609 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:29.621 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:29.623 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:29.625 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:33:29.626 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:33:29.627 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:33:29.629 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.631 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.632 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:33:29.637 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-05-12 23:33:29.638 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-12 23:33:29.639 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:33:29.660 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:33:29.663 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:33:29.666 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.667 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-12 23:33:29.672 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.673 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:33:29.675 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:29.677 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:33:29.679 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:33:29.684 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:33:29.692 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:33:29.700 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:33:29.707 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:33:29.714 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:33:29.715 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 23:33:29.716 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 696.9967ms
2025-05-12 23:33:29.717 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:33:29.729 +03:00 [DBG] Connection id "0HNCHGQ2DS10B" completed keep alive response.
2025-05-12 23:33:29.730 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:33:29.733 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:29.734 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:33:29.736 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 741.0376ms
2025-05-12 23:33:30.028 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 23:33:30.073 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:33:30.075 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 23:33:30.077 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 23:33:30.079 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:33:30.080 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:33:30.081 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:33:30.082 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:33:30.089 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 23:33:30.092 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:33:30.094 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:33:30.097 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:33:30.106 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:33:30.108 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:33:30.111 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:33:30.113 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:33:30.118 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 23:33:30.122 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 23:33:30.125 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:33:30.128 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:33:30.139 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 23:33:30.141 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 23:33:30.144 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:33:30.150 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:33:30.155 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:33:30.158 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:33:30.167 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:33:30.258 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:33:30.260 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 23:33:30.261 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 150.2027ms
2025-05-12 23:33:30.290 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:33:30.291 +03:00 [DBG] Connection id "0HNCHGQ2DS10B" completed keep alive response.
2025-05-12 23:33:30.292 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 264.3958ms
2025-05-12 23:33:30.297 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 23:33:30.300 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:33:30.303 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 23:33:30.305 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 23:33:30.307 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:33:30.309 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:33:30.311 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:33:30.312 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:33:30.313 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 23:33:30.315 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:33:30.316 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:33:30.319 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:33:30.322 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:33:30.324 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:33:30.325 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:33:30.359 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:33:30.393 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:33:30.395 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:33:30.396 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 23:33:30.398 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.400 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.401 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:33:30.404 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:33:30.406 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-12 23:33:30.407 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:33:30.412 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:33:30.415 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.416 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.418 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.421 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.423 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.425 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.426 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 11ms reading results.
2025-05-12 23:33:30.428 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.430 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:33:30.431 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:33:30.433 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:33:30.437 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:33:30.439 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:33:30.440 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:33:30.441 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:33:30.442 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:33:30.444 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 118.3861ms
2025-05-12 23:33:30.447 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:33:30.455 +03:00 [DBG] Connection id "0HNCHGQ2DS10B" completed keep alive response.
2025-05-12 23:33:30.457 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:33:30.460 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.462 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 23:33:30.467 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 170.2812ms
2025-05-12 23:33:30.493 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A33%3A30&pageSize=10 - null null
2025-05-12 23:33:30.497 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:33:30.498 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 23:33:30.500 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 23:33:30.503 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:33:30.504 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:33:30.505 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:33:30.506 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:33:30.508 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 23:33:30.510 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:33:30.512 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:33:30.513 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:33:30.514 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:33:30.516 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:33:30.517 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:33:30.519 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:33:30.520 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:33:30.522 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 23:33:30.523 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:33:30.525 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:33:30.527 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 23:33:30.529 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 23:33:30.531 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:33:30.533 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:33:30.534 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:33:30.537 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:33:30.538 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:33:30.540 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:33:30.542 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:33:30.544 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:33:30.545 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:33:30.546 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.547 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.549 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:33:30.550 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:33:30.551 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:33:30.554 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:33:30.560 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:33:30.562 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.564 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.565 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.567 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.568 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.569 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.571 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.573 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.574 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.576 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.577 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.579 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 16ms reading results.
2025-05-12 23:33:30.580 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.582 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:33:30.583 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:33:30.585 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:33:30.587 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:33:30.588 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:33:30.589 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:33:30.593 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:33:30.595 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:33:30.596 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 79.25ms
2025-05-12 23:33:30.603 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:33:30.605 +03:00 [DBG] Connection id "0HNCHGQ2DS10B" completed keep alive response.
2025-05-12 23:33:30.609 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:33:30.611 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.614 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 23:33:30.616 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A33%3A30&pageSize=10 - 200 1343 application/json; charset=utf-8 122.8927ms
2025-05-12 23:33:30.628 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 23:33:30.634 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:33:30.638 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 23:33:30.640 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 23:33:30.643 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:33:30.645 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:33:30.647 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:33:30.649 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:33:30.651 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 23:33:30.656 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:33:30.659 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:33:30.661 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:33:30.664 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:33:30.667 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:33:30.757 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:33:30.760 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:33:30.761 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:33:30.763 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 23:33:30.765 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:33:30.766 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:33:30.773 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 23:33:30.775 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 23:33:30.776 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:33:30.778 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:33:30.781 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:33:30.787 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:33:30.789 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:33:30.791 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:33:30.793 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:33:30.795 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:33:30.796 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:33:30.797 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.800 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.801 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:33:30.803 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:33:30.804 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:33:30.805 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:33:30.810 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:33:30.813 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.814 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.816 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.817 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:33:30.818 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.821 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-12 23:33:30.823 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.824 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:33:30.826 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:33:30.828 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:33:30.830 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:33:30.831 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:33:30.832 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:33:30.832 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:33:30.833 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:33:30.835 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 77.2168ms
2025-05-12 23:33:30.839 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:33:30.840 +03:00 [DBG] Connection id "0HNCHGQ2DS10B" completed keep alive response.
2025-05-12 23:33:30.842 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:33:30.843 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:33:30.877 +03:00 [DBG] Disposed connection to database '' on server '' (34ms).
2025-05-12 23:33:30.880 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 252.0895ms
2025-05-12 23:33:34.327 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:33:34.332 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0061ms - processed: 1 items - remaining: 0 items
2025-05-12 23:34:00.439 +03:00 [DBG] Connection id "0HNCHGQ2DS10B" reset.
2025-05-12 23:34:00.440 +03:00 [DBG] Connection id "0HNCHGQ2DS10B" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:34:00.442 +03:00 [DBG] Connection id "0HNCHGQ2DS10B" disconnecting.
2025-05-12 23:34:00.444 +03:00 [DBG] Connection id "0HNCHGQ2DS10B" stopped.
2025-05-12 23:34:57.256 +03:00 [DBG] Connection id "0HNCHGQ2DS10C" accepted.
2025-05-12 23:34:57.261 +03:00 [DBG] Connection id "0HNCHGQ2DS10C" started.
2025-05-12 23:34:57.297 +03:00 [DBG] Connection 0HNCHGQ2DS10C established using the following protocol: "Tls12"
2025-05-12 23:34:57.366 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 23:34:57.377 +03:00 [DBG] POST requests are not supported
2025-05-12 23:34:57.379 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 23:34:57.381 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 23:34:57.384 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:34:57.387 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:34:57.388 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:34:57.391 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 23:34:57.394 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:34:57.396 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:34:57.400 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:34:57.403 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:34:57.404 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:34:57.408 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:34:57.410 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:34:57.412 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:34:57.414 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 23:34:57.444 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:34:57.446 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:34:57.448 +03:00 [DBG] Connection id "0HNCHGQ2DS10C", Request id "0HNCHGQ2DS10C:00000001": started reading request body.
2025-05-12 23:34:57.450 +03:00 [DBG] Connection id "0HNCHGQ2DS10C", Request id "0HNCHGQ2DS10C:00000001": done reading request body.
2025-05-12 23:34:57.451 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:34:57.452 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:34:57.454 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:34:57.456 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:34:57.459 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:34:57.461 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:34:57.462 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:34:57.463 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.465 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.466 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:34:57.467 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:34:57.468 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:34:57.470 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:34:57.475 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:34:57.477 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:57.478 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.480 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-12 23:34:57.482 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.483 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:34:57.484 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.486 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.487 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:34:57.488 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:34:57.490 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:34:57.491 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:34:57.495 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:34:57.497 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:57.499 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:57.500 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.501 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-12 23:34:57.503 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.504 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:34:57.506 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:34:57.507 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:34:57.508 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:34:57.510 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:57.512 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:34:57.513 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.514 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.515 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:34:57.516 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:34:57.517 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:34:57.519 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:34:57.525 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:34:57.527 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.529 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 23:34:57.530 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.532 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:34:57.534 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:57.535 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:34:57.537 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:57.539 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:57.541 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:57.543 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:34:57.544 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:34:57.545 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:34:57.546 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.548 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.549 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:34:57.550 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:34:57.551 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:34:57.553 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:34:57.558 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:34:57.561 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:34:57.562 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.563 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-12 23:34:57.565 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.566 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:34:57.568 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:57.569 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:34:57.571 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:34:57.574 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:34:57.575 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:34:57.576 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:34:57.577 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:34:57.578 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:34:57.579 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 23:34:57.581 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 173.1871ms
2025-05-12 23:34:57.582 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:34:57.583 +03:00 [DBG] Connection id "0HNCHGQ2DS10C" completed keep alive response.
2025-05-12 23:34:57.584 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:34:57.585 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:57.587 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:34:57.598 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 231.6728ms
2025-05-12 23:34:57.905 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 23:34:57.926 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:34:57.927 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 23:34:57.928 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 23:34:57.930 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:34:57.931 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:34:57.931 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:34:57.932 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:34:57.933 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 23:34:57.943 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:34:57.945 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:34:57.946 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:34:57.948 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:34:57.949 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:34:57.950 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:34:57.954 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:34:57.958 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 23:34:57.962 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 23:34:57.965 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:34:57.975 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:34:57.978 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 23:34:57.981 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 23:34:57.986 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:34:57.988 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:34:57.993 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:34:57.995 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:34:57.995 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:34:57.996 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:34:58.016 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 23:34:58.020 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 69.7794ms
2025-05-12 23:34:58.027 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:34:58.029 +03:00 [DBG] Connection id "0HNCHGQ2DS10C" completed keep alive response.
2025-05-12 23:34:58.030 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 125.3912ms
2025-05-12 23:34:58.041 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 23:34:58.047 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:34:58.048 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 23:34:58.050 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 23:34:58.052 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:34:58.053 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:34:58.054 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:34:58.056 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:34:58.060 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 23:34:58.068 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:34:58.071 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:34:58.081 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:34:58.085 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:34:58.088 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:34:58.111 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:34:58.112 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:34:58.114 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:34:58.116 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:34:58.117 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:34:58.118 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.120 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.123 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:34:58.124 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:34:58.125 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:34:58.127 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:34:58.130 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:34:58.133 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.134 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.135 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.137 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.139 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.140 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.142 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-12 23:34:58.143 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.145 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:34:58.146 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:34:58.149 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:34:58.150 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:34:58.152 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:34:58.154 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:34:58.155 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:34:58.156 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:34:58.158 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 46.8455ms
2025-05-12 23:34:58.159 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:34:58.160 +03:00 [DBG] Connection id "0HNCHGQ2DS10C" completed keep alive response.
2025-05-12 23:34:58.161 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:34:58.162 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.163 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:34:58.164 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 122.9933ms
2025-05-12 23:34:58.190 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A34%3A58&pageSize=10 - null null
2025-05-12 23:34:58.193 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:34:58.194 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 23:34:58.195 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 23:34:58.197 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:34:58.198 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:34:58.199 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:34:58.200 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:34:58.202 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 23:34:58.204 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:34:58.207 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:34:58.209 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:34:58.212 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:34:58.214 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:34:58.216 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:34:58.218 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:34:58.220 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:34:58.221 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 23:34:58.225 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:34:58.227 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:34:58.229 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 23:34:58.235 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 23:34:58.237 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:34:58.240 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:34:58.242 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:34:58.244 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:34:58.246 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:34:58.249 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:34:58.252 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:34:58.254 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:34:58.256 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 23:34:58.258 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.260 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.262 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:34:58.264 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:34:58.265 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:34:58.266 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:34:58.274 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:34:58.284 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.286 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.288 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.291 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.292 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.293 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.298 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.301 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.303 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.308 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.313 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.315 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 30ms reading results.
2025-05-12 23:34:58.317 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.321 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-12 23:34:58.325 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:34:58.334 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:34:58.336 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:34:58.338 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:34:58.342 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:34:58.343 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:34:58.347 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:34:58.349 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 133.247ms
2025-05-12 23:34:58.377 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:34:58.378 +03:00 [DBG] Connection id "0HNCHGQ2DS10C" completed keep alive response.
2025-05-12 23:34:58.380 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:34:58.381 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.382 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:34:58.384 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A34%3A58&pageSize=10 - 200 1343 application/json; charset=utf-8 193.8875ms
2025-05-12 23:34:58.394 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 23:34:58.396 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:34:58.398 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 23:34:58.400 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 23:34:58.402 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:34:58.404 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:34:58.407 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:34:58.409 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:34:58.410 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 23:34:58.412 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:34:58.413 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:34:58.415 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:34:58.417 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:34:58.419 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:34:58.432 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:34:58.435 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:34:58.437 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:34:58.438 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 23:34:58.442 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:34:58.445 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:34:58.447 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 23:34:58.449 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 23:34:58.450 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:34:58.452 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:34:58.453 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:34:58.454 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:34:58.476 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:34:58.478 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:34:58.482 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:34:58.486 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:34:58.505 +03:00 [DBG] Created DbConnection. (18ms).
2025-05-12 23:34:58.506 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.509 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.511 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:34:58.512 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:34:58.514 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:34:58.516 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:34:58.529 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:34:58.532 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.534 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.535 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.537 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:34:58.541 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.543 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 10ms reading results.
2025-05-12 23:34:58.545 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.547 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:34:58.549 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:34:58.552 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:34:58.554 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:34:58.557 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:34:58.558 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:34:58.560 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:34:58.562 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:34:58.563 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 131.0572ms
2025-05-12 23:34:58.567 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:34:58.570 +03:00 [DBG] Connection id "0HNCHGQ2DS10C" completed keep alive response.
2025-05-12 23:34:58.572 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:34:58.577 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:34:58.580 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-12 23:34:58.584 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 189.7515ms
2025-05-12 23:35:30.122 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-12 23:35:40.124 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:35:40.126 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0057ms - processed: 1 items - remaining: 0 items
2025-05-12 23:36:12.267 +03:00 [DBG] Connection id "0HNCHGQ2DS10C" received FIN.
2025-05-12 23:36:12.270 +03:00 [DBG] Connection id "0HNCHGQ2DS10C" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:36:12.271 +03:00 [DBG] Connection id "0HNCHGQ2DS10C" disconnecting.
2025-05-12 23:36:12.273 +03:00 [DBG] Connection id "0HNCHGQ2DS10C" stopped.
2025-05-12 23:44:03.119 +03:00 [DBG] Connection id "0HNCHGQ2DS10D" accepted.
2025-05-12 23:44:03.124 +03:00 [DBG] Connection id "0HNCHGQ2DS10D" started.
2025-05-12 23:44:03.137 +03:00 [DBG] Connection 0HNCHGQ2DS10D established using the following protocol: "Tls12"
2025-05-12 23:44:03.226 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-12 23:44:03.249 +03:00 [DBG] POST requests are not supported
2025-05-12 23:44:03.250 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-12 23:44:03.251 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-12 23:44:03.252 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:44:03.253 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:44:03.254 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:44:03.257 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-12 23:44:03.260 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:44:03.262 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:44:03.267 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:44:03.268 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:44:03.273 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:44:03.274 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:44:03.276 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-12 23:44:03.277 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:44:03.280 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-12 23:44:03.282 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:44:03.284 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-12 23:44:03.292 +03:00 [DBG] Connection id "0HNCHGQ2DS10D", Request id "0HNCHGQ2DS10D:00000001": started reading request body.
2025-05-12 23:44:03.293 +03:00 [DBG] Connection id "0HNCHGQ2DS10D", Request id "0HNCHGQ2DS10D:00000001": done reading request body.
2025-05-12 23:44:03.295 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:44:03.297 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:44:03.299 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-12 23:44:03.302 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-12 23:44:03.305 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:44:03.307 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:44:03.311 +03:00 [DBG] Created DbConnection. (3ms).
2025-05-12 23:44:03.315 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.341 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.343 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:44:03.344 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:44:03.366 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (22ms).
2025-05-12 23:44:03.377 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:44:03.383 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-12 23:44:03.386 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:03.387 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.390 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-12 23:44:03.391 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.393 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:44:03.394 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.396 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.399 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:44:03.400 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:44:03.401 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:44:03.403 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:44:03.407 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-12 23:44:03.412 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:03.415 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:03.417 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.418 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-12 23:44:03.420 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.421 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:44:03.423 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:44:03.427 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:44:03.429 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:44:03.431 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:03.442 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:44:03.443 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.444 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.445 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:44:03.446 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-12 23:44:03.448 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-12 23:44:03.450 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:44:03.456 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-12 23:44:03.460 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.462 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-12 23:44:03.465 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.466 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:44:03.468 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:03.567 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:44:03.569 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:03.572 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:03.573 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:03.574 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-12 23:44:03.575 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-12 23:44:03.576 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-12 23:44:03.578 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.579 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.581 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:44:03.582 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:44:03.584 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:44:03.585 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:44:03.590 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-12 23:44:03.592 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 23:44:03.593 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.689 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 97ms reading results.
2025-05-12 23:44:03.723 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:03.726 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-12 23:44:03.728 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:03.918 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-12 23:44:03.941 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:44:03.944 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:44:03.948 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:44:03.951 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:44:04.021 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:44:04.023 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:44:04.026 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-12 23:44:04.029 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 754.6364ms
2025-05-12 23:44:04.085 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-12 23:44:04.086 +03:00 [DBG] Connection id "0HNCHGQ2DS10D" completed keep alive response.
2025-05-12 23:44:04.087 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:44:04.088 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.090 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 23:44:04.092 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 865.4126ms
2025-05-12 23:44:04.223 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-12 23:44:04.246 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:44:04.252 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-12 23:44:04.253 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-12 23:44:04.255 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:44:04.256 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:44:04.257 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:44:04.259 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:44:04.260 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-12 23:44:04.262 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:44:04.264 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:44:04.268 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:44:04.270 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:44:04.272 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:44:04.274 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:44:04.276 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-12 23:44:04.277 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-12 23:44:04.278 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-12 23:44:04.284 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:44:04.285 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-12 23:44:04.287 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-12 23:44:04.289 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-12 23:44:04.290 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:44:04.292 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:44:04.294 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:44:04.295 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:44:04.300 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:44:04.301 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:44:04.302 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-12 23:44:04.304 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 29.8054ms
2025-05-12 23:44:04.307 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-12 23:44:04.310 +03:00 [DBG] Connection id "0HNCHGQ2DS10D" completed keep alive response.
2025-05-12 23:44:04.312 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 89.4055ms
2025-05-12 23:44:04.325 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-12 23:44:04.331 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:44:04.333 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-12 23:44:04.334 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-12 23:44:04.336 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:44:04.337 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:44:04.338 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:44:04.339 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:44:04.340 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-12 23:44:04.342 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:44:04.344 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:44:04.345 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:44:04.347 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:44:04.349 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:44:04.351 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:44:04.352 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-12 23:44:04.354 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:44:04.356 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:44:04.357 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:44:04.358 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.360 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.361 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:44:04.362 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:44:04.363 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:44:04.364 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:44:04.368 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-12 23:44:04.371 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.372 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.374 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.375 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.376 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.378 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.379 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-12 23:44:04.382 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.383 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:44:04.385 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:44:04.387 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:44:04.388 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:44:04.390 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:44:04.390 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:44:04.391 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:44:04.393 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:44:04.394 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 43.4442ms
2025-05-12 23:44:04.396 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-12 23:44:04.397 +03:00 [DBG] Connection id "0HNCHGQ2DS10D" completed keep alive response.
2025-05-12 23:44:04.398 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:44:04.399 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.401 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 23:44:04.402 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 77.0296ms
2025-05-12 23:44:04.431 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A44%3A04&pageSize=10 - null null
2025-05-12 23:44:04.435 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:44:04.437 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-12 23:44:04.438 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-12 23:44:04.440 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:44:04.441 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:44:04.442 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:44:04.444 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:44:04.445 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-12 23:44:04.449 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:44:04.454 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:44:04.456 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:44:04.459 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:44:04.461 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:44:04.462 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:44:04.466 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-12 23:44:04.467 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:44:04.470 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-12 23:44:04.472 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:44:04.474 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:44:04.475 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-12 23:44:04.477 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-12 23:44:04.479 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:44:04.483 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:44:04.486 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:44:04.488 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:44:04.489 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-12 23:44:04.491 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-12 23:44:04.493 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:44:04.497 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:44:04.500 +03:00 [DBG] Created DbConnection. (3ms).
2025-05-12 23:44:04.502 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.503 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.505 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:44:04.506 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:44:04.508 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:44:04.509 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:44:04.518 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-12 23:44:04.521 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.523 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.524 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.526 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.527 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.531 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.533 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.535 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.537 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.539 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.540 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.542 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 20ms reading results.
2025-05-12 23:44:04.543 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.546 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-12 23:44:04.550 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:44:04.553 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:44:04.554 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:44:04.556 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:44:04.557 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:44:04.558 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:44:04.560 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:44:04.562 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 99.2704ms
2025-05-12 23:44:04.563 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-12 23:44:04.565 +03:00 [DBG] Connection id "0HNCHGQ2DS10D" completed keep alive response.
2025-05-12 23:44:04.566 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:44:04.580 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.583 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-12 23:44:04.584 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T20%3A44%3A04&pageSize=10 - 200 1343 application/json; charset=utf-8 152.7615ms
2025-05-12 23:44:04.590 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-12 23:44:04.593 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:44:04.594 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-12 23:44:04.595 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-12 23:44:04.596 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:44:04.598 +03:00 [DBG] Successfully validated the token.
2025-05-12 23:44:04.599 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-12 23:44:04.600 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:44:04.601 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-12 23:44:04.603 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:44:04.604 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:44:04.606 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-12 23:44:04.608 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:44:04.610 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-12 23:44:04.612 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:44:04.613 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-12 23:44:04.614 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:44:04.615 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-12 23:44:04.616 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-12 23:44:04.617 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-12 23:44:04.619 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-12 23:44:04.620 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-12 23:44:04.621 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-12 23:44:04.623 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-12 23:44:04.625 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:44:04.905 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:44:04.907 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-12 23:44:04.908 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-12 23:44:04.910 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-12 23:44:04.913 +03:00 [DBG] Creating DbConnection.
2025-05-12 23:44:04.913 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 23:44:04.914 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.916 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.917 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 23:44:04.918 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 23:44:04.920 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 23:44:04.921 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:44:04.926 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-12 23:44:04.929 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.930 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.933 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.935 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 23:44:04.936 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.938 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-12 23:44:04.939 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.941 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-12 23:44:04.942 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-12 23:44:04.944 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-12 23:44:04.946 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-12 23:44:04.947 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-12 23:44:04.948 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-12 23:44:04.950 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-12 23:44:04.951 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-12 23:44:04.953 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 341.4553ms
2025-05-12 23:44:04.957 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-12 23:44:04.959 +03:00 [DBG] Connection id "0HNCHGQ2DS10D" completed keep alive response.
2025-05-12 23:44:04.962 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-12 23:44:04.963 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-12 23:44:04.968 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-05-12 23:44:04.971 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 380.8106ms
2025-05-12 23:44:23.744 +03:00 [DBG] Connection id "0HNCHGQ2DS10D" reset.
2025-05-12 23:44:23.769 +03:00 [DBG] Connection id "0HNCHGQ2DS10D" disconnecting.
2025-05-12 23:44:23.773 +03:00 [DBG] Connection id "0HNCHGQ2DS10D" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:44:23.785 +03:00 [DBG] Connection id "0HNCHGQ2DS10D" stopped.
2025-05-12 23:46:04.279 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-12 23:46:14.283 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-12 23:46:14.287 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0059ms - processed: 1 items - remaining: 0 items
