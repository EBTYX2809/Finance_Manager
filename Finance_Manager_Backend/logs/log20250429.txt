2025-04-29 19:23:17.923 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-29 19:23:24.327 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 19:23:25.191 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2025-04-29 19:23:25.912 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<User>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        User entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            User instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(User);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (User)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Email>k__BackingField = dataReader.GetString(2);
                                instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                instance.<Role>k__BackingField = dataReader.GetString(5);
                                instance.<Salt>k__BackingField = dataReader.GetString(6);
                                instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 19:23:26.131 +03:00 [DBG] Creating DbConnection.
2025-04-29 19:23:26.579 +03:00 [DBG] Created DbConnection. (566ms).
2025-04-29 19:23:26.584 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:28.512 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:28.529 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:23:28.542 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (12ms).
2025-04-29 19:23:28.547 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (21ms).
2025-04-29 19:23:28.573 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-04-29 19:23:28.763 +03:00 [INF] Executed DbCommand (199ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-04-29 19:23:28.913 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:29.012 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:29.029 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:29.040 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 262ms reading results.
2025-04-29 19:23:29.045 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:29.056 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (10ms).
2025-04-29 19:23:29.062 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 19:23:29.104 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 19:23:29.120 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 19:23:29.410 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:29.418 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:29.427 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:23:29.428 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:23:29.432 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-04-29 19:23:29.439 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
2025-04-29 19:23:29.792 +03:00 [INF] Executed DbCommand (358ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
2025-04-29 19:23:29.809 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:29.814 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 17ms reading results.
2025-04-29 19:23:29.820 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:29.823 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-04-29 19:23:29.831 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:29.835 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-04-29 19:23:29.840 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-04-29 19:23:29.850 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 19:23:29.856 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:29.860 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:29.862 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:23:29.863 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:23:29.865 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 19:23:29.867 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-04-29 19:23:29.969 +03:00 [INF] Executed DbCommand (102ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-04-29 19:23:29.981 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:29.992 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:29.995 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:29.997 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:29.999 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:30.000 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:30.002 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:30.004 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:30.006 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:30.007 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:30.010 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:30.011 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 40ms reading results.
2025-04-29 19:23:30.013 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:30.014 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:23:30.016 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 19:23:30.017 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 19:23:30.025 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 19:23:30.096 +03:00 [DBG] Executing 5 update commands as a batch.
2025-04-29 19:23:30.100 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:30.103 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:30.106 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-04-29 19:23:30.117 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-04-29 19:23:30.119 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:23:30.120 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:23:30.123 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 19:23:30.124 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-04-29 19:23:30.154 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-04-29 19:23:30.158 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:30.161 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-04-29 19:23:30.167 +03:00 [DBG] Committing transaction.
2025-04-29 19:23:30.300 +03:00 [DBG] Committed transaction.
2025-04-29 19:23:30.302 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:30.304 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:23:30.307 +03:00 [DBG] Disposing transaction.
2025-04-29 19:23:30.309 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:30.312 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:30.314 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:30.316 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:30.319 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:30.321 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-04-29 19:23:30.324 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 19:23:30.330 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:30.335 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-04-29 19:23:31.224 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 19:23:31.253 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-04-29 19:23:31.596 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 19:23:31.621 +03:00 [DBG] Creating DbConnection.
2025-04-29 19:23:31.622 +03:00 [DBG] Created DbConnection. (1ms).
2025-04-29 19:23:31.624 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:31.625 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:31.627 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:23:31.628 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:23:31.631 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 19:23:31.633 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 19:23:31.724 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 19:23:31.730 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:31.731 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-04-29 19:23:31.733 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:31.734 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:23:31.787 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:31.871 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:31.873 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 19:23:31.875 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 19:23:31.876 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 19:23:31.950 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:31.952 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:31.953 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:23:31.954 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:23:31.956 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 19:23:31.958 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 5), @p4='?' (Size = 30), @p5='?' (Size = 3), @p6='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id], INSERTED.[primary_currency]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-29 19:23:32.178 +03:00 [INF] Executed DbCommand (220ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 5), @p4='?' (Size = 30), @p5='?' (Size = 3), @p6='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id], INSERTED.[primary_currency]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-29 19:23:32.233 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:32.237 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:32.239 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 57ms reading results.
2025-04-29 19:23:32.241 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:32.242 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:23:32.248 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:32.253 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-04-29 19:23:33.038 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __userDTO_Id_0)'
2025-04-29 19:23:33.043 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__userDTO_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__userDTO_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 19:23:33.049 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.051 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.052 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:23:33.054 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:23:33.055 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 19:23:33.057 +03:00 [DBG] Executing DbCommand [Parameters=[@__userDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__userDTO_Id_0
2025-04-29 19:23:33.113 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@__userDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__userDTO_Id_0
2025-04-29 19:23:33.118 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.121 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-04-29 19:23:33.124 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.126 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:23:33.139 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.143 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.146 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.148 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.150 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.152 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.155 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.157 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.159 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.161 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.164 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 19:23:33.166 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 19:23:33.169 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 19:23:33.175 +03:00 [DBG] Executing 5 update commands as a batch.
2025-04-29 19:23:33.181 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.183 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.184 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:23:33.186 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:23:33.188 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 19:23:33.190 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-04-29 19:23:33.219 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-04-29 19:23:33.224 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.227 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.231 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.233 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.235 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.237 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.239 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 15ms reading results.
2025-04-29 19:23:33.241 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.242 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:23:33.244 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.247 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.249 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.251 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.253 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.255 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-04-29 19:23:33.259 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.532 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.534 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.536 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.538 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.539 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.541 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.543 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.544 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.546 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.548 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.550 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.551 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.553 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.554 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.556 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.558 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.559 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.561 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.563 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.565 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.567 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.568 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.570 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.571 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.573 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.574 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.576 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.578 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.580 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.582 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.584 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.585 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.587 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.589 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.591 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.593 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.600 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.602 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.604 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.606 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 19:23:33.608 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 19:23:33.616 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 19:23:33.619 +03:00 [DBG] Executing 20 update commands as a batch.
2025-04-29 19:23:33.621 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.623 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.625 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:23:33.630 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-04-29 19:23:33.633 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-04-29 19:23:33.635 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-04-29 19:23:33.669 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-04-29 19:23:33.675 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.678 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.681 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.683 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.685 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.687 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.689 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.692 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.694 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.697 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.699 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.701 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.703 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.705 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.707 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.708 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.710 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.713 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.715 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.717 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.719 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.721 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 47ms reading results.
2025-04-29 19:23:33.723 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.725 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:23:33.727 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.731 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.733 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.736 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.738 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.740 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.742 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.744 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.747 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.749 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.751 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.753 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.755 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.757 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.759 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.761 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.763 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.766 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.768 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.769 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.771 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 20 entities written to the database.
2025-04-29 19:23:33.774 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.787 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.788 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.790 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.791 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.793 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.794 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.797 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.799 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 19:23:33.800 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 19:23:33.804 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 19:23:33.806 +03:00 [DBG] Executing 4 update commands as a batch.
2025-04-29 19:23:33.808 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.809 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.810 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:23:33.812 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:23:33.814 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 19:23:33.815 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-04-29 19:23:33.936 +03:00 [INF] Executed DbCommand (121ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-04-29 19:23:33.942 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.945 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.948 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.949 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:33.951 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.953 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 12ms reading results.
2025-04-29 19:23:33.955 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.956 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:23:33.961 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.964 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.968 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.970 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:33.972 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 4 entities written to the database.
2025-04-29 19:23:33.975 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 19:23:33.977 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:33.981 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-04-29 19:23:33.999 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 19:23:34.065 +03:00 [DBG] Creating DbConnection.
2025-04-29 19:23:34.066 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-29 19:23:34.067 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:34.069 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:34.070 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:23:34.071 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:23:34.072 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 19:23:34.074 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 19:23:34.080 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 19:23:34.085 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:34.088 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-04-29 19:23:34.093 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:34.095 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:23:34.113 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:34.115 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:34.118 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 19:23:34.119 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 19:23:34.120 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 19:23:34.122 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:34.124 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:34.126 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:23:34.130 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 19:23:34.132 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-04-29 19:23:34.135 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 5), @p4='?' (Size = 30), @p5='?' (Size = 3), @p6='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id], INSERTED.[primary_currency]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-29 19:23:34.150 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 5), @p4='?' (Size = 30), @p5='?' (Size = 3), @p6='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id], INSERTED.[primary_currency]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-29 19:23:34.166 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:23:34.170 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:34.172 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-04-29 19:23:34.174 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:34.176 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:23:34.178 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:23:34.182 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-04-29 19:23:34.184 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 19:23:34.188 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:23:34.190 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 19:23:34.557 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-29 19:23:34.717 +03:00 [DBG] Hosting starting
2025-04-29 19:23:34.843 +03:00 [INF] User profile is available. Using 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-29 19:23:34.861 +03:00 [DBG] Reading data from file 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys\key-036e1e5f-5347-47d7-8236-0b64ed0a76a1.xml'.
2025-04-29 19:23:34.870 +03:00 [DBG] Found key {036e1e5f-5347-47d7-8236-0b64ed0a76a1}.
2025-04-29 19:23:34.881 +03:00 [DBG] Considering key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} with expiration date 2025-07-16 20:11:06Z as default key.
2025-04-29 19:23:34.885 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-29 19:23:34.886 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-29 19:23:34.889 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-29 19:23:34.892 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-29 19:23:34.894 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-29 19:23:34.897 +03:00 [DBG] Using key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} as the default key.
2025-04-29 19:23:34.899 +03:00 [DBG] Key ring with default key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} was loaded during application startup.
2025-04-29 19:23:34.903 +03:00 [DBG] Middleware loaded
2025-04-29 19:23:34.905 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16531 B).
2025-04-29 19:23:34.907 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-04-29 19:23:35.196 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-04-29 19:23:35.467 +03:00 [INF] Now listening on: https://localhost:49464
2025-04-29 19:23:35.471 +03:00 [INF] Now listening on: http://localhost:49465
2025-04-29 19:23:35.473 +03:00 [DBG] Loaded hosting startup assembly Finance_Manager_Backend
2025-04-29 19:23:35.474 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-04-29 19:23:35.475 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-04-29 19:23:35.477 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-04-29 19:23:35.854 +03:00 [DBG] Connection id "0HNC778OI10DS" accepted.
2025-04-29 19:23:35.856 +03:00 [DBG] Connection id "0HNC778OI10DS" started.
2025-04-29 19:23:35.859 +03:00 [DBG] Connection id "0HNC778OI10DT" accepted.
2025-04-29 19:23:35.860 +03:00 [DBG] Connection id "0HNC778OI10DT" started.
2025-04-29 19:23:35.885 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-29 19:23:35.886 +03:00 [INF] Hosting environment: Development
2025-04-29 19:23:35.887 +03:00 [INF] Content root path: G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend
2025-04-29 19:23:35.888 +03:00 [DBG] Hosting started
2025-04-29 19:23:36.046 +03:00 [DBG] Connection id "0HNC778OI10DT" received FIN.
2025-04-29 19:23:36.046 +03:00 [DBG] Connection id "0HNC778OI10DS" received FIN.
2025-04-29 19:23:36.056 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-04-29 19:23:36.056 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-04-29 19:23:36.226 +03:00 [DBG] Connection id "0HNC778OI10DS" stopped.
2025-04-29 19:23:36.234 +03:00 [DBG] Connection id "0HNC778OI10DT" stopped.
2025-04-29 19:23:36.251 +03:00 [DBG] Connection id "0HNC778OI10DS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 19:23:36.253 +03:00 [DBG] Connection id "0HNC778OI10DT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 19:23:40.328 +03:00 [DBG] Connection id "0HNC778OI10DU" accepted.
2025-04-29 19:23:40.398 +03:00 [DBG] Connection id "0HNC778OI10DU" started.
2025-04-29 19:23:40.487 +03:00 [DBG] Connection 0HNC778OI10DU established using the following protocol: "Tls12"
2025-04-29 19:23:40.678 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/swagger - null null
2025-04-29 19:23:40.974 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-29 19:23:40.987 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/swagger - 301 0 null 309.3302ms
2025-04-29 19:23:40.996 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/swagger/index.html - null null
2025-04-29 19:23:41.180 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-04-29 19:23:41.192 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-04-29 19:23:41.200 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-04-29 19:23:41.210 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-04-29 19:23:41.212 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/swagger/index.html - 200 null text/html;charset=utf-8 216.6837ms
2025-04-29 19:23:41.505 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/swagger/swagger-ui.css - null null
2025-04-29 19:23:41.514 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/swagger/index.css - null null
2025-04-29 19:23:41.532 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/swagger/swagger-ui-bundle.js - null null
2025-04-29 19:23:41.548 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/swagger/swagger-ui-standalone-preset.js - null null
2025-04-29 19:23:41.564 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/swagger/index.js - null null
2025-04-29 19:23:41.780 +03:00 [INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
2025-04-29 19:23:41.782 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/swagger/index.css - 200 202 text/css 267.6774ms
2025-04-29 19:23:41.790 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/_vs/browserLink - null null
2025-04-29 19:23:41.801 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/_framework/aspnetcore-browser-refresh.js - null null
2025-04-29 19:23:41.817 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/swagger/index.js - 200 null application/javascript;charset=utf-8 252.8551ms
2025-04-29 19:23:41.910 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-04-29 19:23:41.940 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-04-29 19:23:41.947 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-04-29 19:23:41.949 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/swagger/swagger-ui.css - 200 154949 text/css 444.5593ms
2025-04-29 19:23:41.950 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/swagger/swagger-ui-standalone-preset.js - 200 229223 text/javascript 401.6498ms
2025-04-29 19:23:41.952 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/_framework/aspnetcore-browser-refresh.js - 200 16531 application/javascript; charset=utf-8 151.0279ms
2025-04-29 19:23:42.215 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-04-29 19:23:42.262 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/swagger/swagger-ui-bundle.js - 200 1466908 text/javascript 729.2135ms
2025-04-29 19:23:42.240 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/_vs/browserLink - 200 null text/javascript; charset=UTF-8 449.1423ms
2025-04-29 19:23:42.795 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/swagger/v1/swagger.json - null null
2025-04-29 19:23:43.278 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 482.5806ms
2025-04-29 19:23:50.473 +03:00 [DBG] Connection id "0HNC778OI10DU" received FIN.
2025-04-29 19:23:50.483 +03:00 [DBG] Connection id "0HNC778OI10DU" is closed. The last processed stream ID was 19.
2025-04-29 19:23:50.484 +03:00 [DBG] The connection queue processing loop for 0HNC778OI10DU completed.
2025-04-29 19:23:50.489 +03:00 [DBG] Connection id "0HNC778OI10DU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 19:23:50.504 +03:00 [DBG] Connection id "0HNC778OI10DU" stopped.
2025-04-29 19:24:19.910 +03:00 [DBG] Connection id "0HNC778OI10DV" accepted.
2025-04-29 19:24:19.913 +03:00 [DBG] Connection id "0HNC778OI10DV" started.
2025-04-29 19:24:19.921 +03:00 [DBG] Connection 0HNC778OI10DV established using the following protocol: "Tls12"
2025-04-29 19:24:19.924 +03:00 [INF] Request starting HTTP/2 POST https://localhost:49464/api/Auth/authenticate - application/json 62
2025-04-29 19:24:19.927 +03:00 [DBG] POST requests are not supported
2025-04-29 19:24:19.952 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/authenticate'
2025-04-29 19:24:19.955 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)' with route pattern 'api/Auth/authenticate' is valid for the request path '/api/Auth/authenticate'
2025-04-29 19:24:19.958 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-04-29 19:24:20.060 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-29 19:24:20.063 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-04-29 19:24:20.088 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokenDTO]] Authenticate(Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-04-29 19:24:20.091 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 19:24:20.093 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 19:24:20.094 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 19:24:20.097 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 19:24:20.098 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 19:24:20.104 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-04-29 19:24:20.107 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-04-29 19:24:20.143 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-04-29 19:24:20.148 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' using the name '' in request data ...
2025-04-29 19:24:20.152 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 19:24:20.162 +03:00 [DBG] Connection id "0HNC778OI10DV", Request id "0HNC778OI10DV:00000001": started reading request body.
2025-04-29 19:24:20.164 +03:00 [DBG] Connection id "0HNC778OI10DV", Request id "0HNC778OI10DV:00000001": done reading request body.
2025-04-29 19:24:20.178 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'
2025-04-29 19:24:20.179 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-04-29 19:24:20.181 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-04-29 19:24:20.182 +03:00 [DBG] Attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-04-29 19:24:20.192 +03:00 [DBG] Done attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-04-29 19:24:20.277 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 19:24:20.282 +03:00 [DBG] Creating DbConnection.
2025-04-29 19:24:20.284 +03:00 [DBG] Created DbConnection. (2ms).
2025-04-29 19:24:20.285 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:24:20.287 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:24:20.289 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:24:20.291 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:24:20.292 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 19:24:20.294 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 19:24:20.302 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 19:24:20.310 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:24:20.312 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:24:20.314 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-04-29 19:24:20.317 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:24:20.319 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:24:20.347 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 19:24:20.353 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 19:24:20.357 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 19:24:20.359 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 19:24:20.360 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 19:24:20.362 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 19:24:20.364 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokenDTO'.
2025-04-29 19:24:20.381 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend) in 274.5791ms
2025-04-29 19:24:20.383 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-04-29 19:24:20.388 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 19:24:20.403 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:24:20.408 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-04-29 19:24:20.412 +03:00 [INF] Request finished HTTP/2 POST https://localhost:49464/api/Auth/authenticate - 200 null application/json; charset=utf-8 487.9944ms
2025-04-29 19:24:20.493 +03:00 [DBG] Connection id "0HNC778OI10DV" received FIN.
2025-04-29 19:24:20.536 +03:00 [DBG] Connection id "0HNC778OI10DV" is closed. The last processed stream ID was 1.
2025-04-29 19:24:20.536 +03:00 [DBG] The connection queue processing loop for 0HNC778OI10DV completed.
2025-04-29 19:24:20.547 +03:00 [DBG] Connection id "0HNC778OI10DV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 19:24:20.565 +03:00 [DBG] Connection id "0HNC778OI10DV" stopped.
2025-04-29 19:24:34.157 +03:00 [DBG] Connection id "0HNC778OI10E0" accepted.
2025-04-29 19:24:34.207 +03:00 [DBG] Connection id "0HNC778OI10E0" started.
2025-04-29 19:24:34.217 +03:00 [DBG] Connection 0HNC778OI10E0 established using the following protocol: "Tls12"
2025-04-29 19:24:34.220 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:49464/api/Savings/3 - null null
2025-04-29 19:24:34.224 +03:00 [DBG] DELETE requests are not supported
2025-04-29 19:24:34.226 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings/3'
2025-04-29 19:24:34.231 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.Delete (Finance_Manager_Backend)' with route pattern 'api/Savings/{id}' is valid for the request path '/api/Savings/3'
2025-04-29 19:24:34.234 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.Delete (Finance_Manager_Backend)'
2025-04-29 19:24:34.237 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-29 19:24:34.241 +03:00 [DBG] Policy authentication schemes  did not succeed
2025-04-29 19:24:34.249 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-29 19:24:34.256 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-29 19:24:34.257 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:49464/api/Savings/3 - 401 0 null 36.9996ms
2025-04-29 19:24:40.518 +03:00 [DBG] Connection id "0HNC778OI10E0" received FIN.
2025-04-29 19:24:40.522 +03:00 [DBG] Connection id "0HNC778OI10E0" is closed. The last processed stream ID was 1.
2025-04-29 19:24:40.522 +03:00 [DBG] The connection queue processing loop for 0HNC778OI10E0 completed.
2025-04-29 19:24:40.523 +03:00 [DBG] Connection id "0HNC778OI10E0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 19:24:40.530 +03:00 [DBG] Connection id "0HNC778OI10E0" stopped.
2025-04-29 19:24:53.407 +03:00 [DBG] Connection id "0HNC778OI10E1" accepted.
2025-04-29 19:24:53.430 +03:00 [DBG] Connection id "0HNC778OI10E1" started.
2025-04-29 19:24:53.434 +03:00 [DBG] Connection 0HNC778OI10E1 established using the following protocol: "Tls12"
2025-04-29 19:24:53.437 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:49464/api/Administrator/7 - null null
2025-04-29 19:24:53.440 +03:00 [DBG] DELETE requests are not supported
2025-04-29 19:24:53.442 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Administrator/7'
2025-04-29 19:24:53.447 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend)' with route pattern 'api/Administrator/{id}' is valid for the request path '/api/Administrator/7'
2025-04-29 19:24:53.449 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend)'
2025-04-29 19:24:54.465 +03:00 [DBG] Successfully validated the token.
2025-04-29 19:24:54.467 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 19:24:54.471 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-04-29 19:24:54.473 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-29 19:24:54.474 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:49464/api/Administrator/7 - 403 0 null 1037.3398ms
2025-04-29 19:25:00.543 +03:00 [DBG] Connection id "0HNC778OI10E1" received FIN.
2025-04-29 19:25:00.547 +03:00 [DBG] Connection id "0HNC778OI10E1" is closed. The last processed stream ID was 1.
2025-04-29 19:25:00.547 +03:00 [DBG] The connection queue processing loop for 0HNC778OI10E1 completed.
2025-04-29 19:25:00.549 +03:00 [DBG] Connection id "0HNC778OI10E1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 19:25:00.558 +03:00 [DBG] Connection id "0HNC778OI10E1" stopped.
2025-04-29 19:30:50.918 +03:00 [DBG] Connection id "0HNC778OI10E2" accepted.
2025-04-29 19:30:50.957 +03:00 [DBG] Connection id "0HNC778OI10E2" started.
2025-04-29 19:30:50.968 +03:00 [DBG] Connection 0HNC778OI10E2 established using the following protocol: "Tls12"
2025-04-29 19:30:50.970 +03:00 [INF] Request starting HTTP/2 POST https://localhost:49464/api/Auth/authenticate - application/json 79
2025-04-29 19:30:50.973 +03:00 [DBG] POST requests are not supported
2025-04-29 19:30:50.975 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/authenticate'
2025-04-29 19:30:50.976 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)' with route pattern 'api/Auth/authenticate' is valid for the request path '/api/Auth/authenticate'
2025-04-29 19:30:50.978 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-04-29 19:30:50.980 +03:00 [DBG] Successfully validated the token.
2025-04-29 19:30:50.981 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 19:30:50.986 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-04-29 19:30:50.987 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokenDTO]] Authenticate(Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-04-29 19:30:50.989 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 19:30:50.991 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 19:30:50.993 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 19:30:50.995 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 19:30:50.996 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 19:30:51.000 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-04-29 19:30:51.001 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-04-29 19:30:51.003 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-04-29 19:30:51.005 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' using the name '' in request data ...
2025-04-29 19:30:51.007 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 19:30:51.008 +03:00 [DBG] Connection id "0HNC778OI10E2", Request id "0HNC778OI10E2:00000001": started reading request body.
2025-04-29 19:30:51.009 +03:00 [DBG] Connection id "0HNC778OI10E2", Request id "0HNC778OI10E2:00000001": done reading request body.
2025-04-29 19:30:51.011 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'
2025-04-29 19:30:51.012 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-04-29 19:30:51.013 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-04-29 19:30:51.016 +03:00 [DBG] Attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-04-29 19:30:51.018 +03:00 [DBG] Done attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-04-29 19:30:51.021 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 19:30:51.024 +03:00 [DBG] Creating DbConnection.
2025-04-29 19:30:51.025 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-29 19:30:51.026 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:30:51.035 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:30:51.037 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:30:51.038 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:30:51.039 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 19:30:51.041 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 19:30:51.045 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 19:30:51.047 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:30:51.051 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:30:51.052 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-04-29 19:30:51.054 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:30:51.055 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:30:51.069 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 19:30:51.071 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 19:30:51.073 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 19:30:51.074 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 19:30:51.075 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 19:30:51.076 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 19:30:51.078 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokenDTO'.
2025-04-29 19:30:51.079 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend) in 79.659ms
2025-04-29 19:30:51.083 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-04-29 19:30:51.084 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 19:30:51.086 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:30:51.087 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 19:30:51.089 +03:00 [INF] Request finished HTTP/2 POST https://localhost:49464/api/Auth/authenticate - 200 null application/json; charset=utf-8 118.9022ms
2025-04-29 19:30:56.125 +03:00 [DBG] Connection id "0HNC778OI10E2" received FIN.
2025-04-29 19:30:56.128 +03:00 [DBG] Connection id "0HNC778OI10E2" is closed. The last processed stream ID was 1.
2025-04-29 19:30:56.129 +03:00 [DBG] The connection queue processing loop for 0HNC778OI10E2 completed.
2025-04-29 19:30:56.131 +03:00 [DBG] Connection id "0HNC778OI10E2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 19:30:56.141 +03:00 [DBG] Connection id "0HNC778OI10E2" stopped.
2025-04-29 19:31:16.078 +03:00 [DBG] Connection id "0HNC778OI10E3" accepted.
2025-04-29 19:31:16.094 +03:00 [DBG] Connection id "0HNC778OI10E3" started.
2025-04-29 19:31:16.100 +03:00 [DBG] Connection 0HNC778OI10E3 established using the following protocol: "Tls12"
2025-04-29 19:31:16.106 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/api/Categories - null null
2025-04-29 19:31:16.111 +03:00 [DBG] The request path  does not match the path filter
2025-04-29 19:31:16.113 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-04-29 19:31:16.114 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-04-29 19:31:16.116 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-04-29 19:31:16.118 +03:00 [DBG] Successfully validated the token.
2025-04-29 19:31:16.120 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 19:31:16.122 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-04-29 19:31:16.128 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-04-29 19:31:16.130 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 19:31:16.132 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 19:31:16.134 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 19:31:16.138 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 19:31:16.140 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 19:31:16.142 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-04-29 19:31:16.144 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-04-29 19:31:16.179 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 19:31:16.183 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-04-29 19:31:16.192 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 19:31:16.197 +03:00 [DBG] Creating DbConnection.
2025-04-29 19:31:16.198 +03:00 [DBG] Created DbConnection. (1ms).
2025-04-29 19:31:16.200 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:16.207 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:16.210 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:31:16.213 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 19:31:16.218 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-04-29 19:31:16.224 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-04-29 19:31:16.228 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-04-29 19:31:16.232 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:31:16.234 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:31:16.237 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:31:16.239 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:31:16.240 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:31:16.242 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:16.244 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 12ms reading results.
2025-04-29 19:31:16.246 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:16.247 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:31:16.259 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 19:31:16.262 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 19:31:16.264 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 19:31:16.265 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 19:31:16.266 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 19:31:16.267 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 19:31:16.268 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 19:31:16.290 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 147.9655ms
2025-04-29 19:31:16.293 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-04-29 19:31:16.294 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 19:31:16.296 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:16.298 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 19:31:16.301 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/api/Categories - 200 null application/json; charset=utf-8 194.4709ms
2025-04-29 19:31:25.391 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:49464/api/Administrator/249 - null null
2025-04-29 19:31:25.413 +03:00 [DBG] DELETE requests are not supported
2025-04-29 19:31:25.415 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Administrator/249'
2025-04-29 19:31:25.417 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend)' with route pattern 'api/Administrator/{id}' is valid for the request path '/api/Administrator/249'
2025-04-29 19:31:25.418 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend)'
2025-04-29 19:31:25.420 +03:00 [DBG] Successfully validated the token.
2025-04-29 19:31:25.421 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 19:31:25.425 +03:00 [DBG] Authorization was successful.
2025-04-29 19:31:25.428 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend)'
2025-04-29 19:31:25.435 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Administrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeleteCategory(Int32) on controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend).
2025-04-29 19:31:25.437 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 19:31:25.439 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 19:31:25.441 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 19:31:25.445 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 19:31:25.447 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 19:31:25.449 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 19:31:25.451 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 19:31:25.453 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 19:31:25.455 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 19:31:25.457 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 19:31:25.459 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 19:31:25.462 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 19:31:25.465 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 19:31:25.470 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 19:31:25.473 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(t => t.Id == __categoryId_0)'
2025-04-29 19:31:25.484 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
            SELECT TOP(1) c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
            FROM categories AS c
            WHERE c.id == @__categoryId_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
            SELECT TOP(1) c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
            FROM categories AS c
            WHERE c.id == @__categoryId_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                    instance.<Icon>k__BackingField = dataReader.GetString(2);
                                    instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 19:31:25.488 +03:00 [DBG] Creating DbConnection.
2025-04-29 19:31:25.489 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-29 19:31:25.490 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:25.492 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:25.496 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:31:25.500 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-29 19:31:25.502 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-04-29 19:31:25.504 +03:00 [DBG] Executing DbCommand [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
WHERE [c].[id] = @__categoryId_0
2025-04-29 19:31:25.815 +03:00 [INF] Executed DbCommand (311ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
WHERE [c].[id] = @__categoryId_0
2025-04-29 19:31:25.820 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:31:25.822 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:25.824 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-04-29 19:31:25.826 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:25.829 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-04-29 19:31:25.832 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:31:25.834 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 19:31:25.836 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 19:31:25.837 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 19:31:25.838 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:25.840 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:25.843 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:31:25.846 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 19:31:25.847 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-29 19:31:25.849 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
2025-04-29 19:31:25.944 +03:00 [INF] Executed DbCommand (96ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
2025-04-29 19:31:25.975 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:25.978 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 31ms reading results.
2025-04-29 19:31:25.980 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:25.982 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:31:26.098 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Finance_Manager_Backend.DataBase.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_transactions_categories_category_fk". The conflict occurred in database "FinanceManagerDB", table "dbo.transactions", column 'category_fk'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:83a2cfa6-5e3b-4ddc-b426-b3f996099061
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_transactions_categories_category_fk". The conflict occurred in database "FinanceManagerDB", table "dbo.transactions", column 'category_fk'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:83a2cfa6-5e3b-4ddc-b426-b3f996099061
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-29 19:31:26.139 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend) in 689.9625ms
2025-04-29 19:31:26.141 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend)'
2025-04-29 19:31:26.159 +03:00 [FTL] Unexpected error occurred: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_transactions_categories_category_fk". The conflict occurred in database "FinanceManagerDB", table "dbo.transactions", column 'category_fk'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:83a2cfa6-5e3b-4ddc-b426-b3f996099061
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Finance_Manager_Backend.BusinessLogic.Services.CategoriesService.DeleteCategoryAsync(Int32 id) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\BusinessLogic\Services\CategoriesService.cs:line 92
   at Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory(Int32 id) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Controllers\AdministratorController.cs:line 95
   at lambda_method423(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Finance_Manager_Backend.Middleware.ExceptionsHandler.InvokeAsync(HttpContext httpContext) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Middleware\ExceptionsHandler.cs:line 23
2025-04-29 19:31:26.231 +03:00 [ERR] An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_transactions_categories_category_fk". The conflict occurred in database "FinanceManagerDB", table "dbo.transactions", column 'category_fk'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:83a2cfa6-5e3b-4ddc-b426-b3f996099061
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Finance_Manager_Backend.BusinessLogic.Services.CategoriesService.DeleteCategoryAsync(Int32 id) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\BusinessLogic\Services\CategoriesService.cs:line 92
   at Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory(Int32 id) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Controllers\AdministratorController.cs:line 95
   at lambda_method423(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Finance_Manager_Backend.Middleware.ExceptionsHandler.InvokeAsync(HttpContext httpContext) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Middleware\ExceptionsHandler.cs:line 23
2025-04-29 19:31:26.246 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 19:31:26.250 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:31:26.252 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 19:31:26.254 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:49464/api/Administrator/249 - 500 null application/json 863.193ms
2025-04-29 19:31:31.167 +03:00 [DBG] Connection id "0HNC778OI10E3" received FIN.
2025-04-29 19:31:31.174 +03:00 [DBG] Connection id "0HNC778OI10E3" is closed. The last processed stream ID was 3.
2025-04-29 19:31:31.174 +03:00 [DBG] The connection queue processing loop for 0HNC778OI10E3 completed.
2025-04-29 19:31:31.176 +03:00 [DBG] Connection id "0HNC778OI10E3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 19:31:31.182 +03:00 [DBG] Connection id "0HNC778OI10E3" stopped.
2025-04-29 19:34:47.719 +03:00 [DBG] Connection id "0HNC778OI10E4" accepted.
2025-04-29 19:34:47.746 +03:00 [DBG] Connection id "0HNC778OI10E4" started.
2025-04-29 19:34:47.757 +03:00 [DBG] Connection 0HNC778OI10E4 established using the following protocol: "Tls12"
2025-04-29 19:34:47.764 +03:00 [INF] Request starting HTTP/2 POST https://localhost:49464/api/Administrator/create - application/json 128
2025-04-29 19:34:47.782 +03:00 [DBG] POST requests are not supported
2025-04-29 19:34:47.796 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Administrator/create'
2025-04-29 19:34:47.803 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)' with route pattern 'api/Administrator/create' is valid for the request path '/api/Administrator/create'
2025-04-29 19:34:47.811 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:34:47.813 +03:00 [DBG] Successfully validated the token.
2025-04-29 19:34:47.817 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 19:34:47.819 +03:00 [DBG] Authorization was successful.
2025-04-29 19:34:47.821 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:34:47.831 +03:00 [INF] Route matched with {action = "CreateCategory", controller = "Administrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateCategory(Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO) on controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend).
2025-04-29 19:34:47.834 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 19:34:47.836 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 19:34:47.838 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 19:34:47.843 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 19:34:47.845 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 19:34:47.847 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 19:34:47.849 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 19:34:47.851 +03:00 [DBG] Attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' ...
2025-04-29 19:34:47.853 +03:00 [DBG] Attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' using the name '' in request data ...
2025-04-29 19:34:47.854 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 19:34:47.859 +03:00 [DBG] Connection id "0HNC778OI10E4", Request id "0HNC778OI10E4:00000001": started reading request body.
2025-04-29 19:34:47.862 +03:00 [DBG] Connection id "0HNC778OI10E4", Request id "0HNC778OI10E4:00000001": done reading request body.
2025-04-29 19:34:48.599 +03:00 [DBG] JSON input formatter threw an exception: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. Path: $ | LineNumber: 7 | BytePositionInLine: 0.
2025-04-29 19:34:48.602 +03:00 [DBG] Done attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:34:48.604 +03:00 [DBG] Done attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:34:48.606 +03:00 [DBG] Attempting to validate the bound parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' ...
2025-04-29 19:34:48.611 +03:00 [DBG] Done attempting to validate the bound parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:34:48.614 +03:00 [DBG] The request has model state errors, returning an error response.
2025-04-29 19:34:48.616 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-04-29 19:34:48.618 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 19:34:48.621 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2025-04-29 19:34:48.626 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 19:34:48.628 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-04-29 19:34:48.635 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-04-29 19:34:48.636 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-29 19:34:48.662 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend) in 814.9386ms
2025-04-29 19:34:48.664 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:34:48.665 +03:00 [INF] Request finished HTTP/2 POST https://localhost:49464/api/Administrator/create - 400 null application/problem+json; charset=utf-8 901.0525ms
2025-04-29 19:34:56.813 +03:00 [DBG] Connection id "0HNC778OI10E4" received FIN.
2025-04-29 19:34:56.817 +03:00 [DBG] Connection id "0HNC778OI10E4" is closed. The last processed stream ID was 1.
2025-04-29 19:34:56.817 +03:00 [DBG] The connection queue processing loop for 0HNC778OI10E4 completed.
2025-04-29 19:34:56.819 +03:00 [DBG] Connection id "0HNC778OI10E4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 19:34:56.828 +03:00 [DBG] Connection id "0HNC778OI10E4" stopped.
2025-04-29 19:35:12.110 +03:00 [DBG] Connection id "0HNC778OI10E5" accepted.
2025-04-29 19:35:12.163 +03:00 [DBG] Connection id "0HNC778OI10E5" started.
2025-04-29 19:35:12.170 +03:00 [DBG] Connection 0HNC778OI10E5 established using the following protocol: "Tls12"
2025-04-29 19:35:12.173 +03:00 [INF] Request starting HTTP/2 POST https://localhost:49464/api/Administrator/create - application/json 127
2025-04-29 19:35:12.183 +03:00 [DBG] POST requests are not supported
2025-04-29 19:35:12.185 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Administrator/create'
2025-04-29 19:35:12.186 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)' with route pattern 'api/Administrator/create' is valid for the request path '/api/Administrator/create'
2025-04-29 19:35:12.188 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:35:12.190 +03:00 [DBG] Successfully validated the token.
2025-04-29 19:35:12.192 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 19:35:12.199 +03:00 [DBG] Authorization was successful.
2025-04-29 19:35:12.200 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:35:12.202 +03:00 [INF] Route matched with {action = "CreateCategory", controller = "Administrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateCategory(Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO) on controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend).
2025-04-29 19:35:12.205 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 19:35:12.207 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 19:35:12.213 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 19:35:12.217 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 19:35:12.219 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 19:35:12.221 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 19:35:12.223 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 19:35:12.225 +03:00 [DBG] Attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' ...
2025-04-29 19:35:12.228 +03:00 [DBG] Attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' using the name '' in request data ...
2025-04-29 19:35:12.230 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 19:35:12.231 +03:00 [DBG] Connection id "0HNC778OI10E5", Request id "0HNC778OI10E5:00000001": started reading request body.
2025-04-29 19:35:12.233 +03:00 [DBG] Connection id "0HNC778OI10E5", Request id "0HNC778OI10E5:00000001": done reading request body.
2025-04-29 19:35:12.234 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'
2025-04-29 19:35:12.235 +03:00 [DBG] Done attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:35:12.237 +03:00 [DBG] Done attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:35:12.238 +03:00 [DBG] Attempting to validate the bound parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' ...
2025-04-29 19:35:12.244 +03:00 [DBG] Done attempting to validate the bound parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:35:12.315 +03:00 [DBG] Request was short circuited at action filter 'Finance_Manager_Backend.Middleware.ValidationFilter'.
2025-04-29 19:35:12.316 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 19:35:12.319 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 19:35:12.320 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 19:35:12.322 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 19:35:12.323 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 19:35:12.324 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 19:35:12.325 +03:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType6`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType5`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-29 19:35:12.332 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend) in 110.8617ms
2025-04-29 19:35:12.333 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:35:12.335 +03:00 [INF] Request finished HTTP/2 POST https://localhost:49464/api/Administrator/create - 400 null application/json; charset=utf-8 161.3842ms
2025-04-29 19:35:16.835 +03:00 [DBG] Connection id "0HNC778OI10E5" received FIN.
2025-04-29 19:35:16.842 +03:00 [DBG] Connection id "0HNC778OI10E5" is closed. The last processed stream ID was 1.
2025-04-29 19:35:16.842 +03:00 [DBG] The connection queue processing loop for 0HNC778OI10E5 completed.
2025-04-29 19:35:16.844 +03:00 [DBG] Connection id "0HNC778OI10E5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 19:35:16.851 +03:00 [DBG] Connection id "0HNC778OI10E5" stopped.
2025-04-29 19:35:31.630 +03:00 [DBG] Connection id "0HNC778OI10E6" accepted.
2025-04-29 19:35:31.648 +03:00 [DBG] Connection id "0HNC778OI10E6" started.
2025-04-29 19:35:31.655 +03:00 [DBG] Connection 0HNC778OI10E6 established using the following protocol: "Tls12"
2025-04-29 19:35:31.656 +03:00 [INF] Request starting HTTP/2 POST https://localhost:49464/api/Administrator/create - application/json 134
2025-04-29 19:35:31.662 +03:00 [DBG] POST requests are not supported
2025-04-29 19:35:31.663 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Administrator/create'
2025-04-29 19:35:31.665 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)' with route pattern 'api/Administrator/create' is valid for the request path '/api/Administrator/create'
2025-04-29 19:35:31.666 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:35:31.668 +03:00 [DBG] Successfully validated the token.
2025-04-29 19:35:31.669 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 19:35:31.671 +03:00 [DBG] Authorization was successful.
2025-04-29 19:35:31.672 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:35:31.673 +03:00 [INF] Route matched with {action = "CreateCategory", controller = "Administrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateCategory(Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO) on controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend).
2025-04-29 19:35:31.677 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 19:35:31.679 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 19:35:31.681 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 19:35:31.683 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 19:35:31.685 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 19:35:31.686 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 19:35:31.688 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 19:35:31.689 +03:00 [DBG] Attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' ...
2025-04-29 19:35:31.692 +03:00 [DBG] Attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' using the name '' in request data ...
2025-04-29 19:35:31.694 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 19:35:31.695 +03:00 [DBG] Connection id "0HNC778OI10E6", Request id "0HNC778OI10E6:00000001": started reading request body.
2025-04-29 19:35:31.696 +03:00 [DBG] Connection id "0HNC778OI10E6", Request id "0HNC778OI10E6:00000001": done reading request body.
2025-04-29 19:35:31.698 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'
2025-04-29 19:35:31.699 +03:00 [DBG] Done attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:35:31.700 +03:00 [DBG] Done attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:35:31.702 +03:00 [DBG] Attempting to validate the bound parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' ...
2025-04-29 19:35:31.703 +03:00 [DBG] Done attempting to validate the bound parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:35:31.707 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 19:35:31.710 +03:00 [DBG] Creating DbConnection.
2025-04-29 19:35:31.711 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-29 19:35:31.712 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:35:31.714 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:35:31.715 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:35:31.716 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:35:31.717 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 19:35:31.719 +03:00 [DBG] Executing DbCommand [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
WHERE [c].[id] = @__categoryId_0
2025-04-29 19:35:31.723 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
WHERE [c].[id] = @__categoryId_0
2025-04-29 19:35:31.726 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:35:31.727 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-04-29 19:35:31.729 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:35:31.730 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:35:31.733 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend) in 46.4791ms
2025-04-29 19:35:31.734 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:35:31.736 +03:00 [ERR] Category with ID 0 isn't exist.
Finance_Manager_Backend.Exceptions.EntityNotFoundException`1[Finance_Manager_Backend.BusinessLogic.Models.Category]: Category with ID 0 isn't exist.
   at Finance_Manager_Backend.BusinessLogic.Services.CategoriesService.GetCategoryByIdAsync(Int32 categoryId) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\BusinessLogic\Services\CategoriesService.cs:line 24
   at Finance_Manager_Backend.BusinessLogic.Services.CategoriesService.CreateNewCategoryAsync(CategoryDTO categoryDTO) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\BusinessLogic\Services\CategoriesService.cs:line 55
   at Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory(CategoryDTO categoryDTO) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Controllers\AdministratorController.cs:line 51
   at lambda_method441(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Finance_Manager_Backend.Middleware.ExceptionsHandler.InvokeAsync(HttpContext httpContext) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Middleware\ExceptionsHandler.cs:line 23
2025-04-29 19:35:31.743 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 19:35:31.744 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:35:31.746 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 19:35:31.747 +03:00 [INF] Request finished HTTP/2 POST https://localhost:49464/api/Administrator/create - 404 null application/json 90.6033ms
2025-04-29 19:35:36.882 +03:00 [DBG] Connection id "0HNC778OI10E6" received FIN.
2025-04-29 19:35:36.888 +03:00 [DBG] Connection id "0HNC778OI10E6" is closed. The last processed stream ID was 1.
2025-04-29 19:35:36.888 +03:00 [DBG] The connection queue processing loop for 0HNC778OI10E6 completed.
2025-04-29 19:35:36.892 +03:00 [DBG] Connection id "0HNC778OI10E6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 19:35:36.897 +03:00 [DBG] Connection id "0HNC778OI10E6" stopped.
2025-04-29 19:36:14.726 +03:00 [DBG] Connection id "0HNC778OI10E7" accepted.
2025-04-29 19:36:14.742 +03:00 [DBG] Connection id "0HNC778OI10E7" started.
2025-04-29 19:36:14.750 +03:00 [DBG] Connection 0HNC778OI10E7 established using the following protocol: "Tls12"
2025-04-29 19:36:14.754 +03:00 [INF] Request starting HTTP/2 POST https://localhost:49464/api/Administrator/create - application/json 109
2025-04-29 19:36:14.758 +03:00 [DBG] POST requests are not supported
2025-04-29 19:36:14.759 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Administrator/create'
2025-04-29 19:36:14.765 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)' with route pattern 'api/Administrator/create' is valid for the request path '/api/Administrator/create'
2025-04-29 19:36:14.766 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:36:14.768 +03:00 [DBG] Successfully validated the token.
2025-04-29 19:36:14.768 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 19:36:14.769 +03:00 [DBG] Authorization was successful.
2025-04-29 19:36:14.770 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:36:14.771 +03:00 [INF] Route matched with {action = "CreateCategory", controller = "Administrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateCategory(Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO) on controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend).
2025-04-29 19:36:14.773 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 19:36:14.775 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 19:36:14.780 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 19:36:14.783 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 19:36:14.784 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 19:36:14.786 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 19:36:14.787 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 19:36:14.789 +03:00 [DBG] Attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' ...
2025-04-29 19:36:14.790 +03:00 [DBG] Attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' using the name '' in request data ...
2025-04-29 19:36:14.792 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 19:36:14.795 +03:00 [DBG] Connection id "0HNC778OI10E7", Request id "0HNC778OI10E7:00000001": started reading request body.
2025-04-29 19:36:14.796 +03:00 [DBG] Connection id "0HNC778OI10E7", Request id "0HNC778OI10E7:00000001": done reading request body.
2025-04-29 19:36:14.798 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'
2025-04-29 19:36:14.799 +03:00 [DBG] Done attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:36:14.800 +03:00 [DBG] Done attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:36:14.802 +03:00 [DBG] Attempting to validate the bound parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' ...
2025-04-29 19:36:14.803 +03:00 [DBG] Done attempting to validate the bound parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:36:14.811 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 19:36:14.814 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:36:14.816 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:36:14.817 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 19:36:14.818 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 19:36:14.820 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 19:36:14.821 +03:00 [DBG] Creating DbConnection.
2025-04-29 19:36:14.822 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-29 19:36:14.823 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:14.824 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:14.827 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:36:14.828 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:36:14.830 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 19:36:14.831 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-29 19:36:14.912 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-29 19:36:14.914 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:36:14.915 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:14.917 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-04-29 19:36:14.918 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:14.920 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:36:14.922 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:36:14.924 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-04-29 19:36:14.927 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 19:36:14.930 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 19:36:14.931 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 19:36:14.933 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 19:36:14.934 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 19:36:14.934 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 19:36:14.936 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Int32'.
2025-04-29 19:36:14.951 +03:00 [DBG] No endpoints found for address (id=[251],action=[GetCategoryByIdAsync],controller=[Administrator])
2025-04-29 19:36:14.953 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend) in 167.5597ms
2025-04-29 19:36:14.955 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:36:14.956 +03:00 [ERR] No route matches the supplied values.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Finance_Manager_Backend.Middleware.ExceptionsHandler.InvokeAsync(HttpContext httpContext) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Middleware\ExceptionsHandler.cs:line 23
2025-04-29 19:36:14.963 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 19:36:14.964 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:14.965 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 19:36:14.967 +03:00 [INF] Request finished HTTP/2 POST https://localhost:49464/api/Administrator/create - 400 null application/json 212.5146ms
2025-04-29 19:36:16.950 +03:00 [DBG] Connection id "0HNC778OI10E7" received FIN.
2025-04-29 19:36:16.952 +03:00 [DBG] Connection id "0HNC778OI10E7" is closed. The last processed stream ID was 1.
2025-04-29 19:36:16.952 +03:00 [DBG] The connection queue processing loop for 0HNC778OI10E7 completed.
2025-04-29 19:36:16.956 +03:00 [DBG] Connection id "0HNC778OI10E7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 19:36:16.964 +03:00 [DBG] Connection id "0HNC778OI10E7" stopped.
2025-04-29 19:36:33.421 +03:00 [DBG] Connection id "0HNC778OI10E8" accepted.
2025-04-29 19:36:33.481 +03:00 [DBG] Connection id "0HNC778OI10E8" started.
2025-04-29 19:36:33.486 +03:00 [DBG] Connection 0HNC778OI10E8 established using the following protocol: "Tls12"
2025-04-29 19:36:33.488 +03:00 [INF] Request starting HTTP/2 POST https://localhost:49464/api/Administrator/create - application/json 136
2025-04-29 19:36:33.495 +03:00 [DBG] POST requests are not supported
2025-04-29 19:36:33.497 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Administrator/create'
2025-04-29 19:36:33.499 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)' with route pattern 'api/Administrator/create' is valid for the request path '/api/Administrator/create'
2025-04-29 19:36:33.501 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:36:33.503 +03:00 [DBG] Successfully validated the token.
2025-04-29 19:36:33.504 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 19:36:33.506 +03:00 [DBG] Authorization was successful.
2025-04-29 19:36:33.507 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:36:33.509 +03:00 [INF] Route matched with {action = "CreateCategory", controller = "Administrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateCategory(Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO) on controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend).
2025-04-29 19:36:33.513 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 19:36:33.515 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 19:36:33.517 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 19:36:33.520 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 19:36:33.521 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 19:36:33.523 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 19:36:33.527 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 19:36:33.529 +03:00 [DBG] Attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' ...
2025-04-29 19:36:33.531 +03:00 [DBG] Attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' using the name '' in request data ...
2025-04-29 19:36:33.533 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 19:36:33.535 +03:00 [DBG] Connection id "0HNC778OI10E8", Request id "0HNC778OI10E8:00000001": started reading request body.
2025-04-29 19:36:33.536 +03:00 [DBG] Connection id "0HNC778OI10E8", Request id "0HNC778OI10E8:00000001": done reading request body.
2025-04-29 19:36:33.538 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'
2025-04-29 19:36:33.540 +03:00 [DBG] Done attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:36:33.543 +03:00 [DBG] Done attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:36:33.544 +03:00 [DBG] Attempting to validate the bound parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' ...
2025-04-29 19:36:33.546 +03:00 [DBG] Done attempting to validate the bound parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 19:36:33.548 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 19:36:33.550 +03:00 [DBG] Creating DbConnection.
2025-04-29 19:36:33.551 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-29 19:36:33.552 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:33.553 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:33.555 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:36:33.556 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:36:33.557 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 19:36:33.561 +03:00 [DBG] Executing DbCommand [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
WHERE [c].[id] = @__categoryId_0
2025-04-29 19:36:33.565 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
WHERE [c].[id] = @__categoryId_0
2025-04-29 19:36:33.567 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:36:33.568 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:33.569 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-04-29 19:36:33.571 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:33.573 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:36:33.576 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:36:33.580 +03:00 [DBG] The navigation 'Category.ParentCategory' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:36:33.584 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:36:33.586 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 19:36:33.587 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 19:36:33.589 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 19:36:33.591 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:33.594 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:33.595 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 19:36:33.596 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 19:36:33.597 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 19:36:33.599 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-29 19:36:33.604 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-29 19:36:33.607 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 19:36:33.610 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:33.611 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-04-29 19:36:33.613 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:33.614 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 19:36:33.616 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 19:36:33.618 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-04-29 19:36:33.619 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 19:36:33.622 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 19:36:33.623 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 19:36:33.626 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 19:36:33.627 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 19:36:33.628 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 19:36:33.629 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Int32'.
2025-04-29 19:36:33.631 +03:00 [DBG] No endpoints found for address (id=[252],action=[GetCategoryByIdAsync],controller=[Administrator])
2025-04-29 19:36:33.632 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend) in 108.8173ms
2025-04-29 19:36:33.635 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 19:36:33.636 +03:00 [ERR] No route matches the supplied values.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Finance_Manager_Backend.Middleware.ExceptionsHandler.InvokeAsync(HttpContext httpContext) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Middleware\ExceptionsHandler.cs:line 23
2025-04-29 19:36:33.644 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 19:36:33.649 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 19:36:33.652 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 19:36:33.656 +03:00 [INF] Request finished HTTP/2 POST https://localhost:49464/api/Administrator/create - 400 null application/json 167.5467ms
2025-04-29 19:36:36.986 +03:00 [DBG] Connection id "0HNC778OI10E8" received FIN.
2025-04-29 19:36:36.995 +03:00 [DBG] Connection id "0HNC778OI10E8" is closed. The last processed stream ID was 1.
2025-04-29 19:36:36.995 +03:00 [DBG] The connection queue processing loop for 0HNC778OI10E8 completed.
2025-04-29 19:36:37.002 +03:00 [DBG] Connection id "0HNC778OI10E8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 19:36:37.006 +03:00 [DBG] Connection id "0HNC778OI10E8" stopped.
2025-04-29 20:48:10.526 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-29 20:48:11.231 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 20:48:11.385 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2025-04-29 20:48:11.639 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<User>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        User entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            User instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(User);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (User)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Email>k__BackingField = dataReader.GetString(2);
                                instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                instance.<Role>k__BackingField = dataReader.GetString(5);
                                instance.<Salt>k__BackingField = dataReader.GetString(6);
                                instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 20:48:11.723 +03:00 [DBG] Creating DbConnection.
2025-04-29 20:48:11.756 +03:00 [DBG] Created DbConnection. (62ms).
2025-04-29 20:48:11.761 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:12.178 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:12.185 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:48:12.192 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-04-29 20:48:12.195 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-04-29 20:48:12.203 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-04-29 20:48:12.549 +03:00 [INF] Executed DbCommand (346ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-04-29 20:48:12.584 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:12.717 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:12.726 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:12.728 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:12.734 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:12.741 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 184ms reading results.
2025-04-29 20:48:12.745 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:12.751 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (6ms).
2025-04-29 20:48:12.756 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 20:48:12.759 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 20:48:12.776 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 20:48:12.949 +03:00 [DBG] Executing 2 update commands as a batch.
2025-04-29 20:48:12.955 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:12.959 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:12.963 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-04-29 20:48:12.972 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-04-29 20:48:12.979 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:48:12.981 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 20:48:12.988 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-04-29 20:48:12.993 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-04-29 20:48:13.622 +03:00 [INF] Executed DbCommand (631ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-04-29 20:48:13.634 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:13.642 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 12ms reading results.
2025-04-29 20:48:13.649 +03:00 [DBG] Committing transaction.
2025-04-29 20:48:13.654 +03:00 [DBG] Committed transaction.
2025-04-29 20:48:13.658 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:13.660 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-04-29 20:48:13.664 +03:00 [DBG] Disposing transaction.
2025-04-29 20:48:13.669 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.673 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.677 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-04-29 20:48:13.681 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-04-29 20:48:13.688 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 20:48:13.693 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:13.695 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:13.697 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:48:13.699 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 20:48:13.702 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-29 20:48:13.703 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-04-29 20:48:13.753 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-04-29 20:48:13.802 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.813 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.817 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.818 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.821 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.822 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.825 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.826 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.829 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.831 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.833 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.835 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.850 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.853 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:13.856 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:13.859 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 103ms reading results.
2025-04-29 20:48:13.861 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:13.863 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-04-29 20:48:13.866 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 20:48:13.868 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 20:48:13.878 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 20:48:13.888 +03:00 [DBG] Executing 7 update commands as a batch.
2025-04-29 20:48:13.890 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:13.893 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:13.895 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-04-29 20:48:13.896 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-04-29 20:48:13.897 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:48:13.898 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 20:48:13.900 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 20:48:13.902 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p5;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p6;
2025-04-29 20:48:14.010 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p5;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p6;
2025-04-29 20:48:14.014 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:14.016 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-04-29 20:48:14.018 +03:00 [DBG] Committing transaction.
2025-04-29 20:48:14.019 +03:00 [DBG] Committed transaction.
2025-04-29 20:48:14.020 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:14.022 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 20:48:14.024 +03:00 [DBG] Disposing transaction.
2025-04-29 20:48:14.025 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:14.027 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:14.029 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:14.036 +03:00 [DBG] The foreign key property 'Category.ParentCategoryId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:14.042 +03:00 [DBG] The navigation 'Category.ParentCategory' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:14.045 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:14.050 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:14.053 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:14.056 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:14.059 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 7 entities written to the database.
2025-04-29 20:48:14.062 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 20:48:14.066 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:14.069 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-04-29 20:48:14.232 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 20:48:14.247 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-04-29 20:48:14.345 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 20:48:14.360 +03:00 [DBG] Creating DbConnection.
2025-04-29 20:48:14.362 +03:00 [DBG] Created DbConnection. (1ms).
2025-04-29 20:48:14.364 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:14.366 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:14.368 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:48:14.370 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 20:48:14.373 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-29 20:48:14.375 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 20:48:14.422 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 20:48:14.429 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:14.432 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-04-29 20:48:14.434 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:14.436 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 20:48:14.471 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:14.478 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:14.480 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 20:48:14.481 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 20:48:14.483 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 20:48:14.494 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:14.496 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:14.497 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:48:14.499 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 20:48:14.502 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-04-29 20:48:14.504 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 5), @p4='?' (Size = 30), @p5='?' (Size = 3), @p6='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id], INSERTED.[primary_currency]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-29 20:48:14.577 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 5), @p4='?' (Size = 30), @p5='?' (Size = 3), @p6='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id], INSERTED.[primary_currency]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-29 20:48:14.586 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:14.590 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:14.592 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 11ms reading results.
2025-04-29 20:48:14.595 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:14.597 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 20:48:14.602 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:14.604 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-04-29 20:48:14.928 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __userDTO_Id_0)'
2025-04-29 20:48:14.935 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__userDTO_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__userDTO_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 20:48:14.941 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:14.943 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:14.946 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:48:14.949 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 20:48:14.954 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-04-29 20:48:14.956 +03:00 [DBG] Executing DbCommand [Parameters=[@__userDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__userDTO_Id_0
2025-04-29 20:48:15.026 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__userDTO_Id_0
2025-04-29 20:48:15.030 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.032 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-04-29 20:48:15.034 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.036 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 20:48:15.042 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.045 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.047 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.052 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.054 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.056 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.058 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.060 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.062 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.064 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.066 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 20:48:15.067 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 20:48:15.070 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 20:48:15.074 +03:00 [DBG] Executing 5 update commands as a batch.
2025-04-29 20:48:15.079 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.082 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.085 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:48:15.089 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-04-29 20:48:15.092 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-04-29 20:48:15.095 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-04-29 20:48:15.159 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-04-29 20:48:15.163 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.165 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.167 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.169 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.171 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.173 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.174 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 12ms reading results.
2025-04-29 20:48:15.178 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.180 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-04-29 20:48:15.183 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.185 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.187 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.189 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.191 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.193 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-04-29 20:48:15.198 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.214 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.216 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.218 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.220 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.222 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.223 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.225 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.227 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.229 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.231 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.233 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.234 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.237 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.240 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.242 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.244 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.247 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.249 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.251 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.253 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.255 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.259 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.261 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.262 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.265 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.280 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.282 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.284 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.286 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.288 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.291 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.292 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.294 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.296 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.298 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.301 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.303 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.305 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.308 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.309 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 20:48:15.311 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 20:48:15.317 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 20:48:15.320 +03:00 [DBG] Executing 20 update commands as a batch.
2025-04-29 20:48:15.322 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.324 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.325 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:48:15.326 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 20:48:15.329 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 20:48:15.331 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-04-29 20:48:15.439 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-04-29 20:48:15.451 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.459 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.462 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.466 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.468 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.470 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.473 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.475 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.476 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.478 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.479 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.481 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.482 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.484 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.485 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.487 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.489 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.490 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.493 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.495 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.496 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.498 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 50ms reading results.
2025-04-29 20:48:15.500 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.503 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-04-29 20:48:15.506 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.508 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.512 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.536 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.539 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.542 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.544 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.547 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.549 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.551 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.554 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.556 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.558 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.560 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.562 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.565 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.567 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.570 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.573 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.575 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.577 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 20 entities written to the database.
2025-04-29 20:48:15.581 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.595 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.597 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.601 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.603 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.605 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.606 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.608 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.610 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 20:48:15.611 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 20:48:15.620 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 20:48:15.624 +03:00 [DBG] Executing 4 update commands as a batch.
2025-04-29 20:48:15.627 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.629 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.631 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:48:15.633 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 20:48:15.638 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-04-29 20:48:15.640 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-04-29 20:48:15.749 +03:00 [INF] Executed DbCommand (109ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-04-29 20:48:15.757 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.761 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.764 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.766 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.768 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.770 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 14ms reading results.
2025-04-29 20:48:15.772 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.774 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 20:48:15.781 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.783 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.786 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.788 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.791 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 4 entities written to the database.
2025-04-29 20:48:15.793 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 20:48:15.795 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.797 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-29 20:48:15.822 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 20:48:15.890 +03:00 [DBG] Creating DbConnection.
2025-04-29 20:48:15.892 +03:00 [DBG] Created DbConnection. (2ms).
2025-04-29 20:48:15.895 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.898 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.900 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:48:15.901 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 20:48:15.902 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 20:48:15.905 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 20:48:15.928 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 20:48:15.935 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.938 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-04-29 20:48:15.941 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.942 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 20:48:15.958 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.960 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:15.962 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 20:48:15.963 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 20:48:15.964 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 20:48:15.965 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.967 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.968 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:48:15.970 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 20:48:15.971 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 20:48:15.973 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 5), @p4='?' (Size = 30), @p5='?' (Size = 3), @p6='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id], INSERTED.[primary_currency]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-29 20:48:15.978 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 5), @p4='?' (Size = 30), @p5='?' (Size = 3), @p6='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id], INSERTED.[primary_currency]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-29 20:48:15.984 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:48:15.986 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.988 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-04-29 20:48:15.990 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:15.995 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (4ms).
2025-04-29 20:48:15.997 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:48:16.000 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-04-29 20:48:16.002 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 20:48:16.003 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:48:16.005 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 20:48:16.240 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-29 20:48:16.307 +03:00 [DBG] Hosting starting
2025-04-29 20:48:16.327 +03:00 [INF] User profile is available. Using 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-29 20:48:16.551 +03:00 [DBG] Reading data from file 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys\key-036e1e5f-5347-47d7-8236-0b64ed0a76a1.xml'.
2025-04-29 20:48:16.566 +03:00 [DBG] Found key {036e1e5f-5347-47d7-8236-0b64ed0a76a1}.
2025-04-29 20:48:16.577 +03:00 [DBG] Considering key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} with expiration date 2025-07-16 20:11:06Z as default key.
2025-04-29 20:48:16.586 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-29 20:48:16.588 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-29 20:48:16.591 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-29 20:48:16.598 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-29 20:48:16.601 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-29 20:48:16.606 +03:00 [DBG] Using key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} as the default key.
2025-04-29 20:48:16.609 +03:00 [DBG] Key ring with default key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} was loaded during application startup.
2025-04-29 20:48:16.688 +03:00 [DBG] Middleware loaded
2025-04-29 20:48:16.692 +03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16531 B).
2025-04-29 20:48:16.698 +03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-04-29 20:48:16.890 +03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-04-29 20:48:17.016 +03:00 [INF] Now listening on: https://localhost:49464
2025-04-29 20:48:17.022 +03:00 [INF] Now listening on: http://localhost:49465
2025-04-29 20:48:17.024 +03:00 [DBG] Loaded hosting startup assembly Finance_Manager_Backend
2025-04-29 20:48:17.026 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-04-29 20:48:17.027 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-04-29 20:48:17.028 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-04-29 20:48:17.071 +03:00 [DBG] Connection id "0HNC78O2S95TL" received FIN.
2025-04-29 20:48:17.080 +03:00 [DBG] Connection id "0HNC78O2S95TL" accepted.
2025-04-29 20:48:17.083 +03:00 [DBG] Connection id "0HNC78O2S95TL" started.
2025-04-29 20:48:17.098 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-04-29 20:48:17.128 +03:00 [DBG] Connection id "0HNC78O2S95TL" stopped.
2025-04-29 20:48:17.132 +03:00 [DBG] Connection id "0HNC78O2S95TL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 20:48:17.711 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-29 20:48:17.719 +03:00 [INF] Hosting environment: Development
2025-04-29 20:48:17.727 +03:00 [INF] Content root path: G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend
2025-04-29 20:48:17.817 +03:00 [DBG] Hosting started
2025-04-29 20:48:18.248 +03:00 [DBG] Connection id "0HNC78O2S95TM" accepted.
2025-04-29 20:48:18.326 +03:00 [DBG] Connection id "0HNC78O2S95TM" started.
2025-04-29 20:48:18.796 +03:00 [DBG] Connection 0HNC78O2S95TM established using the following protocol: "Tls12"
2025-04-29 20:48:19.095 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/_vs/browserLink - null null
2025-04-29 20:48:19.095 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/_framework/aspnetcore-browser-refresh.js - null null
2025-04-29 20:48:19.116 +03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-04-29 20:48:19.123 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/_framework/aspnetcore-browser-refresh.js - 200 16531 application/javascript; charset=utf-8 30.0707ms
2025-04-29 20:48:19.580 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/_vs/browserLink - 200 null text/javascript; charset=UTF-8 487.6485ms
2025-04-29 20:48:19.741 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/swagger/v1/swagger.json - null null
2025-04-29 20:48:19.751 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-29 20:48:19.850 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 109.3794ms
2025-04-29 20:48:29.244 +03:00 [DBG] Connection id "0HNC78O2S95TM" received FIN.
2025-04-29 20:48:29.251 +03:00 [DBG] Connection id "0HNC78O2S95TM" is closed. The last processed stream ID was 5.
2025-04-29 20:48:29.253 +03:00 [DBG] The connection queue processing loop for 0HNC78O2S95TM completed.
2025-04-29 20:48:29.254 +03:00 [DBG] Connection id "0HNC78O2S95TM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 20:48:29.259 +03:00 [DBG] Connection id "0HNC78O2S95TM" stopped.
2025-04-29 20:50:07.016 +03:00 [DBG] Connection id "0HNC78O2S95TN" accepted.
2025-04-29 20:50:07.032 +03:00 [DBG] Connection id "0HNC78O2S95TN" started.
2025-04-29 20:50:07.041 +03:00 [DBG] Connection 0HNC78O2S95TN established using the following protocol: "Tls12"
2025-04-29 20:50:07.048 +03:00 [INF] Request starting HTTP/2 POST https://localhost:49464/api/Auth/authenticate - application/json 62
2025-04-29 20:50:07.058 +03:00 [DBG] POST requests are not supported
2025-04-29 20:50:07.092 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/authenticate'
2025-04-29 20:50:07.098 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)' with route pattern 'api/Auth/authenticate' is valid for the request path '/api/Auth/authenticate'
2025-04-29 20:50:07.101 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-04-29 20:50:07.183 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-29 20:50:07.187 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-04-29 20:50:07.209 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokenDTO]] Authenticate(Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-04-29 20:50:07.214 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 20:50:07.216 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 20:50:07.218 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 20:50:07.221 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 20:50:07.223 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 20:50:07.228 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-04-29 20:50:07.233 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-04-29 20:50:07.243 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-04-29 20:50:07.248 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' using the name '' in request data ...
2025-04-29 20:50:07.252 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 20:50:07.265 +03:00 [DBG] Connection id "0HNC78O2S95TN", Request id "0HNC78O2S95TN:00000001": started reading request body.
2025-04-29 20:50:07.269 +03:00 [DBG] Connection id "0HNC78O2S95TN", Request id "0HNC78O2S95TN:00000001": done reading request body.
2025-04-29 20:50:07.287 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'
2025-04-29 20:50:07.294 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-04-29 20:50:07.297 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-04-29 20:50:07.302 +03:00 [DBG] Attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-04-29 20:50:07.317 +03:00 [DBG] Done attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-04-29 20:50:07.363 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 20:50:07.368 +03:00 [DBG] Creating DbConnection.
2025-04-29 20:50:07.370 +03:00 [DBG] Created DbConnection. (1ms).
2025-04-29 20:50:07.372 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:50:07.374 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:50:07.379 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:50:07.381 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-29 20:50:07.383 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 20:50:07.385 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 20:50:07.398 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 20:50:07.401 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:50:07.404 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:50:07.405 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-04-29 20:50:07.407 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:50:07.411 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-04-29 20:50:07.429 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 20:50:07.433 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 20:50:07.436 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 20:50:07.438 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 20:50:07.439 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 20:50:07.443 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 20:50:07.445 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokenDTO'.
2025-04-29 20:50:07.459 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend) in 228.6646ms
2025-04-29 20:50:07.462 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-04-29 20:50:07.466 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 20:50:07.472 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:50:07.477 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-04-29 20:50:07.488 +03:00 [INF] Request finished HTTP/2 POST https://localhost:49464/api/Auth/authenticate - 200 null application/json; charset=utf-8 439.2697ms
2025-04-29 20:50:09.388 +03:00 [DBG] Connection id "0HNC78O2S95TN" received FIN.
2025-04-29 20:50:09.396 +03:00 [DBG] Connection id "0HNC78O2S95TN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 20:50:09.396 +03:00 [DBG] Connection id "0HNC78O2S95TN" is closed. The last processed stream ID was 1.
2025-04-29 20:50:09.405 +03:00 [DBG] The connection queue processing loop for 0HNC78O2S95TN completed.
2025-04-29 20:50:09.407 +03:00 [DBG] Connection id "0HNC78O2S95TN" stopped.
2025-04-29 20:50:42.538 +03:00 [DBG] Connection id "0HNC78O2S95TO" accepted.
2025-04-29 20:50:42.548 +03:00 [DBG] Connection id "0HNC78O2S95TO" started.
2025-04-29 20:50:42.567 +03:00 [DBG] Connection 0HNC78O2S95TO established using the following protocol: "Tls12"
2025-04-29 20:50:42.571 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:49464/api/Administrator/44 - null null
2025-04-29 20:50:42.577 +03:00 [DBG] DELETE requests are not supported
2025-04-29 20:50:42.580 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Administrator/44'
2025-04-29 20:50:42.581 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend)' with route pattern 'api/Administrator/{id}' is valid for the request path '/api/Administrator/44'
2025-04-29 20:50:42.583 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend)'
2025-04-29 20:50:42.664 +03:00 [DBG] Successfully validated the token.
2025-04-29 20:50:42.668 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 20:50:42.679 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-04-29 20:50:42.689 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-29 20:50:42.695 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:49464/api/Administrator/44 - 403 0 null 123.8909ms
2025-04-29 20:50:49.424 +03:00 [DBG] Connection id "0HNC78O2S95TO" received FIN.
2025-04-29 20:50:49.436 +03:00 [DBG] Connection id "0HNC78O2S95TO" is closed. The last processed stream ID was 1.
2025-04-29 20:50:49.438 +03:00 [DBG] The connection queue processing loop for 0HNC78O2S95TO completed.
2025-04-29 20:50:49.446 +03:00 [DBG] Connection id "0HNC78O2S95TO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 20:50:49.464 +03:00 [DBG] Connection id "0HNC78O2S95TO" stopped.
2025-04-29 20:51:15.084 +03:00 [DBG] Connection id "0HNC78O2S95TP" accepted.
2025-04-29 20:51:15.137 +03:00 [DBG] Connection id "0HNC78O2S95TP" started.
2025-04-29 20:51:15.149 +03:00 [DBG] Connection 0HNC78O2S95TP established using the following protocol: "Tls12"
2025-04-29 20:51:15.154 +03:00 [INF] Request starting HTTP/2 POST https://localhost:49464/api/Auth/authenticate - application/json 79
2025-04-29 20:51:15.159 +03:00 [DBG] POST requests are not supported
2025-04-29 20:51:15.161 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/authenticate'
2025-04-29 20:51:15.166 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)' with route pattern 'api/Auth/authenticate' is valid for the request path '/api/Auth/authenticate'
2025-04-29 20:51:15.169 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-04-29 20:51:15.173 +03:00 [DBG] Successfully validated the token.
2025-04-29 20:51:15.176 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 20:51:15.178 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-04-29 20:51:15.182 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokenDTO]] Authenticate(Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-04-29 20:51:15.184 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 20:51:15.186 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 20:51:15.187 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 20:51:15.190 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 20:51:15.191 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 20:51:15.193 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-04-29 20:51:15.195 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-04-29 20:51:15.199 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-04-29 20:51:15.200 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' using the name '' in request data ...
2025-04-29 20:51:15.202 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 20:51:15.203 +03:00 [DBG] Connection id "0HNC78O2S95TP", Request id "0HNC78O2S95TP:00000001": started reading request body.
2025-04-29 20:51:15.205 +03:00 [DBG] Connection id "0HNC78O2S95TP", Request id "0HNC78O2S95TP:00000001": done reading request body.
2025-04-29 20:51:15.206 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'
2025-04-29 20:51:15.207 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-04-29 20:51:15.209 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-04-29 20:51:15.210 +03:00 [DBG] Attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-04-29 20:51:15.212 +03:00 [DBG] Done attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-04-29 20:51:15.216 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 20:51:15.218 +03:00 [DBG] Creating DbConnection.
2025-04-29 20:51:15.219 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-29 20:51:15.220 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:15.222 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:15.223 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:51:15.224 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 20:51:15.225 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-29 20:51:15.227 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 20:51:15.236 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-29 20:51:15.238 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:51:15.240 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:15.243 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-04-29 20:51:15.251 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:15.253 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-04-29 20:51:15.274 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 20:51:15.279 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 20:51:15.286 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 20:51:15.291 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 20:51:15.292 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 20:51:15.294 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 20:51:15.300 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokenDTO'.
2025-04-29 20:51:15.303 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend) in 109.6906ms
2025-04-29 20:51:15.308 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-04-29 20:51:15.309 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 20:51:15.332 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:15.338 +03:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-04-29 20:51:15.344 +03:00 [INF] Request finished HTTP/2 POST https://localhost:49464/api/Auth/authenticate - 200 null application/json; charset=utf-8 190.2274ms
2025-04-29 20:51:19.460 +03:00 [DBG] Connection id "0HNC78O2S95TP" received FIN.
2025-04-29 20:51:19.463 +03:00 [DBG] Connection id "0HNC78O2S95TP" is closed. The last processed stream ID was 1.
2025-04-29 20:51:19.464 +03:00 [DBG] The connection queue processing loop for 0HNC78O2S95TP completed.
2025-04-29 20:51:19.465 +03:00 [DBG] Connection id "0HNC78O2S95TP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 20:51:19.475 +03:00 [DBG] Connection id "0HNC78O2S95TP" stopped.
2025-04-29 20:51:29.917 +03:00 [DBG] Connection id "0HNC78O2S95TQ" accepted.
2025-04-29 20:51:29.952 +03:00 [DBG] Connection id "0HNC78O2S95TQ" started.
2025-04-29 20:51:29.961 +03:00 [DBG] Connection 0HNC78O2S95TQ established using the following protocol: "Tls12"
2025-04-29 20:51:29.963 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:49464/api/Administrator/44 - null null
2025-04-29 20:51:29.967 +03:00 [DBG] DELETE requests are not supported
2025-04-29 20:51:29.969 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Administrator/44'
2025-04-29 20:51:29.970 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend)' with route pattern 'api/Administrator/{id}' is valid for the request path '/api/Administrator/44'
2025-04-29 20:51:29.972 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend)'
2025-04-29 20:51:29.976 +03:00 [DBG] Successfully validated the token.
2025-04-29 20:51:29.978 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 20:51:29.981 +03:00 [DBG] Authorization was successful.
2025-04-29 20:51:29.983 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend)'
2025-04-29 20:51:29.988 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Administrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeleteCategory(Int32) on controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend).
2025-04-29 20:51:29.994 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 20:51:29.996 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 20:51:29.998 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 20:51:30.001 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 20:51:30.003 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 20:51:30.005 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 20:51:30.007 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 20:51:30.012 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-04-29 20:51:30.015 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-04-29 20:51:30.018 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 20:51:30.019 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-04-29 20:51:30.021 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-04-29 20:51:30.023 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-04-29 20:51:30.063 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 20:51:30.070 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()
    .FirstOrDefault(t => t.Id == __categoryId_0)'
2025-04-29 20:51:30.083 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Category>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Category>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
            SELECT TOP(1) c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
            FROM categories AS c
            WHERE c.id == @__categoryId_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
            SELECT TOP(1) c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
            FROM categories AS c
            WHERE c.id == @__categoryId_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Category entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Category instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Category);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Category)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                            {
                                return 
                                {
                                    Category instance;
                                    instance = new Category();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                    instance.<Icon>k__BackingField = dataReader.GetString(2);
                                    instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                    instance.<Name>k__BackingField = dataReader.GetString(4);
                                    instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Category)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-29 20:51:30.090 +03:00 [DBG] Creating DbConnection.
2025-04-29 20:51:30.094 +03:00 [DBG] Created DbConnection. (3ms).
2025-04-29 20:51:30.097 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:30.099 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:30.101 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:51:30.102 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 20:51:30.104 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 20:51:30.106 +03:00 [DBG] Executing DbCommand [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
WHERE [c].[id] = @__categoryId_0
2025-04-29 20:51:30.377 +03:00 [INF] Executed DbCommand (271ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
WHERE [c].[id] = @__categoryId_0
2025-04-29 20:51:30.383 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:30.386 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-04-29 20:51:30.393 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:30.396 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-04-29 20:51:30.401 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend) in 396.6992ms
2025-04-29 20:51:30.404 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory (Finance_Manager_Backend)'
2025-04-29 20:51:30.406 +03:00 [ERR] Category with ID 44 isn't exist.
Finance_Manager_Backend.Exceptions.EntityNotFoundException`1[Finance_Manager_Backend.BusinessLogic.Models.Category]: Category with ID 44 isn't exist.
   at Finance_Manager_Backend.BusinessLogic.Services.CategoriesService.GetCategoryByIdAsync(Int32 categoryId) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\BusinessLogic\Services\CategoriesService.cs:line 24
   at Finance_Manager_Backend.BusinessLogic.Services.CategoriesService.DeleteCategoryAsync(Int32 id) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\BusinessLogic\Services\CategoriesService.cs:line 88
   at Finance_Manager_Backend.Controllers.AdministratorController.DeleteCategory(Int32 id) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Controllers\AdministratorController.cs:line 105
   at lambda_method416(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Finance_Manager_Backend.Middleware.ExceptionsHandler.InvokeAsync(HttpContext httpContext) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Middleware\ExceptionsHandler.cs:line 23
2025-04-29 20:51:30.440 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 20:51:30.454 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:30.461 +03:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-04-29 20:51:30.464 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:49464/api/Administrator/44 - 404 null application/json 500.5788ms
2025-04-29 20:51:39.466 +03:00 [DBG] Connection id "0HNC78O2S95TQ" received FIN.
2025-04-29 20:51:39.473 +03:00 [DBG] Connection id "0HNC78O2S95TQ" is closed. The last processed stream ID was 1.
2025-04-29 20:51:39.473 +03:00 [DBG] The connection queue processing loop for 0HNC78O2S95TQ completed.
2025-04-29 20:51:39.476 +03:00 [DBG] Connection id "0HNC78O2S95TQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 20:51:39.484 +03:00 [DBG] Connection id "0HNC78O2S95TQ" stopped.
2025-04-29 20:51:39.786 +03:00 [DBG] Connection id "0HNC78O2S95TR" accepted.
2025-04-29 20:51:39.792 +03:00 [DBG] Connection id "0HNC78O2S95TR" started.
2025-04-29 20:51:39.795 +03:00 [DBG] Connection 0HNC78O2S95TR established using the following protocol: "Tls12"
2025-04-29 20:51:39.801 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/api/Categories - null null
2025-04-29 20:51:39.809 +03:00 [DBG] The request path  does not match the path filter
2025-04-29 20:51:39.810 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-04-29 20:51:39.812 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-04-29 20:51:39.814 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-04-29 20:51:39.816 +03:00 [DBG] Successfully validated the token.
2025-04-29 20:51:39.817 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 20:51:39.818 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-04-29 20:51:39.823 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-04-29 20:51:39.825 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 20:51:39.827 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 20:51:39.829 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 20:51:39.831 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 20:51:39.834 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 20:51:39.835 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-04-29 20:51:39.837 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-04-29 20:51:39.842 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 20:51:39.846 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-04-29 20:51:39.855 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-29 20:51:39.860 +03:00 [DBG] Creating DbConnection.
2025-04-29 20:51:39.861 +03:00 [DBG] Created DbConnection. (1ms).
2025-04-29 20:51:39.862 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:39.864 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:39.867 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:51:39.869 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 20:51:39.872 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-29 20:51:39.874 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-04-29 20:51:39.878 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-04-29 20:51:39.881 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:51:39.886 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:51:39.888 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:51:39.892 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:51:39.893 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:51:39.895 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:39.897 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 15ms reading results.
2025-04-29 20:51:39.901 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:39.903 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-04-29 20:51:39.914 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 20:51:39.919 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 20:51:39.921 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 20:51:39.923 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 20:51:39.924 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 20:51:39.925 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 20:51:39.927 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-29 20:51:39.939 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 103.112ms
2025-04-29 20:51:39.943 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-04-29 20:51:39.944 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 20:51:39.950 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:51:39.955 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-04-29 20:51:39.959 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/api/Categories - 200 null application/json; charset=utf-8 158.3757ms
2025-04-29 20:51:49.467 +03:00 [DBG] Connection id "0HNC78O2S95TR" received FIN.
2025-04-29 20:51:49.472 +03:00 [DBG] Connection id "0HNC78O2S95TR" is closed. The last processed stream ID was 1.
2025-04-29 20:51:49.472 +03:00 [DBG] The connection queue processing loop for 0HNC78O2S95TR completed.
2025-04-29 20:51:49.480 +03:00 [DBG] Connection id "0HNC78O2S95TR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 20:51:49.490 +03:00 [DBG] Connection id "0HNC78O2S95TR" stopped.
2025-04-29 20:52:37.659 +03:00 [DBG] Connection id "0HNC78O2S95TS" accepted.
2025-04-29 20:52:37.666 +03:00 [DBG] Connection id "0HNC78O2S95TS" started.
2025-04-29 20:52:37.671 +03:00 [DBG] Connection 0HNC78O2S95TS established using the following protocol: "Tls12"
2025-04-29 20:52:37.677 +03:00 [INF] Request starting HTTP/2 POST https://localhost:49464/api/Administrator/create - application/json 134
2025-04-29 20:52:37.685 +03:00 [DBG] POST requests are not supported
2025-04-29 20:52:37.686 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Administrator/create'
2025-04-29 20:52:37.687 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)' with route pattern 'api/Administrator/create' is valid for the request path '/api/Administrator/create'
2025-04-29 20:52:37.688 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 20:52:37.690 +03:00 [DBG] Successfully validated the token.
2025-04-29 20:52:37.691 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-29 20:52:37.693 +03:00 [DBG] Authorization was successful.
2025-04-29 20:52:37.694 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 20:52:37.699 +03:00 [INF] Route matched with {action = "CreateCategory", controller = "Administrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] CreateCategory(Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO) on controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend).
2025-04-29 20:52:37.701 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-29 20:52:37.702 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-29 20:52:37.704 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-04-29 20:52:37.706 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-29 20:52:37.708 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-29 20:52:37.709 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 20:52:37.711 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AdministratorController (Finance_Manager_Backend)
2025-04-29 20:52:37.714 +03:00 [DBG] Attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' ...
2025-04-29 20:52:37.715 +03:00 [DBG] Attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' using the name '' in request data ...
2025-04-29 20:52:37.717 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-29 20:52:37.720 +03:00 [DBG] Connection id "0HNC78O2S95TS", Request id "0HNC78O2S95TS:00000001": started reading request body.
2025-04-29 20:52:37.766 +03:00 [DBG] Connection id "0HNC78O2S95TS", Request id "0HNC78O2S95TS:00000001": done reading request body.
2025-04-29 20:52:37.771 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'
2025-04-29 20:52:37.772 +03:00 [DBG] Done attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 20:52:37.774 +03:00 [DBG] Done attempting to bind parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 20:52:37.775 +03:00 [DBG] Attempting to validate the bound parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO' ...
2025-04-29 20:52:37.780 +03:00 [DBG] Done attempting to validate the bound parameter 'categoryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO'.
2025-04-29 20:52:37.804 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-04-29 20:52:37.806 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:52:37.808 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:52:37.810 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-04-29 20:52:37.811 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-04-29 20:52:37.813 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-04-29 20:52:37.815 +03:00 [DBG] Creating DbConnection.
2025-04-29 20:52:37.816 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-29 20:52:37.817 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:52:37.820 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:52:37.822 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-29 20:52:37.823 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-29 20:52:37.825 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-29 20:52:37.826 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-29 20:52:37.905 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [categories] ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-29 20:52:37.910 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-29 20:52:37.917 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:52:37.920 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-04-29 20:52:37.923 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:52:37.926 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-04-29 20:52:37.934 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-29 20:52:37.939 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-04-29 20:52:37.943 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-29 20:52:37.960 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-29 20:52:37.964 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-04-29 20:52:37.969 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-29 20:52:37.971 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-29 20:52:37.972 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-29 20:52:37.974 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Int32'.
2025-04-29 20:52:37.999 +03:00 [DBG] No endpoints found for address (id=[258],action=[GetCategoryById],controller=[Administrator])
2025-04-29 20:52:38.003 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend) in 294.2832ms
2025-04-29 20:52:38.006 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AdministratorController.CreateCategory (Finance_Manager_Backend)'
2025-04-29 20:52:38.008 +03:00 [ERR] No route matches the supplied values.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Finance_Manager_Backend.Middleware.ExceptionsHandler.InvokeAsync(HttpContext httpContext) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Middleware\ExceptionsHandler.cs:line 23
2025-04-29 20:52:38.019 +03:00 [DBG] 'AppDbContext' disposed.
2025-04-29 20:52:38.022 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-04-29 20:52:38.023 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-29 20:52:38.031 +03:00 [INF] Request finished HTTP/2 POST https://localhost:49464/api/Administrator/create - 400 null application/json 348.1415ms
2025-04-29 20:52:39.549 +03:00 [DBG] Connection id "0HNC78O2S95TS" received FIN.
2025-04-29 20:52:39.552 +03:00 [DBG] Connection id "0HNC78O2S95TS" is closed. The last processed stream ID was 1.
2025-04-29 20:52:39.552 +03:00 [DBG] The connection queue processing loop for 0HNC78O2S95TS completed.
2025-04-29 20:52:39.554 +03:00 [DBG] Connection id "0HNC78O2S95TS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-29 20:52:39.561 +03:00 [DBG] Connection id "0HNC78O2S95TS" stopped.
