2025-05-13 00:04:28.266 +03:00 [DBG] Connection id "0HNCHGQ2DS10E" accepted.
2025-05-13 00:04:28.586 +03:00 [DBG] Connection id "0HNCHGQ2DS10E" started.
2025-05-13 00:04:28.603 +03:00 [DBG] Connection 0HNCHGQ2DS10E established using the following protocol: "Tls12"
2025-05-13 00:04:28.717 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:04:28.726 +03:00 [DBG] POST requests are not supported
2025-05-13 00:04:28.726 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:04:28.728 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:04:28.729 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:04:28.730 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:04:28.732 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:04:28.733 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:04:28.734 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:04:28.736 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:04:28.740 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:04:28.742 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:04:28.743 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:04:28.744 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:04:28.745 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:04:28.746 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:04:28.750 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:04:28.762 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:04:28.763 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:04:28.765 +03:00 [DBG] Connection id "0HNCHGQ2DS10E", Request id "0HNCHGQ2DS10E:00000001": started reading request body.
2025-05-13 00:04:28.766 +03:00 [DBG] Connection id "0HNCHGQ2DS10E", Request id "0HNCHGQ2DS10E:00000001": done reading request body.
2025-05-13 00:04:28.772 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:04:28.773 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:04:28.775 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:04:28.776 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:04:28.778 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:04:28.794 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:04:28.795 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:04:28.796 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:28.834 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:28.837 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:04:28.838 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:04:28.840 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:04:28.841 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:04:29.060 +03:00 [INF] Executed DbCommand (219ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:04:29.063 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.064 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.065 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:04:29.067 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.068 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:04:29.071 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.072 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.073 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:04:29.074 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:04:29.075 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:04:29.076 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:04:29.081 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:04:29.082 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.084 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.085 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.086 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-13 00:04:29.087 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.089 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:04:29.091 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:04:29.092 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:04:29.093 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:04:29.094 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.096 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:04:29.098 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.099 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.101 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:04:29.103 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:04:29.104 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:04:29.106 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:04:29.143 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:04:29.147 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.149 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:04:29.152 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.159 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (7ms).
2025-05-13 00:04:29.251 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.254 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:04:29.257 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.258 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.260 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.261 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:04:29.262 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:04:29.263 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:04:29.265 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.266 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.269 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:04:29.270 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:04:29.272 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:04:29.273 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:04:29.281 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:04:29.284 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:04:29.285 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.288 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-13 00:04:29.290 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.292 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:04:29.293 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.295 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:04:29.296 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:04:29.299 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:04:29.300 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:04:29.302 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:04:29.303 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:04:29.303 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:04:29.305 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:04:29.306 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 561.9421ms
2025-05-13 00:04:29.308 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:04:29.309 +03:00 [DBG] Connection id "0HNCHGQ2DS10E" completed keep alive response.
2025-05-13 00:04:29.311 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:04:29.312 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.313 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:04:29.314 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 597.4051ms
2025-05-13 00:04:29.757 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-13 00:04:29.777 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:04:29.782 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-13 00:04:29.784 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-13 00:04:29.789 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:04:29.791 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:04:29.792 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:04:29.794 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:04:29.795 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:04:29.797 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:04:29.799 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:04:29.801 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:04:29.804 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:04:29.806 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:04:29.807 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:04:29.810 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:04:29.812 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:04:29.813 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:04:29.815 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:04:29.816 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:04:29.818 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:04:29.819 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:04:29.820 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:04:29.823 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:04:29.824 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:04:29.826 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:04:29.827 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:04:29.828 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:04:29.829 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:04:29.830 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 23.0422ms
2025-05-13 00:04:29.832 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:04:29.833 +03:00 [DBG] Connection id "0HNCHGQ2DS10E" completed keep alive response.
2025-05-13 00:04:29.834 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 77.0196ms
2025-05-13 00:04:29.883 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:04:29.886 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:04:29.888 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:04:29.890 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:04:29.891 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:04:29.892 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:04:29.893 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:04:29.895 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:04:29.896 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:04:29.898 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:04:29.899 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:04:29.901 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:04:29.903 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:04:29.906 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:04:29.907 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:04:29.909 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:04:29.910 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:04:29.912 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:04:29.913 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:04:29.915 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.916 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.917 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:04:29.919 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:04:29.922 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:04:29.923 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:04:29.927 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:04:29.930 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.931 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.933 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.934 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.936 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:29.937 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.939 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-13 00:04:29.941 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.942 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:04:29.944 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:04:29.946 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:04:29.948 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:04:29.949 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:04:29.950 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:04:29.951 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:04:29.953 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:04:29.954 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 47.148ms
2025-05-13 00:04:29.956 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:04:29.957 +03:00 [DBG] Connection id "0HNCHGQ2DS10E" completed keep alive response.
2025-05-13 00:04:29.959 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:04:29.960 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:29.961 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:04:29.963 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 79.2679ms
2025-05-13 00:04:29.991 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A04%3A29&pageSize=10 - null null
2025-05-13 00:04:29.995 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:04:29.996 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:04:29.997 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:04:29.999 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:04:30.000 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:04:30.001 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:04:30.003 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:04:30.005 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:04:30.007 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:04:30.010 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:04:30.011 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:04:30.015 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:04:30.017 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:04:30.019 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:04:30.021 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:04:30.023 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:04:30.025 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:04:30.026 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:04:30.029 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:04:30.030 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:04:30.032 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:04:30.034 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:04:30.036 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:04:30.040 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:04:30.041 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:04:30.043 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:04:30.045 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:04:30.047 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:04:30.050 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:04:30.050 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:04:30.051 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:30.053 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:30.055 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:04:30.057 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:04:30.059 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:04:30.062 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:04:30.068 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:04:30.073 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.074 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.076 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.077 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.079 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.080 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.081 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.083 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.084 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.085 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.088 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:30.090 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 16ms reading results.
2025-05-13 00:04:30.091 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:30.093 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:04:30.094 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:04:30.097 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:04:30.098 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:04:30.099 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:04:30.100 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:04:30.101 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:04:30.105 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:04:30.106 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 87.7196ms
2025-05-13 00:04:30.110 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:04:30.112 +03:00 [DBG] Connection id "0HNCHGQ2DS10E" completed keep alive response.
2025-05-13 00:04:30.114 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:04:30.116 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:30.122 +03:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-05-13 00:04:30.125 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A04%3A29&pageSize=10 - 200 1343 application/json; charset=utf-8 133.7109ms
2025-05-13 00:04:30.135 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:04:30.141 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:04:30.142 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:04:30.143 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:04:30.144 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:04:30.146 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:04:30.147 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:04:30.148 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:04:30.149 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:04:30.151 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:04:30.153 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:04:30.154 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:04:30.157 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:04:30.158 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:04:30.160 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:04:30.161 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:04:30.163 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:04:30.165 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:04:30.166 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:04:30.168 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:04:30.170 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:04:30.172 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:04:30.174 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:04:30.176 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:04:30.177 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:04:30.179 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:04:30.180 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:04:30.182 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:04:30.184 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:04:30.186 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:04:30.189 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-13 00:04:30.190 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:30.191 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:30.192 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:04:30.193 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:04:30.194 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:04:30.196 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:04:30.201 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:04:30.203 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.205 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.207 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.208 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:04:30.210 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:30.211 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-13 00:04:30.212 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:30.213 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:04:30.214 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:04:30.216 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:04:30.218 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:04:30.219 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:04:30.222 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:04:30.223 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:04:30.224 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:04:30.225 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 65.2197ms
2025-05-13 00:04:30.230 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:04:30.231 +03:00 [DBG] Connection id "0HNCHGQ2DS10E" completed keep alive response.
2025-05-13 00:04:30.232 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:04:30.234 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:04:30.236 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:04:30.237 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 102.0699ms
2025-05-13 00:04:53.283 +03:00 [DBG] Connection id "0HNCHGQ2DS10E" reset.
2025-05-13 00:04:53.288 +03:00 [DBG] Connection id "0HNCHGQ2DS10E" disconnecting.
2025-05-13 00:04:53.292 +03:00 [DBG] Connection id "0HNCHGQ2DS10E" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:04:53.293 +03:00 [DBG] Connection id "0HNCHGQ2DS10E" stopped.
2025-05-13 00:06:29.812 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-13 00:06:39.825 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:06:39.883 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0055ms - processed: 1 items - remaining: 0 items
2025-05-13 00:07:30.422 +03:00 [DBG] Connection id "0HNCHGQ2DS10F" accepted.
2025-05-13 00:07:30.427 +03:00 [DBG] Connection id "0HNCHGQ2DS10F" started.
2025-05-13 00:07:30.445 +03:00 [DBG] Connection 0HNCHGQ2DS10F established using the following protocol: "Tls12"
2025-05-13 00:07:30.524 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:07:30.530 +03:00 [DBG] POST requests are not supported
2025-05-13 00:07:30.532 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:07:30.534 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:07:30.536 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:07:30.537 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:07:30.539 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:07:30.540 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:07:30.542 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:07:30.544 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:07:30.546 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:07:30.548 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:07:30.550 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:07:30.552 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:07:30.553 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:07:30.555 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:07:30.556 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:07:30.558 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:07:30.560 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:07:30.561 +03:00 [DBG] Connection id "0HNCHGQ2DS10F", Request id "0HNCHGQ2DS10F:00000001": started reading request body.
2025-05-13 00:07:30.563 +03:00 [DBG] Connection id "0HNCHGQ2DS10F", Request id "0HNCHGQ2DS10F:00000001": done reading request body.
2025-05-13 00:07:30.564 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:07:30.566 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:07:30.568 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:07:30.569 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:07:30.571 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:07:30.574 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:07:30.575 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:07:30.576 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.577 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.579 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:30.580 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:07:30.581 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:07:30.583 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:07:30.592 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:07:30.595 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:30.597 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.599 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-13 00:07:30.601 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.602 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:07:30.605 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.606 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.607 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:30.608 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:07:30.609 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:07:30.611 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:07:30.616 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:07:30.619 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:30.621 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:30.622 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.623 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-13 00:07:30.625 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.626 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:07:30.628 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:07:30.630 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:07:30.631 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:07:30.632 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:30.635 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:07:30.636 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.638 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.639 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:30.640 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:07:30.642 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:07:30.643 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:07:30.690 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:07:30.693 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.695 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-13 00:07:30.698 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.700 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-13 00:07:30.701 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:30.702 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:07:30.703 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:30.705 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:30.706 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:30.706 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:07:30.707 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:07:30.709 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:07:30.710 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.711 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.712 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:30.713 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:07:30.714 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:07:30.714 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:07:30.735 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:07:30.739 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:07:30.756 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.758 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 19ms reading results.
2025-05-13 00:07:30.759 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.760 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:07:30.762 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:30.763 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:07:30.764 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:07:30.800 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:07:30.802 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:07:30.803 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:07:30.804 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:07:30.805 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:07:30.807 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:07:30.808 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 256.7014ms
2025-05-13 00:07:30.810 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:07:30.811 +03:00 [DBG] Connection id "0HNCHGQ2DS10F" completed keep alive response.
2025-05-13 00:07:30.812 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:07:30.814 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:30.815 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:07:30.835 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 311.8603ms
2025-05-13 00:07:31.052 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-13 00:07:31.080 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:07:31.081 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-13 00:07:31.082 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-13 00:07:31.085 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:07:31.087 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:07:31.088 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:07:31.089 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:07:31.090 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:07:31.092 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:07:31.094 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:07:31.095 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:07:31.098 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:07:31.099 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:07:31.101 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:07:31.102 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:07:31.104 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:07:31.105 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:07:31.107 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:07:31.108 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:07:31.110 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:07:31.111 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:07:31.112 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:07:31.115 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:07:31.116 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:07:31.118 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:07:31.119 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:07:31.121 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:07:31.122 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:07:31.123 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 22.8901ms
2025-05-13 00:07:31.126 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:07:31.127 +03:00 [DBG] Connection id "0HNCHGQ2DS10F" completed keep alive response.
2025-05-13 00:07:31.128 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 76.5605ms
2025-05-13 00:07:31.139 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:07:31.142 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:07:31.143 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:07:31.145 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:07:31.146 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:07:31.147 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:07:31.148 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:07:31.150 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:07:31.151 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:07:31.153 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:07:31.154 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:07:31.156 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:07:31.160 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:07:31.162 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:07:31.164 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:07:31.168 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:07:31.170 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:07:31.172 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:07:31.175 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-13 00:07:31.176 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.178 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.179 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:31.181 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:07:31.182 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:07:31.185 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:07:31.195 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:07:31.199 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.202 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.203 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.206 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.207 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.209 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.211 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 12ms reading results.
2025-05-13 00:07:31.213 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.215 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:07:31.218 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:07:31.222 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:07:31.223 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:07:31.225 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:07:31.226 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:07:31.227 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:07:31.228 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:07:31.230 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 65.5012ms
2025-05-13 00:07:31.240 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:07:31.242 +03:00 [DBG] Connection id "0HNCHGQ2DS10F" completed keep alive response.
2025-05-13 00:07:31.244 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:07:31.246 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.249 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-13 00:07:31.255 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 115.6528ms
2025-05-13 00:07:31.280 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A07%3A31&pageSize=10 - null null
2025-05-13 00:07:31.285 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:07:31.287 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:07:31.291 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:07:31.294 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:07:31.296 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:07:31.298 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:07:31.302 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:07:31.304 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:07:31.311 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:07:31.313 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:07:31.315 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:07:31.319 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:07:31.321 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:07:31.323 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:07:31.324 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:07:31.326 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:07:31.327 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:07:31.329 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:07:31.331 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:07:31.332 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:07:31.334 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:07:31.335 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:07:31.338 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:07:31.340 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:07:31.341 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:07:31.342 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:07:31.344 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:07:31.345 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:07:31.347 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:07:31.348 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:07:31.349 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.351 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.355 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:31.356 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:07:31.357 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:07:31.359 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:07:31.371 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:07:31.382 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.385 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.386 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.388 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.389 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.390 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.393 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.395 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.404 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.406 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.407 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.409 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 27ms reading results.
2025-05-13 00:07:31.411 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.415 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (4ms).
2025-05-13 00:07:31.419 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:07:31.422 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:07:31.424 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:07:31.425 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:07:31.426 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:07:31.431 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:07:31.435 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:07:31.438 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 115.9512ms
2025-05-13 00:07:31.470 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:07:31.472 +03:00 [DBG] Connection id "0HNCHGQ2DS10F" completed keep alive response.
2025-05-13 00:07:31.473 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:07:31.478 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.481 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:07:31.484 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A07%3A31&pageSize=10 - 200 1343 application/json; charset=utf-8 204.2456ms
2025-05-13 00:07:31.492 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:07:31.496 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:07:31.497 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:07:31.498 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:07:31.501 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:07:31.502 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:07:31.503 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:07:31.504 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:07:31.506 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:07:31.508 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:07:31.510 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:07:31.513 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:07:31.515 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:07:31.520 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:07:31.526 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:07:31.529 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:07:31.531 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:07:31.535 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:07:31.541 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:07:31.546 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:07:31.549 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:07:31.556 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:07:31.559 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:07:31.561 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:07:31.564 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:07:31.565 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:07:31.571 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:07:31.573 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:07:31.578 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:07:31.582 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:07:31.585 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-13 00:07:31.586 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.587 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.589 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:31.590 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:07:31.592 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:07:31.594 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:07:31.623 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:07:31.625 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.627 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.628 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.630 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:31.631 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.633 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-13 00:07:31.635 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.636 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:07:31.638 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:07:31.640 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:07:31.641 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:07:31.643 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:07:31.644 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:07:31.645 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:07:31.646 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:07:31.647 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 121.4207ms
2025-05-13 00:07:31.649 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:07:31.652 +03:00 [DBG] Connection id "0HNCHGQ2DS10F" completed keep alive response.
2025-05-13 00:07:31.653 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:07:31.654 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:31.655 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:07:31.656 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 163.9216ms
2025-05-13 00:07:34.615 +03:00 [DBG] Connection id "0HNCHGQ2DS10F" reset.
2025-05-13 00:07:34.621 +03:00 [DBG] Connection id "0HNCHGQ2DS10F" disconnecting.
2025-05-13 00:07:34.622 +03:00 [DBG] Connection id "0HNCHGQ2DS10F" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:07:34.624 +03:00 [DBG] Connection id "0HNCHGQ2DS10F" stopped.
2025-05-13 00:07:47.182 +03:00 [DBG] Connection id "0HNCHGQ2DS10G" accepted.
2025-05-13 00:07:47.199 +03:00 [DBG] Connection id "0HNCHGQ2DS10G" started.
2025-05-13 00:07:47.271 +03:00 [DBG] Connection 0HNCHGQ2DS10G established using the following protocol: "Tls12"
2025-05-13 00:07:47.438 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:07:47.445 +03:00 [DBG] POST requests are not supported
2025-05-13 00:07:47.632 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:07:47.808 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:07:47.812 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:07:47.822 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:07:47.827 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:07:47.831 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:07:47.836 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:07:47.840 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:07:47.842 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:07:48.146 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:07:48.149 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:07:48.151 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:07:48.153 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:07:48.155 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:07:48.157 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:07:48.159 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:07:48.160 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:07:48.162 +03:00 [DBG] Connection id "0HNCHGQ2DS10G", Request id "0HNCHGQ2DS10G:00000001": started reading request body.
2025-05-13 00:07:48.164 +03:00 [DBG] Connection id "0HNCHGQ2DS10G", Request id "0HNCHGQ2DS10G:00000001": done reading request body.
2025-05-13 00:07:48.166 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:07:48.169 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:07:48.171 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:07:48.172 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:07:48.178 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:07:48.181 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:07:48.182 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:07:48.183 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.185 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.187 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:48.189 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:07:48.199 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-05-13 00:07:48.201 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:07:48.213 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:07:48.216 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:48.218 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.219 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-13 00:07:48.224 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.224 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (0ms).
2025-05-13 00:07:48.225 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.226 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.229 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:48.230 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:07:48.234 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:07:48.235 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:07:48.276 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:07:48.312 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:48.314 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:48.319 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.320 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-13 00:07:48.322 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.323 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:07:48.325 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:07:48.326 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:07:48.328 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:07:48.329 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:48.331 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:07:48.332 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.334 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.335 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:48.336 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:07:48.338 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:07:48.339 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:07:48.404 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:07:48.434 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.436 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-13 00:07:48.438 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.439 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:07:48.441 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:48.443 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:07:48.445 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:48.450 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:48.451 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:48.452 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:07:48.453 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:07:48.454 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:07:48.455 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.458 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.460 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:48.461 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:07:48.462 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:07:48.465 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:07:48.569 +03:00 [INF] Executed DbCommand (104ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:07:48.585 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:07:48.595 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.609 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 23ms reading results.
2025-05-13 00:07:48.615 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.621 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (5ms).
2025-05-13 00:07:48.653 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:48.655 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:07:48.657 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:07:48.659 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:07:48.661 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:07:48.662 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:07:48.663 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:07:48.667 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:07:48.669 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:07:48.670 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 519.2628ms
2025-05-13 00:07:48.672 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:07:48.673 +03:00 [DBG] Connection id "0HNCHGQ2DS10G" completed keep alive response.
2025-05-13 00:07:48.675 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:07:48.676 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:48.679 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:07:48.683 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 1244.6079ms
2025-05-13 00:07:48.878 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-13 00:07:48.904 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:07:48.905 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-13 00:07:48.907 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-13 00:07:48.909 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:07:48.910 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:07:48.911 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:07:48.912 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:07:48.914 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:07:48.916 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:07:48.917 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:07:48.919 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:07:48.921 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:07:48.923 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:07:48.924 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:07:48.926 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:07:48.928 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:07:48.929 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:07:48.931 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:07:48.932 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:07:48.933 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:07:48.935 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:07:48.936 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:07:48.938 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:07:48.940 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:07:48.941 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:07:48.943 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:07:48.944 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:07:48.945 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:07:48.946 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 21.9815ms
2025-05-13 00:07:48.950 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:07:48.951 +03:00 [DBG] Connection id "0HNCHGQ2DS10G" completed keep alive response.
2025-05-13 00:07:48.952 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 74.0102ms
2025-05-13 00:07:48.965 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:07:48.968 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:07:48.969 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:07:48.970 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:07:48.972 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:07:48.974 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:07:48.974 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:07:48.976 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:07:48.977 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:07:48.979 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:07:48.980 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:07:48.982 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:07:48.984 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:07:48.986 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:07:48.988 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:07:48.990 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:07:48.992 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:07:48.994 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:07:48.995 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:07:48.997 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.001 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.003 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:49.005 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:07:49.006 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:07:49.009 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:07:49.015 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:07:49.019 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.021 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.023 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.024 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.026 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.028 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.030 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 11ms reading results.
2025-05-13 00:07:49.034 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.038 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (4ms).
2025-05-13 00:07:49.040 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:07:49.043 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:07:49.045 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:07:49.047 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:07:49.049 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:07:49.051 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:07:49.052 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:07:49.054 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 66.6139ms
2025-05-13 00:07:49.059 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:07:49.061 +03:00 [DBG] Connection id "0HNCHGQ2DS10G" completed keep alive response.
2025-05-13 00:07:49.066 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:07:49.076 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.079 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-13 00:07:49.085 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 120.482ms
2025-05-13 00:07:49.105 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A07%3A49&pageSize=10 - null null
2025-05-13 00:07:49.108 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:07:49.109 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:07:49.110 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:07:49.112 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:07:49.113 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:07:49.115 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:07:49.117 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:07:49.119 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:07:49.122 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:07:49.124 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:07:49.125 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:07:49.128 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:07:49.130 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:07:49.134 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:07:49.136 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:07:49.138 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:07:49.139 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:07:49.141 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:07:49.143 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:07:49.145 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:07:49.147 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:07:49.149 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:07:49.151 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:07:49.153 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:07:49.154 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:07:49.156 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:07:49.157 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:07:49.159 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:07:49.161 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:07:49.162 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:07:49.163 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.164 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.166 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:49.167 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:07:49.168 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:07:49.170 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:07:49.175 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:07:49.177 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.179 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.180 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.181 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.184 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.185 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.186 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.188 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.189 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.191 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.192 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.193 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 16ms reading results.
2025-05-13 00:07:49.195 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.196 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:07:49.200 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:07:49.202 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:07:49.204 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:07:49.205 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:07:49.206 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:07:49.207 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:07:49.208 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:07:49.209 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 75.5536ms
2025-05-13 00:07:49.211 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:07:49.211 +03:00 [DBG] Connection id "0HNCHGQ2DS10G" completed keep alive response.
2025-05-13 00:07:49.213 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:07:49.215 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.217 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:07:49.218 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A07%3A49&pageSize=10 - 200 1343 application/json; charset=utf-8 113.5145ms
2025-05-13 00:07:49.231 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:07:49.235 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:07:49.236 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:07:49.238 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:07:49.239 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:07:49.240 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:07:49.241 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:07:49.242 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:07:49.243 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:07:49.248 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:07:49.250 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:07:49.251 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:07:49.253 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:07:49.254 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:07:49.255 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:07:49.256 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:07:49.258 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:07:49.259 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:07:49.260 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:07:49.262 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:07:49.263 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:07:49.265 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:07:49.268 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:07:49.270 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:07:49.271 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:07:49.273 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:07:49.275 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:07:49.277 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:07:49.280 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:07:49.284 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:07:49.285 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:07:49.286 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.288 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.289 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:07:49.290 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:07:49.292 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:07:49.293 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:07:49.302 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:07:49.306 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.308 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.311 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.319 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:07:49.322 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.328 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 21ms reading results.
2025-05-13 00:07:49.333 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.335 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:07:49.337 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:07:49.340 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:07:49.341 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:07:49.343 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:07:49.344 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:07:49.345 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:07:49.349 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:07:49.351 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 95.628ms
2025-05-13 00:07:49.354 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:07:49.356 +03:00 [DBG] Connection id "0HNCHGQ2DS10G" completed keep alive response.
2025-05-13 00:07:49.360 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:07:49.363 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:07:49.367 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-13 00:07:49.370 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 139.2109ms
2025-05-13 00:07:55.409 +03:00 [DBG] Connection id "0HNCHGQ2DS10G" reset.
2025-05-13 00:07:55.413 +03:00 [DBG] Connection id "0HNCHGQ2DS10G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:07:55.415 +03:00 [DBG] Connection id "0HNCHGQ2DS10G" disconnecting.
2025-05-13 00:07:55.418 +03:00 [DBG] Connection id "0HNCHGQ2DS10G" stopped.
2025-05-13 00:08:04.602 +03:00 [DBG] Connection id "0HNCHGQ2DS10H" accepted.
2025-05-13 00:08:04.631 +03:00 [DBG] Connection id "0HNCHGQ2DS10H" started.
2025-05-13 00:08:04.689 +03:00 [DBG] Connection 0HNCHGQ2DS10H established using the following protocol: "Tls12"
2025-05-13 00:08:04.756 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:08:04.778 +03:00 [DBG] POST requests are not supported
2025-05-13 00:08:04.779 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:08:04.781 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:08:04.782 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:08:04.783 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:08:04.785 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:08:04.786 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:08:04.790 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:04.792 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:04.794 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:04.798 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:04.800 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:04.802 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:08:04.804 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:08:04.806 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:08:04.808 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:08:04.811 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:08:04.812 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:08:04.814 +03:00 [DBG] Connection id "0HNCHGQ2DS10H", Request id "0HNCHGQ2DS10H:00000001": started reading request body.
2025-05-13 00:08:04.815 +03:00 [DBG] Connection id "0HNCHGQ2DS10H", Request id "0HNCHGQ2DS10H:00000001": done reading request body.
2025-05-13 00:08:04.817 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:08:04.819 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:08:04.821 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:08:04.822 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:08:04.824 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:08:04.827 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:08:04.828 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:08:04.829 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.831 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.832 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:04.833 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:04.835 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:04.836 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:08:04.840 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:08:04.842 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:04.844 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.845 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-13 00:08:04.847 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.849 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:04.868 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.870 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.871 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:04.872 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:04.874 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:04.875 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:08:04.880 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:08:04.883 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:04.884 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:04.885 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.887 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-13 00:08:04.888 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.890 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:04.891 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:08:04.892 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:08:04.907 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:08:04.909 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:04.912 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:08:04.914 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.918 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.919 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:04.921 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:04.923 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:08:04.924 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:08:04.957 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:08:04.959 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.961 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:08:04.963 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.964 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:04.965 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:04.967 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:08:04.968 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:04.970 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:04.972 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:04.973 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:08:04.974 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:08:04.976 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:08:04.978 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.979 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:04.981 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:04.982 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:04.983 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:04.984 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:08:05.018 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:08:05.115 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:08:05.116 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.120 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-13 00:08:05.129 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.130 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:05.132 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.135 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:08:05.136 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:05.141 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:05.146 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:05.147 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:05.149 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:05.150 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:05.151 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:08:05.153 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 350.5885ms
2025-05-13 00:08:05.155 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:08:05.156 +03:00 [DBG] Connection id "0HNCHGQ2DS10H" completed keep alive response.
2025-05-13 00:08:05.157 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:08:05.162 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.163 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:08:05.165 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 409.1549ms
2025-05-13 00:08:05.330 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-13 00:08:05.371 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:08:05.372 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-13 00:08:05.374 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-13 00:08:05.386 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:08:05.388 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:08:05.389 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:08:05.395 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:08:05.401 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:08:05.405 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:05.413 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:05.416 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:05.422 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:05.438 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:05.440 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:08:05.441 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:08:05.442 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:08:05.443 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:08:05.446 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:08:05.454 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:08:05.456 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:08:05.457 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:08:05.458 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:05.462 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:05.464 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:05.465 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:05.466 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:05.467 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:05.468 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:08:05.470 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 29.8916ms
2025-05-13 00:08:05.471 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:08:05.473 +03:00 [DBG] Connection id "0HNCHGQ2DS10H" completed keep alive response.
2025-05-13 00:08:05.474 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 143.3011ms
2025-05-13 00:08:05.486 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:08:05.489 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:08:05.490 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:08:05.492 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:08:05.493 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:08:05.496 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:08:05.498 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:08:05.499 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:08:05.500 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:08:05.503 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:05.505 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:05.506 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:05.509 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:05.515 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:05.519 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:08:05.521 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:08:05.525 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:08:05.530 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:08:05.531 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:08:05.533 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.534 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.536 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:05.550 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2025-05-13 00:08:05.552 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2025-05-13 00:08:05.554 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:08:05.561 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:08:05.565 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.566 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.567 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.569 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.571 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.573 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.574 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-13 00:08:05.576 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.579 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-13 00:08:05.581 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:05.584 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:05.586 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:05.588 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:05.589 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:05.590 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:05.592 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:08:05.595 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 76.1202ms
2025-05-13 00:08:05.599 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:08:05.605 +03:00 [DBG] Connection id "0HNCHGQ2DS10H" completed keep alive response.
2025-05-13 00:08:05.607 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:08:05.610 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.614 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-05-13 00:08:05.619 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 132.6571ms
2025-05-13 00:08:05.639 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A08%3A05&pageSize=10 - null null
2025-05-13 00:08:05.642 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:08:05.643 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:08:05.644 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:08:05.648 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:08:05.651 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:08:05.652 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:08:05.653 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:08:05.655 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:08:05.657 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:05.659 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:05.661 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:05.664 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:05.665 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:05.666 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:08:05.668 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:08:05.669 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:08:05.670 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:08:05.672 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:08:05.674 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:08:05.675 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:08:05.680 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:08:05.681 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:08:05.683 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:08:05.685 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:08:05.686 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:08:05.688 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:08:05.689 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:08:05.691 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:08:05.694 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:08:05.695 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:08:05.696 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.698 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.699 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:05.700 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:05.702 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:05.703 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:08:05.709 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:08:05.711 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.712 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.714 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.715 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.717 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.718 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.719 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.721 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.722 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.724 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.725 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.727 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 15ms reading results.
2025-05-13 00:08:05.729 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.730 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:05.732 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:05.734 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:05.736 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:05.737 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:05.738 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:05.739 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:05.741 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:08:05.743 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 76.4199ms
2025-05-13 00:08:05.746 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:08:05.747 +03:00 [DBG] Connection id "0HNCHGQ2DS10H" completed keep alive response.
2025-05-13 00:08:05.748 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:08:05.749 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.750 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:08:05.752 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A08%3A05&pageSize=10 - 200 1343 application/json; charset=utf-8 112.5504ms
2025-05-13 00:08:05.765 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:08:05.775 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:08:05.777 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:08:05.780 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:08:05.783 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:08:05.786 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:08:05.791 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:08:05.793 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:08:05.798 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:08:05.801 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:05.804 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:05.807 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:05.810 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:05.814 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:05.817 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:08:05.821 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:08:05.829 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:08:05.831 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:08:05.834 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:08:05.839 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:08:05.842 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:08:05.848 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:08:05.853 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:08:05.858 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:08:05.862 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:08:05.864 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:08:05.867 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:08:05.868 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:08:05.871 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:08:05.873 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:08:05.874 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:08:05.876 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.879 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.881 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:05.882 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:05.884 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:05.885 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:08:05.891 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:08:05.894 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.898 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.900 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.901 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:05.903 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.905 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 10ms reading results.
2025-05-13 00:08:05.907 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.908 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:05.910 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:05.915 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:05.917 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:05.919 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:05.920 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:05.921 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:05.922 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:08:05.924 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 107.0493ms
2025-05-13 00:08:05.927 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:08:05.933 +03:00 [DBG] Connection id "0HNCHGQ2DS10H" completed keep alive response.
2025-05-13 00:08:05.934 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:08:05.935 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:05.936 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:08:05.938 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 172.6411ms
2025-05-13 00:08:08.711 +03:00 [DBG] Connection id "0HNCHGQ2DS10H" reset.
2025-05-13 00:08:08.733 +03:00 [DBG] Connection id "0HNCHGQ2DS10H" disconnecting.
2025-05-13 00:08:08.743 +03:00 [DBG] Connection id "0HNCHGQ2DS10H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:08:08.748 +03:00 [DBG] Connection id "0HNCHGQ2DS10H" stopped.
2025-05-13 00:08:20.563 +03:00 [DBG] Connection id "0HNCHGQ2DS10I" accepted.
2025-05-13 00:08:20.566 +03:00 [DBG] Connection id "0HNCHGQ2DS10I" started.
2025-05-13 00:08:20.590 +03:00 [DBG] Connection 0HNCHGQ2DS10I established using the following protocol: "Tls12"
2025-05-13 00:08:20.657 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:08:20.661 +03:00 [DBG] POST requests are not supported
2025-05-13 00:08:20.662 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:08:20.664 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:08:20.665 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:08:20.666 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:08:20.668 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:08:20.669 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:08:20.671 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:20.672 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:20.673 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:20.676 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:20.677 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:20.679 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:08:20.681 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:08:20.682 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:08:20.683 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:08:20.687 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:08:20.688 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:08:20.689 +03:00 [DBG] Connection id "0HNCHGQ2DS10I", Request id "0HNCHGQ2DS10I:00000001": started reading request body.
2025-05-13 00:08:20.691 +03:00 [DBG] Connection id "0HNCHGQ2DS10I", Request id "0HNCHGQ2DS10I:00000001": done reading request body.
2025-05-13 00:08:20.698 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:08:20.703 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:08:20.705 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:08:20.709 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:08:20.713 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:08:20.716 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:08:20.718 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:08:20.719 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:20.721 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:20.722 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:20.724 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:20.727 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-13 00:08:20.733 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:08:20.739 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:08:20.752 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:20.755 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:20.761 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-13 00:08:20.763 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:20.764 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:20.766 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:20.768 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:20.769 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:20.770 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:20.772 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:20.903 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:08:20.909 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:08:20.913 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:20.915 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:20.918 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:20.920 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-13 00:08:20.925 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:20.927 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-13 00:08:20.929 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:08:20.931 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:08:20.933 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:08:20.934 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:20.936 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:08:20.938 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:20.942 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:20.943 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:20.945 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:20.950 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-13 00:08:20.951 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:08:21.022 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:08:21.098 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.102 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-13 00:08:21.105 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.108 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-13 00:08:21.113 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:21.244 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:08:21.263 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:21.286 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:21.289 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:21.293 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:08:21.295 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:08:21.300 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:08:21.302 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.306 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.311 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:21.313 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:21.315 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:08:21.318 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:08:21.369 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:08:21.385 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:08:21.387 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.388 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:08:21.390 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.394 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (4ms).
2025-05-13 00:08:21.396 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:21.402 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:08:21.409 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:21.414 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:21.416 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:21.418 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:21.418 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:21.419 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:21.421 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:08:21.422 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 743.2058ms
2025-05-13 00:08:21.424 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:08:21.427 +03:00 [DBG] Connection id "0HNCHGQ2DS10I" completed keep alive response.
2025-05-13 00:08:21.429 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:08:21.429 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.431 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:08:21.432 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 774.8411ms
2025-05-13 00:08:21.671 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-13 00:08:21.691 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:08:21.692 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-13 00:08:21.693 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-13 00:08:21.694 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:08:21.695 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:08:21.696 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:08:21.697 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:08:21.698 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:08:21.701 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:21.703 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:21.704 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:21.705 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:21.707 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:21.710 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:08:21.712 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:08:21.713 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:08:21.714 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:08:21.716 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:08:21.718 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:08:21.719 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:08:21.720 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:08:21.721 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:21.726 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:21.728 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:21.731 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:21.732 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:21.733 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:21.734 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:08:21.736 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 25.6582ms
2025-05-13 00:08:21.738 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:08:21.740 +03:00 [DBG] Connection id "0HNCHGQ2DS10I" completed keep alive response.
2025-05-13 00:08:21.743 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 72.5623ms
2025-05-13 00:08:21.758 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:08:21.764 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:08:21.768 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:08:21.771 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:08:21.777 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:08:21.788 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:08:21.795 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:08:21.799 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:08:21.801 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:08:21.804 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:21.810 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:21.814 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:21.819 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:21.822 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:21.827 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:08:21.829 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:08:21.831 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:08:21.833 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:08:21.834 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:08:21.836 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.838 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.840 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:21.843 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:08:21.845 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-13 00:08:21.847 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:08:21.851 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:08:21.856 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:21.859 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:21.861 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:21.862 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:21.864 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:21.865 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.866 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 10ms reading results.
2025-05-13 00:08:21.870 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.871 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:21.875 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:21.879 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:21.880 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:21.881 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:21.882 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:21.883 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:21.884 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:08:21.886 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 58.7398ms
2025-05-13 00:08:21.890 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:08:21.895 +03:00 [DBG] Connection id "0HNCHGQ2DS10I" completed keep alive response.
2025-05-13 00:08:21.897 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:08:21.899 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.902 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:08:21.904 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 146.2217ms
2025-05-13 00:08:21.930 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A08%3A21&pageSize=10 - null null
2025-05-13 00:08:21.932 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:08:21.934 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:08:21.935 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:08:21.936 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:08:21.938 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:08:21.939 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:08:21.940 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:08:21.941 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:08:21.943 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:21.945 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:21.946 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:21.948 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:21.950 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:21.951 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:08:21.953 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:08:21.954 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:08:21.956 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:08:21.959 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:08:21.960 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:08:21.962 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:08:21.964 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:08:21.966 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:08:21.968 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:08:21.970 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:08:21.971 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:08:21.972 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:08:21.974 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:08:21.976 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:08:21.978 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:08:21.979 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:08:21.980 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.981 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:21.982 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:21.984 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:21.985 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:21.986 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:08:21.992 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:08:21.994 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:21.995 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:21.997 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:21.998 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:22.000 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:22.001 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:22.003 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:22.004 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:22.005 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:22.007 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:22.008 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:22.009 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 15ms reading results.
2025-05-13 00:08:22.011 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:22.013 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:22.014 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:22.017 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:22.018 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:22.020 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:22.020 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:22.023 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:22.026 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:08:22.028 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 76.6934ms
2025-05-13 00:08:22.031 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:08:22.033 +03:00 [DBG] Connection id "0HNCHGQ2DS10I" completed keep alive response.
2025-05-13 00:08:22.035 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:08:22.039 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:22.043 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-05-13 00:08:22.046 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A08%3A21&pageSize=10 - 200 1343 application/json; charset=utf-8 116.5276ms
2025-05-13 00:08:22.055 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:08:22.061 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:08:22.063 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:08:22.065 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:08:22.070 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:08:22.071 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:08:22.073 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:08:22.077 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:08:22.079 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:08:22.083 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:22.086 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:22.110 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:22.114 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:22.118 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:22.122 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:08:22.128 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:08:22.130 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:08:22.131 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:08:22.133 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:08:22.136 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:08:22.138 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:08:22.142 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:08:22.144 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:08:22.147 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:08:22.149 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:08:22.152 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:08:22.153 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:08:22.155 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:08:22.158 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:08:22.161 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:08:22.162 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:08:22.163 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:22.165 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:22.167 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:22.168 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:22.170 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:08:22.172 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:08:22.179 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:08:22.184 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:22.186 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:22.187 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:22.189 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:22.192 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:22.193 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-13 00:08:22.195 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:22.196 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:22.198 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:22.200 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:22.202 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:22.203 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:22.204 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:22.205 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:22.206 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:08:22.208 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 85.2154ms
2025-05-13 00:08:22.210 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:08:22.211 +03:00 [DBG] Connection id "0HNCHGQ2DS10I" completed keep alive response.
2025-05-13 00:08:22.212 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:08:22.213 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:22.215 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:08:22.216 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 161.1475ms
2025-05-13 00:08:28.725 +03:00 [DBG] Connection id "0HNCHGQ2DS10I" reset.
2025-05-13 00:08:28.728 +03:00 [DBG] Connection id "0HNCHGQ2DS10I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:08:28.730 +03:00 [DBG] Connection id "0HNCHGQ2DS10I" disconnecting.
2025-05-13 00:08:28.732 +03:00 [DBG] Connection id "0HNCHGQ2DS10I" stopped.
2025-05-13 00:08:36.376 +03:00 [DBG] Connection id "0HNCHGQ2DS10J" accepted.
2025-05-13 00:08:36.379 +03:00 [DBG] Connection id "0HNCHGQ2DS10J" started.
2025-05-13 00:08:36.402 +03:00 [DBG] Connection 0HNCHGQ2DS10J established using the following protocol: "Tls12"
2025-05-13 00:08:36.475 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:08:36.491 +03:00 [DBG] POST requests are not supported
2025-05-13 00:08:36.493 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:08:36.495 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:08:36.501 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:08:36.504 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:08:36.506 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:08:36.508 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:08:36.511 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:36.514 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:36.516 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:36.521 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:36.524 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:36.528 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:08:36.534 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:08:36.539 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:08:36.542 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:08:36.545 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:08:36.548 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:08:36.550 +03:00 [DBG] Connection id "0HNCHGQ2DS10J", Request id "0HNCHGQ2DS10J:00000001": started reading request body.
2025-05-13 00:08:36.554 +03:00 [DBG] Connection id "0HNCHGQ2DS10J", Request id "0HNCHGQ2DS10J:00000001": done reading request body.
2025-05-13 00:08:36.557 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:08:36.563 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:08:36.565 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:08:36.568 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:08:36.573 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:08:36.579 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:08:36.580 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:08:36.582 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.585 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.631 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:36.632 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:36.634 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:36.637 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:08:36.643 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:08:36.645 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:36.646 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.648 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:08:36.649 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.651 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:36.654 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.656 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.657 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:36.659 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:36.660 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:36.661 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:08:36.666 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:08:36.673 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:36.675 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:36.676 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.678 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-13 00:08:36.680 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.684 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-13 00:08:36.688 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:08:36.689 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:08:36.691 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:08:36.692 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:36.694 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:08:36.696 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.698 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.699 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:36.701 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:36.704 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:08:36.705 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:08:36.893 +03:00 [INF] Executed DbCommand (187ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:08:36.905 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.908 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-13 00:08:36.911 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.921 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (9ms).
2025-05-13 00:08:36.923 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:36.926 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:08:36.928 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:36.931 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:36.933 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:36.935 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:08:36.938 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:08:36.939 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:08:36.940 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.941 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.943 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:36.944 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:36.946 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:08:36.948 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:08:36.955 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:08:36.958 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:08:36.959 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.961 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-13 00:08:36.965 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.967 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:36.969 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:36.972 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:08:36.973 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:36.976 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:36.977 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:36.979 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:36.980 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:36.981 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:36.982 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:08:36.983 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 455.0218ms
2025-05-13 00:08:36.985 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:08:36.985 +03:00 [DBG] Connection id "0HNCHGQ2DS10J" completed keep alive response.
2025-05-13 00:08:36.988 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:08:36.989 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:36.990 +03:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-13 00:08:37.005 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 529.9555ms
2025-05-13 00:08:37.147 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-13 00:08:37.167 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:08:37.168 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-13 00:08:37.172 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-13 00:08:37.174 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:08:37.179 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:08:37.180 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:08:37.181 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:08:37.182 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:08:37.184 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:37.186 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:37.189 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:37.191 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:37.193 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:37.194 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:08:37.196 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:08:37.198 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:08:37.199 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:08:37.201 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:08:37.202 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:08:37.203 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:08:37.206 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:08:37.209 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:37.212 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:37.213 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:37.215 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:37.216 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:37.216 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:37.218 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:08:37.222 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 27.2657ms
2025-05-13 00:08:37.223 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:08:37.224 +03:00 [DBG] Connection id "0HNCHGQ2DS10J" completed keep alive response.
2025-05-13 00:08:37.226 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 78.2821ms
2025-05-13 00:08:37.243 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:08:37.247 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:08:37.248 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:08:37.249 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:08:37.251 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:08:37.252 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:08:37.254 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:08:37.255 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:08:37.256 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:08:37.258 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:37.260 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:37.262 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:37.264 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:37.265 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:37.267 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:08:37.271 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:08:37.273 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:08:37.275 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:08:37.275 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:08:37.276 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.278 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.279 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:37.280 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:37.281 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:37.283 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:08:37.288 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:08:37.290 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.292 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.293 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.295 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.296 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.297 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.299 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-13 00:08:37.301 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.303 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-13 00:08:37.305 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:37.307 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:37.309 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:37.310 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:37.311 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:37.312 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:37.313 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:08:37.315 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 47.7995ms
2025-05-13 00:08:37.316 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:08:37.318 +03:00 [DBG] Connection id "0HNCHGQ2DS10J" completed keep alive response.
2025-05-13 00:08:37.319 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:08:37.321 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.323 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:08:37.324 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 81.2478ms
2025-05-13 00:08:37.355 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A08%3A37&pageSize=10 - null null
2025-05-13 00:08:37.362 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:08:37.366 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:08:37.379 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:08:37.397 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:08:37.413 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:08:37.425 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:08:37.427 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:08:37.434 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:08:37.439 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:37.442 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:37.446 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:37.449 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:37.451 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:37.454 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:08:37.456 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:08:37.458 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:08:37.459 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:08:37.461 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:08:37.462 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:08:37.464 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:08:37.467 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:08:37.473 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:08:37.479 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:08:37.485 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:08:37.486 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:08:37.502 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:08:37.510 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:08:37.512 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:08:37.514 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:08:37.515 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:08:37.516 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.517 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.518 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:37.521 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:37.522 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:08:37.524 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:08:37.530 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:08:37.532 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.534 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.535 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.537 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.540 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.542 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.543 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.545 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.546 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.550 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.553 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.559 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 27ms reading results.
2025-05-13 00:08:37.565 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.566 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:37.569 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:37.572 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:37.573 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:37.575 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:37.576 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:37.578 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:37.579 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:08:37.580 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 126.096ms
2025-05-13 00:08:37.583 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:08:37.584 +03:00 [DBG] Connection id "0HNCHGQ2DS10J" completed keep alive response.
2025-05-13 00:08:37.585 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:08:37.586 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.727 +03:00 [DBG] Disposed connection to database '' on server '' (140ms).
2025-05-13 00:08:37.729 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A08%3A37&pageSize=10 - 200 1343 application/json; charset=utf-8 374.5463ms
2025-05-13 00:08:37.735 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:08:37.742 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:08:37.743 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:08:37.746 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:08:37.749 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:08:37.750 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:08:37.756 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:08:37.758 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:08:37.759 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:08:37.760 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:08:37.761 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:08:37.763 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:08:37.764 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:08:37.766 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:08:37.768 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:08:37.769 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:08:37.772 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:08:37.773 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:08:37.774 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:08:37.775 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:08:37.777 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:08:37.778 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:08:37.780 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:08:37.781 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:08:37.782 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:08:37.783 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:08:37.784 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:08:37.785 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:08:37.789 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:08:37.791 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:08:37.792 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:08:37.793 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.795 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.796 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:08:37.797 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:08:37.798 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:08:37.799 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:08:37.805 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:08:37.808 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.809 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.810 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.812 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:08:37.813 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.814 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-13 00:08:37.815 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.816 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:08:37.817 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:08:37.819 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:08:37.822 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:08:37.823 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:08:37.823 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:08:37.824 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:08:37.825 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:08:37.826 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 58.5838ms
2025-05-13 00:08:37.830 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:08:37.831 +03:00 [DBG] Connection id "0HNCHGQ2DS10J" completed keep alive response.
2025-05-13 00:08:37.832 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:08:37.834 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:08:37.835 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:08:37.839 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 103.8143ms
2025-05-13 00:08:48.991 +03:00 [DBG] Connection id "0HNCHGQ2DS10J" reset.
2025-05-13 00:08:49.000 +03:00 [DBG] Connection id "0HNCHGQ2DS10J" disconnecting.
2025-05-13 00:08:49.002 +03:00 [DBG] Connection id "0HNCHGQ2DS10J" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:08:49.004 +03:00 [DBG] Connection id "0HNCHGQ2DS10J" stopped.
2025-05-13 00:09:31.110 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-13 00:09:35.698 +03:00 [DBG] Connection id "0HNCHGQ2DS10K" accepted.
2025-05-13 00:09:35.725 +03:00 [DBG] Connection id "0HNCHGQ2DS10K" started.
2025-05-13 00:09:35.750 +03:00 [DBG] Connection 0HNCHGQ2DS10K established using the following protocol: "Tls12"
2025-05-13 00:09:35.825 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:09:35.831 +03:00 [DBG] POST requests are not supported
2025-05-13 00:09:35.832 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:09:35.834 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:09:35.836 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:09:35.837 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:09:35.839 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:09:35.840 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:09:35.842 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:09:35.843 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:09:35.845 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:09:35.847 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:09:35.849 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:09:35.852 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:09:35.853 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:09:35.854 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:09:35.856 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:09:35.861 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:09:35.865 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:09:35.868 +03:00 [DBG] Connection id "0HNCHGQ2DS10K", Request id "0HNCHGQ2DS10K:00000001": started reading request body.
2025-05-13 00:09:35.869 +03:00 [DBG] Connection id "0HNCHGQ2DS10K", Request id "0HNCHGQ2DS10K:00000001": done reading request body.
2025-05-13 00:09:35.871 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:09:35.874 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:09:35.875 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:09:35.876 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:09:35.879 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:09:35.880 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:09:35.881 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:09:35.882 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:35.885 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:35.886 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:09:35.887 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:09:35.888 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:09:35.890 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:09:35.895 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:09:35.898 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:35.899 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:35.902 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-13 00:09:35.904 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:35.905 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:09:35.910 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:35.911 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:35.912 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:09:35.913 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:09:35.915 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:09:35.916 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:09:35.921 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:09:35.924 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:35.925 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:35.926 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:35.928 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-13 00:09:35.929 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:35.973 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (43ms).
2025-05-13 00:09:35.974 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:09:35.975 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:09:35.976 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:09:35.978 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:35.980 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:09:35.981 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:35.983 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:35.990 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:09:35.991 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:09:35.993 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:09:35.994 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:09:36.021 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:09:36.023 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.024 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-13 00:09:36.026 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.027 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:09:36.029 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.030 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:09:36.151 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.316 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.325 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.326 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:09:36.328 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:09:36.329 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:09:36.331 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.333 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.337 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:09:36.339 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:09:36.341 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:09:36.342 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:09:36.348 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:09:36.350 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:09:36.353 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.355 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-13 00:09:36.356 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.358 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:09:36.360 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.361 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:09:36.363 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:09:36.365 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:09:36.370 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:09:36.371 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:09:36.372 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:09:36.373 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:09:36.374 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:09:36.375 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 523.8499ms
2025-05-13 00:09:36.377 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:09:36.379 +03:00 [DBG] Connection id "0HNCHGQ2DS10K" completed keep alive response.
2025-05-13 00:09:36.380 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:09:36.383 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.386 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-13 00:09:36.388 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 562.9146ms
2025-05-13 00:09:36.543 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-13 00:09:36.574 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:09:36.575 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-13 00:09:36.577 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-13 00:09:36.579 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:09:36.581 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:09:36.582 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:09:36.583 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:09:36.586 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:09:36.588 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:09:36.590 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:09:36.591 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:09:36.594 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:09:36.598 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:09:36.599 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:09:36.602 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:09:36.604 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:09:36.606 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:09:36.608 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:09:36.611 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:09:36.612 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:09:36.614 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:09:36.616 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:09:36.620 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:09:36.622 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:09:36.624 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:09:36.624 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:09:36.626 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:09:36.629 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:09:36.631 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 31.7225ms
2025-05-13 00:09:36.636 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:09:36.639 +03:00 [DBG] Connection id "0HNCHGQ2DS10K" completed keep alive response.
2025-05-13 00:09:36.641 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 98.0774ms
2025-05-13 00:09:36.653 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:09:36.658 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:09:36.659 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:09:36.660 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:09:36.662 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:09:36.663 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:09:36.664 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:09:36.665 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:09:36.666 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:09:36.670 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:09:36.671 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:09:36.674 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:09:36.677 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:09:36.679 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:09:36.681 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:09:36.683 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:09:36.688 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:09:36.692 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:09:36.693 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:09:36.694 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.696 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.698 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:09:36.699 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:09:36.703 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:09:36.706 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:09:36.711 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:09:36.713 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.715 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.717 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.722 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.723 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.725 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.726 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 12ms reading results.
2025-05-13 00:09:36.728 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.729 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:09:36.731 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:09:36.733 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:09:36.735 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:09:36.736 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:09:36.737 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:09:36.738 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:09:36.740 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:09:36.741 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 59.8709ms
2025-05-13 00:09:36.743 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:09:36.744 +03:00 [DBG] Connection id "0HNCHGQ2DS10K" completed keep alive response.
2025-05-13 00:09:36.745 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:09:36.746 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.748 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:09:36.750 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 97.3882ms
2025-05-13 00:09:36.773 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A09%3A36&pageSize=10 - null null
2025-05-13 00:09:36.776 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:09:36.777 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:09:36.778 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:09:36.781 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:09:36.782 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:09:36.783 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:09:36.784 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:09:36.785 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:09:36.788 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:09:36.789 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:09:36.791 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:09:36.793 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:09:36.794 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:09:36.796 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:09:36.798 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:09:36.799 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:09:36.801 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:09:36.802 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:09:36.804 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:09:36.806 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:09:36.808 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:09:36.809 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:09:36.812 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:09:36.814 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:09:36.815 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:09:36.817 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:09:36.821 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:09:36.822 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:09:36.824 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:09:36.825 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:09:36.828 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.830 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.832 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:09:36.833 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:09:36.837 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:09:36.838 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:09:36.844 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:09:36.847 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.849 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.852 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.854 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.855 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.857 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.866 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.869 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.871 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.888 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:36.896 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.899 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 51ms reading results.
2025-05-13 00:09:36.901 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.906 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (5ms).
2025-05-13 00:09:36.909 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:09:36.912 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:09:36.914 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:09:36.915 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:09:36.916 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:09:36.918 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:09:36.923 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:09:36.925 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 129.067ms
2025-05-13 00:09:36.945 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:09:36.947 +03:00 [DBG] Connection id "0HNCHGQ2DS10K" completed keep alive response.
2025-05-13 00:09:36.976 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:09:36.977 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:36.978 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:09:36.979 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A09%3A36&pageSize=10 - 200 1343 application/json; charset=utf-8 205.9921ms
2025-05-13 00:09:36.983 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:09:36.987 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:09:36.988 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:09:36.990 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:09:36.991 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:09:36.993 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:09:36.994 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:09:36.995 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:09:37.000 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:09:37.003 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:09:37.005 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:09:37.007 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:09:37.010 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:09:37.012 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:09:37.015 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:09:37.017 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:09:37.021 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:09:37.022 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:09:37.024 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:09:37.025 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:09:37.028 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:09:37.034 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:09:37.038 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:09:37.039 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:09:37.040 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:09:37.042 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:09:37.043 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:09:37.046 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:09:37.047 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:09:37.050 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:09:37.050 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:09:37.052 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:37.054 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:37.055 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:09:37.055 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:09:37.057 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:09:37.058 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:09:37.069 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:09:37.073 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:37.076 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:37.078 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:37.080 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:09:37.081 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:37.082 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-13 00:09:37.084 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:37.087 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-13 00:09:37.089 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:09:37.092 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:09:37.093 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:09:37.095 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:09:37.096 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:09:37.097 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:09:37.099 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:09:37.101 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 85.3592ms
2025-05-13 00:09:37.108 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:09:37.110 +03:00 [DBG] Connection id "0HNCHGQ2DS10K" completed keep alive response.
2025-05-13 00:09:37.112 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:09:37.114 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:09:37.116 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:09:37.121 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 137.8014ms
2025-05-13 00:09:41.123 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:09:41.124 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-05-13 00:09:47.671 +03:00 [DBG] Connection id "0HNCHGQ2DS10K" reset.
2025-05-13 00:09:47.677 +03:00 [DBG] Connection id "0HNCHGQ2DS10K" disconnecting.
2025-05-13 00:09:47.680 +03:00 [DBG] Connection id "0HNCHGQ2DS10K" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:09:47.684 +03:00 [DBG] Connection id "0HNCHGQ2DS10K" stopped.
2025-05-13 00:09:51.135 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:09:51.137 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0074ms - processed: 1 items - remaining: 0 items
2025-05-13 00:11:36.617 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-13 00:11:46.713 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:11:46.887 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:11:56.895 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:11:56.901 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:12:06.904 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:12:06.912 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:12:16.921 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:12:16.922 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:12:26.939 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:12:26.942 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:12:36.966 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:12:37.019 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:12:47.027 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:12:47.030 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:12:57.047 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:12:57.049 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-05-13 00:13:07.097 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:13:07.247 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:13:17.289 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:13:17.290 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:13:27.306 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:13:27.308 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:13:37.317 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:13:37.319 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:13:47.326 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:13:47.329 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:13:57.340 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:13:57.341 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-13 00:14:07.354 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:14:07.356 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:14:17.370 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:14:17.371 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:14:27.379 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:14:27.380 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:14:37.393 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:14:37.395 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:14:47.399 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:14:47.400 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:14:57.433 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:14:57.437 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:15:07.454 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:15:07.455 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-05-13 00:15:17.259 +03:00 [DBG] Connection id "0HNCHGQ2DS10L" accepted.
2025-05-13 00:15:17.274 +03:00 [DBG] Connection id "0HNCHGQ2DS10L" started.
2025-05-13 00:15:17.318 +03:00 [DBG] Connection 0HNCHGQ2DS10L established using the following protocol: "Tls12"
2025-05-13 00:15:17.462 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:15:17.465 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:15:17.499 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:15:17.503 +03:00 [DBG] POST requests are not supported
2025-05-13 00:15:17.504 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:15:17.505 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:15:17.507 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:15:17.508 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:15:17.510 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:15:17.511 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:15:17.513 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:15:17.515 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:15:17.517 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:15:17.519 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:15:17.520 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:15:17.521 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:15:17.523 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:15:17.525 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:15:17.526 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:15:17.528 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:15:17.529 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:15:17.530 +03:00 [DBG] Connection id "0HNCHGQ2DS10L", Request id "0HNCHGQ2DS10L:00000001": started reading request body.
2025-05-13 00:15:17.531 +03:00 [DBG] Connection id "0HNCHGQ2DS10L", Request id "0HNCHGQ2DS10L:00000001": done reading request body.
2025-05-13 00:15:17.533 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:15:17.534 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:15:17.535 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:15:17.537 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:15:17.539 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:15:17.541 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:15:17.542 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:15:17.543 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.549 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.551 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:17.552 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:15:17.554 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:15:17.555 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:15:17.560 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:15:17.562 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:17.564 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.565 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-13 00:15:17.567 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.568 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:15:17.570 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.572 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.573 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:17.574 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:15:17.576 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:15:17.577 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:15:17.581 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:15:17.583 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:17.584 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:17.586 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.587 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-13 00:15:17.589 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.590 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:15:17.592 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:15:17.593 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:15:17.594 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:15:17.596 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:17.598 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:15:17.599 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.601 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.603 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:17.605 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:15:17.606 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:15:17.607 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:15:17.613 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:15:17.634 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.636 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 19ms reading results.
2025-05-13 00:15:17.638 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.639 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:15:17.640 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:17.642 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:15:17.643 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:17.645 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:17.647 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:17.648 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:15:17.649 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:15:17.650 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:15:17.651 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.653 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.654 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:17.655 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:15:17.656 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:15:17.658 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:15:17.662 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:15:17.664 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:15:17.666 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.667 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:15:17.669 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.671 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:15:17.672 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:17.674 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:15:17.675 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:15:17.677 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:15:17.679 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:15:17.680 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:15:17.681 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:15:17.681 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:15:17.683 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:15:17.684 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 162.6186ms
2025-05-13 00:15:17.686 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:15:17.686 +03:00 [DBG] Connection id "0HNCHGQ2DS10L" completed keep alive response.
2025-05-13 00:15:17.687 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:15:17.688 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:17.689 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:15:17.690 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 190.7233ms
2025-05-13 00:15:18.300 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-13 00:15:18.321 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:15:18.323 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-13 00:15:18.325 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-13 00:15:18.348 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:15:18.350 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:15:18.351 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:15:18.352 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:15:18.354 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:15:18.357 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:15:18.359 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:15:18.366 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:15:18.374 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:15:18.376 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:15:18.381 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:15:18.383 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:15:18.384 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:15:18.386 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:15:18.388 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:15:18.389 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:15:18.391 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:15:18.392 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:15:18.397 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:15:18.399 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:15:18.401 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:15:18.402 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:15:18.403 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:15:18.404 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:15:18.405 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:15:18.406 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 25.335ms
2025-05-13 00:15:18.408 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:15:18.409 +03:00 [DBG] Connection id "0HNCHGQ2DS10L" completed keep alive response.
2025-05-13 00:15:18.411 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 111.3661ms
2025-05-13 00:15:18.425 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:15:18.428 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:15:18.429 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:15:18.430 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:15:18.432 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:15:18.433 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:15:18.434 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:15:18.435 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:15:18.436 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:15:18.438 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:15:18.439 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:15:18.441 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:15:18.443 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:15:18.445 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:15:18.446 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:15:18.448 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:15:18.449 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:15:18.451 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:15:18.452 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:15:18.453 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.455 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.456 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:18.457 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:15:18.459 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:15:18.460 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:15:18.464 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:15:18.467 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.468 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.469 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.471 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.472 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.473 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.475 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-13 00:15:18.476 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.477 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:15:18.480 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:15:18.482 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:15:18.483 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:15:18.485 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:15:18.486 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:15:18.486 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:15:18.488 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:15:18.489 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 42.9623ms
2025-05-13 00:15:18.491 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:15:18.492 +03:00 [DBG] Connection id "0HNCHGQ2DS10L" completed keep alive response.
2025-05-13 00:15:18.493 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:15:18.496 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.497 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:15:18.499 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 73.7114ms
2025-05-13 00:15:18.528 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A15%3A18&pageSize=10 - null null
2025-05-13 00:15:18.530 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:15:18.531 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:15:18.533 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:15:18.536 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:15:18.538 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:15:18.539 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:15:18.540 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:15:18.542 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:15:18.543 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:15:18.546 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:15:18.547 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:15:18.573 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:15:18.575 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:15:18.578 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:15:18.579 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:15:18.583 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:15:18.585 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:15:18.586 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:15:18.589 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:15:18.590 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:15:18.592 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:15:18.596 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:15:18.598 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:15:18.600 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:15:18.602 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:15:18.604 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:15:18.605 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:15:18.608 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:15:18.613 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:15:18.615 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:15:18.617 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.619 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.624 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:18.626 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:15:18.629 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:15:18.630 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:15:18.636 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:15:18.638 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.643 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.647 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.648 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.650 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.652 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.654 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.656 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.658 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.660 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.676 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.678 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 40ms reading results.
2025-05-13 00:15:18.725 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.729 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-13 00:15:18.730 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:15:18.733 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:15:18.735 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:15:18.736 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:15:18.737 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:15:18.738 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:15:18.739 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:15:18.741 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 162.8504ms
2025-05-13 00:15:18.743 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:15:18.746 +03:00 [DBG] Connection id "0HNCHGQ2DS10L" completed keep alive response.
2025-05-13 00:15:18.747 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:15:18.748 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.749 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:15:18.751 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A15%3A18&pageSize=10 - 200 1343 application/json; charset=utf-8 222.6156ms
2025-05-13 00:15:18.763 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:15:18.766 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:15:18.767 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:15:18.768 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:15:18.770 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:15:18.771 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:15:18.772 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:15:18.776 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:15:18.779 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:15:18.781 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:15:18.783 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:15:18.785 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:15:18.787 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:15:18.789 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:15:18.793 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:15:18.797 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:15:18.810 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:15:18.812 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:15:18.814 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:15:18.816 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:15:18.818 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:15:18.835 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:15:18.886 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:15:18.888 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:15:18.890 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:15:18.892 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:15:18.893 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:15:18.899 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:15:18.901 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:15:18.905 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:15:18.907 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-13 00:15:18.909 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.915 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.916 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:18.918 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:15:18.919 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:15:18.921 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:15:18.950 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:15:18.954 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.956 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.960 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.963 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:18.965 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.966 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 11ms reading results.
2025-05-13 00:15:18.968 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:18.970 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:15:18.972 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:15:18.979 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:15:18.981 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:15:18.983 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:15:18.985 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:15:18.986 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:15:18.988 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:15:18.991 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 197.8543ms
2025-05-13 00:15:18.993 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:15:18.996 +03:00 [DBG] Connection id "0HNCHGQ2DS10L" completed keep alive response.
2025-05-13 00:15:18.997 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:15:18.998 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:19.000 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:15:19.001 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 238.5924ms
2025-05-13 00:15:27.479 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:15:27.480 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:15:32.062 +03:00 [DBG] Connection id "0HNCHGQ2DS10L" reset.
2025-05-13 00:15:32.064 +03:00 [DBG] Connection id "0HNCHGQ2DS10L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:15:32.066 +03:00 [DBG] Connection id "0HNCHGQ2DS10L" disconnecting.
2025-05-13 00:15:32.067 +03:00 [DBG] Connection id "0HNCHGQ2DS10L" stopped.
2025-05-13 00:15:37.496 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:15:37.497 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:15:47.500 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:15:47.502 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:15:51.378 +03:00 [DBG] Connection id "0HNCHGQ2DS10M" accepted.
2025-05-13 00:15:51.389 +03:00 [DBG] Connection id "0HNCHGQ2DS10M" started.
2025-05-13 00:15:51.411 +03:00 [DBG] Connection 0HNCHGQ2DS10M established using the following protocol: "Tls12"
2025-05-13 00:15:51.468 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:15:51.481 +03:00 [DBG] POST requests are not supported
2025-05-13 00:15:51.482 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:15:51.484 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:15:51.488 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:15:51.490 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:15:51.491 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:15:51.492 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:15:51.494 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:15:51.496 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:15:51.498 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:15:51.501 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:15:51.503 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:15:51.507 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:15:51.508 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:15:51.510 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:15:51.512 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:15:51.514 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:15:51.517 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:15:51.523 +03:00 [DBG] Connection id "0HNCHGQ2DS10M", Request id "0HNCHGQ2DS10M:00000001": started reading request body.
2025-05-13 00:15:51.525 +03:00 [DBG] Connection id "0HNCHGQ2DS10M", Request id "0HNCHGQ2DS10M:00000001": done reading request body.
2025-05-13 00:15:51.527 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:15:51.529 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:15:51.530 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:15:51.531 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:15:51.536 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:15:51.539 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:15:51.540 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:15:51.541 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.542 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.543 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:51.544 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:15:51.545 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:15:51.548 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:15:51.553 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:15:51.558 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:51.560 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.562 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-13 00:15:51.569 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.573 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-13 00:15:51.575 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.578 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.579 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:51.580 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:15:51.581 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:15:51.583 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:15:51.588 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:15:51.590 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:51.591 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:51.593 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.597 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-13 00:15:51.599 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.601 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:15:51.606 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:15:51.608 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:15:51.611 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:15:51.613 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:51.617 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:15:51.618 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.622 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.627 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:51.629 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:15:51.630 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:15:51.632 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:15:51.636 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:15:51.639 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.641 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-13 00:15:51.642 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.644 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:15:51.646 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:51.647 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:15:51.648 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:51.650 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:51.652 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:51.653 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:15:51.655 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:15:51.657 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:15:51.658 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.660 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.661 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:51.662 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:15:51.663 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:15:51.665 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:15:51.669 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:15:51.672 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:15:51.674 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.675 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:15:51.677 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.678 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:15:51.680 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:51.681 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:15:51.682 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:15:51.685 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:15:51.686 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:15:51.687 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:15:51.688 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:15:51.689 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:15:51.690 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:15:51.691 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 184.7091ms
2025-05-13 00:15:51.693 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:15:51.694 +03:00 [DBG] Connection id "0HNCHGQ2DS10M" completed keep alive response.
2025-05-13 00:15:51.695 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:15:51.713 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:51.714 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:15:51.716 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 248.3039ms
2025-05-13 00:15:52.034 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-13 00:15:52.095 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:15:52.097 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-13 00:15:52.099 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-13 00:15:52.101 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:15:52.111 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:15:52.112 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:15:52.113 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:15:52.114 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:15:52.116 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:15:52.118 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:15:52.120 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:15:52.124 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:15:52.125 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:15:52.127 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:15:52.129 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:15:52.130 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:15:52.131 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:15:52.134 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:15:52.135 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:15:52.136 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:15:52.139 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:15:52.140 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:15:52.143 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:15:52.144 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:15:52.145 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:15:52.146 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:15:52.147 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:15:52.148 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:15:52.149 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 22.2501ms
2025-05-13 00:15:52.152 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:15:52.153 +03:00 [DBG] Connection id "0HNCHGQ2DS10M" completed keep alive response.
2025-05-13 00:15:52.153 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 119.7562ms
2025-05-13 00:15:52.167 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:15:52.171 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:15:52.172 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:15:52.173 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:15:52.175 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:15:52.176 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:15:52.177 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:15:52.178 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:15:52.179 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:15:52.181 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:15:52.183 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:15:52.184 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:15:52.187 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:15:52.189 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:15:52.191 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:15:52.192 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:15:52.194 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:15:52.196 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:15:52.197 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:15:52.198 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.200 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.201 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:52.202 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:15:52.204 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:15:52.205 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:15:52.208 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:15:52.211 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.212 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.213 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.215 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.216 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.218 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.222 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 11ms reading results.
2025-05-13 00:15:52.224 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.226 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:15:52.227 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:15:52.230 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:15:52.231 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:15:52.233 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:15:52.234 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:15:52.235 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:15:52.237 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:15:52.239 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 48.6351ms
2025-05-13 00:15:52.242 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:15:52.244 +03:00 [DBG] Connection id "0HNCHGQ2DS10M" completed keep alive response.
2025-05-13 00:15:52.246 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:15:52.247 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.249 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:15:52.252 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 85.4632ms
2025-05-13 00:15:52.285 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A15%3A52&pageSize=10 - null null
2025-05-13 00:15:52.288 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:15:52.289 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:15:52.290 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:15:52.291 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:15:52.293 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:15:52.294 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:15:52.295 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:15:52.297 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:15:52.299 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:15:52.300 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:15:52.302 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:15:52.306 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:15:52.308 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:15:52.309 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:15:52.311 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:15:52.313 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:15:52.314 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:15:52.316 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:15:52.317 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:15:52.319 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:15:52.321 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:15:52.323 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:15:52.325 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:15:52.327 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:15:52.328 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:15:52.330 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:15:52.331 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:15:52.333 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:15:52.335 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:15:52.336 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:15:52.339 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.340 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.341 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:52.348 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-05-13 00:15:52.351 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-05-13 00:15:52.353 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:15:52.361 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:15:52.365 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.367 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.369 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.371 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.375 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.377 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.378 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.381 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.383 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.385 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.386 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.387 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 21ms reading results.
2025-05-13 00:15:52.391 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.392 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:15:52.394 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:15:52.402 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:15:52.406 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:15:52.407 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:15:52.408 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:15:52.409 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:15:52.410 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:15:52.412 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 102.3759ms
2025-05-13 00:15:52.413 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:15:52.414 +03:00 [DBG] Connection id "0HNCHGQ2DS10M" completed keep alive response.
2025-05-13 00:15:52.416 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:15:52.417 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.418 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:15:52.419 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A15%3A52&pageSize=10 - 200 1343 application/json; charset=utf-8 134.7536ms
2025-05-13 00:15:52.431 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:15:52.433 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:15:52.433 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:15:52.434 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:15:52.440 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:15:52.441 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:15:52.442 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:15:52.443 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:15:52.443 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:15:52.445 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:15:52.447 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:15:52.448 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:15:52.451 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:15:52.454 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:15:52.457 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:15:52.459 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:15:52.460 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:15:52.461 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:15:52.463 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:15:52.464 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:15:52.466 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:15:52.621 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:15:52.627 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:15:52.629 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:15:52.631 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:15:52.647 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:15:52.649 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:15:52.650 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:15:52.652 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:15:52.654 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:15:52.655 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:15:52.657 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.658 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.659 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:15:52.660 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:15:52.662 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:15:52.663 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:15:52.668 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:15:52.670 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.671 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.673 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.674 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:15:52.676 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.677 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-13 00:15:52.679 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.680 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:15:52.682 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:15:52.684 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:15:52.685 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:15:52.687 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:15:52.689 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:15:52.690 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:15:52.691 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:15:52.692 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 234.6016ms
2025-05-13 00:15:52.693 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:15:52.694 +03:00 [DBG] Connection id "0HNCHGQ2DS10M" completed keep alive response.
2025-05-13 00:15:52.695 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:15:52.696 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:15:52.697 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:15:52.698 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 267.8756ms
2025-05-13 00:15:57.513 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:15:57.515 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:15:57.731 +03:00 [DBG] Connection id "0HNCHGQ2DS10M" reset.
2025-05-13 00:15:57.738 +03:00 [DBG] Connection id "0HNCHGQ2DS10M" disconnecting.
2025-05-13 00:15:57.746 +03:00 [DBG] Connection id "0HNCHGQ2DS10M" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:15:57.754 +03:00 [DBG] Connection id "0HNCHGQ2DS10M" stopped.
2025-05-13 00:16:07.530 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:16:07.534 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:16:10.395 +03:00 [DBG] Connection id "0HNCHGQ2DS10N" accepted.
2025-05-13 00:16:10.401 +03:00 [DBG] Connection id "0HNCHGQ2DS10N" started.
2025-05-13 00:16:10.446 +03:00 [DBG] Connection 0HNCHGQ2DS10N established using the following protocol: "Tls12"
2025-05-13 00:16:10.509 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:16:10.513 +03:00 [DBG] POST requests are not supported
2025-05-13 00:16:10.513 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:16:10.514 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:16:10.515 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:16:10.516 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:16:10.517 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:16:10.519 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:16:10.521 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:16:10.522 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:16:10.524 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:16:10.526 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:16:10.527 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:16:10.529 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:16:10.530 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:16:10.531 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:16:10.532 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:16:10.534 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:16:10.536 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:16:10.537 +03:00 [DBG] Connection id "0HNCHGQ2DS10N", Request id "0HNCHGQ2DS10N:00000001": started reading request body.
2025-05-13 00:16:10.538 +03:00 [DBG] Connection id "0HNCHGQ2DS10N", Request id "0HNCHGQ2DS10N:00000001": done reading request body.
2025-05-13 00:16:10.540 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:16:10.541 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:16:10.542 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:16:10.544 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:16:10.547 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:16:10.549 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:16:10.549 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:16:10.551 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.552 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.553 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:10.554 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:16:10.555 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:16:10.556 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:16:10.561 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:16:10.583 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:10.585 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.587 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 24ms reading results.
2025-05-13 00:16:10.588 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.590 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:16:10.591 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.593 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.594 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:10.595 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:16:10.596 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:16:10.598 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:16:10.601 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:16:10.604 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:10.605 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:10.606 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.608 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-13 00:16:10.609 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.610 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:16:10.612 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:16:10.613 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:16:10.613 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:16:10.614 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:10.617 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:16:10.618 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.620 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.621 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:10.622 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:16:10.624 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:16:10.625 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:16:10.629 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:16:10.631 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.632 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-13 00:16:10.634 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.636 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-13 00:16:10.638 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:10.640 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:16:10.642 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:10.643 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:10.645 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:10.646 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:16:10.648 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:16:10.649 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:16:10.650 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.651 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.653 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:10.654 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:16:10.655 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:16:10.657 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:16:10.661 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:16:10.664 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:16:10.665 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.666 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:16:10.668 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.669 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:16:10.671 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:10.672 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:16:10.673 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:16:10.675 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:16:10.677 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:16:10.678 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:16:10.678 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:16:10.679 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:16:10.680 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:16:10.681 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 152.5847ms
2025-05-13 00:16:10.683 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:16:10.684 +03:00 [DBG] Connection id "0HNCHGQ2DS10N" completed keep alive response.
2025-05-13 00:16:10.685 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:16:10.688 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:10.690 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:16:10.691 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 181.8944ms
2025-05-13 00:16:10.996 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-13 00:16:11.100 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:16:11.103 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-13 00:16:11.105 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-13 00:16:11.108 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:16:11.110 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:16:11.111 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:16:11.112 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:16:11.114 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:16:11.117 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:16:11.119 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:16:11.122 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:16:11.151 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:16:11.179 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:16:11.182 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:16:11.184 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:16:11.199 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:16:11.202 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:16:11.207 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:16:11.208 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:16:11.209 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:16:11.212 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:16:11.222 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:16:11.225 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:16:11.226 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:16:11.228 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:16:11.228 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:16:11.229 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:16:11.231 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:16:11.232 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 50.7772ms
2025-05-13 00:16:11.239 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:16:11.240 +03:00 [DBG] Connection id "0HNCHGQ2DS10N" completed keep alive response.
2025-05-13 00:16:11.241 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 245.7601ms
2025-05-13 00:16:11.252 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:16:11.256 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:16:11.257 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:16:11.258 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:16:11.260 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:16:11.261 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:16:11.262 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:16:11.264 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:16:11.265 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:16:11.266 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:16:11.268 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:16:11.271 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:16:11.274 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:16:11.276 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:16:11.277 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:16:11.278 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:16:11.281 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:16:11.283 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:16:11.284 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:16:11.284 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.286 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.287 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:11.288 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:16:11.290 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:16:11.291 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:16:11.295 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:16:11.297 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.298 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.300 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.301 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.304 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.305 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.306 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-13 00:16:11.308 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.309 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:16:11.312 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:16:11.317 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:16:11.322 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:16:11.324 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:16:11.328 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:16:11.330 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:16:11.333 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:16:11.335 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 58.2239ms
2025-05-13 00:16:11.344 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:16:11.346 +03:00 [DBG] Connection id "0HNCHGQ2DS10N" completed keep alive response.
2025-05-13 00:16:11.349 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:16:11.350 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.354 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-05-13 00:16:11.359 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 107.8736ms
2025-05-13 00:16:11.384 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A16%3A11&pageSize=10 - null null
2025-05-13 00:16:11.419 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:16:11.421 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:16:11.422 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:16:11.424 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:16:11.425 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:16:11.426 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:16:11.427 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:16:11.428 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:16:11.430 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:16:11.432 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:16:11.434 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:16:11.437 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:16:11.438 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:16:11.440 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:16:11.441 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:16:11.443 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:16:11.444 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:16:11.446 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:16:11.448 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:16:11.477 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:16:11.478 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:16:11.481 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:16:11.483 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:16:11.484 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:16:11.486 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:16:11.487 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:16:11.489 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:16:11.490 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:16:11.493 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:16:11.493 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:16:11.495 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.496 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.497 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:11.498 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:16:11.499 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:16:11.501 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:16:11.507 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:16:11.509 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.512 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.513 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.515 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.516 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.518 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.519 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.522 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.523 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.525 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.527 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.528 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 18ms reading results.
2025-05-13 00:16:11.530 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.531 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:16:11.533 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:16:11.535 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:16:11.538 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:16:11.539 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:16:11.539 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:16:11.540 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:16:11.543 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:16:11.545 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 104.8757ms
2025-05-13 00:16:11.551 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:16:11.552 +03:00 [DBG] Connection id "0HNCHGQ2DS10N" completed keep alive response.
2025-05-13 00:16:11.555 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:16:11.591 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.738 +03:00 [DBG] Disposed connection to database '' on server '' (146ms).
2025-05-13 00:16:11.740 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A16%3A11&pageSize=10 - 200 1343 application/json; charset=utf-8 355.3278ms
2025-05-13 00:16:11.751 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:16:11.756 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:16:11.757 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:16:11.758 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:16:11.801 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:16:11.803 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:16:11.805 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:16:11.862 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:16:11.864 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:16:11.866 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:16:11.868 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:16:11.871 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:16:11.874 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:16:11.876 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:16:11.878 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:16:11.880 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:16:11.882 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:16:11.885 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:16:11.889 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:16:11.891 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:16:11.893 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:16:11.896 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:16:11.899 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:16:11.901 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:16:11.903 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:16:11.906 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:16:11.907 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:16:11.909 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:16:11.911 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:16:11.917 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:16:11.918 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:16:11.919 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.922 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.923 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:11.924 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:16:11.926 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:16:11.927 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:16:11.934 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:16:11.938 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.940 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.941 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.943 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:11.945 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.947 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-13 00:16:11.949 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.950 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:16:11.978 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:16:11.981 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:16:11.982 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:16:11.983 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:16:11.984 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:16:11.985 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:16:11.987 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:16:11.988 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 110.1558ms
2025-05-13 00:16:11.990 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:16:11.991 +03:00 [DBG] Connection id "0HNCHGQ2DS10N" completed keep alive response.
2025-05-13 00:16:11.992 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:16:11.994 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:11.998 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-05-13 00:16:12.005 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 254.1578ms
2025-05-13 00:16:17.466 +03:00 [DBG] Connection id "0HNCHGQ2DS10N" reset.
2025-05-13 00:16:17.478 +03:00 [DBG] Connection id "0HNCHGQ2DS10N" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:16:17.479 +03:00 [DBG] Connection id "0HNCHGQ2DS10N" disconnecting.
2025-05-13 00:16:17.480 +03:00 [DBG] Connection id "0HNCHGQ2DS10N" stopped.
2025-05-13 00:16:17.538 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:16:17.543 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0152ms - processed: 1 items - remaining: 0 items
2025-05-13 00:16:28.533 +03:00 [DBG] Connection id "0HNCHGQ2DS10O" accepted.
2025-05-13 00:16:28.539 +03:00 [DBG] Connection id "0HNCHGQ2DS10O" started.
2025-05-13 00:16:28.612 +03:00 [DBG] Connection 0HNCHGQ2DS10O established using the following protocol: "Tls12"
2025-05-13 00:16:28.670 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:16:28.675 +03:00 [DBG] POST requests are not supported
2025-05-13 00:16:28.677 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:16:28.678 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:16:28.680 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:16:28.681 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:16:28.682 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:16:28.684 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:16:28.687 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:16:28.691 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:16:28.692 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:16:28.695 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:16:28.697 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:16:28.699 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:16:28.702 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:16:28.704 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:16:28.705 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:16:28.707 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:16:28.709 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:16:28.711 +03:00 [DBG] Connection id "0HNCHGQ2DS10O", Request id "0HNCHGQ2DS10O:00000001": started reading request body.
2025-05-13 00:16:28.712 +03:00 [DBG] Connection id "0HNCHGQ2DS10O", Request id "0HNCHGQ2DS10O:00000001": done reading request body.
2025-05-13 00:16:28.714 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:16:28.715 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:16:28.717 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:16:28.718 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:16:28.721 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:16:28.723 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:16:28.724 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:16:28.725 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:28.726 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:28.727 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:28.729 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:16:28.730 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:16:28.731 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:16:28.736 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:16:28.738 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:28.740 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:28.741 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:16:28.782 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:28.784 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:16:28.785 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:28.787 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:28.788 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:28.789 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:16:28.791 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:16:28.792 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:16:28.871 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:16:28.875 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:28.878 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:28.879 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:28.882 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-13 00:16:28.886 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:28.889 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-13 00:16:28.897 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:16:28.899 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:16:28.900 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:16:28.903 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:28.906 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:16:28.908 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:28.911 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:28.913 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:28.915 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:16:28.918 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-13 00:16:28.922 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:16:28.930 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:16:28.935 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:28.942 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-13 00:16:28.944 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:28.948 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-13 00:16:29.005 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.008 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:16:29.010 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.014 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.015 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.018 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:16:29.019 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:16:29.021 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:16:29.022 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.029 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.031 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:29.032 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:16:29.034 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:16:29.035 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:16:29.040 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:16:29.042 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:16:29.044 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.045 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:16:29.046 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.057 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:16:29.059 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.061 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:16:29.062 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:16:29.064 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:16:29.079 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:16:29.093 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:16:29.096 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:16:29.097 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:16:29.099 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:16:29.110 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 411.3044ms
2025-05-13 00:16:29.116 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:16:29.124 +03:00 [DBG] Connection id "0HNCHGQ2DS10O" completed keep alive response.
2025-05-13 00:16:29.125 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:16:29.126 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.187 +03:00 [DBG] Disposed connection to database '' on server '' (60ms).
2025-05-13 00:16:29.188 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 517.7127ms
2025-05-13 00:16:29.332 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-13 00:16:29.351 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:16:29.352 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-13 00:16:29.353 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-13 00:16:29.355 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:16:29.356 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:16:29.357 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:16:29.357 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:16:29.358 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:16:29.361 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:16:29.363 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:16:29.365 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:16:29.367 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:16:29.368 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:16:29.370 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:16:29.372 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:16:29.373 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:16:29.374 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:16:29.379 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:16:29.380 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:16:29.381 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:16:29.382 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:16:29.385 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:16:29.388 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:16:29.390 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:16:29.392 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:16:29.393 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:16:29.394 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:16:29.396 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:16:29.397 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 27.2138ms
2025-05-13 00:16:29.400 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:16:29.403 +03:00 [DBG] Connection id "0HNCHGQ2DS10O" completed keep alive response.
2025-05-13 00:16:29.404 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 72.1433ms
2025-05-13 00:16:29.421 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:16:29.431 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:16:29.432 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:16:29.434 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:16:29.435 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:16:29.437 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:16:29.442 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:16:29.444 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:16:29.447 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:16:29.450 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:16:29.455 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:16:29.457 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:16:29.459 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:16:29.461 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:16:29.463 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:16:29.464 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:16:29.466 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:16:29.472 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:16:29.473 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:16:29.474 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.476 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.477 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:29.479 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:16:29.480 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:16:29.483 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:16:29.492 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:16:29.494 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.496 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.497 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.502 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.504 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.506 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.508 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 14ms reading results.
2025-05-13 00:16:29.510 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.512 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:16:29.514 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:16:29.520 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:16:29.521 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:16:29.523 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:16:29.524 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:16:29.525 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:16:29.526 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:16:29.527 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 64.7844ms
2025-05-13 00:16:29.537 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:16:29.538 +03:00 [DBG] Connection id "0HNCHGQ2DS10O" completed keep alive response.
2025-05-13 00:16:29.539 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:16:29.540 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.543 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:16:29.544 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 123.6238ms
2025-05-13 00:16:29.571 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A16%3A29&pageSize=10 - null null
2025-05-13 00:16:29.574 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:16:29.575 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:16:29.577 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:16:29.578 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:16:29.579 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:16:29.580 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:16:29.580 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:16:29.581 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:16:29.583 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:16:29.586 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:16:29.587 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:16:29.589 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:16:29.591 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:16:29.596 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:16:29.597 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:16:29.612 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:16:29.614 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:16:29.615 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:16:29.617 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:16:29.619 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:16:29.620 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:16:29.622 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:16:29.629 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:16:29.634 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:16:29.642 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:16:29.643 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:16:29.644 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:16:29.647 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:16:29.649 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:16:29.650 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:16:29.653 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.655 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.657 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:29.658 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:16:29.660 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:16:29.661 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:16:29.666 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:16:29.669 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.670 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.672 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.673 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.675 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.677 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.678 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.679 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.680 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.681 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.683 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.686 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 17ms reading results.
2025-05-13 00:16:29.688 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.689 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:16:29.691 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:16:29.693 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:16:29.694 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:16:29.695 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:16:29.696 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:16:29.697 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:16:29.698 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:16:29.701 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 105.0307ms
2025-05-13 00:16:29.705 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:16:29.707 +03:00 [DBG] Connection id "0HNCHGQ2DS10O" completed keep alive response.
2025-05-13 00:16:29.709 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:16:29.710 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.713 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:16:29.715 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A16%3A29&pageSize=10 - 200 1343 application/json; charset=utf-8 143.759ms
2025-05-13 00:16:29.725 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:16:29.729 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:16:29.730 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:16:29.732 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:16:29.736 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:16:29.738 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:16:29.739 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:16:29.741 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:16:29.742 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:16:29.745 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:16:29.748 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:16:29.750 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:16:29.755 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:16:29.758 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:16:29.759 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:16:29.761 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:16:29.770 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:16:29.772 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:16:29.775 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:16:29.781 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:16:29.786 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:16:29.788 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:16:29.790 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:16:29.792 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:16:29.795 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:16:29.796 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:16:29.798 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:16:29.799 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:16:29.802 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:16:29.805 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:16:29.806 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:16:29.807 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.810 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.811 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:16:29.812 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:16:29.813 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:16:29.814 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:16:29.820 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:16:29.822 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.824 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.826 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.827 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:16:29.829 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.830 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-13 00:16:29.831 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.833 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:16:29.835 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:16:29.837 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:16:29.838 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:16:29.840 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:16:29.841 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:16:29.842 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:16:29.843 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:16:29.845 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 85.5835ms
2025-05-13 00:16:29.846 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:16:29.847 +03:00 [DBG] Connection id "0HNCHGQ2DS10O" completed keep alive response.
2025-05-13 00:16:29.848 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:16:29.849 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:16:29.850 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:16:29.853 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 128.0534ms
2025-05-13 00:16:33.202 +03:00 [DBG] Connection id "0HNCHGQ2DS10O" reset.
2025-05-13 00:16:33.210 +03:00 [DBG] Connection id "0HNCHGQ2DS10O" disconnecting.
2025-05-13 00:16:33.211 +03:00 [DBG] Connection id "0HNCHGQ2DS10O" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:16:33.213 +03:00 [DBG] Connection id "0HNCHGQ2DS10O" stopped.
2025-05-13 00:17:18.397 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-13 00:17:28.401 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:17:28.402 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:17:38.406 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:17:38.408 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-05-13 00:17:38.878 +03:00 [DBG] Connection id "0HNCHGQ2DS10P" accepted.
2025-05-13 00:17:38.903 +03:00 [DBG] Connection id "0HNCHGQ2DS10P" started.
2025-05-13 00:17:38.983 +03:00 [DBG] Connection 0HNCHGQ2DS10P established using the following protocol: "Tls12"
2025-05-13 00:17:39.109 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:17:39.116 +03:00 [DBG] POST requests are not supported
2025-05-13 00:17:39.117 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:17:39.119 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:17:39.120 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:17:39.121 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:17:39.122 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:17:39.123 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:17:39.125 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:17:39.128 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:17:39.129 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:17:39.131 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:17:39.132 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:17:39.133 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:17:39.135 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:17:39.136 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:17:39.137 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:17:39.138 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:17:39.139 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:17:39.141 +03:00 [DBG] Connection id "0HNCHGQ2DS10P", Request id "0HNCHGQ2DS10P:00000001": started reading request body.
2025-05-13 00:17:39.143 +03:00 [DBG] Connection id "0HNCHGQ2DS10P", Request id "0HNCHGQ2DS10P:00000001": done reading request body.
2025-05-13 00:17:39.145 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:17:39.146 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:17:39.148 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:17:39.149 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:17:39.151 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:17:39.153 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:17:39.154 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:17:39.155 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.156 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.159 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:17:39.160 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:17:39.162 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:17:39.163 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:17:39.172 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:17:39.179 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.180 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.181 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:17:39.183 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.184 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:17:39.186 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.192 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.194 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:17:39.195 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:17:39.197 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:17:39.198 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:17:39.205 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:17:39.208 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.209 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.209 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.212 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-13 00:17:39.216 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.222 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (6ms).
2025-05-13 00:17:39.226 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:17:39.227 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:17:39.229 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:17:39.231 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.233 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:17:39.235 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.237 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.239 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:17:39.242 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:17:39.243 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:17:39.246 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:17:39.253 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:17:39.273 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.287 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 14ms reading results.
2025-05-13 00:17:39.293 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.297 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-13 00:17:39.304 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.307 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:17:39.311 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.313 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.314 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.316 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:17:39.317 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:17:39.318 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:17:39.320 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.321 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.323 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:17:39.324 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:17:39.326 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:17:39.328 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:17:39.334 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:17:39.336 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:17:39.338 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.339 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:17:39.354 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.355 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:17:39.360 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.364 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:17:39.366 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:17:39.369 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:17:39.370 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:17:39.372 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:17:39.373 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:17:39.375 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:17:39.386 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:17:39.486 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 352.4773ms
2025-05-13 00:17:39.487 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:17:39.492 +03:00 [DBG] Connection id "0HNCHGQ2DS10P" completed keep alive response.
2025-05-13 00:17:39.493 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:17:39.494 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.496 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:17:39.510 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 401.3559ms
2025-05-13 00:17:39.655 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1121 - null null
2025-05-13 00:17:39.679 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:17:39.680 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1121'
2025-05-13 00:17:39.682 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1121'
2025-05-13 00:17:39.683 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:17:39.686 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:17:39.687 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:17:39.688 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:17:39.690 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:17:39.693 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:17:39.695 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:17:39.696 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:17:39.698 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:17:39.699 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:17:39.701 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:17:39.702 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:17:39.703 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:17:39.704 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:17:39.710 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:17:39.712 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:17:39.713 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:17:39.715 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:17:39.716 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:17:39.719 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:17:39.720 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:17:39.722 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:17:39.723 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:17:39.724 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:17:39.730 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:17:39.731 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 30.6116ms
2025-05-13 00:17:39.743 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:17:39.744 +03:00 [DBG] Connection id "0HNCHGQ2DS10P" completed keep alive response.
2025-05-13 00:17:39.746 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1121 - 200 102 application/json; charset=utf-8 91.2368ms
2025-05-13 00:17:39.756 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:17:39.760 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:17:39.761 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:17:39.762 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:17:39.763 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:17:39.774 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:17:39.775 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:17:39.777 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:17:39.778 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:17:39.780 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:17:39.782 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:17:39.783 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:17:39.785 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:17:39.787 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:17:39.789 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:17:39.790 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:17:39.792 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:17:39.794 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:17:39.795 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:17:39.796 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.798 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.799 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:17:39.800 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:17:39.802 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:17:39.803 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:17:39.884 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:17:39.888 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.891 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.894 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.895 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.899 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:39.901 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.903 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 14ms reading results.
2025-05-13 00:17:39.930 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:39.932 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:17:39.934 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:17:39.943 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:17:39.946 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:17:39.948 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:17:39.950 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:17:39.952 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:17:39.953 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:17:39.955 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 166.6043ms
2025-05-13 00:17:40.010 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:17:40.011 +03:00 [DBG] Connection id "0HNCHGQ2DS10P" completed keep alive response.
2025-05-13 00:17:40.012 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:17:40.013 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:40.014 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:17:40.017 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 260.3289ms
2025-05-13 00:17:40.019 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A17%3A39&pageSize=10 - null null
2025-05-13 00:17:40.022 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:17:40.023 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:17:40.025 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:17:40.027 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:17:40.028 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:17:40.029 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:17:40.032 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:17:40.033 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:17:40.034 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:17:40.036 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:17:40.037 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:17:40.039 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:17:40.040 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:17:40.043 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:17:40.044 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:17:40.045 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:17:40.048 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:17:40.049 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:17:40.050 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:17:40.051 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:17:40.053 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:17:40.054 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:17:40.056 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:17:40.059 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:17:40.060 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:17:40.063 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:17:40.064 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:17:40.066 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:17:40.068 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:17:40.069 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:17:40.070 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:40.072 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:40.073 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:17:40.074 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:17:40.076 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:17:40.077 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:17:40.084 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:17:40.087 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.088 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.089 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.091 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.093 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.095 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.096 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.098 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.099 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.100 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.101 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:40.102 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 15ms reading results.
2025-05-13 00:17:40.104 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:40.105 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:17:40.107 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:17:40.109 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:17:40.111 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:17:40.112 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:17:40.113 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:17:40.114 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:17:40.118 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:17:40.120 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 77.4113ms
2025-05-13 00:17:40.123 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:17:40.126 +03:00 [DBG] Connection id "0HNCHGQ2DS10P" completed keep alive response.
2025-05-13 00:17:40.128 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:17:40.129 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:40.133 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-13 00:17:40.135 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1121&lastDate=2025-05-12T21%3A17%3A39&pageSize=10 - 200 1343 application/json; charset=utf-8 115.407ms
2025-05-13 00:17:40.149 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:17:40.152 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:17:40.153 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:17:40.155 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:17:40.159 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:17:40.160 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:17:40.162 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:17:40.163 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:17:40.165 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:17:40.167 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:17:40.169 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:17:40.171 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:17:40.176 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:17:40.180 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:17:40.182 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:17:40.185 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:17:40.188 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:17:40.189 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:17:40.195 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:17:40.197 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:17:40.199 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:17:40.202 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:17:40.204 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:17:40.212 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:17:40.220 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:17:40.222 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:17:40.226 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:17:40.228 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:17:40.231 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:17:40.234 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:17:40.235 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:17:40.237 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:40.241 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:40.245 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:17:40.246 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:17:40.249 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:17:40.251 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:17:40.264 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:17:40.266 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.268 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.269 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.271 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:17:40.273 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:40.276 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-13 00:17:40.278 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:40.280 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:17:40.282 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:17:40.284 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:17:40.286 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:17:40.288 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:17:40.289 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:17:40.290 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:17:40.291 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:17:40.293 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 110.5781ms
2025-05-13 00:17:40.294 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:17:40.295 +03:00 [DBG] Connection id "0HNCHGQ2DS10P" completed keep alive response.
2025-05-13 00:17:40.297 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:17:40.298 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:17:40.299 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:17:40.300 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1121&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 151.5827ms
2025-05-13 00:17:48.421 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:17:48.423 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:17:50.592 +03:00 [DBG] Connection id "0HNCHGQ2DS10P" reset.
2025-05-13 00:17:50.595 +03:00 [DBG] Connection id "0HNCHGQ2DS10P" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:17:50.604 +03:00 [DBG] Connection id "0HNCHGQ2DS10P" disconnecting.
2025-05-13 00:17:50.605 +03:00 [DBG] Connection id "0HNCHGQ2DS10P" stopped.
2025-05-13 00:17:58.437 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:17:58.438 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:18:08.451 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:18:08.454 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:18:18.457 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:18:18.458 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-05-13 00:18:28.472 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:18:28.474 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:18:38.482 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:18:38.483 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-05-13 00:18:48.497 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:18:48.499 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:18:58.509 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:18:58.511 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:19:08.526 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:19:08.527 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:19:18.527 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:19:18.529 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:19:28.536 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:19:28.538 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:19:39.091 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:19:39.094 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-13 00:19:39.823 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-13 00:19:49.100 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 00:19:49.105 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0071ms - processed: 2 items - remaining: 0 items
2025-05-13 00:22:57.529 +03:00 [INF] Application is shutting down...
2025-05-13 00:22:57.771 +03:00 [DBG] Hosting stopping
2025-05-13 00:22:58.051 +03:00 [DBG] Hosting stopped
2025-05-13 00:23:51.789 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-13 00:24:02.393 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:24:04.699 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2025-05-13 00:24:07.569 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<User>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        User entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            User instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(User);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (User)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Email>k__BackingField = dataReader.GetString(2);
                                instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                instance.<Role>k__BackingField = dataReader.GetString(5);
                                instance.<Salt>k__BackingField = dataReader.GetString(6);
                                instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-13 00:24:08.317 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:24:09.611 +03:00 [DBG] Created DbConnection. (1549ms).
2025-05-13 00:24:09.620 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:13.215 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:13.223 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:13.292 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (69ms).
2025-05-13 00:24:13.298 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (78ms).
2025-05-13 00:24:13.335 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-13 00:24:13.486 +03:00 [INF] Executed DbCommand (178ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-13 00:24:13.867 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:13.965 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:13.973 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:13.975 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:14.063 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:14.072 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 577ms reading results.
2025-05-13 00:24:14.077 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:14.084 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (6ms).
2025-05-13 00:24:14.088 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:24:14.240 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:24:14.259 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:24:14.689 +03:00 [DBG] Executing 2 update commands as a batch.
2025-05-13 00:24:14.697 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:14.702 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:14.705 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-13 00:24:14.835 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-13 00:24:14.843 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:14.847 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:24:14.852 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-05-13 00:24:14.856 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:24:16.070 +03:00 [INF] Executed DbCommand (1,216ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:24:16.139 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:16.143 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 62ms reading results.
2025-05-13 00:24:16.261 +03:00 [DBG] Committing transaction.
2025-05-13 00:24:16.267 +03:00 [DBG] Committed transaction.
2025-05-13 00:24:16.270 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:16.272 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:24:16.275 +03:00 [DBG] Disposing transaction.
2025-05-13 00:24:16.282 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:16.284 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:16.287 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-05-13 00:24:16.291 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-13 00:24:16.303 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-13 00:24:16.330 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:16.331 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:16.332 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:16.333 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:24:16.334 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:24:16.336 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:24:16.340 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:24:16.402 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:16.422 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:16.447 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:16.451 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:16.457 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:16.461 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:16.465 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:16.467 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:16.469 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:16.471 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:16.474 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:16.475 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 133ms reading results.
2025-05-13 00:24:16.486 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:16.488 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:24:16.490 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:24:16.491 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:24:16.513 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:24:16.518 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-13 00:24:16.519 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:16.521 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:16.523 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-13 00:24:16.526 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-13 00:24:16.527 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:16.530 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:24:16.532 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:24:16.534 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-13 00:24:17.310 +03:00 [INF] Executed DbCommand (776ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-13 00:24:17.316 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:17.318 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-13 00:24:17.320 +03:00 [DBG] Committing transaction.
2025-05-13 00:24:17.321 +03:00 [DBG] Committed transaction.
2025-05-13 00:24:17.324 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:17.326 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:24:17.327 +03:00 [DBG] Disposing transaction.
2025-05-13 00:24:17.329 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:17.331 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:17.334 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:17.335 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:17.337 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:17.339 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-13 00:24:17.341 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:24:17.345 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:17.347 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:24:18.079 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:24:18.172 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-13 00:24:18.828 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-13 00:24:18.849 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:24:18.850 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:24:18.851 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:18.854 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:18.855 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:18.857 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:24:18.858 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:24:18.860 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-13 00:24:18.958 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-13 00:24:18.964 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:18.965 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-13 00:24:18.967 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:18.969 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:24:19.002 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:19.009 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:19.010 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:24:19.012 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:24:19.013 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:24:19.111 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:19.113 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:19.115 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:19.118 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:24:19.121 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-13 00:24:19.122 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-13 00:24:19.203 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-13 00:24:19.258 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:19.262 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:19.264 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 58ms reading results.
2025-05-13 00:24:19.266 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:19.267 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:24:19.272 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:19.274 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:24:20.918 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:20.933 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:20.937 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:20.939 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:24:20.941 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:24:20.949 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:24:20.954 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:20.956 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:20.958 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:20.960 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:24:20.962 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:24:20.963 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:24:20.970 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:24:20.975 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:21.027 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:21.029 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 55ms reading results.
2025-05-13 00:24:21.030 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:21.031 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:24:21.034 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.037 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:24:21.039 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __authData_UserDTO_Id_0)'
2025-05-13 00:24:21.045 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-13 00:24:21.050 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:21.052 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:21.053 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:21.055 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:24:21.056 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:24:21.058 +03:00 [DBG] Executing DbCommand [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-13 00:24:21.153 +03:00 [INF] Executed DbCommand (96ms) [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-13 00:24:21.157 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:21.159 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:24:21.161 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:21.163 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:24:21.172 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.176 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.178 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.180 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.184 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.186 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.188 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.190 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.193 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.195 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.196 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:24:21.200 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:24:21.202 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:24:21.209 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-13 00:24:21.214 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:21.217 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:21.219 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:21.221 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:24:21.223 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:24:21.224 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-13 00:24:21.568 +03:00 [INF] Executed DbCommand (344ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-13 00:24:21.572 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:21.580 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:21.584 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:21.585 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:21.587 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:21.588 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:21.590 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 19ms reading results.
2025-05-13 00:24:21.591 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:21.593 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:24:21.595 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.598 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.602 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.603 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.605 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.607 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-13 00:24:21.611 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.671 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.728 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.731 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.736 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.739 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.741 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.752 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.762 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.778 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.781 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.788 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.790 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.792 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.794 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.795 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.799 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.803 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.804 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.806 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.807 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.809 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.811 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.813 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.814 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.818 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.819 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.821 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.823 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.824 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.826 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.827 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.828 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.830 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.832 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.835 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.836 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.838 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.839 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.841 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:21.842 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:24:21.843 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:24:21.848 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:24:21.852 +03:00 [DBG] Executing 20 update commands as a batch.
2025-05-13 00:24:21.853 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:21.855 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:21.856 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:21.857 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:24:21.858 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:24:21.859 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-13 00:24:22.385 +03:00 [INF] Executed DbCommand (526ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-13 00:24:22.390 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.394 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.396 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.397 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.401 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.404 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.405 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.406 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.407 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.408 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.409 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.410 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.411 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.413 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.414 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.432 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.438 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.439 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.441 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.442 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:22.444 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:22.445 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 56ms reading results.
2025-05-13 00:24:22.448 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:22.458 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (10ms).
2025-05-13 00:24:22.507 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.510 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.513 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.517 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.525 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.527 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.529 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.531 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.537 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.541 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.543 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.545 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.547 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.550 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.553 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.555 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.557 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.559 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.561 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.563 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.564 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 20 entities written to the database.
2025-05-13 00:24:22.569 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.585 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.587 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.589 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.590 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.592 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.593 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.595 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:22.596 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:24:22.598 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:24:22.602 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:24:22.605 +03:00 [DBG] Executing 4 update commands as a batch.
2025-05-13 00:24:22.606 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:22.607 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:22.609 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:22.610 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:24:22.611 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:24:22.612 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-13 00:24:23.399 +03:00 [INF] Executed DbCommand (787ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-13 00:24:23.407 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:23.409 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:23.410 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:23.413 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:23.414 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:23.416 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 10ms reading results.
2025-05-13 00:24:23.419 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:23.420 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:24:23.425 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:23.430 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:23.432 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:23.435 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:23.437 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 4 entities written to the database.
2025-05-13 00:24:23.439 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:24:23.440 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:23.442 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:24:23.483 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:24:23.489 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:24:23.490 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:24:23.491 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:23.493 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:23.495 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:23.496 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:24:23.498 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:24:23.499 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-13 00:24:23.504 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-13 00:24:23.506 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:23.508 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-13 00:24:23.509 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:23.511 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:24:23.523 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:23.525 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:23.526 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:24:23.527 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:24:23.528 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:24:23.530 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:23.531 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:23.533 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:23.534 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:24:23.536 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:24:23.538 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-13 00:24:23.544 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-13 00:24:23.546 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:24:23.547 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:23.549 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:24:23.553 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:23.554 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:24:23.556 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:24:23.559 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:24:23.560 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:24:23.562 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:23.563 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:24:24.637 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-13 00:24:24.872 +03:00 [DBG] Hosting starting
2025-05-13 00:24:25.205 +03:00 [INF] User profile is available. Using 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-13 00:24:25.245 +03:00 [DBG] Reading data from file 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys\key-036e1e5f-5347-47d7-8236-0b64ed0a76a1.xml'.
2025-05-13 00:24:25.263 +03:00 [DBG] Found key {036e1e5f-5347-47d7-8236-0b64ed0a76a1}.
2025-05-13 00:24:25.279 +03:00 [DBG] Considering key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} with expiration date 2025-07-16 20:11:06Z as default key.
2025-05-13 00:24:25.284 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-13 00:24:25.286 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-13 00:24:25.288 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-13 00:24:25.292 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-13 00:24:25.294 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-13 00:24:25.297 +03:00 [DBG] Using key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} as the default key.
2025-05-13 00:24:25.298 +03:00 [DBG] Key ring with default key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} was loaded during application startup.
2025-05-13 00:24:25.376 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:24:25.381 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.ExpiresAt < DateTime.UtcNow)'
2025-05-13 00:24:25.573 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<RefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE()) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE(), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        RefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            RefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(RefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (RefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                        {
                            return 
                            {
                                RefreshToken instance;
                                instance = new RefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Token>k__BackingField = dataReader.GetString(4);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(RefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-13 00:24:25.581 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:24:25.582 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:24:25.584 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:25.586 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:25.588 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:24:25.589 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:24:25.590 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:24:25.592 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-13 00:24:25.685 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-13 00:24:25.688 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:25.690 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:24:25.692 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:25.693 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:24:25.695 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:24:25.696 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:24:25.698 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:24:25.972 +03:00 [INF] Now listening on: https://localhost:49464
2025-05-13 00:24:25.977 +03:00 [INF] Now listening on: http://localhost:49465
2025-05-13 00:24:25.978 +03:00 [DBG] Loaded hosting startup assembly Finance_Manager_Backend
2025-05-13 00:24:25.979 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-13 00:24:25.980 +03:00 [INF] Hosting environment: Development
2025-05-13 00:24:25.981 +03:00 [INF] Content root path: G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend
2025-05-13 00:24:25.982 +03:00 [DBG] Hosting started
2025-05-13 00:26:19.488 +03:00 [DBG] Connection id "0HNCHJEHDRA78" accepted.
2025-05-13 00:26:19.503 +03:00 [DBG] Connection id "0HNCHJEHDRA78" started.
2025-05-13 00:26:19.655 +03:00 [DBG] Connection 0HNCHJEHDRA78 established using the following protocol: "Tls12"
2025-05-13 00:26:19.875 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:26:19.880 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-13 00:26:20.336 +03:00 [DBG] POST requests are not supported
2025-05-13 00:26:20.394 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:26:20.397 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:26:20.399 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:26:20.776 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:26:20.779 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:26:20.799 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:26:20.802 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:26:20.804 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:26:20.806 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:26:20.808 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:26:20.810 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:26:20.814 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:26:20.817 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:26:20.856 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:26:20.860 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:26:20.863 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:26:20.865 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:26:20.898 +03:00 [DBG] Connection id "0HNCHJEHDRA78", Request id "0HNCHJEHDRA78:00000001": started reading request body.
2025-05-13 00:26:20.899 +03:00 [DBG] Connection id "0HNCHJEHDRA78", Request id "0HNCHJEHDRA78:00000001": done reading request body.
2025-05-13 00:26:21.534 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:26:21.537 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:26:21.538 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:26:21.545 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:26:21.553 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:26:21.556 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .FirstOrDefault(rt => rt.Token == __refreshToken_0)'
2025-05-13 00:26:21.563 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RefreshToken>(
    asyncEnumerable: SingleQueryingEnumerable.Create<RefreshToken>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
            SELECT TOP(1) r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
            FROM refresh_tokens AS r
            WHERE r.token == @__refreshToken_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
            SELECT TOP(1) r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
            FROM refresh_tokens AS r
            WHERE r.token == @__refreshToken_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            RefreshToken entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                RefreshToken instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(RefreshToken);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (RefreshToken)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                            {
                                return 
                                {
                                    RefreshToken instance;
                                    instance = new RefreshToken();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                    instance.<Token>k__BackingField = dataReader.GetString(4);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(RefreshToken)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-13 00:26:21.567 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:26:21.568 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:26:21.569 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:21.571 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:21.572 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:26:21.574 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:26:21.575 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:26:21.576 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:26:21.666 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:26:21.669 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:21.671 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-13 00:26:21.672 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:21.674 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:26:21.744 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 928.5268ms
2025-05-13 00:26:21.790 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:26:21.863 +03:00 [ERR] Invalid refresh token
System.InvalidOperationException: Invalid refresh token
   at Finance_Manager_Backend.BusinessLogic.Services.AuthServices.AuthService.AuthenticateUserWithRefreshTokenAsync(String refreshToken) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\BusinessLogic\Services\AuthServices\AuthService.cs:line 89
   at Finance_Manager_Backend.Controllers.AuthController.RefreshToken(String refreshToken) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Controllers\AuthController.cs:line 84
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Finance_Manager_Backend.Middleware.ExceptionsHandler.InvokeAsync(HttpContext httpContext) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Middleware\ExceptionsHandler.cs:line 23
2025-05-13 00:26:22.466 +03:00 [DBG] Connection id "0HNCHJEHDRA78" completed keep alive response.
2025-05-13 00:26:22.474 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:26:22.478 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:22.481 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-13 00:26:22.484 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 400 null application/json 2612.17ms
2025-05-13 00:26:34.765 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/authenticate - application/json-patch+json 63
2025-05-13 00:26:34.794 +03:00 [DBG] POST requests are not supported
2025-05-13 00:26:34.799 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/authenticate'
2025-05-13 00:26:34.801 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)' with route pattern 'api/Auth/authenticate' is valid for the request path '/api/Auth/authenticate'
2025-05-13 00:26:34.803 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-13 00:26:34.806 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:26:34.808 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-13 00:26:34.813 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] Authenticate(Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:26:34.815 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:26:34.817 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:26:34.818 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:26:34.821 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:26:34.822 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:26:34.824 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:26:34.826 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:26:34.828 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-13 00:26:34.829 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' using the name '' in request data ...
2025-05-13 00:26:34.831 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:26:34.832 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:26:34.834 +03:00 [DBG] Connection id "0HNCHJEHDRA78", Request id "0HNCHJEHDRA78:00000002": started reading request body.
2025-05-13 00:26:34.835 +03:00 [DBG] Connection id "0HNCHJEHDRA78", Request id "0HNCHJEHDRA78:00000002": done reading request body.
2025-05-13 00:26:34.893 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-13 00:26:34.894 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-13 00:26:34.896 +03:00 [DBG] Attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-13 00:26:34.900 +03:00 [DBG] Done attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-13 00:26:34.968 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:26:34.970 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:26:34.971 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:26:34.972 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:34.974 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:34.976 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:26:34.977 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:26:34.978 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:26:34.980 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-13 00:26:34.984 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-13 00:26:34.986 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:34.987 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:34.988 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:26:34.990 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:34.992 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:26:35.005 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.008 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.009 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.012 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:26:35.013 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:26:35.014 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:26:35.015 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.016 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.017 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:26:35.018 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:26:35.020 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:26:35.021 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:26:35.026 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:26:35.028 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:26:35.030 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.031 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-13 00:26:35.033 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.034 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:26:35.036 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.038 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:26:35.041 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:26:35.046 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:26:35.048 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:26:35.050 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:26:35.051 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:26:35.052 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:26:35.054 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:26:35.137 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend) in 312.7677ms
2025-05-13 00:26:35.139 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-13 00:26:35.141 +03:00 [DBG] Connection id "0HNCHJEHDRA78" completed keep alive response.
2025-05-13 00:26:35.142 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:26:35.143 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.144 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:26:35.145 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/authenticate - 200 521 application/json; charset=utf-8 380.195ms
2025-05-13 00:26:35.268 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1123 - null null
2025-05-13 00:26:35.305 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:26:35.306 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1123'
2025-05-13 00:26:35.310 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1123'
2025-05-13 00:26:35.311 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:26:35.454 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:26:35.456 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:26:35.458 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:26:35.463 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:26:35.465 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:26:35.467 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:26:35.468 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:26:35.471 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:26:35.473 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:26:35.476 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:26:35.482 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:26:35.484 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:26:35.485 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:26:35.488 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:26:35.490 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:26:35.493 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:26:35.495 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:26:35.521 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:26:35.525 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:26:35.527 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:26:35.528 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:26:35.529 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:26:35.529 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:26:35.530 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:26:35.536 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 60.7944ms
2025-05-13 00:26:35.538 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:26:35.540 +03:00 [DBG] Connection id "0HNCHJEHDRA78" completed keep alive response.
2025-05-13 00:26:35.543 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1123 - 200 102 application/json; charset=utf-8 274.5391ms
2025-05-13 00:26:35.556 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:26:35.561 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:26:35.562 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:26:35.564 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:26:35.566 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:26:35.567 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:26:35.569 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:26:35.570 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:26:35.574 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:26:35.577 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:26:35.578 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:26:35.580 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:26:35.582 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:26:35.584 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:26:35.585 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:26:35.587 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:26:35.592 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:26:35.594 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-13 00:26:35.602 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-13 00:26:35.606 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:26:35.607 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:26:35.608 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.610 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.612 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:26:35.613 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:26:35.614 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:26:35.616 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:26:35.620 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:26:35.622 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.625 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.627 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.629 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.630 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.632 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.633 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 11ms reading results.
2025-05-13 00:26:35.635 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.636 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:26:35.651 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:26:35.653 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:26:35.655 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:26:35.656 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:26:35.658 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:26:35.659 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:26:35.660 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:26:35.667 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 81.7085ms
2025-05-13 00:26:35.669 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:26:35.670 +03:00 [DBG] Connection id "0HNCHJEHDRA78" completed keep alive response.
2025-05-13 00:26:35.671 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:26:35.672 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.673 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:26:35.676 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 119.5034ms
2025-05-13 00:26:35.700 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1123&lastDate=2025-05-12T21%3A26%3A35&pageSize=10 - null null
2025-05-13 00:26:35.702 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:26:35.703 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:26:35.705 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:26:35.706 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:26:35.708 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:26:35.709 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:26:35.710 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:26:35.718 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:26:35.720 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:26:35.722 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:26:35.723 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:26:35.726 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:26:35.727 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:26:35.729 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:26:35.732 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:26:35.737 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:26:35.739 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:26:35.744 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:26:35.747 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:26:35.749 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:26:35.751 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:26:35.753 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:26:35.755 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:26:35.758 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:26:35.761 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:26:35.762 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:26:35.765 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:26:35.801 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:26:35.806 +03:00 [DBG] Compiling query expression: 
'DbSet<Transaction>()
    .Where(t => t.UserId == __userId_0)
    .OrderByDescending(t => t.Date)
    .Where(t => t.Date < __lastDate_Value_1)
    .OrderByDescending(t => t.Date)
    .Take(__p_2)'
2025-05-13 00:26:35.817 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Transaction>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Transaction.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Transaction.CategoryId (int) Required FK Index, 1], [Property: Transaction.Date (DateTime) Required, 2], [Property: Transaction.InnerCategoryId (int?) FK Index, 3], [Property: Transaction.Name (string) Required MaxLength(50), 4], [Property: Transaction.Price (decimal) Required, 5], [Property: Transaction.UserId (int) Required FK Index, 6] }
        SELECT TOP(@__p_2) t.id, t.category_fk, t.date, t.inner_category_fk, t.name, t.price, t.user_fk
        FROM transactions AS t
        WHERE (t.user_fk == @__userId_0) && (t.date < @__lastDate_Value_1)
        ORDER BY t.date DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Transaction.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Transaction.CategoryId (int) Required FK Index, 1], [Property: Transaction.Date (DateTime) Required, 2], [Property: Transaction.InnerCategoryId (int?) FK Index, 3], [Property: Transaction.Name (string) Required MaxLength(50), 4], [Property: Transaction.Price (decimal) Required, 5], [Property: Transaction.UserId (int) Required FK Index, 6] }
        SELECT TOP(@__p_2) t.id, t.category_fk, t.date, t.inner_category_fk, t.name, t.price, t.user_fk
        FROM transactions AS t
        WHERE (t.user_fk == @__userId_0) && (t.date < @__lastDate_Value_1)
        ORDER BY t.date DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Transaction entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Transaction instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Transaction);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Transaction.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Transaction").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Transaction)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Transaction | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Transaction")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Transaction | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Transaction")]: 
                        {
                            return 
                            {
                                Transaction instance;
                                instance = new Transaction();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(1);
                                instance.<Date>k__BackingField = dataReader.GetDateTime(2);
                                instance.<InnerCategoryId>k__BackingField = dataReader.IsDBNull(3) ? default(int?) : (int?)dataReader.GetInt32(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<Price>k__BackingField = dataReader.GetDecimal(5);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(6);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Transaction | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Transaction")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Transaction)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-13 00:26:35.824 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:26:35.826 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-13 00:26:35.827 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.828 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.830 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:26:35.831 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:26:35.832 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:26:35.834 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:26:35.839 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:26:35.843 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.845 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.846 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.848 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.849 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.851 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.853 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.855 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.857 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.860 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:35.862 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.864 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 22ms reading results.
2025-05-13 00:26:35.868 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.870 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:26:35.878 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:26:35.881 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:26:35.883 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:26:35.885 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:26:35.886 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:26:35.887 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:26:35.888 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:26:35.898 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 169.1746ms
2025-05-13 00:26:35.903 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:26:35.905 +03:00 [DBG] Connection id "0HNCHJEHDRA78" completed keep alive response.
2025-05-13 00:26:35.906 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:26:35.909 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.911 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:26:35.913 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1123&lastDate=2025-05-12T21%3A26%3A35&pageSize=10 - 200 1343 application/json; charset=utf-8 213.188ms
2025-05-13 00:26:35.920 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1123&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:26:35.923 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:26:35.924 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:26:35.926 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:26:35.928 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:26:35.929 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:26:35.930 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:26:35.932 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:26:35.936 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:26:35.938 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:26:35.940 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:26:35.942 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:26:35.945 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:26:35.946 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:26:35.947 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:26:35.949 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:26:35.951 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:26:35.952 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:26:35.954 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:26:35.956 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:26:35.960 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:26:35.962 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:26:35.963 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:26:35.965 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:26:35.967 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:26:35.968 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:26:35.969 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:26:35.971 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:26:35.978 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:26:35.982 +03:00 [DBG] Compiling query expression: 
'DbSet<Saving>()
    .Where(s => s.UserId == __userId_0 && s.Id > __previousSavingId_1)
    .Take(__p_2)'
2025-05-13 00:26:35.984 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-13 00:26:35.989 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Saving>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Saving.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Saving.CurrentAmount (decimal) Required ValueGenerated.OnAdd, 1], [Property: Saving.Goal (decimal) Required, 2], [Property: Saving.Name (string) Required MaxLength(50), 3], [Property: Saving.UserId (int) Required FK Index, 4] }
        SELECT TOP(@__p_2) s.id, s.current_amount, s.goal, s.name, s.user_fk
        FROM savings AS s
        WHERE (s.user_fk == @__userId_0) && (s.id > @__previousSavingId_1)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Saving.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Saving.CurrentAmount (decimal) Required ValueGenerated.OnAdd, 1], [Property: Saving.Goal (decimal) Required, 2], [Property: Saving.Name (string) Required MaxLength(50), 3], [Property: Saving.UserId (int) Required FK Index, 4] }
        SELECT TOP(@__p_2) s.id, s.current_amount, s.goal, s.name, s.user_fk
        FROM savings AS s
        WHERE (s.user_fk == @__userId_0) && (s.id > @__previousSavingId_1), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Saving entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Saving instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Saving);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Saving.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Saving").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Saving)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Saving | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Saving")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Saving | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Saving")]: 
                        {
                            return 
                            {
                                Saving instance;
                                instance = new Saving();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CurrentAmount>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Goal>k__BackingField = dataReader.GetDecimal(2);
                                instance.<Name>k__BackingField = dataReader.GetString(3);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(4);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Saving | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Saving")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Saving)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-13 00:26:35.994 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:26:35.995 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:26:35.996 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.997 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:35.999 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:26:36.000 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:26:36.001 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:26:36.003 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:26:36.048 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:26:36.054 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:36.056 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:36.059 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:36.060 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:26:36.062 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:36.063 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-13 00:26:36.064 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:36.066 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:26:36.072 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:26:36.075 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:26:36.077 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:26:36.078 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:26:36.079 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:26:36.080 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:26:36.082 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:26:36.085 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 138.3873ms
2025-05-13 00:26:36.088 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:26:36.089 +03:00 [DBG] Connection id "0HNCHJEHDRA78" completed keep alive response.
2025-05-13 00:26:36.090 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:26:36.093 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:26:36.095 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:26:36.099 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1123&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 179.5049ms
2025-05-13 00:26:50.496 +03:00 [DBG] Connection id "0HNCHJEHDRA78" reset.
2025-05-13 00:26:50.504 +03:00 [DBG] Connection id "0HNCHJEHDRA78" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:26:50.507 +03:00 [DBG] Connection id "0HNCHJEHDRA78" disconnecting.
2025-05-13 00:26:50.520 +03:00 [DBG] Connection id "0HNCHJEHDRA78" stopped.
2025-05-13 00:27:00.657 +03:00 [DBG] Connection id "0HNCHJEHDRA79" accepted.
2025-05-13 00:27:00.696 +03:00 [DBG] Connection id "0HNCHJEHDRA79" started.
2025-05-13 00:27:00.731 +03:00 [DBG] Connection 0HNCHJEHDRA79 established using the following protocol: "Tls12"
2025-05-13 00:27:00.782 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:27:00.785 +03:00 [DBG] POST requests are not supported
2025-05-13 00:27:00.786 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:27:00.787 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:27:00.788 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:27:00.789 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:27:00.790 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:27:00.791 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:27:00.792 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:27:00.793 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:27:00.795 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:27:00.797 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:27:00.799 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:27:00.800 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:27:00.801 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:27:00.803 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:27:00.804 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:27:00.805 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:27:00.806 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:27:00.808 +03:00 [DBG] Connection id "0HNCHJEHDRA79", Request id "0HNCHJEHDRA79:00000001": started reading request body.
2025-05-13 00:27:00.809 +03:00 [DBG] Connection id "0HNCHJEHDRA79", Request id "0HNCHJEHDRA79:00000001": done reading request body.
2025-05-13 00:27:00.811 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:27:00.813 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:27:00.814 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:27:00.815 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:27:00.817 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:27:00.819 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:27:00.819 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:27:00.820 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.822 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.823 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:27:00.824 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:27:00.825 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:27:00.826 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:27:00.832 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:27:00.834 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:00.835 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.836 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:27:00.837 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.839 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:27:00.840 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __existingToken_UserId_0)'
2025-05-13 00:27:00.847 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__existingToken_UserId_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__existingToken_UserId_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-13 00:27:00.852 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.853 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.854 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:27:00.855 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:27:00.856 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:27:00.857 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:27:00.862 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:27:00.865 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:00.867 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:00.868 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.869 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-13 00:27:00.871 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.872 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:27:00.873 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:27:00.874 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:27:00.876 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:27:00.878 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:00.879 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:27:00.883 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.885 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.886 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:27:00.888 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:27:00.889 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:27:00.890 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:27:00.895 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:27:00.897 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.898 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-13 00:27:00.900 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.901 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:27:00.902 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:00.904 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:27:00.905 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:00.906 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:00.907 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:00.908 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:27:00.909 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:27:00.910 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:27:00.912 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.913 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.914 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:27:00.915 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:27:00.916 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:27:00.917 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:27:00.921 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:27:00.923 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:27:00.924 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.926 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:27:00.928 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.929 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:27:00.930 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:00.932 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:27:00.934 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:27:00.936 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:27:00.937 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:27:00.938 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:27:00.939 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:27:00.940 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:27:00.941 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:27:00.943 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 143.2286ms
2025-05-13 00:27:00.959 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:27:00.960 +03:00 [DBG] Connection id "0HNCHJEHDRA79" completed keep alive response.
2025-05-13 00:27:00.962 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:27:00.963 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:00.964 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:27:00.966 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 183.9661ms
2025-05-13 00:27:01.273 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1123 - null null
2025-05-13 00:27:01.287 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:27:01.289 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1123'
2025-05-13 00:27:01.290 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1123'
2025-05-13 00:27:01.292 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:27:01.298 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:27:01.301 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:27:01.302 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:27:01.303 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:27:01.305 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:27:01.307 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:27:01.308 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:27:01.314 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:27:01.316 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:27:01.318 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:27:01.319 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:27:01.321 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:27:01.322 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:27:01.324 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:27:01.325 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:27:01.326 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:27:01.329 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:27:01.330 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:27:01.332 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:27:01.333 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:27:01.335 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:27:01.335 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:27:01.336 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:27:01.339 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:27:01.340 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 22.4156ms
2025-05-13 00:27:01.347 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:27:01.348 +03:00 [DBG] Connection id "0HNCHJEHDRA79" completed keep alive response.
2025-05-13 00:27:01.350 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1123 - 200 102 application/json; charset=utf-8 76.357ms
2025-05-13 00:27:01.357 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:27:01.359 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:27:01.360 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:27:01.362 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:27:01.364 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:27:01.365 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:27:01.366 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:27:01.368 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:27:01.369 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:27:01.371 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:27:01.372 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:27:01.373 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:27:01.375 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:27:01.377 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:27:01.379 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:27:01.384 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:27:01.386 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:27:01.387 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:27:01.388 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:27:01.389 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.391 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.392 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:27:01.393 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:27:01.396 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:27:01.397 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:27:01.401 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:27:01.403 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.404 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.405 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.406 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.407 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.409 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.410 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-13 00:27:01.413 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.415 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:27:01.416 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:27:01.419 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:27:01.420 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:27:01.445 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:27:01.452 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:27:01.453 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:27:01.454 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:27:01.456 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 77.3309ms
2025-05-13 00:27:01.458 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:27:01.459 +03:00 [DBG] Connection id "0HNCHJEHDRA79" completed keep alive response.
2025-05-13 00:27:01.460 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:27:01.461 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.463 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:27:01.465 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 108.0422ms
2025-05-13 00:27:01.492 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1123&lastDate=2025-05-12T21%3A27%3A01&pageSize=10 - null null
2025-05-13 00:27:01.503 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:27:01.504 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:27:01.505 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:27:01.507 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:27:01.508 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:27:01.509 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:27:01.510 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:27:01.513 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:27:01.515 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:27:01.517 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:27:01.518 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:27:01.521 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:27:01.522 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:27:01.525 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:27:01.527 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:27:01.530 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:27:01.531 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:27:01.532 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:27:01.534 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:27:01.536 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:27:01.538 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:27:01.539 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:27:01.541 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:27:01.542 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:27:01.544 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:27:01.545 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:27:01.546 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:27:01.550 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:27:01.552 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:27:01.553 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:27:01.555 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.557 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.558 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:27:01.559 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:27:01.561 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:27:01.562 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:27:01.567 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:27:01.569 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.571 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.573 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.575 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.576 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.577 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.579 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.580 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.582 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.583 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.584 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.586 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 16ms reading results.
2025-05-13 00:27:01.588 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.589 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:27:01.591 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:27:01.593 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:27:01.595 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:27:01.596 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:27:01.597 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:27:01.598 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:27:01.599 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:27:01.601 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 75.9077ms
2025-05-13 00:27:01.603 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:27:01.604 +03:00 [DBG] Connection id "0HNCHJEHDRA79" completed keep alive response.
2025-05-13 00:27:01.605 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:27:01.607 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.608 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:27:01.609 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1123&lastDate=2025-05-12T21%3A27%3A01&pageSize=10 - 200 1343 application/json; charset=utf-8 117.1933ms
2025-05-13 00:27:01.619 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1123&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:27:01.624 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:27:01.625 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:27:01.626 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:27:01.629 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:27:01.630 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:27:01.630 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:27:01.631 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:27:01.632 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:27:01.634 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:27:01.635 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:27:01.636 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:27:01.642 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:27:01.644 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:27:01.649 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:27:01.651 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:27:01.652 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:27:01.654 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:27:01.656 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:27:01.658 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:27:01.659 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:27:01.664 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:27:01.668 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:27:01.670 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:27:01.672 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:27:01.674 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:27:01.675 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:27:01.677 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:27:01.682 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:27:01.686 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:27:01.687 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:27:01.689 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.691 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.693 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:27:01.696 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:27:01.698 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-13 00:27:01.700 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:27:01.705 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:27:01.714 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.715 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.716 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.717 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:27:01.718 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.720 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-13 00:27:01.721 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.722 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:27:01.724 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:27:01.726 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:27:01.727 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:27:01.730 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:27:01.731 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:27:01.732 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:27:01.733 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:27:01.735 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 86.2065ms
2025-05-13 00:27:01.738 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:27:01.739 +03:00 [DBG] Connection id "0HNCHJEHDRA79" completed keep alive response.
2025-05-13 00:27:01.741 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:27:01.754 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:27:01.756 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:27:01.771 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1123&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 151.8226ms
2025-05-13 00:27:19.127 +03:00 [DBG] Connection id "0HNCHJEHDRA79" reset.
2025-05-13 00:27:19.138 +03:00 [DBG] Connection id "0HNCHJEHDRA79" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:27:19.141 +03:00 [DBG] Connection id "0HNCHJEHDRA79" disconnecting.
2025-05-13 00:27:19.142 +03:00 [DBG] Connection id "0HNCHJEHDRA79" stopped.
2025-05-13 00:28:35.498 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-13 00:28:39.519 +03:00 [INF] Application is shutting down...
2025-05-13 00:28:39.520 +03:00 [DBG] Hosting stopping
2025-05-13 00:28:39.554 +03:00 [DBG] Hosting stopped
2025-05-13 00:30:50.756 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-13 00:30:51.728 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:30:51.805 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2025-05-13 00:30:52.189 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<User>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        User entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            User instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(User);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (User)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Email>k__BackingField = dataReader.GetString(2);
                                instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                instance.<Role>k__BackingField = dataReader.GetString(5);
                                instance.<Salt>k__BackingField = dataReader.GetString(6);
                                instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-13 00:30:52.233 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:30:52.259 +03:00 [DBG] Created DbConnection. (24ms).
2025-05-13 00:30:52.267 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:52.558 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:52.573 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:52.582 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2025-05-13 00:30:52.586 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2025-05-13 00:30:52.595 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-13 00:30:52.642 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-13 00:30:52.692 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:52.753 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:52.926 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:52.928 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:52.934 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:52.943 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 291ms reading results.
2025-05-13 00:30:52.949 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:52.957 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (8ms).
2025-05-13 00:30:52.961 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:30:52.967 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:30:52.988 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:30:53.078 +03:00 [DBG] Executing 2 update commands as a batch.
2025-05-13 00:30:53.093 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.102 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.106 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-13 00:30:53.116 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-13 00:30:53.125 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:53.127 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:30:53.133 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-05-13 00:30:53.139 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:30:53.220 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:30:53.231 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.236 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 13ms reading results.
2025-05-13 00:30:53.242 +03:00 [DBG] Committing transaction.
2025-05-13 00:30:53.245 +03:00 [DBG] Committed transaction.
2025-05-13 00:30:53.248 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.251 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-13 00:30:53.253 +03:00 [DBG] Disposing transaction.
2025-05-13 00:30:53.259 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.261 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.264 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-05-13 00:30:53.267 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-13 00:30:53.275 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-13 00:30:53.281 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.284 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.287 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:53.288 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:30:53.290 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:30:53.292 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:30:53.297 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:30:53.321 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.336 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.339 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.341 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.343 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.345 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.347 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.348 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.352 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.353 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.356 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.358 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 53ms reading results.
2025-05-13 00:30:53.360 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.362 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:30:53.364 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:30:53.368 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:30:53.378 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:30:53.384 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-13 00:30:53.386 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.388 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.389 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-13 00:30:53.391 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-13 00:30:53.392 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:53.393 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:30:53.396 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:30:53.398 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-13 00:30:53.428 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-13 00:30:53.431 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.433 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:30:53.436 +03:00 [DBG] Committing transaction.
2025-05-13 00:30:53.438 +03:00 [DBG] Committed transaction.
2025-05-13 00:30:53.439 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.440 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:30:53.442 +03:00 [DBG] Disposing transaction.
2025-05-13 00:30:53.444 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.446 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.448 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.451 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.453 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.456 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-13 00:30:53.458 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:30:53.462 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.464 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:30:53.671 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:30:53.690 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-13 00:30:53.753 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-13 00:30:53.780 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:30:53.781 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:30:53.785 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.787 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.789 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:53.791 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:30:53.793 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:30:53.795 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-13 00:30:53.808 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-13 00:30:53.818 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.827 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 15ms reading results.
2025-05-13 00:30:53.829 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.831 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:30:53.886 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.895 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.898 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:30:53.901 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:30:53.903 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:30:53.924 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.927 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.930 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:53.931 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:30:53.936 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-13 00:30:53.938 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-13 00:30:53.945 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-13 00:30:53.955 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:53.959 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.960 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 13ms reading results.
2025-05-13 00:30:53.962 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:53.963 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:30:53.969 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:53.971 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:30:54.051 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.078 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.083 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.088 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:30:54.090 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:30:54.102 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:30:54.108 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.110 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.115 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:54.118 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:30:54.120 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-13 00:30:54.122 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:30:54.129 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:30:54.136 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.138 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.140 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-13 00:30:54.142 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.144 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-13 00:30:54.147 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.151 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:30:54.154 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __authData_UserDTO_Id_0)'
2025-05-13 00:30:54.163 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-13 00:30:54.209 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.210 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.212 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:54.212 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:30:54.214 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:30:54.215 +03:00 [DBG] Executing DbCommand [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-13 00:30:54.220 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-13 00:30:54.225 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.227 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:30:54.229 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.230 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:30:54.238 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.241 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.243 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.245 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.246 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.248 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.249 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.252 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.253 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.256 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.257 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:30:54.258 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:30:54.259 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:30:54.263 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-13 00:30:54.268 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.269 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.271 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:54.272 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:30:54.274 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:30:54.276 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-13 00:30:54.286 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-13 00:30:54.291 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.294 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.297 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.301 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.304 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.306 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.308 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 18ms reading results.
2025-05-13 00:30:54.310 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.312 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:30:54.316 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.320 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.323 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.327 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.330 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.336 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-13 00:30:54.344 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.373 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.377 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.379 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.382 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.386 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.388 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.391 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.394 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.398 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.402 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.404 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.406 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.409 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.411 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.416 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.419 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.422 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.425 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.427 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.429 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.432 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.436 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.438 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.440 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.442 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.444 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.446 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.448 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.451 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.453 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.455 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.456 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.458 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.459 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.461 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.463 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.465 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.468 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.469 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.471 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:30:54.472 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:30:54.479 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:30:54.482 +03:00 [DBG] Executing 20 update commands as a batch.
2025-05-13 00:30:54.484 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.486 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.487 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:54.489 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:30:54.490 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:30:54.492 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-13 00:30:54.514 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-13 00:30:54.519 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.522 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.524 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.526 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.527 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.528 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.529 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.531 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.532 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.535 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.536 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.537 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.538 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.540 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.541 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.544 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.547 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.551 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.553 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.556 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.559 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.561 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 43ms reading results.
2025-05-13 00:30:54.564 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.568 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-13 00:30:54.571 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.575 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.577 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.579 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.581 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.587 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.592 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.595 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.599 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.603 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.606 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.609 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.611 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.613 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.618 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.621 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.625 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.627 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.629 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.632 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.637 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 20 entities written to the database.
2025-05-13 00:30:54.641 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.660 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.662 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.665 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.670 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.673 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.675 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.678 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.681 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:30:54.685 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:30:54.692 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:30:54.696 +03:00 [DBG] Executing 4 update commands as a batch.
2025-05-13 00:30:54.701 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.703 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.706 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:54.708 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:30:54.710 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:30:54.711 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-13 00:30:54.723 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-13 00:30:54.727 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.728 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.730 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.731 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.734 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.736 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 10ms reading results.
2025-05-13 00:30:54.737 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.738 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:30:54.743 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.745 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.747 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.751 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.753 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 4 entities written to the database.
2025-05-13 00:30:54.755 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:30:54.756 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.757 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:30:54.776 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:30:54.781 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:30:54.781 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:30:54.783 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.785 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.786 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:54.787 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:30:54.789 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:30:54.790 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-13 00:30:54.794 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-13 00:30:54.797 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.802 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-13 00:30:54.805 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.807 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:30:54.822 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.827 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.829 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:30:54.831 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:30:54.835 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:30:54.837 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.839 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.841 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:54.843 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:30:54.845 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:30:54.848 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-13 00:30:54.858 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-13 00:30:54.860 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:30:54.862 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.864 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-13 00:30:54.868 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.870 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:30:54.873 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:30:54.877 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:30:54.879 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:30:54.880 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:54.882 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:30:54.961 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-13 00:30:55.025 +03:00 [DBG] Hosting starting
2025-05-13 00:30:55.051 +03:00 [INF] User profile is available. Using 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-13 00:30:55.081 +03:00 [DBG] Reading data from file 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys\key-036e1e5f-5347-47d7-8236-0b64ed0a76a1.xml'.
2025-05-13 00:30:55.083 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:30:55.093 +03:00 [DBG] Found key {036e1e5f-5347-47d7-8236-0b64ed0a76a1}.
2025-05-13 00:30:55.093 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.ExpiresAt < DateTime.UtcNow)'
2025-05-13 00:30:55.111 +03:00 [DBG] Considering key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} with expiration date 2025-07-16 20:11:06Z as default key.
2025-05-13 00:30:55.116 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<RefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE()) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE(), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        RefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            RefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(RefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (RefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                        {
                            return 
                            {
                                RefreshToken instance;
                                instance = new RefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Token>k__BackingField = dataReader.GetString(4);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(RefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-13 00:30:55.126 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-13 00:30:55.134 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:30:55.136 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-13 00:30:55.137 +03:00 [DBG] Created DbConnection. (3ms).
2025-05-13 00:30:55.140 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-13 00:30:55.142 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:55.146 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:55.147 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:30:55.147 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-13 00:30:55.148 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:30:55.152 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-13 00:30:55.154 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-13 00:30:55.157 +03:00 [DBG] Using key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} as the default key.
2025-05-13 00:30:55.159 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-13 00:30:55.160 +03:00 [DBG] Key ring with default key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} was loaded during application startup.
2025-05-13 00:30:55.172 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-13 00:30:55.214 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:55.216 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:30:55.228 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:55.229 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:30:55.231 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:30:55.233 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:30:55.237 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-05-13 00:30:55.315 +03:00 [INF] Now listening on: https://localhost:49464
2025-05-13 00:30:55.326 +03:00 [INF] Now listening on: http://localhost:49465
2025-05-13 00:30:55.327 +03:00 [DBG] Loaded hosting startup assembly Finance_Manager_Backend
2025-05-13 00:30:55.329 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-13 00:30:55.330 +03:00 [INF] Hosting environment: Development
2025-05-13 00:30:55.332 +03:00 [INF] Content root path: G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend
2025-05-13 00:30:55.336 +03:00 [DBG] Hosting started
2025-05-13 00:31:01.569 +03:00 [DBG] Connection id "0HNCHJH5FVO0L" accepted.
2025-05-13 00:31:01.601 +03:00 [DBG] Connection id "0HNCHJH5FVO0L" started.
2025-05-13 00:31:01.650 +03:00 [DBG] Connection 0HNCHJH5FVO0L established using the following protocol: "Tls12"
2025-05-13 00:31:01.766 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:31:01.776 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-13 00:31:01.823 +03:00 [DBG] POST requests are not supported
2025-05-13 00:31:01.850 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:31:01.853 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:31:01.859 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:31:01.878 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:31:01.882 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:31:01.907 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:31:01.912 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:31:01.914 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:31:01.917 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:31:01.923 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:31:01.927 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:31:01.932 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:31:01.937 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:31:01.947 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:31:01.951 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:31:01.954 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:31:01.959 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:31:01.971 +03:00 [DBG] Connection id "0HNCHJH5FVO0L", Request id "0HNCHJH5FVO0L:00000001": started reading request body.
2025-05-13 00:31:01.973 +03:00 [DBG] Connection id "0HNCHJH5FVO0L", Request id "0HNCHJH5FVO0L:00000001": done reading request body.
2025-05-13 00:31:02.062 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:31:02.094 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:31:02.096 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:31:02.103 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:31:02.110 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:31:02.113 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .FirstOrDefault(rt => rt.Token == __refreshToken_0)'
2025-05-13 00:31:02.120 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RefreshToken>(
    asyncEnumerable: SingleQueryingEnumerable.Create<RefreshToken>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
            SELECT TOP(1) r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
            FROM refresh_tokens AS r
            WHERE r.token == @__refreshToken_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
            SELECT TOP(1) r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
            FROM refresh_tokens AS r
            WHERE r.token == @__refreshToken_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            RefreshToken entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                RefreshToken instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(RefreshToken);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (RefreshToken)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                            {
                                return 
                                {
                                    RefreshToken instance;
                                    instance = new RefreshToken();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                    instance.<Token>k__BackingField = dataReader.GetString(4);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(RefreshToken)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-13 00:31:02.125 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:31:02.126 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:31:02.127 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:02.129 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:02.130 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:31:02.132 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:31:02.134 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:31:02.135 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:31:02.141 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:31:02.144 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:02.145 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-13 00:31:02.147 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:02.149 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:31:02.158 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 225.2488ms
2025-05-13 00:31:02.161 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:31:02.164 +03:00 [ERR] Invalid refresh token
System.InvalidOperationException: Invalid refresh token
   at Finance_Manager_Backend.BusinessLogic.Services.AuthServices.AuthService.AuthenticateUserWithRefreshTokenAsync(String refreshToken) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\BusinessLogic\Services\AuthServices\AuthService.cs:line 89
   at Finance_Manager_Backend.Controllers.AuthController.RefreshToken(String refreshToken) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Controllers\AuthController.cs:line 84
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Finance_Manager_Backend.Middleware.ExceptionsHandler.InvokeAsync(HttpContext httpContext) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Middleware\ExceptionsHandler.cs:line 23
2025-05-13 00:31:02.294 +03:00 [DBG] Connection id "0HNCHJH5FVO0L" completed keep alive response.
2025-05-13 00:31:02.298 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:31:02.301 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:02.303 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:31:02.306 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 400 null application/json 543.1169ms
2025-05-13 00:31:13.530 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/authenticate - application/json-patch+json 63
2025-05-13 00:31:13.537 +03:00 [DBG] POST requests are not supported
2025-05-13 00:31:13.541 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/authenticate'
2025-05-13 00:31:13.542 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)' with route pattern 'api/Auth/authenticate' is valid for the request path '/api/Auth/authenticate'
2025-05-13 00:31:13.544 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-13 00:31:13.546 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:31:13.550 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-13 00:31:13.557 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] Authenticate(Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:31:13.559 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:31:13.561 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:31:13.562 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:31:13.566 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:31:13.568 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:31:13.569 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:31:13.572 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:31:13.574 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-13 00:31:13.576 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' using the name '' in request data ...
2025-05-13 00:31:13.579 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:31:13.581 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:31:13.583 +03:00 [DBG] Connection id "0HNCHJH5FVO0L", Request id "0HNCHJH5FVO0L:00000002": started reading request body.
2025-05-13 00:31:13.584 +03:00 [DBG] Connection id "0HNCHJH5FVO0L", Request id "0HNCHJH5FVO0L:00000002": done reading request body.
2025-05-13 00:31:13.622 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-13 00:31:13.624 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-13 00:31:13.626 +03:00 [DBG] Attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-13 00:31:13.632 +03:00 [DBG] Done attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-13 00:31:13.657 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:31:13.659 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:31:13.661 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:31:13.662 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:13.664 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:13.666 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:31:13.667 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:31:13.669 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:31:13.670 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-13 00:31:13.674 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-13 00:31:13.677 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:13.679 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:13.680 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-13 00:31:13.684 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:13.685 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:31:13.700 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:13.702 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:13.704 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:13.705 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:31:13.707 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:31:13.708 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:31:13.710 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:13.713 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:13.717 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:31:13.718 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:31:13.720 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:31:13.722 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:31:13.728 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:31:13.735 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:31:13.737 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:13.738 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-13 00:31:13.740 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:13.741 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:31:13.744 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:13.747 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:31:13.752 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:31:13.758 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:31:13.761 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:31:13.763 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:31:13.764 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:31:13.768 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:31:13.770 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:31:13.810 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend) in 240.3987ms
2025-05-13 00:31:13.814 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-13 00:31:13.816 +03:00 [DBG] Connection id "0HNCHJH5FVO0L" completed keep alive response.
2025-05-13 00:31:13.818 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:31:13.819 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:13.821 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:31:13.823 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/authenticate - 200 521 application/json; charset=utf-8 293.0734ms
2025-05-13 00:31:13.976 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1125 - null null
2025-05-13 00:31:13.996 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:31:13.997 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1125'
2025-05-13 00:31:13.999 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1125'
2025-05-13 00:31:14.000 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:31:14.068 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:31:14.070 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:31:14.072 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:31:14.079 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:31:14.084 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:31:14.086 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:31:14.088 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:31:14.091 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:31:14.092 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:31:14.095 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:31:14.103 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:31:14.105 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:31:14.107 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:31:14.109 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:31:14.111 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:31:14.113 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:31:14.114 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:31:14.132 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:31:14.136 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:31:14.137 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:31:14.139 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:31:14.140 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:31:14.141 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:31:14.142 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:31:14.147 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 52.6558ms
2025-05-13 00:31:14.152 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:31:14.153 +03:00 [DBG] Connection id "0HNCHJH5FVO0L" completed keep alive response.
2025-05-13 00:31:14.154 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1125 - 200 102 application/json; charset=utf-8 178.1028ms
2025-05-13 00:31:14.163 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:31:14.168 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:31:14.169 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:31:14.170 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:31:14.172 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:31:14.174 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:31:14.175 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:31:14.176 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:31:14.181 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:31:14.183 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:31:14.185 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:31:14.187 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:31:14.189 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:31:14.191 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:31:14.193 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:31:14.195 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:31:14.199 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:31:14.203 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-13 00:31:14.210 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-13 00:31:14.217 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:31:14.218 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:31:14.219 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.221 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.222 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:31:14.224 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:31:14.226 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:31:14.228 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:31:14.233 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:31:14.236 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.238 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.240 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.242 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.243 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.246 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.248 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 11ms reading results.
2025-05-13 00:31:14.251 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.253 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:31:14.275 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:31:14.279 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:31:14.280 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:31:14.283 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:31:14.284 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:31:14.285 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:31:14.287 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:31:14.302 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 109.6381ms
2025-05-13 00:31:14.305 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:31:14.307 +03:00 [DBG] Connection id "0HNCHJH5FVO0L" completed keep alive response.
2025-05-13 00:31:14.309 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:31:14.311 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.313 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:31:14.318 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 154.8973ms
2025-05-13 00:31:14.342 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1125&lastDate=2025-05-12T21%3A31%3A14&pageSize=10 - null null
2025-05-13 00:31:14.346 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:31:14.347 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:31:14.351 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:31:14.353 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:31:14.355 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:31:14.357 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:31:14.359 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:31:14.369 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:31:14.371 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:31:14.373 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:31:14.376 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:31:14.378 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:31:14.380 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:31:14.382 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:31:14.386 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:31:14.390 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:31:14.393 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:31:14.398 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:31:14.401 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:31:14.403 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:31:14.406 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:31:14.408 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:31:14.411 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:31:14.413 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:31:14.415 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:31:14.418 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:31:14.420 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:31:14.451 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:31:14.456 +03:00 [DBG] Compiling query expression: 
'DbSet<Transaction>()
    .Where(t => t.UserId == __userId_0)
    .OrderByDescending(t => t.Date)
    .Where(t => t.Date < __lastDate_Value_1)
    .OrderByDescending(t => t.Date)
    .Take(__p_2)'
2025-05-13 00:31:14.470 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Transaction>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Transaction.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Transaction.CategoryId (int) Required FK Index, 1], [Property: Transaction.Date (DateTime) Required, 2], [Property: Transaction.InnerCategoryId (int?) FK Index, 3], [Property: Transaction.Name (string) Required MaxLength(50), 4], [Property: Transaction.Price (decimal) Required, 5], [Property: Transaction.UserId (int) Required FK Index, 6] }
        SELECT TOP(@__p_2) t.id, t.category_fk, t.date, t.inner_category_fk, t.name, t.price, t.user_fk
        FROM transactions AS t
        WHERE (t.user_fk == @__userId_0) && (t.date < @__lastDate_Value_1)
        ORDER BY t.date DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Transaction.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Transaction.CategoryId (int) Required FK Index, 1], [Property: Transaction.Date (DateTime) Required, 2], [Property: Transaction.InnerCategoryId (int?) FK Index, 3], [Property: Transaction.Name (string) Required MaxLength(50), 4], [Property: Transaction.Price (decimal) Required, 5], [Property: Transaction.UserId (int) Required FK Index, 6] }
        SELECT TOP(@__p_2) t.id, t.category_fk, t.date, t.inner_category_fk, t.name, t.price, t.user_fk
        FROM transactions AS t
        WHERE (t.user_fk == @__userId_0) && (t.date < @__lastDate_Value_1)
        ORDER BY t.date DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Transaction entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Transaction instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Transaction);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Transaction.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Transaction").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Transaction)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Transaction | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Transaction")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Transaction | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Transaction")]: 
                        {
                            return 
                            {
                                Transaction instance;
                                instance = new Transaction();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CategoryId>k__BackingField = dataReader.GetInt32(1);
                                instance.<Date>k__BackingField = dataReader.GetDateTime(2);
                                instance.<InnerCategoryId>k__BackingField = dataReader.IsDBNull(3) ? default(int?) : (int?)dataReader.GetInt32(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<Price>k__BackingField = dataReader.GetDecimal(5);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(6);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Transaction | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Transaction")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Transaction)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-13 00:31:14.479 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:31:14.480 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:31:14.481 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.485 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.487 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:31:14.488 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:31:14.492 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-13 00:31:14.496 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:31:14.506 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:31:14.520 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.523 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.525 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.527 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.529 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.531 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.535 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.538 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.542 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.545 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.547 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.552 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 33ms reading results.
2025-05-13 00:31:14.557 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.560 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-13 00:31:14.570 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:31:14.577 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:31:14.579 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:31:14.585 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:31:14.587 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:31:14.589 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:31:14.593 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:31:14.604 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 222.6007ms
2025-05-13 00:31:14.611 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:31:14.616 +03:00 [DBG] Connection id "0HNCHJH5FVO0L" completed keep alive response.
2025-05-13 00:31:14.621 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:31:14.624 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.626 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:31:14.629 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1125&lastDate=2025-05-12T21%3A31%3A14&pageSize=10 - 200 1343 application/json; charset=utf-8 286.9127ms
2025-05-13 00:31:14.636 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1125&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:31:14.638 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:31:14.639 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:31:14.640 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:31:14.642 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:31:14.643 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:31:14.644 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:31:14.645 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:31:14.654 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:31:14.656 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:31:14.657 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:31:14.659 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:31:14.661 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:31:14.662 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:31:14.664 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:31:14.668 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:31:14.670 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:31:14.672 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:31:14.674 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:31:14.677 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:31:14.679 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:31:14.681 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:31:14.685 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:31:14.687 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:31:14.689 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:31:14.690 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:31:14.692 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:31:14.695 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:31:14.703 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:31:14.707 +03:00 [DBG] Compiling query expression: 
'DbSet<Saving>()
    .Where(s => s.UserId == __userId_0 && s.Id > __previousSavingId_1)
    .Take(__p_2)'
2025-05-13 00:31:14.710 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-05-13 00:31:14.719 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Saving>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Saving.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Saving.CurrentAmount (decimal) Required ValueGenerated.OnAdd, 1], [Property: Saving.Goal (decimal) Required, 2], [Property: Saving.Name (string) Required MaxLength(50), 3], [Property: Saving.UserId (int) Required FK Index, 4] }
        SELECT TOP(@__p_2) s.id, s.current_amount, s.goal, s.name, s.user_fk
        FROM savings AS s
        WHERE (s.user_fk == @__userId_0) && (s.id > @__previousSavingId_1)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Saving.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Saving.CurrentAmount (decimal) Required ValueGenerated.OnAdd, 1], [Property: Saving.Goal (decimal) Required, 2], [Property: Saving.Name (string) Required MaxLength(50), 3], [Property: Saving.UserId (int) Required FK Index, 4] }
        SELECT TOP(@__p_2) s.id, s.current_amount, s.goal, s.name, s.user_fk
        FROM savings AS s
        WHERE (s.user_fk == @__userId_0) && (s.id > @__previousSavingId_1), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Saving entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Saving instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Saving);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Saving.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Saving").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Saving)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Saving | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Saving")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Saving | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Saving")]: 
                        {
                            return 
                            {
                                Saving instance;
                                instance = new Saving();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CurrentAmount>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Goal>k__BackingField = dataReader.GetDecimal(2);
                                instance.<Name>k__BackingField = dataReader.GetString(3);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(4);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Saving | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Saving")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Saving)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-13 00:31:14.725 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:31:14.726 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:31:14.728 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.730 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.734 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:31:14.738 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:31:14.740 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-13 00:31:14.742 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:31:14.868 +03:00 [INF] Executed DbCommand (126ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:31:14.877 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.879 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.881 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.884 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:31:14.885 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.886 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-13 00:31:14.888 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.889 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:31:14.895 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:31:14.897 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:31:14.899 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:31:14.901 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:31:14.902 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:31:14.903 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:31:14.905 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:31:14.909 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 245.0018ms
2025-05-13 00:31:14.910 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:31:14.911 +03:00 [DBG] Connection id "0HNCHJH5FVO0L" completed keep alive response.
2025-05-13 00:31:14.912 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:31:14.913 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:31:14.915 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:31:14.918 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1125&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 282.3064ms
2025-05-13 00:32:16.590 +03:00 [DBG] Connection id "0HNCHJH5FVO0L" received FIN.
2025-05-13 00:32:16.598 +03:00 [DBG] Connection id "0HNCHJH5FVO0L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:32:16.610 +03:00 [DBG] Connection id "0HNCHJH5FVO0L" disconnecting.
2025-05-13 00:32:16.627 +03:00 [DBG] Connection id "0HNCHJH5FVO0L" stopped.
2025-05-13 00:33:14.118 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-13 00:33:24.130 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:33:24.139 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0291ms - processed: 0 items - remaining: 1 items
2025-05-13 00:33:34.147 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:33:34.149 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0055ms - processed: 0 items - remaining: 1 items
2025-05-13 00:33:44.165 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:33:44.166 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-05-13 00:33:54.173 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:33:54.176 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-05-13 00:34:04.191 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:34:04.192 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0107ms - processed: 0 items - remaining: 1 items
2025-05-13 00:34:14.209 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:34:14.282 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-05-13 00:34:24.302 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:34:24.305 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0044ms - processed: 0 items - remaining: 1 items
2025-05-13 00:34:34.307 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:34:34.319 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-05-13 00:34:44.329 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:34:44.333 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-05-13 00:34:54.351 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:34:54.354 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-05-13 00:35:04.365 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:35:04.371 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-05-13 00:35:14.377 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:35:14.379 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-05-13 00:35:24.387 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:35:24.390 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-05-13 00:35:34.406 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:35:34.408 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-05-13 00:35:44.421 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:35:44.425 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2025-05-13 00:35:54.443 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:35:54.446 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-05-13 00:36:04.462 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:36:04.469 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-05-13 00:36:14.491 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:36:14.503 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-05-13 00:36:24.516 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:36:24.518 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2025-05-13 00:36:34.525 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:36:34.526 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0053ms - processed: 0 items - remaining: 1 items
2025-05-13 00:36:44.537 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:36:44.541 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2025-05-13 00:36:54.553 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:36:54.558 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2025-05-13 00:37:04.565 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:37:04.570 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-05-13 00:37:14.585 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:37:14.587 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-05-13 00:37:24.600 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:37:24.610 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2025-05-13 00:37:34.625 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:37:34.627 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-05-13 00:37:44.639 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:37:44.718 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-05-13 00:37:54.728 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:37:54.729 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0043ms - processed: 0 items - remaining: 1 items
2025-05-13 00:38:04.732 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:38:04.735 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-05-13 00:38:14.741 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:38:14.743 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-05-13 00:38:24.761 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:38:24.767 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0149ms - processed: 0 items - remaining: 1 items
2025-05-13 00:38:34.778 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:38:34.779 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-05-13 00:38:44.795 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:38:44.797 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-13 00:38:54.812 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:38:54.813 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-13 00:39:04.826 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:39:04.831 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-05-13 00:39:14.840 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:39:14.842 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-13 00:39:24.848 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:39:24.849 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-05-13 00:39:34.891 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:39:34.909 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-05-13 00:39:44.912 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:39:44.914 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-05-13 00:39:54.917 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:39:54.923 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-05-13 00:40:04.929 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:40:04.930 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-05-13 00:40:14.945 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:40:14.951 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-05-13 00:40:24.958 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:40:24.964 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-05-13 00:40:34.979 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:40:35.011 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-13 00:40:45.042 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:40:45.047 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-05-13 00:40:55.055 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:40:55.057 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-13 00:41:05.074 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:41:05.077 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-05-13 00:41:15.094 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:41:15.106 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-13 00:41:25.121 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:41:25.130 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:41:35.138 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:41:35.140 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-05-13 00:41:45.159 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:41:45.160 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-13 00:41:55.171 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:41:55.172 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-05-13 00:42:05.182 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:42:05.183 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-13 00:42:15.190 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:42:15.191 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-13 00:42:25.208 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:42:25.209 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:42:35.217 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:42:35.221 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-05-13 00:42:45.221 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:42:45.223 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-13 00:42:55.234 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:42:55.236 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-13 00:43:05.235 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:43:05.237 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-05-13 00:43:15.240 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:43:15.242 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-05-13 00:43:25.252 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:43:25.254 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0046ms - processed: 0 items - remaining: 1 items
2025-05-13 00:43:35.256 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:43:35.262 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-05-13 00:43:45.254 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:43:45.255 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:43:55.267 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:43:55.268 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:44:05.270 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:44:05.273 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:44:15.278 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:44:15.281 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:44:25.302 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:44:25.303 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:44:35.318 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:44:35.320 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:44:45.335 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:44:45.336 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:44:55.338 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:44:55.342 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:45:05.354 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:45:05.358 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:45:15.364 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:45:15.367 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-05-13 00:45:25.375 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:45:25.376 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-05-13 00:45:35.383 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:45:35.386 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:45:45.404 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:45:45.410 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:45:55.418 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:45:55.421 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:46:05.438 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:46:05.440 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:46:15.452 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:46:15.455 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:46:25.464 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:46:25.466 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:46:35.468 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:46:35.470 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-05-13 00:46:45.480 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:46:45.482 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:46:55.502 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:46:55.504 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:47:05.509 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:47:05.513 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:47:15.527 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:47:15.529 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:47:25.541 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:47:25.547 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-05-13 00:47:35.562 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:47:35.587 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:47:45.627 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:47:45.629 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:47:55.647 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:47:55.648 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:48:05.663 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:48:05.664 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:48:15.672 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:48:15.692 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:48:25.708 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:48:25.710 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:48:35.721 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:48:35.777 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:48:45.799 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:48:45.801 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:48:55.810 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:48:55.827 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-13 00:49:05.836 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:49:05.837 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:49:15.851 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:49:15.854 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:49:25.871 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:49:25.879 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:49:35.898 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:49:35.901 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:49:45.905 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:49:45.906 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:49:55.934 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:49:56.018 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-13 00:50:06.034 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:50:06.035 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:50:16.043 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:50:16.047 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:50:26.052 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:50:26.061 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:50:36.070 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:50:36.071 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:50:46.085 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:50:46.087 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:50:56.091 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:50:56.093 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:51:06.107 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:51:06.108 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:51:16.116 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:51:16.123 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:51:26.128 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:51:26.130 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:51:36.134 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:51:36.144 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:51:46.149 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:51:46.150 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:51:56.153 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:51:56.155 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:52:06.171 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:52:06.172 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-05-13 00:52:16.183 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:52:16.185 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-05-13 00:52:26.194 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:52:26.197 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-13 00:52:36.212 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:52:36.213 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:52:46.228 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:52:46.238 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:52:56.251 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:52:56.253 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:53:06.255 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:53:06.256 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:53:16.289 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:53:16.320 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:53:26.325 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:53:26.331 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:53:36.335 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:53:36.338 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:53:46.349 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:53:46.350 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:53:56.359 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:53:56.362 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:54:06.366 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:54:06.368 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:54:16.372 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:54:16.375 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:54:26.383 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:54:26.385 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:54:36.392 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:54:36.396 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:54:46.413 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:54:46.415 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:54:56.426 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:54:56.439 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:55:06.451 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:55:06.458 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:55:16.467 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:55:16.469 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:55:26.489 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:55:26.492 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:55:36.499 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:55:36.500 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:55:46.521 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:55:46.522 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:55:56.533 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:55:56.556 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:56:06.575 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:56:06.576 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:56:16.581 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:56:16.584 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:56:26.599 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:56:26.601 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-05-13 00:56:36.608 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:56:36.617 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2025-05-13 00:56:46.628 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:56:46.629 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-05-13 00:56:56.648 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:56:56.662 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:57:06.680 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:57:06.724 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:57:16.736 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:57:16.748 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:57:19.595 +03:00 [DBG] Connection id "0HNCHJH5FVO0M" accepted.
2025-05-13 00:57:19.653 +03:00 [DBG] Connection id "0HNCHJH5FVO0M" started.
2025-05-13 00:57:19.725 +03:00 [DBG] Connection 0HNCHJH5FVO0M established using the following protocol: "Tls12"
2025-05-13 00:57:19.789 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json-patch+json 90
2025-05-13 00:57:19.793 +03:00 [DBG] POST requests are not supported
2025-05-13 00:57:19.794 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-13 00:57:19.795 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-13 00:57:19.797 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:57:19.799 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-13 00:57:19.800 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:57:19.802 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-13 00:57:19.804 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:57:19.805 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:57:19.807 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:57:19.809 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:57:19.811 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:57:19.813 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:57:19.815 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-13 00:57:19.816 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:57:19.817 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-13 00:57:19.819 +03:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:57:19.820 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2025-05-13 00:57:19.828 +03:00 [DBG] Connection id "0HNCHJH5FVO0M", Request id "0HNCHJH5FVO0M:00000001": started reading request body.
2025-05-13 00:57:19.833 +03:00 [DBG] Connection id "0HNCHJH5FVO0M", Request id "0HNCHJH5FVO0M:00000001": done reading request body.
2025-05-13 00:57:19.835 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:57:19.836 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:57:19.837 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-13 00:57:19.839 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-13 00:57:19.842 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:57:19.851 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:57:19.861 +03:00 [DBG] Created DbConnection. (10ms).
2025-05-13 00:57:19.864 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:19.876 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:19.879 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:57:19.882 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:57:19.884 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-13 00:57:19.886 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:57:19.900 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-13 00:57:19.907 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:19.910 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:19.912 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-13 00:57:19.915 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:19.916 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:57:19.919 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __existingToken_UserId_0)'
2025-05-13 00:57:19.932 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__existingToken_UserId_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__existingToken_UserId_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-13 00:57:19.947 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:19.949 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:19.951 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:57:19.954 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-13 00:57:19.955 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:57:19.957 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:57:19.966 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-13 00:57:19.977 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:19.981 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:19.983 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:19.985 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-13 00:57:19.986 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:19.988 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:57:19.990 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:57:20.026 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:57:20.061 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:57:20.064 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:20.066 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:57:20.070 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.072 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.075 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:57:20.076 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:57:20.077 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:57:20.079 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:57:20.086 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-13 00:57:20.270 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.285 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 14ms reading results.
2025-05-13 00:57:20.287 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.290 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-13 00:57:20.292 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:20.294 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:57:20.296 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:20.300 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:20.302 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:20.303 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-13 00:57:20.304 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-13 00:57:20.305 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-13 00:57:20.307 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.308 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.311 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:57:20.312 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:57:20.315 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-13 00:57:20.316 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:57:20.322 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-13 00:57:20.324 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-13 00:57:20.326 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.327 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-13 00:57:20.329 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.332 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-13 00:57:20.334 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:20.336 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-13 00:57:20.337 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:57:20.339 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:57:20.343 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:57:20.344 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:57:20.345 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:57:20.348 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:57:20.350 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-13 00:57:20.353 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 539.5454ms
2025-05-13 00:57:20.367 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-13 00:57:20.368 +03:00 [DBG] Connection id "0HNCHJH5FVO0M" completed keep alive response.
2025-05-13 00:57:20.369 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:57:20.370 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.372 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:57:20.374 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 521 application/json; charset=utf-8 584.8516ms
2025-05-13 00:57:20.734 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1125 - null null
2025-05-13 00:57:20.770 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:57:20.771 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1125'
2025-05-13 00:57:20.772 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1125'
2025-05-13 00:57:20.774 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:57:20.775 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:57:20.776 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:57:20.777 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:57:20.778 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-13 00:57:20.780 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:57:20.784 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:57:20.785 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:57:20.787 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:57:20.789 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:57:20.791 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:57:20.793 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-13 00:57:20.795 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-13 00:57:20.796 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-13 00:57:20.799 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:57:20.800 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-13 00:57:20.802 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-13 00:57:20.803 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-13 00:57:20.804 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:57:20.807 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:57:20.808 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:57:20.809 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:57:20.809 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:57:20.810 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:57:20.811 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-13 00:57:20.814 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 22.7653ms
2025-05-13 00:57:20.818 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-13 00:57:20.820 +03:00 [DBG] Connection id "0HNCHJH5FVO0M" completed keep alive response.
2025-05-13 00:57:20.832 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1125 - 200 102 application/json; charset=utf-8 98.0416ms
2025-05-13 00:57:20.837 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Categories - null null
2025-05-13 00:57:20.840 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:57:20.841 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Categories'
2025-05-13 00:57:20.843 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)' with route pattern 'api/Categories' is valid for the request path '/api/Categories'
2025-05-13 00:57:20.844 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:57:20.846 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:57:20.848 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:57:20.849 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:57:20.850 +03:00 [INF] Route matched with {action = "GetAllCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO]]] GetAllCategories() on controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend).
2025-05-13 00:57:20.852 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:57:20.854 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:57:20.856 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:57:20.863 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:57:20.866 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:57:20.867 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:57:20.869 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.CategoriesController (Finance_Manager_Backend)
2025-05-13 00:57:20.871 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:57:20.886 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:57:20.887 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:57:20.889 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.892 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.893 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:57:20.894 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:57:20.896 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:57:20.899 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:57:20.910 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-13 00:57:20.913 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:20.916 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:20.918 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:20.922 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:20.924 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:20.926 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.928 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 14ms reading results.
2025-05-13 00:57:20.932 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.934 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:57:20.936 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:57:20.938 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:57:20.939 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:57:20.941 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:57:20.942 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:57:20.943 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:57:20.944 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.CategoryDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:57:20.946 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend) in 78.6714ms
2025-05-13 00:57:20.954 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.CategoriesController.GetAllCategories (Finance_Manager_Backend)'
2025-05-13 00:57:20.956 +03:00 [DBG] Connection id "0HNCHJH5FVO0M" completed keep alive response.
2025-05-13 00:57:20.958 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:57:20.960 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:20.963 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-13 00:57:20.969 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Categories - 200 736 application/json; charset=utf-8 131.625ms
2025-05-13 00:57:20.996 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1125&lastDate=2025-05-12T21%3A57%3A20&pageSize=10 - null null
2025-05-13 00:57:21.002 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:57:21.003 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Transactions'
2025-05-13 00:57:21.004 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)' with route pattern 'api/Transactions' is valid for the request path '/api/Transactions'
2025-05-13 00:57:21.006 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:57:21.007 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:57:21.008 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:57:21.009 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:57:21.011 +03:00 [INF] Route matched with {action = "GetTransactions", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO]]] GetTransactions(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO) on controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend).
2025-05-13 00:57:21.015 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:57:21.017 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:57:21.019 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:57:21.021 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:57:21.023 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:57:21.025 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:57:21.026 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.TransactionsController (Finance_Manager_Backend)
2025-05-13 00:57:21.028 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:57:21.030 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' using the name '' in request data ...
2025-05-13 00:57:21.032 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:57:21.034 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:57:21.035 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]' using the name 'lastDate' in request data ...
2025-05-13 00:57:21.037 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.lastDate' of type 'System.Nullable`1[System.DateTime]'.
2025-05-13 00:57:21.039 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:57:21.041 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:57:21.043 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:57:21.044 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:57:21.045 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO' ...
2025-05-13 00:57:21.047 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserTransactionsQueryDTO'.
2025-05-13 00:57:21.051 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:57:21.054 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:57:21.054 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-13 00:57:21.056 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:21.057 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:21.058 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:57:21.060 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-13 00:57:21.061 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:57:21.062 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:57:21.146 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__lastDate_Value_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [t].[id], [t].[category_fk], [t].[date], [t].[inner_category_fk], [t].[name], [t].[price], [t].[user_fk]
FROM [transactions] AS [t]
WHERE [t].[user_fk] = @__userId_0 AND [t].[date] < @__lastDate_Value_1
ORDER BY [t].[date] DESC
2025-05-13 00:57:21.150 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.152 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.153 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.155 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.157 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.159 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.160 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.162 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.166 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.167 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.168 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:21.170 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 20ms reading results.
2025-05-13 00:57:21.172 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:21.175 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-13 00:57:21.177 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:57:21.180 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:57:21.183 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:57:21.185 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:57:21.186 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:57:21.187 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:57:21.189 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.TransactionDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:57:21.193 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend) in 168.3574ms
2025-05-13 00:57:21.199 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.TransactionsController.GetTransactions (Finance_Manager_Backend)'
2025-05-13 00:57:21.201 +03:00 [DBG] Connection id "0HNCHJH5FVO0M" completed keep alive response.
2025-05-13 00:57:21.208 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:57:21.210 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:21.216 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-05-13 00:57:21.218 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Transactions?userId=1125&lastDate=2025-05-12T21%3A57%3A20&pageSize=10 - 200 1343 application/json; charset=utf-8 222.0507ms
2025-05-13 00:57:21.228 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1125&previousSavingId=1&pageSize=5 - null null
2025-05-13 00:57:21.234 +03:00 [DBG] The request path  does not match the path filter
2025-05-13 00:57:21.236 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Savings'
2025-05-13 00:57:21.238 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)' with route pattern 'api/Savings' is valid for the request path '/api/Savings'
2025-05-13 00:57:21.241 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:57:21.244 +03:00 [DBG] Successfully validated the token.
2025-05-13 00:57:21.245 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-13 00:57:21.249 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:57:21.252 +03:00 [INF] Route matched with {action = "GetSavings", controller = "Savings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO]]] GetSavings(Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO) on controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend).
2025-05-13 00:57:21.256 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-13 00:57:21.258 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-13 00:57:21.261 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-13 00:57:21.268 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-13 00:57:21.271 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-13 00:57:21.272 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:57:21.274 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.SavingsController (Finance_Manager_Backend)
2025-05-13 00:57:21.276 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:57:21.277 +03:00 [DBG] Attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' using the name '' in request data ...
2025-05-13 00:57:21.279 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32' using the name 'userId' in request data ...
2025-05-13 00:57:21.283 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.userId' of type 'System.Int32'.
2025-05-13 00:57:21.285 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32' using the name 'previousSavingId' in request data ...
2025-05-13 00:57:21.286 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.previousSavingId' of type 'System.Int32'.
2025-05-13 00:57:21.288 +03:00 [DBG] Attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-05-13 00:57:21.289 +03:00 [DBG] Done attempting to bind property 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO.pageSize' of type 'System.Int32'.
2025-05-13 00:57:21.290 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:57:21.292 +03:00 [DBG] Done attempting to bind parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:57:21.293 +03:00 [DBG] Attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO' ...
2025-05-13 00:57:21.294 +03:00 [DBG] Done attempting to validate the bound parameter 'queryDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.GetUserSavingsQueryDTO'.
2025-05-13 00:57:21.299 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-13 00:57:21.301 +03:00 [DBG] Creating DbConnection.
2025-05-13 00:57:21.303 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-13 00:57:21.303 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:21.305 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:21.306 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-13 00:57:21.307 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-13 00:57:21.308 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-13 00:57:21.309 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:57:21.316 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_2='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__previousSavingId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_2) [s].[id], [s].[current_amount], [s].[goal], [s].[name], [s].[user_fk]
FROM [savings] AS [s]
WHERE [s].[user_fk] = @__userId_0 AND [s].[id] > @__previousSavingId_1
2025-05-13 00:57:21.319 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.320 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.322 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.325 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-13 00:57:21.327 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:21.328 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-13 00:57:21.332 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:21.334 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-13 00:57:21.336 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2025-05-13 00:57:21.338 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-13 00:57:21.339 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-13 00:57:21.342 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-13 00:57:21.343 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-13 00:57:21.343 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-13 00:57:21.345 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Finance_Manager_Backend.BusinessLogic.Models.DTOs.SavingDTO, Finance_Manager_Backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-13 00:57:21.349 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend) in 76.6605ms
2025-05-13 00:57:21.397 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.SavingsController.GetSavings (Finance_Manager_Backend)'
2025-05-13 00:57:21.401 +03:00 [DBG] Connection id "0HNCHJH5FVO0M" completed keep alive response.
2025-05-13 00:57:21.402 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-13 00:57:21.403 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-13 00:57:21.405 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-13 00:57:21.406 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/Savings?userId=1125&previousSavingId=1&pageSize=5 - 200 327 application/json; charset=utf-8 178.703ms
2025-05-13 00:57:26.771 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:57:26.776 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-05-13 00:57:36.785 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:57:36.786 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:57:46.791 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:57:46.792 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:57:56.805 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:57:56.807 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:58:06.816 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:58:06.821 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-05-13 00:58:16.827 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:58:16.828 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:58:26.839 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:58:26.840 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-05-13 00:58:34.524 +03:00 [DBG] Connection id "0HNCHJH5FVO0M" received FIN.
2025-05-13 00:58:34.529 +03:00 [DBG] Connection id "0HNCHJH5FVO0M" disconnecting.
2025-05-13 00:58:34.531 +03:00 [DBG] Connection id "0HNCHJH5FVO0M" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-13 00:58:34.538 +03:00 [DBG] Connection id "0HNCHJH5FVO0M" stopped.
2025-05-13 00:58:36.852 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:58:36.853 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-05-13 00:58:46.863 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:58:46.875 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:58:56.893 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:58:56.899 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-05-13 00:59:06.907 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:59:06.909 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-05-13 00:59:16.912 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-13 00:59:16.914 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-05-13 00:59:20.800 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-13 00:59:26.922 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 00:59:26.925 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2025-05-13 00:59:36.929 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 00:59:36.932 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-05-13 00:59:46.947 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 00:59:46.964 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.156ms - processed: 0 items - remaining: 2 items
2025-05-13 00:59:56.968 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 00:59:56.969 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-05-13 01:00:06.978 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:00:06.979 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 2 items
2025-05-13 01:00:16.982 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:00:16.984 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0495ms - processed: 0 items - remaining: 2 items
2025-05-13 01:00:26.998 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:00:27.008 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-05-13 01:00:37.037 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:00:37.038 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-05-13 01:00:47.040 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:00:47.043 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-05-13 01:00:57.059 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:00:57.060 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-05-13 01:01:07.059 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:01:07.062 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-05-13 01:01:17.062 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:01:17.066 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-05-13 01:01:27.062 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:01:27.063 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-05-13 01:01:37.073 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:01:37.075 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2025-05-13 01:01:47.081 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:01:47.091 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2025-05-13 01:01:57.104 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:01:57.106 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-05-13 01:02:07.114 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:02:07.116 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2025-05-13 01:02:17.118 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:02:17.130 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2025-05-13 01:02:27.150 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:02:27.151 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-05-13 01:02:37.156 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:02:37.158 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-05-13 01:02:47.162 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:02:47.165 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-05-13 01:02:57.171 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:02:57.173 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-05-13 01:03:07.179 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:03:07.182 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-05-13 01:03:17.187 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:03:17.189 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-05-13 01:03:27.193 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:03:27.196 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 2 items
2025-05-13 01:03:37.196 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:03:37.212 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2025-05-13 01:03:47.224 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:03:47.227 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-05-13 01:03:57.239 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:03:57.264 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-05-13 01:04:07.289 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:04:07.293 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-05-13 01:04:17.299 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:04:17.300 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-05-13 01:04:27.311 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:04:27.314 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 2 items
2025-05-13 01:04:37.321 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:04:37.325 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 2 items
2025-05-13 01:04:47.330 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:04:47.332 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-05-13 01:04:57.334 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:04:57.337 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-05-13 01:05:07.342 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:05:07.343 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-05-13 01:05:17.350 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:05:17.351 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2025-05-13 01:05:27.360 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:05:27.362 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-05-13 01:05:37.375 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:05:37.377 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-05-13 01:05:47.378 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:05:47.380 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-05-13 01:05:57.397 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:05:57.400 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-05-13 01:06:07.410 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:06:07.442 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 2 items
2025-05-13 01:06:17.451 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:06:17.460 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-05-13 01:06:27.470 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:06:27.477 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-05-13 01:06:37.484 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:06:37.486 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-05-13 01:06:47.490 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:06:47.520 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-05-13 01:06:57.530 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:06:57.532 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 2 items
2025-05-13 01:07:07.539 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:07:07.540 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-05-13 01:07:17.550 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:07:17.553 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-05-13 01:07:27.572 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-05-13 01:07:27.578 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-05-13 01:07:30.278 +03:00 [INF] Application is shutting down...
2025-05-13 01:07:30.725 +03:00 [DBG] Hosting stopping
2025-05-13 01:07:30.927 +03:00 [DBG] Hosting stopped
