2025-05-09 06:42:46.825 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-09 06:42:47.827 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 06:42:47.944 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2025-05-09 06:42:48.199 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<User>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        User entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            User instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(User);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (User)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Email>k__BackingField = dataReader.GetString(2);
                                instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                instance.<Role>k__BackingField = dataReader.GetString(5);
                                instance.<Salt>k__BackingField = dataReader.GetString(6);
                                instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 06:42:48.259 +03:00 [DBG] Creating DbConnection.
2025-05-09 06:42:48.314 +03:00 [DBG] Created DbConnection. (54ms).
2025-05-09 06:42:48.320 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:49.464 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:49.470 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:49.478 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-05-09 06:42:49.481 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-05-09 06:42:49.490 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 06:42:49.799 +03:00 [INF] Executed DbCommand (310ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 06:42:49.855 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:49.923 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:49.934 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:49.936 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:49.941 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:49.950 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 125ms reading results.
2025-05-09 06:42:49.953 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:49.959 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (5ms).
2025-05-09 06:42:49.964 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:42:49.968 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:42:49.991 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:42:50.082 +03:00 [DBG] Executing 2 update commands as a batch.
2025-05-09 06:42:50.089 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.094 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.097 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 06:42:50.107 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 06:42:50.113 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:50.114 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:42:50.118 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-09 06:42:50.124 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 06:42:50.364 +03:00 [INF] Executed DbCommand (244ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 06:42:50.379 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.382 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 15ms reading results.
2025-05-09 06:42:50.388 +03:00 [DBG] Committing transaction.
2025-05-09 06:42:50.392 +03:00 [DBG] Committed transaction.
2025-05-09 06:42:50.395 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.398 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 06:42:50.401 +03:00 [DBG] Disposing transaction.
2025-05-09 06:42:50.408 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.410 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.414 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-05-09 06:42:50.417 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-09 06:42:50.423 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 06:42:50.429 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.431 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.433 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:50.434 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:42:50.435 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:42:50.438 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 06:42:50.464 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 06:42:50.499 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.512 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.515 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.519 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.521 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.523 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.525 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.527 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.530 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.532 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.534 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.535 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 69ms reading results.
2025-05-09 06:42:50.537 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.539 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:42:50.541 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:42:50.542 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:42:50.550 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:42:50.554 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 06:42:50.555 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.557 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.558 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 06:42:50.561 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 06:42:50.562 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:50.564 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:42:50.566 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 06:42:50.567 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 06:42:50.611 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 06:42:50.614 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.615 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 06:42:50.618 +03:00 [DBG] Committing transaction.
2025-05-09 06:42:50.619 +03:00 [DBG] Committed transaction.
2025-05-09 06:42:50.620 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.621 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:42:50.623 +03:00 [DBG] Disposing transaction.
2025-05-09 06:42:50.625 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.628 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.631 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.633 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.635 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:50.637 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 06:42:50.640 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 06:42:50.644 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.647 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-09 06:42:50.830 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 06:42:50.841 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-09 06:42:50.942 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 06:42:50.959 +03:00 [DBG] Creating DbConnection.
2025-05-09 06:42:50.961 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 06:42:50.962 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.964 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:50.965 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:50.966 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:42:50.969 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 06:42:50.970 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 06:42:50.997 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 06:42:51.003 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.004 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 06:42:51.006 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.008 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:42:51.044 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.051 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.053 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:42:51.055 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:42:51.056 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:42:51.070 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.071 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.073 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:51.074 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:42:51.076 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 06:42:51.079 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 06:42:51.091 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 06:42:51.103 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.108 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.110 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 15ms reading results.
2025-05-09 06:42:51.112 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.114 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:42:51.118 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.121 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 06:42:51.305 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.320 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.325 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.329 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:42:51.330 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:42:51.337 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:42:51.343 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.345 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.347 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:51.349 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:42:51.351 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 06:42:51.353 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 06:42:51.394 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 06:42:51.400 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.403 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.405 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-09 06:42:51.407 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.408 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:42:51.411 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.414 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 06:42:51.417 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __authData_UserDTO_Id_0)'
2025-05-09 06:42:51.424 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 06:42:51.429 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.431 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.433 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:51.434 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:42:51.435 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:42:51.437 +03:00 [DBG] Executing DbCommand [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 06:42:51.499 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 06:42:51.502 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.504 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 06:42:51.505 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.507 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:42:51.514 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.517 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.519 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.521 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.523 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.526 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.528 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.530 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.532 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.534 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.535 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:42:51.536 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:42:51.538 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:42:51.544 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 06:42:51.548 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.549 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.551 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:51.552 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:42:51.554 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:42:51.555 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 06:42:51.582 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 06:42:51.586 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.589 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.591 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.592 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.594 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.596 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.598 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 13ms reading results.
2025-05-09 06:42:51.600 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.601 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:42:51.604 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.606 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.608 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.611 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.613 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.615 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 06:42:51.621 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.641 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.643 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.645 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.647 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.650 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.652 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.653 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.655 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.657 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.658 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.661 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.663 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.665 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.666 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.669 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.670 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.672 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.674 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.676 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.678 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.680 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.682 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.683 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.685 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.687 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.688 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.690 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.691 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.712 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.713 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.715 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.717 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.719 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.720 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.722 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.723 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.725 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.727 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.729 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.731 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:42:51.732 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:42:51.737 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:42:51.740 +03:00 [DBG] Executing 20 update commands as a batch.
2025-05-09 06:42:51.742 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.743 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.746 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:51.747 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:42:51.749 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 06:42:51.750 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 06:42:51.793 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 06:42:51.798 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.801 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.802 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.804 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.806 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.808 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.809 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.811 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.813 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.815 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.816 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.818 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.819 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.821 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.822 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.824 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.825 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.828 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.830 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.832 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.833 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.835 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 38ms reading results.
2025-05-09 06:42:51.836 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.838 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:42:51.841 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.843 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.845 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.848 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.850 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.852 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.854 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.856 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.858 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.861 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.863 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.865 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.867 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.869 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.872 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.874 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.876 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.879 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.881 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.883 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.885 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 20 entities written to the database.
2025-05-09 06:42:51.888 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.901 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.903 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.905 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.906 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.908 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.909 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.912 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.914 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:42:51.915 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:42:51.919 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:42:51.921 +03:00 [DBG] Executing 4 update commands as a batch.
2025-05-09 06:42:51.923 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.924 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.926 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:51.927 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:42:51.929 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 06:42:51.931 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 06:42:51.973 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 06:42:51.977 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.979 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.981 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.983 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:51.984 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.986 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 10ms reading results.
2025-05-09 06:42:51.988 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:51.989 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:42:51.993 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.997 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:51.999 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:52.001 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:52.003 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 4 entities written to the database.
2025-05-09 06:42:52.004 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 06:42:52.006 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.007 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 06:42:52.022 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 06:42:52.047 +03:00 [DBG] Creating DbConnection.
2025-05-09 06:42:52.048 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 06:42:52.049 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.051 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.052 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:52.053 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:42:52.055 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:42:52.056 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 06:42:52.059 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 06:42:52.062 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.064 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 06:42:52.066 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.067 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:42:52.081 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:52.083 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:52.085 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:42:52.086 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:42:52.087 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:42:52.089 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.091 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.092 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:52.094 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:42:52.096 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 06:42:52.098 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 06:42:52.101 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 06:42:52.103 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:42:52.105 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.106 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 06:42:52.108 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.109 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:42:52.111 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:42:52.114 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 06:42:52.115 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 06:42:52.116 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.118 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 06:42:52.267 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-09 06:42:52.323 +03:00 [DBG] Hosting starting
2025-05-09 06:42:52.380 +03:00 [INF] User profile is available. Using 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-09 06:42:52.401 +03:00 [DBG] Reading data from file 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys\key-036e1e5f-5347-47d7-8236-0b64ed0a76a1.xml'.
2025-05-09 06:42:52.403 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 06:42:52.408 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.ExpiresAt < DateTime.UtcNow)'
2025-05-09 06:42:52.409 +03:00 [DBG] Found key {036e1e5f-5347-47d7-8236-0b64ed0a76a1}.
2025-05-09 06:42:52.422 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<RefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE()) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE(), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        RefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            RefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(RefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (RefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                        {
                            return 
                            {
                                RefreshToken instance;
                                instance = new RefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Token>k__BackingField = dataReader.GetString(4);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(RefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 06:42:52.422 +03:00 [DBG] Considering key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} with expiration date 2025-07-16 20:11:06Z as default key.
2025-05-09 06:42:52.429 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 06:42:52.430 +03:00 [DBG] Creating DbConnection.
2025-05-09 06:42:52.431 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-09 06:42:52.432 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-09 06:42:52.433 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.434 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 06:42:52.435 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.437 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:42:52.438 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:42:52.439 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-09 06:42:52.440 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:42:52.442 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-09 06:42:52.443 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 06:42:52.446 +03:00 [DBG] Using key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} as the default key.
2025-05-09 06:42:52.449 +03:00 [DBG] Key ring with default key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} was loaded during application startup.
2025-05-09 06:42:52.451 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 06:42:52.454 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.456 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 06:42:52.457 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.459 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:42:52.462 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 06:42:52.464 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:42:52.466 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 06:42:52.742 +03:00 [INF] Now listening on: https://localhost:49464
2025-05-09 06:42:52.744 +03:00 [INF] Now listening on: http://localhost:49465
2025-05-09 06:42:52.746 +03:00 [DBG] Loaded hosting startup assembly Finance_Manager_Backend
2025-05-09 06:42:52.747 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-09 06:42:52.748 +03:00 [INF] Hosting environment: Development
2025-05-09 06:42:52.749 +03:00 [INF] Content root path: G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend
2025-05-09 06:42:52.750 +03:00 [DBG] Hosting started
2025-05-09 06:43:33.116 +03:00 [DBG] Connection id "0HNCELELUGMOM" accepted.
2025-05-09 06:43:33.150 +03:00 [DBG] Connection id "0HNCELELUGMOM" started.
2025-05-09 06:43:33.272 +03:00 [DBG] Connection 0HNCELELUGMOM established using the following protocol: "Tls12"
2025-05-09 06:43:33.731 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 06:43:33.735 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-09 06:43:33.879 +03:00 [DBG] POST requests are not supported
2025-05-09 06:43:33.935 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 06:43:33.995 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 06:43:33.998 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 06:43:34.059 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 06:43:34.087 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 06:43:34.117 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 06:43:34.121 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 06:43:34.123 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 06:43:34.125 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 06:43:34.130 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 06:43:34.131 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 06:43:34.134 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 06:43:34.138 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 06:43:34.205 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 06:43:34.221 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 06:43:34.225 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 06:43:34.364 +03:00 [DBG] Connection id "0HNCELELUGMOM", Request id "0HNCELELUGMOM:00000001": started reading request body.
2025-05-09 06:43:34.371 +03:00 [DBG] Connection id "0HNCELELUGMOM", Request id "0HNCELELUGMOM:00000001": done reading request body.
2025-05-09 06:43:34.377 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 06:43:34.381 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 06:43:34.383 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 06:43:34.384 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 06:43:34.395 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 06:43:34.409 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 06:43:34.416 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .FirstOrDefault(rt => rt.Token == __refreshToken_0)'
2025-05-09 06:43:34.434 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RefreshToken>(
    asyncEnumerable: SingleQueryingEnumerable.Create<RefreshToken>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
            SELECT TOP(1) r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
            FROM refresh_tokens AS r
            WHERE r.token == @__refreshToken_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
            SELECT TOP(1) r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
            FROM refresh_tokens AS r
            WHERE r.token == @__refreshToken_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            RefreshToken entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                RefreshToken instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(RefreshToken);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (RefreshToken)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                            {
                                return 
                                {
                                    RefreshToken instance;
                                    instance = new RefreshToken();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                    instance.<Token>k__BackingField = dataReader.GetString(4);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(RefreshToken)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 06:43:34.446 +03:00 [DBG] Creating DbConnection.
2025-05-09 06:43:34.449 +03:00 [DBG] Created DbConnection. (3ms).
2025-05-09 06:43:34.450 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:43:34.452 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:43:34.454 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:43:34.456 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:43:34.466 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-05-09 06:43:34.468 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 06:43:34.534 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 06:43:34.539 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:43:34.541 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 06:43:34.544 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:43:34.546 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 06:43:34.559 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 422.7615ms
2025-05-09 06:43:34.563 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 06:43:34.567 +03:00 [ERR] Invalid refresh token
System.InvalidOperationException: Invalid refresh token
   at Finance_Manager_Backend.BusinessLogic.Services.AuthServices.AuthService.AuthenticateUserWithRefreshTokenAsync(String refreshToken) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\BusinessLogic\Services\AuthServices\AuthService.cs:line 89
   at Finance_Manager_Backend.Controllers.AuthController.RefreshToken(String refreshToken) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Controllers\AuthController.cs:line 84
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Finance_Manager_Backend.Middleware.ExceptionsHandler.InvokeAsync(HttpContext httpContext) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Middleware\ExceptionsHandler.cs:line 23
2025-05-09 06:43:34.789 +03:00 [DBG] Connection id "0HNCELELUGMOM" completed keep alive response.
2025-05-09 06:43:34.798 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 06:43:34.815 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:43:34.818 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-09 06:43:34.820 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 400 null application/json 1090.915ms
2025-05-09 06:44:48.039 +03:00 [DBG] Connection id "0HNCELELUGMOM" received FIN.
2025-05-09 06:44:48.043 +03:00 [DBG] Connection id "0HNCELELUGMOM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 06:44:48.046 +03:00 [DBG] Connection id "0HNCELELUGMOM" disconnecting.
2025-05-09 06:44:48.050 +03:00 [DBG] Connection id "0HNCELELUGMOM" stopped.
2025-05-09 06:48:28.573 +03:00 [DBG] Connection id "0HNCELELUGMON" accepted.
2025-05-09 06:48:28.576 +03:00 [DBG] Connection id "0HNCELELUGMON" started.
2025-05-09 06:48:28.581 +03:00 [DBG] Connection 0HNCELELUGMON established using the following protocol: "Tls12"
2025-05-09 06:48:28.586 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/authenticate - application/json 63
2025-05-09 06:48:28.589 +03:00 [DBG] POST requests are not supported
2025-05-09 06:48:28.593 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/authenticate'
2025-05-09 06:48:28.594 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)' with route pattern 'api/Auth/authenticate' is valid for the request path '/api/Auth/authenticate'
2025-05-09 06:48:28.596 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-09 06:48:28.598 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 06:48:28.600 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-09 06:48:28.606 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] Authenticate(Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 06:48:28.609 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 06:48:28.610 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 06:48:28.611 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 06:48:28.613 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 06:48:28.614 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 06:48:28.616 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 06:48:28.617 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 06:48:28.620 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-09 06:48:28.621 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' using the name '' in request data ...
2025-05-09 06:48:28.623 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 06:48:28.627 +03:00 [DBG] Connection id "0HNCELELUGMON", Request id "0HNCELELUGMON:00000001": started reading request body.
2025-05-09 06:48:28.628 +03:00 [DBG] Connection id "0HNCELELUGMON", Request id "0HNCELELUGMON:00000001": done reading request body.
2025-05-09 06:48:28.639 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'
2025-05-09 06:48:28.640 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-09 06:48:28.641 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-09 06:48:28.643 +03:00 [DBG] Attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-09 06:48:28.646 +03:00 [DBG] Done attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-09 06:48:28.737 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 06:48:28.743 +03:00 [DBG] Creating DbConnection.
2025-05-09 06:48:28.744 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 06:48:28.745 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:28.747 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:28.748 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:48:28.750 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:48:28.751 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 06:48:28.753 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 06:48:28.764 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 06:48:28.768 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:28.770 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:28.771 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 06:48:28.773 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:28.774 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:48:28.787 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:28.789 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:28.791 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:28.793 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:48:28.794 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:48:28.795 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:48:28.797 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:28.799 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:28.800 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:48:28.802 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:48:28.803 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:48:28.804 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 06:48:28.809 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 06:48:28.811 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:48:28.813 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:28.814 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 06:48:28.816 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:28.826 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (9ms).
2025-05-09 06:48:28.827 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:28.829 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 06:48:28.834 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 06:48:28.838 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 06:48:28.841 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 06:48:28.842 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 06:48:28.843 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 06:48:28.845 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 06:48:28.846 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 06:48:28.859 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend) in 242.8869ms
2025-05-09 06:48:28.860 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-09 06:48:28.861 +03:00 [DBG] Connection id "0HNCELELUGMON" completed keep alive response.
2025-05-09 06:48:28.862 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 06:48:28.863 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:28.864 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 06:48:28.865 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/authenticate - 200 null application/json; charset=utf-8 279.1877ms
2025-05-09 06:48:33.810 +03:00 [DBG] Connection id "0HNCELELUGMON" reset.
2025-05-09 06:48:33.826 +03:00 [DBG] Connection id "0HNCELELUGMON" disconnecting.
2025-05-09 06:48:33.829 +03:00 [DBG] Connection id "0HNCELELUGMON" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 06:48:33.831 +03:00 [DBG] Connection id "0HNCELELUGMON" stopped.
2025-05-09 06:48:48.302 +03:00 [DBG] Connection id "0HNCELELUGMOO" accepted.
2025-05-09 06:48:48.312 +03:00 [DBG] Connection id "0HNCELELUGMOO" started.
2025-05-09 06:48:48.331 +03:00 [DBG] Connection 0HNCELELUGMOO established using the following protocol: "Tls12"
2025-05-09 06:48:48.402 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 06:48:48.409 +03:00 [DBG] POST requests are not supported
2025-05-09 06:48:48.410 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 06:48:48.412 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 06:48:48.456 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 06:48:48.461 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 06:48:48.467 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 06:48:48.469 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 06:48:48.471 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 06:48:48.473 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 06:48:48.475 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 06:48:48.481 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 06:48:48.485 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 06:48:48.486 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 06:48:48.488 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 06:48:48.492 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 06:48:48.494 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 06:48:48.497 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 06:48:48.500 +03:00 [DBG] Connection id "0HNCELELUGMOO", Request id "0HNCELELUGMOO:00000001": started reading request body.
2025-05-09 06:48:48.502 +03:00 [DBG] Connection id "0HNCELELUGMOO", Request id "0HNCELELUGMOO:00000001": done reading request body.
2025-05-09 06:48:48.504 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 06:48:48.505 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 06:48:48.507 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 06:48:48.508 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 06:48:48.510 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 06:48:48.512 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 06:48:48.514 +03:00 [DBG] Creating DbConnection.
2025-05-09 06:48:48.516 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 06:48:48.517 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.518 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.519 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:48:48.521 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:48:48.522 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:48:48.524 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 06:48:48.528 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 06:48:48.532 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:48.534 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.535 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 06:48:48.537 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.538 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:48:48.541 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __existingToken_UserId_0)'
2025-05-09 06:48:48.546 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__existingToken_UserId_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__existingToken_UserId_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 06:48:48.551 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.552 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.554 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:48:48.555 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-09 06:48:48.556 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:48:48.557 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 06:48:48.561 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 06:48:48.564 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:48.566 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:48.568 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.569 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-09 06:48:48.571 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.573 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:48:48.574 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:48:48.575 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:48:48.577 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:48:48.579 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:48.581 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:48:48.585 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.586 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.589 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:48:48.591 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:48:48.592 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:48:48.594 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 06:48:48.659 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 06:48:48.663 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.666 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 06:48:48.670 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.672 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:48:48.673 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:48.675 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 06:48:48.677 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:48.680 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:48.683 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:48.684 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:48:48.685 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:48:48.686 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:48:48.688 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.689 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.690 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:48:48.691 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-09 06:48:48.692 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:48:48.693 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 06:48:48.700 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 06:48:48.702 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:48:48.704 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.705 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 06:48:48.706 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.708 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:48:48.709 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:48:48.711 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 06:48:48.713 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 06:48:48.718 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 06:48:48.719 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 06:48:48.720 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 06:48:48.721 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 06:48:48.722 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 06:48:48.723 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 06:48:48.724 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 238.0648ms
2025-05-09 06:48:48.726 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 06:48:48.726 +03:00 [DBG] Connection id "0HNCELELUGMOO" completed keep alive response.
2025-05-09 06:48:48.728 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 06:48:48.729 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:48:48.735 +03:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-05-09 06:48:48.740 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 337.3844ms
2025-05-09 06:48:51.205 +03:00 [DBG] Connection id "0HNCELELUGMOO" reset.
2025-05-09 06:48:51.217 +03:00 [DBG] Connection id "0HNCELELUGMOO" disconnecting.
2025-05-09 06:48:51.220 +03:00 [DBG] Connection id "0HNCELELUGMOO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 06:48:51.234 +03:00 [DBG] Connection id "0HNCELELUGMOO" stopped.
2025-05-09 06:58:38.050 +03:00 [DBG] Connection id "0HNCELELUGMOP" accepted.
2025-05-09 06:58:38.054 +03:00 [DBG] Connection id "0HNCELELUGMOP" started.
2025-05-09 06:58:38.121 +03:00 [DBG] Connection 0HNCELELUGMOP established using the following protocol: "Tls12"
2025-05-09 06:58:38.196 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 06:58:38.203 +03:00 [DBG] POST requests are not supported
2025-05-09 06:58:38.206 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 06:58:38.208 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 06:58:38.210 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 06:58:38.211 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 06:58:38.213 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 06:58:38.214 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 06:58:38.216 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 06:58:38.219 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 06:58:38.221 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 06:58:38.233 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 06:58:38.237 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 06:58:38.239 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 06:58:38.241 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 06:58:38.243 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 06:58:38.244 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 06:58:38.246 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 06:58:38.247 +03:00 [DBG] Connection id "0HNCELELUGMOP", Request id "0HNCELELUGMOP:00000001": started reading request body.
2025-05-09 06:58:38.249 +03:00 [DBG] Connection id "0HNCELELUGMOP", Request id "0HNCELELUGMOP:00000001": done reading request body.
2025-05-09 06:58:38.251 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 06:58:38.252 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 06:58:38.254 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 06:58:38.255 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 06:58:38.256 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 06:58:38.259 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 06:58:38.262 +03:00 [DBG] Creating DbConnection.
2025-05-09 06:58:38.263 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 06:58:38.264 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.272 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.274 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:58:38.276 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:58:38.277 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 06:58:38.279 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 06:58:38.286 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 06:58:38.288 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:58:38.290 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.292 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 06:58:38.293 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.295 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:58:38.297 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.299 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.300 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:58:38.301 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:58:38.303 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:58:38.304 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 06:58:38.309 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 06:58:38.311 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:58:38.313 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:58:38.314 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.316 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 06:58:38.317 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.319 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:58:38.321 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:58:38.322 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:58:38.323 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:58:38.325 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:58:38.327 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:58:38.329 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.331 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.333 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:58:38.334 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:58:38.335 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:58:38.337 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 06:58:38.342 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 06:58:38.345 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.346 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 06:58:38.348 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.350 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:58:38.351 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:58:38.353 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 06:58:38.355 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:58:38.357 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:58:38.361 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:58:38.363 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:58:38.364 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:58:38.365 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:58:38.367 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.368 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.370 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:58:38.371 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 06:58:38.372 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:58:38.373 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 06:58:38.379 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 06:58:38.381 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:58:38.383 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.384 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 06:58:38.385 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.386 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:58:38.388 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:58:38.390 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 06:58:38.392 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 06:58:38.394 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 06:58:38.395 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 06:58:38.396 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 06:58:38.397 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 06:58:38.398 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 06:58:38.399 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 06:58:38.401 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 161.4732ms
2025-05-09 06:58:38.414 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 06:58:38.415 +03:00 [DBG] Connection id "0HNCELELUGMOP" completed keep alive response.
2025-05-09 06:58:38.421 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 06:58:38.504 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:58:38.676 +03:00 [DBG] Disposed connection to database '' on server '' (172ms).
2025-05-09 06:58:38.678 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 482.5865ms
2025-05-09 06:58:43.268 +03:00 [DBG] Connection id "0HNCELELUGMOP" reset.
2025-05-09 06:58:43.274 +03:00 [DBG] Connection id "0HNCELELUGMOP" disconnecting.
2025-05-09 06:58:43.277 +03:00 [DBG] Connection id "0HNCELELUGMOP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 06:58:43.280 +03:00 [DBG] Connection id "0HNCELELUGMOP" stopped.
2025-05-09 06:59:35.690 +03:00 [DBG] Connection id "0HNCELELUGMOQ" accepted.
2025-05-09 06:59:35.702 +03:00 [DBG] Connection id "0HNCELELUGMOQ" started.
2025-05-09 06:59:35.720 +03:00 [DBG] Connection 0HNCELELUGMOQ established using the following protocol: "Tls12"
2025-05-09 06:59:35.800 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 06:59:35.827 +03:00 [DBG] POST requests are not supported
2025-05-09 06:59:35.829 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 06:59:35.834 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 06:59:35.837 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 06:59:35.840 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 06:59:35.843 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 06:59:35.845 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 06:59:35.852 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 06:59:35.856 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 06:59:35.861 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 06:59:35.868 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 06:59:35.873 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 06:59:35.876 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 06:59:35.881 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 06:59:35.882 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 06:59:35.884 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 06:59:35.885 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 06:59:35.888 +03:00 [DBG] Connection id "0HNCELELUGMOQ", Request id "0HNCELELUGMOQ:00000001": started reading request body.
2025-05-09 06:59:35.889 +03:00 [DBG] Connection id "0HNCELELUGMOQ", Request id "0HNCELELUGMOQ:00000001": done reading request body.
2025-05-09 06:59:35.890 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 06:59:35.891 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 06:59:35.893 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 06:59:35.894 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 06:59:35.896 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 06:59:35.897 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 06:59:35.900 +03:00 [DBG] Creating DbConnection.
2025-05-09 06:59:35.900 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 06:59:35.901 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:35.903 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:35.904 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:59:35.906 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:59:35.907 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 06:59:35.909 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 06:59:35.917 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 06:59:35.919 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:59:35.920 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:35.923 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 06:59:35.924 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:35.926 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:59:35.928 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:35.929 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:35.930 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:59:35.931 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-09 06:59:35.933 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:59:35.934 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 06:59:35.938 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 06:59:35.940 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:59:35.942 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:59:35.943 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:35.945 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 06:59:35.947 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:35.948 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:59:35.950 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:59:35.951 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:59:35.952 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:59:35.953 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:59:35.956 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:59:35.957 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:35.959 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:35.961 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:59:35.962 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-09 06:59:35.963 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:59:35.964 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 06:59:35.969 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 06:59:35.973 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:35.993 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 20ms reading results.
2025-05-09 06:59:35.995 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:35.996 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:59:35.998 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:59:36.000 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 06:59:36.001 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:59:36.003 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:59:36.007 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:59:36.009 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 06:59:36.010 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 06:59:36.011 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 06:59:36.013 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:36.014 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:36.016 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 06:59:36.017 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-09 06:59:36.018 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 06:59:36.020 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 06:59:36.041 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 06:59:36.044 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 06:59:36.045 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:36.047 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 06:59:36.048 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:36.049 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 06:59:36.057 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 06:59:36.076 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 06:59:36.078 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 06:59:36.080 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 06:59:36.087 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 06:59:36.093 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 06:59:36.094 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 06:59:36.094 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 06:59:36.096 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 06:59:36.097 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 221.3256ms
2025-05-09 06:59:36.109 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 06:59:36.110 +03:00 [DBG] Connection id "0HNCELELUGMOQ" completed keep alive response.
2025-05-09 06:59:36.111 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 06:59:36.112 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 06:59:36.113 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 06:59:36.115 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 314.9307ms
2025-05-09 06:59:42.629 +03:00 [DBG] Connection id "0HNCELELUGMOQ" reset.
2025-05-09 06:59:42.677 +03:00 [DBG] Connection id "0HNCELELUGMOQ" disconnecting.
2025-05-09 06:59:42.681 +03:00 [DBG] Connection id "0HNCELELUGMOQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 06:59:42.683 +03:00 [DBG] Connection id "0HNCELELUGMOQ" stopped.
2025-05-09 07:01:46.704 +03:00 [DBG] Connection id "0HNCELELUGMOR" accepted.
2025-05-09 07:01:46.705 +03:00 [DBG] Connection id "0HNCELELUGMOR" started.
2025-05-09 07:01:46.787 +03:00 [DBG] Connection 0HNCELELUGMOR established using the following protocol: "Tls12"
2025-05-09 07:01:46.821 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/register - application/json 59
2025-05-09 07:01:46.825 +03:00 [DBG] POST requests are not supported
2025-05-09 07:01:46.827 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-09 07:01:46.828 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.Register (Finance_Manager_Backend)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-09 07:01:46.830 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.Register (Finance_Manager_Backend)'
2025-05-09 07:01:46.831 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 07:01:46.832 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.Register (Finance_Manager_Backend)'
2025-05-09 07:01:46.837 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] Register(Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 07:01:46.838 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 07:01:46.846 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 07:01:46.848 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 07:01:46.852 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 07:01:46.867 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 07:01:46.869 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 07:01:46.871 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 07:01:46.873 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-09 07:01:46.874 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' using the name '' in request data ...
2025-05-09 07:01:46.876 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 07:01:46.879 +03:00 [DBG] Connection id "0HNCELELUGMOR", Request id "0HNCELELUGMOR:00000001": started reading request body.
2025-05-09 07:01:46.880 +03:00 [DBG] Connection id "0HNCELELUGMOR", Request id "0HNCELELUGMOR:00000001": done reading request body.
2025-05-09 07:01:46.882 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'
2025-05-09 07:01:46.883 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-09 07:01:46.885 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-09 07:01:46.886 +03:00 [DBG] Attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-09 07:01:46.888 +03:00 [DBG] Done attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-09 07:01:46.902 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 07:01:46.904 +03:00 [DBG] Creating DbConnection.
2025-05-09 07:01:46.905 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 07:01:46.907 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 07:01:46.908 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 07:01:46.910 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 07:01:46.912 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 07:01:46.913 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 07:01:46.915 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 07:01:46.934 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 07:01:46.939 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 07:01:46.942 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 07:01:46.945 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 07:01:46.947 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 07:01:46.965 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 07:01:46.970 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 07:01:46.972 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 07:01:46.973 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 07:01:46.974 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 07:01:46.978 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 07:01:46.980 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 07:01:46.983 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 07:01:46.984 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 07:01:46.986 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 07:01:46.988 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 07:01:47.003 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 07:01:47.009 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 07:01:47.013 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 07:01:47.016 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-09 07:01:47.020 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 07:01:47.022 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 07:01:47.026 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 07:01:47.031 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 07:01:47.034 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 07:01:47.038 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 07:01:47.041 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 07:01:47.086 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 07:01:47.087 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 07:01:47.088 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 07:01:47.090 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 07:01:47.091 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 07:01:47.097 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 07:01:47.102 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-05-09 07:01:47.104 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-09 07:01:47.106 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 07:01:47.130 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 07:01:47.134 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 07:01:47.135 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 07:01:47.137 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 07:01:47.138 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 07:01:47.140 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 07:01:47.142 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 07:01:47.144 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 07:01:47.146 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 07:01:47.148 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 07:01:47.149 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 07:01:47.150 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 07:01:47.151 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 07:01:47.151 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 07:01:47.152 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 07:01:47.154 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.Register (Finance_Manager_Backend) in 284.8214ms
2025-05-09 07:01:47.156 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.Register (Finance_Manager_Backend)'
2025-05-09 07:01:47.157 +03:00 [DBG] Connection id "0HNCELELUGMOR" completed keep alive response.
2025-05-09 07:01:47.158 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 07:01:47.159 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 07:01:47.162 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-09 07:01:47.163 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/register - 200 null application/json; charset=utf-8 342.8625ms
2025-05-09 07:02:50.594 +03:00 [DBG] Connection id "0HNCELELUGMOR" reset.
2025-05-09 07:02:50.599 +03:00 [DBG] Connection id "0HNCELELUGMOR" disconnecting.
2025-05-09 07:02:50.601 +03:00 [DBG] Connection id "0HNCELELUGMOR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 07:02:50.608 +03:00 [DBG] Connection id "0HNCELELUGMOR" stopped.
2025-05-09 09:53:05.467 +03:00 [DBG] Connection id "0HNCELELUGMOS" accepted.
2025-05-09 09:53:05.978 +03:00 [DBG] Connection id "0HNCELELUGMOS" started.
2025-05-09 09:53:08.923 +03:00 [DBG] Connection 0HNCELELUGMOS established using the following protocol: "Tls12"
2025-05-09 09:53:10.547 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/authenticate - application/json 63
2025-05-09 09:53:11.120 +03:00 [DBG] POST requests are not supported
2025-05-09 09:53:11.326 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/authenticate'
2025-05-09 09:53:11.603 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)' with route pattern 'api/Auth/authenticate' is valid for the request path '/api/Auth/authenticate'
2025-05-09 09:53:11.683 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-09 09:53:12.590 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 09:53:12.968 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-09 09:53:13.950 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] Authenticate(Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 09:53:14.149 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 09:53:14.334 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 09:53:14.464 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 09:53:14.467 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 09:53:14.469 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 09:53:14.560 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 09:53:17.267 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 09:53:17.800 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-09 09:53:18.190 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' using the name '' in request data ...
2025-05-09 09:53:18.400 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 09:53:18.740 +03:00 [DBG] Connection id "0HNCELELUGMOS", Request id "0HNCELELUGMOS:00000001": started reading request body.
2025-05-09 09:53:18.746 +03:00 [DBG] Connection id "0HNCELELUGMOS", Request id "0HNCELELUGMOS:00000001": done reading request body.
2025-05-09 09:53:19.098 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'
2025-05-09 09:53:19.099 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-09 09:53:19.101 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-09 09:53:19.102 +03:00 [DBG] Attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-09 09:53:19.371 +03:00 [DBG] Done attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-09 09:53:27.598 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 09:53:30.522 +03:00 [DBG] Creating DbConnection.
2025-05-09 09:53:31.422 +03:00 [DBG] Created DbConnection. (979ms).
2025-05-09 09:53:31.451 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:53:55.928 +03:00 [ERR] An error occurred using the connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:53:59.128 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Finance_Manager_Backend.DataBase.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=14675; handshake=3173; 
 ---> System.ComponentModel.Win32Exception (258): Время ожидания операции истекло.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(SqlConnectionEncryptOption encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired, Boolean tlsFirst, String serverCert)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b8f6d80d-0382-4eee-8dfe-6215ff96439e
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=14675; handshake=3173; 
 ---> System.ComponentModel.Win32Exception (258): Время ожидания операции истекло.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(SqlConnectionEncryptOption encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired, Boolean tlsFirst, String serverCert)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b8f6d80d-0382-4eee-8dfe-6215ff96439e
Error Number:-2,State:0,Class:11
2025-05-09 09:53:59.226 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend) in 44754.9144ms
2025-05-09 09:53:59.296 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-09 09:53:59.363 +03:00 [FTL] Unexpected error occurred: Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=14675; handshake=3173; 
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=14675; handshake=3173; 
 ---> System.ComponentModel.Win32Exception (258): Время ожидания операции истекло.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(SqlConnectionEncryptOption encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired, Boolean tlsFirst, String serverCert)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Finance_Manager_Backend.BusinessLogic.Services.AuthServices.AuthService.AuthenticateUserAsync(String email, String password) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\BusinessLogic\Services\AuthServices\AuthService.cs:line 65
   at Finance_Manager_Backend.Controllers.AuthController.Authenticate(AuthDataDTO authDataDTO) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Controllers\AuthController.cs:line 59
   at lambda_method490(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Finance_Manager_Backend.Middleware.ExceptionsHandler.InvokeAsync(HttpContext httpContext) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Middleware\ExceptionsHandler.cs:line 23
ClientConnectionId:b8f6d80d-0382-4eee-8dfe-6215ff96439e
Error Number:-2,State:0,Class:11
2025-05-09 09:54:00.250 +03:00 [ERR] Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=14675; handshake=3173; 
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=14675; handshake=3173; 
 ---> System.ComponentModel.Win32Exception (258): Время ожидания операции истекло.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(SqlConnectionEncryptOption encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired, Boolean tlsFirst, String serverCert)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Finance_Manager_Backend.BusinessLogic.Services.AuthServices.AuthService.AuthenticateUserAsync(String email, String password) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\BusinessLogic\Services\AuthServices\AuthService.cs:line 65
   at Finance_Manager_Backend.Controllers.AuthController.Authenticate(AuthDataDTO authDataDTO) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Controllers\AuthController.cs:line 59
   at lambda_method490(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Finance_Manager_Backend.Middleware.ExceptionsHandler.InvokeAsync(HttpContext httpContext) in G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend\Middleware\ExceptionsHandler.cs:line 23
ClientConnectionId:b8f6d80d-0382-4eee-8dfe-6215ff96439e
Error Number:-2,State:0,Class:11
2025-05-09 09:54:00.615 +03:00 [DBG] Connection id "0HNCELELUGMOS" completed keep alive response.
2025-05-09 09:54:00.669 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 09:54:00.782 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:54:00.944 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 09:54:00.946 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/authenticate - 500 null application/json 50634.7675ms
2025-05-09 09:54:11.570 +03:00 [INF] Application is shutting down...
2025-05-09 09:54:12.043 +03:00 [DBG] Hosting stopping
2025-05-09 09:54:14.358 +03:00 [DBG] Connection id "0HNCELELUGMOS" disconnecting.
2025-05-09 09:54:14.487 +03:00 [DBG] Connection id "0HNCELELUGMOS" stopped.
2025-05-09 09:54:14.497 +03:00 [DBG] Connection id "0HNCELELUGMOS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 09:54:15.145 +03:00 [DBG] Hosting stopped
2025-05-09 09:54:57.233 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-09 09:54:58.538 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 09:54:58.708 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2025-05-09 09:54:59.068 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<User>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        User entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            User instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(User);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (User)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Email>k__BackingField = dataReader.GetString(2);
                                instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                instance.<Role>k__BackingField = dataReader.GetString(5);
                                instance.<Salt>k__BackingField = dataReader.GetString(6);
                                instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 09:54:59.151 +03:00 [DBG] Creating DbConnection.
2025-05-09 09:54:59.236 +03:00 [DBG] Created DbConnection. (116ms).
2025-05-09 09:54:59.244 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:54:59.967 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:54:59.975 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:54:59.982 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-05-09 09:54:59.985 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-05-09 09:55:00.010 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 09:55:00.361 +03:00 [INF] Executed DbCommand (363ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 09:55:00.438 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:00.491 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:00.504 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:00.506 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:00.508 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:00.510 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:00.515 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:00.523 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 153ms reading results.
2025-05-09 09:55:00.527 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:00.533 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (6ms).
2025-05-09 09:55:00.538 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 09:55:00.559 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 09:55:00.576 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 09:55:00.706 +03:00 [DBG] Executing 3 update commands as a batch.
2025-05-09 09:55:00.714 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:00.720 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:00.722 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 09:55:00.734 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 09:55:00.740 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:00.742 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:00.748 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-05-09 09:55:00.752 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p2;
2025-05-09 09:55:01.158 +03:00 [INF] Executed DbCommand (408ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p2;
2025-05-09 09:55:01.178 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:01.182 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 14ms reading results.
2025-05-09 09:55:01.189 +03:00 [DBG] Committing transaction.
2025-05-09 09:55:01.193 +03:00 [DBG] Committed transaction.
2025-05-09 09:55:01.196 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:01.199 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-09 09:55:01.202 +03:00 [DBG] Disposing transaction.
2025-05-09 09:55:01.211 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.213 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.231 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.246 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 3 entities written to the database.
2025-05-09 09:55:01.257 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-09 09:55:01.264 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 09:55:01.268 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:01.271 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:01.272 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:01.273 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:01.275 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 09:55:01.276 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 09:55:01.336 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 09:55:01.370 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.385 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.388 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.389 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.391 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.393 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.396 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.399 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.401 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.402 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.404 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:01.406 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 67ms reading results.
2025-05-09 09:55:01.408 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:01.409 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:01.411 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 09:55:01.412 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 09:55:01.425 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 09:55:01.432 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 09:55:01.433 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:01.435 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:01.436 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 09:55:01.438 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 09:55:01.440 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:01.441 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:01.443 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 09:55:01.445 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 09:55:01.532 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 09:55:01.536 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:01.537 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 09:55:01.539 +03:00 [DBG] Committing transaction.
2025-05-09 09:55:01.549 +03:00 [DBG] Committed transaction.
2025-05-09 09:55:01.550 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:01.552 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 09:55:01.554 +03:00 [DBG] Disposing transaction.
2025-05-09 09:55:01.556 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.558 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.560 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.562 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.565 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:01.568 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 09:55:01.571 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 09:55:01.575 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:01.577 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-09 09:55:01.819 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 09:55:01.834 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-09 09:55:01.948 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 09:55:01.967 +03:00 [DBG] Creating DbConnection.
2025-05-09 09:55:01.968 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 09:55:01.970 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:01.971 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:01.973 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:01.975 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:01.977 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 09:55:01.978 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 09:55:02.022 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 09:55:02.028 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.030 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 09:55:02.032 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.034 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:02.065 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.073 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.075 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 09:55:02.076 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 09:55:02.077 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 09:55:02.096 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.099 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.101 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:02.103 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:02.105 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 09:55:02.107 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 09:55:02.121 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 09:55:02.148 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:02.152 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.154 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 15ms reading results.
2025-05-09 09:55:02.156 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.158 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:02.165 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.167 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 09:55:02.521 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.538 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.541 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.544 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 09:55:02.545 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 09:55:02.554 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 09:55:02.562 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.565 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.573 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:02.578 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-05-09 09:55:02.580 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-05-09 09:55:02.582 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 09:55:02.592 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 09:55:02.597 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:02.603 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.604 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 10ms reading results.
2025-05-09 09:55:02.606 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.608 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:02.610 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.612 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 09:55:02.616 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __authData_UserDTO_Id_0)'
2025-05-09 09:55:02.623 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 09:55:02.628 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.629 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.631 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:02.634 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 09:55:02.635 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 09:55:02.637 +03:00 [DBG] Executing DbCommand [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 09:55:02.663 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 09:55:02.667 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.669 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 09:55:02.670 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.672 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:02.678 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.685 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.687 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.689 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.690 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.692 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.694 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.696 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.698 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.702 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.703 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 09:55:02.705 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 09:55:02.706 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 09:55:02.713 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 09:55:02.722 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.724 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.726 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:02.727 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:02.729 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 09:55:02.731 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 09:55:02.794 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 09:55:02.800 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:02.803 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:02.805 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:02.807 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:02.808 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:02.810 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.811 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 14ms reading results.
2025-05-09 09:55:02.813 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.815 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:02.817 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.820 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.823 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.825 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.827 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.829 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 09:55:02.835 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.883 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.885 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.887 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.889 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.890 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.892 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.894 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.895 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.897 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.901 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.903 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.904 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.906 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.908 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.909 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.911 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.913 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.914 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.918 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.919 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.921 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.923 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.925 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.926 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.928 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.929 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.933 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.935 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.937 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.939 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.941 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.943 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.946 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.950 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.953 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.954 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.956 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.958 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.960 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:02.961 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 09:55:02.967 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 09:55:02.986 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 09:55:02.990 +03:00 [DBG] Executing 20 update commands as a batch.
2025-05-09 09:55:02.992 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.994 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:02.996 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:02.997 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:03.001 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 09:55:03.003 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 09:55:03.040 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 09:55:03.045 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.048 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.049 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.051 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.052 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.054 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.056 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.057 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.059 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.060 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.062 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.063 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.065 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.067 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.068 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.070 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.072 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.074 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.075 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.076 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.078 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.079 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 35ms reading results.
2025-05-09 09:55:03.081 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.083 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:03.085 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.090 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.092 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.094 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.096 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.100 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.103 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.105 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.107 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.109 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.111 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.113 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.115 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.119 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.121 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.124 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.126 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.129 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.131 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.135 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.138 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 20 entities written to the database.
2025-05-09 09:55:03.141 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.158 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.160 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.162 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.164 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.173 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.192 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.197 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.201 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 09:55:03.203 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 09:55:03.208 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 09:55:03.210 +03:00 [DBG] Executing 4 update commands as a batch.
2025-05-09 09:55:03.213 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.214 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.218 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:03.219 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:03.221 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 09:55:03.223 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 09:55:03.298 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 09:55:03.302 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.304 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.305 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.308 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.310 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.311 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 10ms reading results.
2025-05-09 09:55:03.313 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.314 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:03.319 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.321 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.323 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.325 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.327 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 4 entities written to the database.
2025-05-09 09:55:03.329 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 09:55:03.330 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.332 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-09 09:55:03.350 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 09:55:03.355 +03:00 [DBG] Creating DbConnection.
2025-05-09 09:55:03.357 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 09:55:03.358 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.359 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.361 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:03.362 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:03.363 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 09:55:03.365 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 09:55:03.370 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 09:55:03.373 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.375 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 09:55:03.377 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.379 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:03.405 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.409 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.410 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 09:55:03.412 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 09:55:03.413 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 09:55:03.417 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.419 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.421 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:03.422 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:03.424 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 09:55:03.426 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 09:55:03.430 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 09:55:03.436 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:03.437 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.439 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 09:55:03.440 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.442 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:03.444 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:03.446 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 09:55:03.450 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 09:55:03.451 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.453 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 09:55:03.594 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-09 09:55:03.697 +03:00 [DBG] Hosting starting
2025-05-09 09:55:03.881 +03:00 [INF] User profile is available. Using 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-09 09:55:03.906 +03:00 [DBG] Reading data from file 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys\key-036e1e5f-5347-47d7-8236-0b64ed0a76a1.xml'.
2025-05-09 09:55:03.909 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 09:55:03.917 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.ExpiresAt < DateTime.UtcNow)'
2025-05-09 09:55:03.921 +03:00 [DBG] Found key {036e1e5f-5347-47d7-8236-0b64ed0a76a1}.
2025-05-09 09:55:03.936 +03:00 [DBG] Considering key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} with expiration date 2025-07-16 20:11:06Z as default key.
2025-05-09 09:55:03.941 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 09:55:03.942 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<RefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE()) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE(), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        RefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            RefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(RefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (RefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                        {
                            return 
                            {
                                RefreshToken instance;
                                instance = new RefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Token>k__BackingField = dataReader.GetString(4);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(RefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 09:55:03.943 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-09 09:55:03.952 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 09:55:03.954 +03:00 [DBG] Creating DbConnection.
2025-05-09 09:55:03.955 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 09:55:03.956 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.956 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-09 09:55:03.958 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:03.961 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-09 09:55:03.962 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:03.964 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 09:55:03.965 +03:00 [DBG] Using key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} as the default key.
2025-05-09 09:55:03.968 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-09 09:55:03.970 +03:00 [DBG] Key ring with default key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} was loaded during application startup.
2025-05-09 09:55:03.971 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 09:55:04.060 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 09:55:04.064 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:04.066 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 09:55:04.068 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:04.069 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:04.072 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 09:55:04.073 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:04.075 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 09:55:04.392 +03:00 [INF] Now listening on: https://localhost:49464
2025-05-09 09:55:04.394 +03:00 [INF] Now listening on: http://localhost:49465
2025-05-09 09:55:04.395 +03:00 [DBG] Loaded hosting startup assembly Finance_Manager_Backend
2025-05-09 09:55:04.396 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-09 09:55:04.397 +03:00 [INF] Hosting environment: Development
2025-05-09 09:55:04.398 +03:00 [INF] Content root path: G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend
2025-05-09 09:55:04.400 +03:00 [DBG] Hosting started
2025-05-09 09:55:07.673 +03:00 [DBG] Connection id "0HNCEOPNJ4T1O" accepted.
2025-05-09 09:55:07.676 +03:00 [DBG] Connection id "0HNCEOPNJ4T1O" started.
2025-05-09 09:55:07.778 +03:00 [DBG] Connection 0HNCEOPNJ4T1O established using the following protocol: "Tls12"
2025-05-09 09:55:07.915 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/authenticate - application/json 63
2025-05-09 09:55:07.925 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-09 09:55:08.103 +03:00 [DBG] POST requests are not supported
2025-05-09 09:55:08.142 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/authenticate'
2025-05-09 09:55:08.151 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)' with route pattern 'api/Auth/authenticate' is valid for the request path '/api/Auth/authenticate'
2025-05-09 09:55:08.157 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-09 09:55:08.229 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 09:55:08.233 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-09 09:55:08.259 +03:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] Authenticate(Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 09:55:08.263 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 09:55:08.265 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 09:55:08.268 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 09:55:08.272 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 09:55:08.274 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 09:55:08.277 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 09:55:08.280 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 09:55:08.315 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-09 09:55:08.321 +03:00 [DBG] Attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' using the name '' in request data ...
2025-05-09 09:55:08.325 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 09:55:08.427 +03:00 [DBG] Connection id "0HNCEOPNJ4T1O", Request id "0HNCEOPNJ4T1O:00000001": started reading request body.
2025-05-09 09:55:08.437 +03:00 [DBG] Connection id "0HNCEOPNJ4T1O", Request id "0HNCEOPNJ4T1O:00000001": done reading request body.
2025-05-09 09:55:08.461 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'
2025-05-09 09:55:08.466 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-09 09:55:08.473 +03:00 [DBG] Done attempting to bind parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-09 09:55:08.477 +03:00 [DBG] Attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO' ...
2025-05-09 09:55:08.492 +03:00 [DBG] Done attempting to validate the bound parameter 'authDataDTO' of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthDataDTO'.
2025-05-09 09:55:08.564 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 09:55:08.567 +03:00 [DBG] Creating DbConnection.
2025-05-09 09:55:08.568 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 09:55:08.571 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:08.573 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:08.574 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:08.576 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:08.578 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 09:55:08.580 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 09:55:08.609 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 09:55:08.614 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:08.616 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:08.617 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 09:55:08.619 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:08.621 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:08.638 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:08.640 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:08.641 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:08.643 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 09:55:08.644 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 09:55:08.645 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 09:55:08.648 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:08.650 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:08.651 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:08.653 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:08.654 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 09:55:08.656 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 09:55:08.660 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 09:55:08.662 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:08.664 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:08.665 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 09:55:08.667 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:08.668 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:08.670 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:08.672 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 09:55:08.678 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 09:55:08.682 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 09:55:08.685 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 09:55:08.687 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 09:55:08.688 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 09:55:08.690 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 09:55:08.692 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 09:55:08.737 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend) in 457.4048ms
2025-05-09 09:55:08.740 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.Authenticate (Finance_Manager_Backend)'
2025-05-09 09:55:08.743 +03:00 [DBG] Connection id "0HNCEOPNJ4T1O" completed keep alive response.
2025-05-09 09:55:08.746 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 09:55:08.750 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:08.752 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-09 09:55:08.756 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/authenticate - 200 null application/json; charset=utf-8 844.237ms
2025-05-09 09:55:09.378 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 09:55:09.382 +03:00 [DBG] POST requests are not supported
2025-05-09 09:55:09.385 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 09:55:09.387 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 09:55:09.389 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 09:55:09.392 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 09:55:09.393 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 09:55:09.398 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 09:55:09.400 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 09:55:09.402 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 09:55:09.404 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 09:55:09.407 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 09:55:09.408 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 09:55:09.410 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 09:55:09.411 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 09:55:09.413 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 09:55:09.415 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 09:55:09.417 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 09:55:09.418 +03:00 [DBG] Connection id "0HNCEOPNJ4T1O", Request id "0HNCEOPNJ4T1O:00000002": started reading request body.
2025-05-09 09:55:09.421 +03:00 [DBG] Connection id "0HNCEOPNJ4T1O", Request id "0HNCEOPNJ4T1O:00000002": done reading request body.
2025-05-09 09:55:09.423 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 09:55:09.424 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 09:55:09.425 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 09:55:09.427 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 09:55:09.428 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 09:55:09.433 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 09:55:09.436 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .FirstOrDefault(rt => rt.Token == __refreshToken_0)'
2025-05-09 09:55:09.444 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RefreshToken>(
    asyncEnumerable: SingleQueryingEnumerable.Create<RefreshToken>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
            SELECT TOP(1) r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
            FROM refresh_tokens AS r
            WHERE r.token == @__refreshToken_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
            SELECT TOP(1) r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
            FROM refresh_tokens AS r
            WHERE r.token == @__refreshToken_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            RefreshToken entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                RefreshToken instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(RefreshToken);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (RefreshToken)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                            {
                                return 
                                {
                                    RefreshToken instance;
                                    instance = new RefreshToken();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                    instance.<Token>k__BackingField = dataReader.GetString(4);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(RefreshToken)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 09:55:09.447 +03:00 [DBG] Creating DbConnection.
2025-05-09 09:55:09.448 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 09:55:09.449 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.452 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.457 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:09.466 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2025-05-09 09:55:09.467 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-05-09 09:55:09.469 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 09:55:09.527 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 09:55:09.532 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:09.534 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.535 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 09:55:09.539 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.540 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:09.542 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __existingToken_UserId_0)'
2025-05-09 09:55:09.564 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__existingToken_UserId_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__existingToken_UserId_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 09:55:09.575 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.578 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.579 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:09.581 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:09.583 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 09:55:09.584 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 09:55:09.614 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 09:55:09.618 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:09.621 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:09.623 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.626 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-09 09:55:09.628 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.629 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:09.632 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 09:55:09.633 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 09:55:09.635 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:09.639 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:09.642 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 09:55:09.645 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.647 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.649 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:09.650 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:09.652 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 09:55:09.655 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 09:55:09.717 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 09:55:09.719 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.721 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 09:55:09.723 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.724 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:09.726 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:09.728 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 09:55:09.729 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:09.731 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:09.732 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:09.734 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 09:55:09.735 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 09:55:09.736 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 09:55:09.738 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.739 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.741 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 09:55:09.742 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 09:55:09.743 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 09:55:09.745 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 09:55:09.750 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 09:55:09.752 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 09:55:09.754 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.755 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 09:55:09.757 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.759 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 09:55:09.760 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 09:55:09.762 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 09:55:09.764 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 09:55:09.767 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 09:55:09.768 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 09:55:09.770 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 09:55:09.772 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 09:55:09.773 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 09:55:09.774 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 09:55:09.776 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 366.3435ms
2025-05-09 09:55:09.778 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 09:55:09.779 +03:00 [DBG] Connection id "0HNCEOPNJ4T1O" completed keep alive response.
2025-05-09 09:55:09.780 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 09:55:09.781 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 09:55:09.783 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 09:55:09.785 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 406.1166ms
2025-05-09 09:55:59.854 +03:00 [DBG] Connection id "0HNCEOPNJ4T1O" reset.
2025-05-09 09:55:59.857 +03:00 [DBG] Connection id "0HNCEOPNJ4T1O" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 09:55:59.859 +03:00 [DBG] Connection id "0HNCEOPNJ4T1O" disconnecting.
2025-05-09 09:55:59.879 +03:00 [DBG] Connection id "0HNCEOPNJ4T1O" stopped.
2025-05-09 10:03:35.846 +03:00 [DBG] Connection id "0HNCEOPNJ4T1P" accepted.
2025-05-09 10:03:35.848 +03:00 [DBG] Connection id "0HNCEOPNJ4T1P" started.
2025-05-09 10:03:35.918 +03:00 [DBG] Connection 0HNCEOPNJ4T1P established using the following protocol: "Tls12"
2025-05-09 10:03:36.046 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:03:36.050 +03:00 [DBG] POST requests are not supported
2025-05-09 10:03:36.051 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:03:36.052 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:03:36.054 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:03:36.057 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:03:36.058 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:03:36.059 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:03:36.067 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:03:36.070 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:03:36.072 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:03:36.075 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:03:36.082 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:03:36.085 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:03:36.087 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:03:36.089 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:03:36.092 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:03:36.097 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:03:36.099 +03:00 [DBG] Connection id "0HNCEOPNJ4T1P", Request id "0HNCEOPNJ4T1P:00000001": started reading request body.
2025-05-09 10:03:36.101 +03:00 [DBG] Connection id "0HNCEOPNJ4T1P", Request id "0HNCEOPNJ4T1P:00000001": done reading request body.
2025-05-09 10:03:36.103 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:03:36.105 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:03:36.107 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:03:36.108 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:03:36.113 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:03:36.117 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:03:36.123 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:03:36.134 +03:00 [DBG] Created DbConnection. (10ms).
2025-05-09 10:03:36.136 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:36.215 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:36.223 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:03:36.225 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:03:36.231 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-05-09 10:03:36.233 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:03:36.254 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:03:36.256 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:36.258 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:36.259 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 10:03:36.261 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:36.264 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 10:03:36.266 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:36.268 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:36.269 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:03:36.271 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:03:36.272 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:03:36.273 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:03:36.278 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:03:36.282 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:36.284 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:36.285 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:36.287 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-09 10:03:36.289 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:36.290 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:03:36.292 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:03:36.293 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:03:36.294 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:03:36.296 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2025-05-09 10:03:36.298 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:36.300 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:36.302 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:36.304 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:03:36.305 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:03:36.306 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:03:36.308 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:36.309 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:36.310 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:03:36.312 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:03:36.314 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 10:03:36.341 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:03:36.354 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:03:36.356 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:03:36.358 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:36.360 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 10:03:36.362 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:36.365 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-09 10:03:36.367 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:36.369 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:03:36.370 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:03:36.373 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:03:36.374 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:03:36.376 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:03:36.376 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:03:36.383 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:03:36.384 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:03:36.386 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 300.9739ms
2025-05-09 10:03:36.387 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:03:36.388 +03:00 [DBG] Connection id "0HNCEOPNJ4T1P" completed keep alive response.
2025-05-09 10:03:36.389 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:03:36.389 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:36.392 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-09 10:03:36.399 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 352.8766ms
2025-05-09 10:03:37.467 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:03:37.500 +03:00 [DBG] POST requests are not supported
2025-05-09 10:03:37.503 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:03:37.504 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:03:37.506 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:03:37.508 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:03:37.509 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:03:37.510 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:03:37.512 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:03:37.514 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:03:37.516 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:03:37.519 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:03:37.521 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:03:37.522 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:03:37.524 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:03:37.526 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:03:37.527 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:03:37.529 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:03:37.531 +03:00 [DBG] Connection id "0HNCEOPNJ4T1P", Request id "0HNCEOPNJ4T1P:00000002": started reading request body.
2025-05-09 10:03:37.533 +03:00 [DBG] Connection id "0HNCEOPNJ4T1P", Request id "0HNCEOPNJ4T1P:00000002": done reading request body.
2025-05-09 10:03:37.534 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:03:37.535 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:03:37.537 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:03:37.538 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:03:37.540 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:03:37.542 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:03:37.544 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:03:37.545 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 10:03:37.547 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.549 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.550 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:03:37.552 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:03:37.553 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:03:37.555 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:03:37.564 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:03:37.567 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:37.568 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.570 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 10:03:37.572 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.573 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:03:37.575 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.577 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.578 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:03:37.580 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:03:37.582 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 10:03:37.583 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:03:37.588 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:03:37.590 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:37.592 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:37.593 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.600 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-09 10:03:37.603 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.605 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 10:03:37.608 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:03:37.609 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:03:37.616 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:03:37.619 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:37.623 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:03:37.625 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.628 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.632 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:03:37.633 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:03:37.635 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 10:03:37.639 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:03:37.646 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:03:37.650 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.652 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 10:03:37.653 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.655 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:03:37.656 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:37.660 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:03:37.664 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:37.666 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:37.668 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:37.670 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:03:37.671 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:03:37.673 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:03:37.675 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.676 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.677 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:03:37.679 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:03:37.681 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 10:03:37.683 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:03:37.721 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:03:37.756 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:03:37.757 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.759 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 10:03:37.760 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.761 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:03:37.765 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:03:37.766 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:03:37.768 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:03:37.770 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:03:37.772 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:03:37.775 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:03:37.775 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:03:37.776 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:03:37.777 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:03:37.779 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 256.2614ms
2025-05-09 10:03:37.781 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:03:37.784 +03:00 [DBG] Connection id "0HNCEOPNJ4T1P" completed keep alive response.
2025-05-09 10:03:37.784 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:03:37.786 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:03:37.787 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 10:03:37.789 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 322.1308ms
2025-05-09 10:04:18.160 +03:00 [DBG] Connection id "0HNCEOPNJ4T1P" reset.
2025-05-09 10:04:18.163 +03:00 [DBG] Connection id "0HNCEOPNJ4T1P" disconnecting.
2025-05-09 10:04:18.165 +03:00 [DBG] Connection id "0HNCEOPNJ4T1P" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 10:04:18.178 +03:00 [DBG] Connection id "0HNCEOPNJ4T1P" stopped.
2025-05-09 10:05:08.207 +03:00 [DBG] Connection id "0HNCEOPNJ4T1Q" accepted.
2025-05-09 10:05:08.213 +03:00 [DBG] Connection id "0HNCEOPNJ4T1Q" started.
2025-05-09 10:05:08.266 +03:00 [DBG] Connection 0HNCEOPNJ4T1Q established using the following protocol: "Tls12"
2025-05-09 10:05:08.362 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:05:08.374 +03:00 [DBG] POST requests are not supported
2025-05-09 10:05:08.376 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:05:08.378 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:05:08.380 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:05:08.383 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:05:08.385 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:05:08.392 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:05:08.395 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:05:08.397 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:05:08.400 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:05:08.406 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:05:08.408 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:05:08.411 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:05:08.413 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:05:08.414 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:05:08.416 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:05:08.417 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:05:08.419 +03:00 [DBG] Connection id "0HNCEOPNJ4T1Q", Request id "0HNCEOPNJ4T1Q:00000001": started reading request body.
2025-05-09 10:05:08.422 +03:00 [DBG] Connection id "0HNCEOPNJ4T1Q", Request id "0HNCEOPNJ4T1Q:00000001": done reading request body.
2025-05-09 10:05:08.423 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:05:08.424 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:05:08.426 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:05:08.427 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:05:08.429 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:05:08.432 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:05:08.435 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:05:08.437 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-09 10:05:08.438 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:08.440 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:08.441 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:05:08.442 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:05:08.443 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:05:08.445 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:05:08.451 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:05:08.455 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:08.457 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:08.458 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 10:05:08.460 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:08.462 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:05:08.464 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:08.466 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:08.467 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:05:08.468 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-09 10:05:08.472 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 10:05:08.473 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:05:08.479 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:05:08.481 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:08.483 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:08.484 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:08.523 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 41ms reading results.
2025-05-09 10:05:08.525 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:08.527 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:05:08.529 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:05:08.530 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:05:08.531 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:05:08.532 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2025-05-09 10:05:08.534 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:08.537 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:08.539 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:08.541 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:05:08.542 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:05:08.543 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:05:08.545 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:08.547 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:08.549 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:05:08.550 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:05:08.552 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 10:05:08.555 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:05:08.560 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:05:08.563 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:05:08.564 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:08.565 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 10:05:08.567 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:08.568 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:05:08.572 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:08.574 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:05:08.575 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:05:08.578 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:05:08.579 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:05:08.581 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:05:08.582 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:05:08.583 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:05:08.584 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:05:08.586 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 174.5582ms
2025-05-09 10:05:08.609 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:05:08.617 +03:00 [DBG] Connection id "0HNCEOPNJ4T1Q" completed keep alive response.
2025-05-09 10:05:08.619 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:05:08.628 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:08.629 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 10:05:08.631 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 269.7904ms
2025-05-09 10:05:12.731 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:05:12.799 +03:00 [DBG] POST requests are not supported
2025-05-09 10:05:12.801 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:05:12.803 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:05:12.805 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:05:12.806 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:05:12.810 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:05:12.817 +03:00 [DBG] Connection id "0HNCEOPNJ4T1Q" reset.
2025-05-09 10:05:12.830 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:05:12.831 +03:00 [DBG] Connection id "0HNCEOPNJ4T1Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 10:05:12.833 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:05:12.835 +03:00 [DBG] Connection id "0HNCEOPNJ4T1Q" disconnecting.
2025-05-09 10:05:12.837 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:05:12.839 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:05:12.844 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:05:12.845 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:05:12.847 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:05:12.855 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:05:12.863 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:05:12.864 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:05:12.866 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:05:12.867 +03:00 [DBG] Connection id "0HNCEOPNJ4T1Q", Request id "0HNCEOPNJ4T1Q:00000002": started reading request body.
2025-05-09 10:05:12.868 +03:00 [DBG] Connection id "0HNCEOPNJ4T1Q", Request id "0HNCEOPNJ4T1Q:00000002": done reading request body.
2025-05-09 10:05:12.870 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:05:12.871 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:05:12.876 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:05:12.877 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:05:12.878 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:05:12.881 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:05:12.883 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:05:12.884 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 10:05:12.885 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:12.886 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:12.887 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:05:12.888 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-09 10:05:12.889 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:05:12.932 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:05:12.968 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:05:13.005 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:13.011 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.013 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-09 10:05:13.014 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.016 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:05:13.018 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.019 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.020 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:05:13.022 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:05:13.025 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 10:05:13.026 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:05:13.031 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:05:13.033 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:13.035 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:13.036 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.038 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-09 10:05:13.043 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.045 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:05:13.046 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:05:13.047 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:05:13.049 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:05:13.050 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:13.052 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:05:13.053 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.055 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.059 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:05:13.060 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:05:13.061 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:05:13.063 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:05:13.068 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:05:13.071 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.077 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-09 10:05:13.079 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.081 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:05:13.083 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:13.085 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:05:13.087 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:13.088 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:13.095 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:13.099 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:05:13.100 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:05:13.102 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:05:13.104 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.109 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.111 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:05:13.221 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (109ms).
2025-05-09 10:05:13.227 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (115ms).
2025-05-09 10:05:13.229 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:05:13.249 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:05:13.253 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:05:13.256 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.259 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-09 10:05:13.261 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.263 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:05:13.264 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:13.266 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:05:13.267 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:05:13.269 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:05:13.270 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:05:13.272 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:05:13.273 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:05:13.273 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:05:13.275 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:05:13.318 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 470.899ms
2025-05-09 10:05:13.319 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:05:13.320 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:05:13.321 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:13.323 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 10:05:13.325 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 499 null application/json; charset=utf-8 593.7531ms
2025-05-09 10:05:13.339 +03:00 [DBG] Connection id "0HNCEOPNJ4T1Q" stopped.
2025-05-09 10:05:49.464 +03:00 [DBG] Connection id "0HNCEOPNJ4T1R" accepted.
2025-05-09 10:05:49.505 +03:00 [DBG] Connection id "0HNCEOPNJ4T1R" started.
2025-05-09 10:05:49.530 +03:00 [DBG] Connection 0HNCEOPNJ4T1R established using the following protocol: "Tls12"
2025-05-09 10:05:49.639 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:05:49.649 +03:00 [DBG] POST requests are not supported
2025-05-09 10:05:49.650 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:05:49.651 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:05:49.654 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:05:49.655 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:05:49.656 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:05:49.657 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:05:49.659 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:05:49.661 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:05:49.663 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:05:49.665 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:05:49.667 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:05:49.670 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:05:49.672 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:05:49.673 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:05:49.675 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:05:49.676 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:05:49.678 +03:00 [DBG] Connection id "0HNCEOPNJ4T1R", Request id "0HNCEOPNJ4T1R:00000001": started reading request body.
2025-05-09 10:05:49.679 +03:00 [DBG] Connection id "0HNCEOPNJ4T1R", Request id "0HNCEOPNJ4T1R:00000001": done reading request body.
2025-05-09 10:05:49.683 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:05:49.684 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:05:49.685 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:05:49.688 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:05:49.689 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:05:49.692 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:05:49.708 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:05:49.708 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 10:05:49.710 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:49.712 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:49.713 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:05:49.715 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:05:49.716 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:05:49.717 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:05:49.723 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:05:49.726 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:49.728 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:49.730 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 10:05:49.731 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:49.733 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:05:49.735 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:49.738 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:49.740 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:05:49.741 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:05:49.744 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 10:05:49.745 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:05:49.749 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:05:49.751 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:49.752 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:49.755 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:49.757 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-09 10:05:49.759 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:49.764 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (4ms).
2025-05-09 10:05:49.766 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:05:49.767 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:05:49.768 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:05:49.769 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2025-05-09 10:05:49.772 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:49.774 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:49.783 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:49.785 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:05:49.809 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:05:49.813 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:05:49.815 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:49.816 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:49.818 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:05:49.819 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:05:49.824 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-09 10:05:49.826 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:05:49.830 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:05:49.832 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:05:49.834 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:49.835 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 10:05:49.842 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:49.843 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:05:49.849 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:05:49.855 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:05:49.856 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:05:49.858 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:05:49.882 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:05:49.884 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:05:49.884 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:05:49.885 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:05:49.886 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:05:49.899 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 228.8067ms
2025-05-09 10:05:49.900 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:05:49.901 +03:00 [DBG] Connection id "0HNCEOPNJ4T1R" completed keep alive response.
2025-05-09 10:05:49.906 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:05:49.923 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:05:49.963 +03:00 [DBG] Disposed connection to database '' on server '' (40ms).
2025-05-09 10:05:50.002 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 363.1516ms
2025-05-09 10:06:48.004 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:06:48.046 +03:00 [DBG] POST requests are not supported
2025-05-09 10:06:48.047 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:06:48.073 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:06:48.076 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:06:48.089 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:06:48.090 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:06:48.092 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:06:48.094 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:06:48.096 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:06:48.098 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:06:48.103 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:06:48.105 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:06:48.107 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:06:48.109 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:06:48.135 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:06:48.140 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:06:48.189 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:06:48.205 +03:00 [DBG] Connection id "0HNCEOPNJ4T1R", Request id "0HNCEOPNJ4T1R:00000002": started reading request body.
2025-05-09 10:06:48.259 +03:00 [DBG] Connection id "0HNCEOPNJ4T1R", Request id "0HNCEOPNJ4T1R:00000002": done reading request body.
2025-05-09 10:06:48.261 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:06:48.263 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:06:48.265 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:06:48.266 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:06:48.270 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:06:48.274 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:06:48.279 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:06:48.282 +03:00 [DBG] Created DbConnection. (3ms).
2025-05-09 10:06:48.283 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.287 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.289 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:06:48.293 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-05-09 10:06:48.295 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-09 10:06:48.297 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:06:48.314 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:06:48.323 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:06:48.329 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.332 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-09 10:06:48.336 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.338 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:06:48.341 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.407 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.409 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:06:48.410 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:06:48.598 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (188ms).
2025-05-09 10:06:48.600 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:06:48.606 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:06:48.608 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:06:48.609 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:06:48.611 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.612 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 10:06:48.614 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.615 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:06:48.616 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:06:48.619 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:06:48.620 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:06:48.621 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:06:48.623 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:06:48.625 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.626 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.627 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:06:48.629 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:06:48.631 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 10:06:48.632 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:06:48.672 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:06:48.689 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.691 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 10:06:48.753 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.755 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:06:48.759 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:06:48.762 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:06:48.765 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:06:48.770 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:06:48.772 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:06:48.775 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:06:48.777 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:06:48.778 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:06:48.808 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.810 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.813 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:06:48.815 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:06:48.833 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-05-09 10:06:48.838 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:06:48.876 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:06:48.883 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:06:48.885 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.886 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 10:06:48.888 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.889 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:06:48.891 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:06:48.893 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:06:48.894 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:06:48.896 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:06:48.897 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:06:48.899 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:06:48.900 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:06:48.903 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:06:48.904 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:06:48.905 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 798.1698ms
2025-05-09 10:06:48.907 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:06:48.908 +03:00 [DBG] Connection id "0HNCEOPNJ4T1R" completed keep alive response.
2025-05-09 10:06:48.909 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:06:48.911 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:06:48.912 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 10:06:48.913 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 908.8179ms
2025-05-09 10:07:52.063 +03:00 [DBG] Connection id "0HNCEOPNJ4T1R" received FIN.
2025-05-09 10:07:52.073 +03:00 [DBG] Connection id "0HNCEOPNJ4T1R" disconnecting.
2025-05-09 10:07:52.075 +03:00 [DBG] Connection id "0HNCEOPNJ4T1R" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 10:07:52.077 +03:00 [DBG] Connection id "0HNCEOPNJ4T1R" stopped.
2025-05-09 10:08:22.994 +03:00 [DBG] Connection id "0HNCEOPNJ4T1S" accepted.
2025-05-09 10:08:23.045 +03:00 [DBG] Connection id "0HNCEOPNJ4T1S" started.
2025-05-09 10:08:23.080 +03:00 [DBG] Connection 0HNCEOPNJ4T1S established using the following protocol: "Tls12"
2025-05-09 10:08:23.230 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:08:23.254 +03:00 [DBG] POST requests are not supported
2025-05-09 10:08:23.255 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:08:23.258 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:08:23.265 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:08:23.267 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:08:23.269 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:08:23.271 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:08:23.281 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:08:23.284 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:08:23.287 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:08:23.289 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:08:23.290 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:08:23.292 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:08:23.294 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:08:23.297 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:08:23.298 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:08:23.299 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:08:23.301 +03:00 [DBG] Connection id "0HNCEOPNJ4T1S", Request id "0HNCEOPNJ4T1S:00000001": started reading request body.
2025-05-09 10:08:23.302 +03:00 [DBG] Connection id "0HNCEOPNJ4T1S", Request id "0HNCEOPNJ4T1S:00000001": done reading request body.
2025-05-09 10:08:23.304 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:08:23.305 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:08:23.307 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:08:23.308 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:08:23.310 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:08:23.314 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:08:23.316 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:08:23.317 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 10:08:23.318 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:23.319 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:23.321 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:08:23.322 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:08:23.324 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:08:23.325 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:08:23.332 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:08:23.335 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:23.337 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:23.338 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 10:08:23.340 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:23.341 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:08:23.347 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:23.348 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:23.350 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:08:23.351 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:08:23.353 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 10:08:23.355 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:08:23.361 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:08:23.364 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:23.365 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:23.367 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:23.369 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-09 10:08:23.371 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:23.373 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:08:23.374 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:08:23.375 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:08:23.380 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:08:23.381 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2025-05-09 10:08:23.383 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:23.385 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:23.386 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:23.388 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:08:23.389 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:08:23.391 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:08:23.392 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:23.396 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:23.397 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:08:23.398 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-09 10:08:23.399 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:08:23.400 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:08:23.429 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:08:23.449 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:08:23.454 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:23.455 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-09 10:08:23.457 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:23.458 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:08:23.470 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:23.471 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:08:23.473 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:08:23.485 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:08:23.487 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:08:23.488 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:08:23.492 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:08:23.498 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:08:23.504 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:08:23.506 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 214.3819ms
2025-05-09 10:08:23.507 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:08:23.509 +03:00 [DBG] Connection id "0HNCEOPNJ4T1S" completed keep alive response.
2025-05-09 10:08:23.515 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:08:23.534 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:23.544 +03:00 [DBG] Disposed connection to database '' on server '' (9ms).
2025-05-09 10:08:23.557 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 327.3838ms
2025-05-09 10:08:24.550 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:08:24.587 +03:00 [DBG] POST requests are not supported
2025-05-09 10:08:24.588 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:08:24.589 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:08:24.600 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:08:24.602 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:08:24.603 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:08:24.608 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:08:24.610 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:08:24.615 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:08:24.617 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:08:24.620 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:08:24.621 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:08:24.625 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:08:24.626 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:08:24.628 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:08:24.633 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:08:24.635 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:08:24.636 +03:00 [DBG] Connection id "0HNCEOPNJ4T1S", Request id "0HNCEOPNJ4T1S:00000002": started reading request body.
2025-05-09 10:08:24.639 +03:00 [DBG] Connection id "0HNCEOPNJ4T1S", Request id "0HNCEOPNJ4T1S:00000002": done reading request body.
2025-05-09 10:08:24.642 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:08:24.644 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:08:24.648 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:08:24.650 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:08:24.651 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:08:24.654 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:08:24.656 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:08:24.657 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 10:08:24.659 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:24.661 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:24.666 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:08:24.667 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:08:24.683 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2025-05-09 10:08:24.688 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:08:24.710 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:08:24.757 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:24.759 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:24.771 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 13ms reading results.
2025-05-09 10:08:24.773 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:24.774 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:08:24.809 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:24.840 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:24.853 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:08:24.854 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:08:24.855 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:08:24.857 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:08:24.863 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:08:24.865 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:24.867 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:24.868 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:24.870 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 10:08:24.871 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:24.873 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:08:24.875 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:08:24.876 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:08:24.877 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:08:24.882 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:24.886 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:08:24.887 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:24.890 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:24.891 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:08:24.892 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:08:24.894 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:08:24.897 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:08:24.921 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:08:24.925 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:24.927 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 10:08:24.930 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:24.933 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 10:08:24.936 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:25.023 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:08:25.026 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:25.038 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:25.040 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:25.042 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:08:25.071 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:08:25.073 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:08:25.076 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:25.084 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:25.085 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:08:25.086 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:08:25.088 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:08:25.090 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:08:25.097 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:08:25.100 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:08:25.101 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:25.103 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 10:08:25.105 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:25.106 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:08:25.108 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:08:25.110 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:08:25.111 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:08:25.115 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:08:25.117 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:08:25.118 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:08:25.119 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:08:25.120 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:08:25.122 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:08:25.123 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 498.624ms
2025-05-09 10:08:25.125 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:08:25.126 +03:00 [DBG] Connection id "0HNCEOPNJ4T1S" completed keep alive response.
2025-05-09 10:08:25.130 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:08:25.132 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:08:25.133 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 10:08:25.135 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 584.9866ms
2025-05-09 10:08:44.567 +03:00 [DBG] Connection id "0HNCEOPNJ4T1S" reset.
2025-05-09 10:08:44.582 +03:00 [DBG] Connection id "0HNCEOPNJ4T1S" disconnecting.
2025-05-09 10:08:44.585 +03:00 [DBG] Connection id "0HNCEOPNJ4T1S" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 10:08:44.586 +03:00 [DBG] Connection id "0HNCEOPNJ4T1S" stopped.
2025-05-09 10:09:13.484 +03:00 [DBG] Connection id "0HNCEOPNJ4T1T" accepted.
2025-05-09 10:09:13.522 +03:00 [DBG] Connection id "0HNCEOPNJ4T1T" started.
2025-05-09 10:09:13.534 +03:00 [DBG] Connection 0HNCEOPNJ4T1T established using the following protocol: "Tls12"
2025-05-09 10:09:13.627 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:09:13.638 +03:00 [DBG] POST requests are not supported
2025-05-09 10:09:13.639 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:09:13.639 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:09:13.641 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:09:13.642 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:09:13.642 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:09:13.643 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:09:13.645 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:09:13.646 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:09:13.647 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:09:13.648 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:09:13.662 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:09:13.663 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:09:13.665 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:09:13.675 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:09:13.676 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:09:13.677 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:09:13.678 +03:00 [DBG] Connection id "0HNCEOPNJ4T1T", Request id "0HNCEOPNJ4T1T:00000001": started reading request body.
2025-05-09 10:09:13.679 +03:00 [DBG] Connection id "0HNCEOPNJ4T1T", Request id "0HNCEOPNJ4T1T:00000001": done reading request body.
2025-05-09 10:09:13.680 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:09:13.681 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:09:13.682 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:09:13.683 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:09:13.689 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:09:13.692 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:09:13.694 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:09:13.695 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 10:09:13.696 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:09:13.698 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:09:13.699 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:09:13.707 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-05-09 10:09:13.708 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-05-09 10:09:13.710 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:09:13.728 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:09:13.736 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:09:13.751 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:09:13.766 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 29ms reading results.
2025-05-09 10:09:13.774 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:09:13.779 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (5ms).
2025-05-09 10:09:13.782 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:09:13.788 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:09:13.790 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:09:13.791 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:09:13.793 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 10:09:13.795 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:09:13.803 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:09:13.806 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:09:13.807 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:09:13.809 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:09:13.810 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 10:09:13.812 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:09:13.814 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:09:13.815 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:09:13.818 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:09:13.820 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:09:13.821 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2025-05-09 10:09:13.823 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:09:13.826 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:09:13.827 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:09:13.829 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:09:13.829 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:09:13.830 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:09:13.832 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:09:13.834 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:09:13.837 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:09:13.838 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:09:13.840 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 10:09:13.842 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:09:13.904 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:09:13.908 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:09:13.910 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:09:13.911 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 10:09:13.913 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:09:13.915 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:09:13.918 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:09:13.921 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:09:13.922 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:09:13.924 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:09:13.926 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:09:13.927 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:09:13.928 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:09:13.931 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:09:13.932 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:09:13.934 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 270.3185ms
2025-05-09 10:09:13.948 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:09:13.956 +03:00 [DBG] Connection id "0HNCEOPNJ4T1T" completed keep alive response.
2025-05-09 10:09:13.957 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:09:13.958 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:09:13.959 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 10:09:13.960 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 333.2067ms
2025-05-09 10:10:23.090 +03:00 [DBG] Connection id "0HNCEOPNJ4T1T" reset.
2025-05-09 10:10:23.094 +03:00 [DBG] Connection id "0HNCEOPNJ4T1T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 10:10:23.096 +03:00 [DBG] Connection id "0HNCEOPNJ4T1T" disconnecting.
2025-05-09 10:10:23.098 +03:00 [DBG] Connection id "0HNCEOPNJ4T1T" stopped.
2025-05-09 10:11:53.643 +03:00 [DBG] Connection id "0HNCEOPNJ4T1U" accepted.
2025-05-09 10:11:53.726 +03:00 [DBG] Connection id "0HNCEOPNJ4T1U" started.
2025-05-09 10:11:53.777 +03:00 [DBG] Connection 0HNCEOPNJ4T1U established using the following protocol: "Tls12"
2025-05-09 10:11:53.877 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:11:53.887 +03:00 [DBG] POST requests are not supported
2025-05-09 10:11:53.889 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:11:53.891 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:11:53.892 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:11:53.893 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:11:53.894 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:11:53.895 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:11:53.899 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:11:53.915 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:11:53.957 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:11:53.961 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:11:53.966 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:11:53.968 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:11:53.971 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:11:53.975 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:11:53.979 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:11:53.984 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:11:53.986 +03:00 [DBG] Connection id "0HNCEOPNJ4T1U", Request id "0HNCEOPNJ4T1U:00000001": started reading request body.
2025-05-09 10:11:53.988 +03:00 [DBG] Connection id "0HNCEOPNJ4T1U", Request id "0HNCEOPNJ4T1U:00000001": done reading request body.
2025-05-09 10:11:53.991 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:11:54.035 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:11:54.038 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:11:54.041 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:11:54.084 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:11:54.086 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:11:54.088 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:11:54.089 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 10:11:54.090 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.092 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.094 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:11:54.095 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:11:54.099 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 10:11:54.101 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:11:54.111 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:11:54.115 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:11:54.116 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.118 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 10:11:54.120 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.122 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:11:54.124 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.126 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.127 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:11:54.129 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:11:54.130 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:11:54.132 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:11:54.138 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:11:54.141 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:11:54.143 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:11:54.145 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.146 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 10:11:54.149 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.150 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:11:54.152 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:11:54.153 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:11:54.154 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:11:54.156 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:11:54.157 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:11:54.159 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.160 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.162 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:11:54.163 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:11:54.165 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:11:54.166 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:11:54.192 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:11:54.195 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.197 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 10:11:54.199 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.203 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-09 10:11:54.206 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:11:54.236 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:11:54.239 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:11:54.241 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:11:54.243 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:11:54.244 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:11:54.245 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:11:54.246 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:11:54.250 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.253 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.254 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:11:54.255 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:11:54.259 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 10:11:54.260 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:11:54.271 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:11:54.286 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:11:54.288 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.289 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 10:11:54.290 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.291 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:11:54.293 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:11:54.295 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:11:54.296 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:11:54.301 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:11:54.303 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:11:54.305 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:11:54.306 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:11:54.307 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:11:54.308 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:11:54.310 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 341.6641ms
2025-05-09 10:11:54.321 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:11:54.328 +03:00 [DBG] Connection id "0HNCEOPNJ4T1U" completed keep alive response.
2025-05-09 10:11:54.329 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:11:54.330 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:11:54.340 +03:00 [DBG] Disposed connection to database '' on server '' (10ms).
2025-05-09 10:11:54.342 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 464.9532ms
2025-05-09 10:12:20.888 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:12:20.894 +03:00 [DBG] POST requests are not supported
2025-05-09 10:12:20.894 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:12:20.895 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:12:20.897 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:12:20.898 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:12:20.899 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:12:20.901 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:12:20.906 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:12:20.907 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:12:20.908 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:12:20.917 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:12:20.923 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:12:20.925 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:12:20.927 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:12:20.928 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:12:20.929 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:12:20.943 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:12:20.947 +03:00 [DBG] Connection id "0HNCEOPNJ4T1U", Request id "0HNCEOPNJ4T1U:00000002": started reading request body.
2025-05-09 10:12:20.955 +03:00 [DBG] Connection id "0HNCEOPNJ4T1U", Request id "0HNCEOPNJ4T1U:00000002": done reading request body.
2025-05-09 10:12:20.956 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:12:20.957 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:12:20.959 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:12:20.960 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:12:20.962 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:12:20.998 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:12:21.000 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:12:21.001 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 10:12:21.003 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.005 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.007 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:12:21.008 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:12:21.010 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:12:21.011 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:12:21.015 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:12:21.017 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:21.018 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.020 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 10:12:21.021 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.023 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:12:21.024 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.026 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.027 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:12:21.028 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-09 10:12:21.030 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:12:21.031 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:12:21.034 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:12:21.037 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:21.038 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:21.040 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.041 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 10:12:21.043 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.045 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:12:21.047 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:12:21.048 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:12:21.049 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:12:21.051 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:21.054 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:12:21.055 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.057 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.058 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:12:21.059 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:12:21.061 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:12:21.062 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:12:21.105 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:12:21.108 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.109 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 10:12:21.111 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.112 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:12:21.114 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:21.116 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:12:21.117 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:21.121 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:21.123 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:21.124 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:12:21.126 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:12:21.128 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:12:21.129 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.131 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.135 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:12:21.137 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:12:21.139 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 10:12:21.140 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:12:21.149 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:12:21.151 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:12:21.153 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.155 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 10:12:21.157 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.158 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:12:21.160 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:21.161 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:12:21.162 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:12:21.164 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:12:21.166 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:12:21.167 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:12:21.168 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:12:21.169 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:12:21.171 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:12:21.173 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 248.1183ms
2025-05-09 10:12:21.174 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:12:21.176 +03:00 [DBG] Connection id "0HNCEOPNJ4T1U" completed keep alive response.
2025-05-09 10:12:21.177 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:12:21.178 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:21.180 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 10:12:21.183 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 294.7335ms
2025-05-09 10:12:36.132 +03:00 [DBG] Connection id "0HNCEOPNJ4T1U" reset.
2025-05-09 10:12:36.138 +03:00 [DBG] Connection id "0HNCEOPNJ4T1U" disconnecting.
2025-05-09 10:12:36.140 +03:00 [DBG] Connection id "0HNCEOPNJ4T1U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 10:12:36.144 +03:00 [DBG] Connection id "0HNCEOPNJ4T1U" stopped.
2025-05-09 10:12:40.756 +03:00 [DBG] Connection id "0HNCEOPNJ4T1V" accepted.
2025-05-09 10:12:40.760 +03:00 [DBG] Connection id "0HNCEOPNJ4T1V" started.
2025-05-09 10:12:40.850 +03:00 [DBG] Connection 0HNCEOPNJ4T1V established using the following protocol: "Tls12"
2025-05-09 10:12:40.956 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:12:41.008 +03:00 [DBG] POST requests are not supported
2025-05-09 10:12:41.009 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:12:41.012 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:12:41.015 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:12:41.018 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:12:41.022 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:12:41.024 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:12:41.027 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:12:41.030 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:12:41.042 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:12:41.047 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:12:41.051 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:12:41.054 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:12:41.055 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:12:41.056 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:12:41.058 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:12:41.060 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:12:41.061 +03:00 [DBG] Connection id "0HNCEOPNJ4T1V", Request id "0HNCEOPNJ4T1V:00000001": started reading request body.
2025-05-09 10:12:41.063 +03:00 [DBG] Connection id "0HNCEOPNJ4T1V", Request id "0HNCEOPNJ4T1V:00000001": done reading request body.
2025-05-09 10:12:41.065 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:12:41.066 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:12:41.068 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:12:41.070 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:12:41.071 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:12:41.074 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:12:41.076 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:12:41.077 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 10:12:41.078 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:41.079 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:41.081 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:12:41.083 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:12:41.090 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-05-09 10:12:41.091 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:12:41.096 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:12:41.098 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:41.100 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:41.105 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-09 10:12:41.107 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:41.108 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:12:41.110 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:41.112 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:41.113 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:12:41.114 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:12:41.116 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:12:41.123 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:12:41.127 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:12:41.129 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:41.131 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:41.132 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:41.133 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 10:12:41.138 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:41.139 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:12:41.141 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:12:41.142 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:12:41.143 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:12:41.145 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 0 entities written to the database.
2025-05-09 10:12:41.146 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:41.148 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:41.149 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:41.151 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:12:41.153 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:12:41.154 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:12:41.156 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:41.157 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:41.159 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:12:41.160 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:12:41.161 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:12:41.162 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:12:41.195 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:12:41.198 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:12:41.199 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:41.200 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 10:12:41.204 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:41.205 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:12:41.207 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:12:41.208 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:12:41.210 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:12:41.212 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:12:41.213 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:12:41.214 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:12:41.215 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:12:41.216 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:12:41.217 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:12:41.219 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 165.4211ms
2025-05-09 10:12:41.221 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:12:41.222 +03:00 [DBG] Connection id "0HNCEOPNJ4T1V" completed keep alive response.
2025-05-09 10:12:41.223 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:12:41.224 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:12:41.225 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 10:12:41.227 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 270.6408ms
2025-05-09 10:14:52.209 +03:00 [DBG] Connection id "0HNCEOPNJ4T1V" disconnecting.
2025-05-09 10:14:52.210 +03:00 [DBG] Connection id "0HNCEOPNJ4T1V" stopped.
2025-05-09 10:14:52.212 +03:00 [DBG] Connection id "0HNCEOPNJ4T1V" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 10:19:54.221 +03:00 [DBG] Connection id "0HNCEOPNJ4T20" accepted.
2025-05-09 10:19:54.227 +03:00 [DBG] Connection id "0HNCEOPNJ4T20" started.
2025-05-09 10:19:54.305 +03:00 [DBG] Connection 0HNCEOPNJ4T20 established using the following protocol: "Tls12"
2025-05-09 10:19:54.590 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:19:54.597 +03:00 [DBG] POST requests are not supported
2025-05-09 10:19:54.598 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:19:54.599 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:19:54.603 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:19:54.605 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:19:54.606 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:19:54.608 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:19:54.610 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:19:54.612 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:19:54.614 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:19:54.618 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:19:54.621 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:19:54.623 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:19:54.625 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:19:54.627 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:19:54.629 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:19:54.631 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:19:54.632 +03:00 [DBG] Connection id "0HNCEOPNJ4T20", Request id "0HNCEOPNJ4T20:00000001": started reading request body.
2025-05-09 10:19:54.635 +03:00 [DBG] Connection id "0HNCEOPNJ4T20", Request id "0HNCEOPNJ4T20:00000001": done reading request body.
2025-05-09 10:19:54.638 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:19:54.639 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:19:54.640 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:19:54.642 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:19:54.643 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:19:54.645 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:19:54.647 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:19:54.648 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 10:19:54.649 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:54.721 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:54.724 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:19:54.737 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2025-05-09 10:19:54.741 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2025-05-09 10:19:54.742 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:19:55.010 +03:00 [INF] Executed DbCommand (269ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:19:55.015 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:19:55.017 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.022 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-09 10:19:55.028 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.030 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:19:55.031 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.033 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.034 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:19:55.035 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:19:55.037 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:19:55.038 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:19:55.104 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:19:55.116 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:19:55.118 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:19:55.121 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.122 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-09 10:19:55.124 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.126 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:19:55.128 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:19:55.129 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:19:55.131 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:19:55.133 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:19:55.135 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:19:55.137 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.139 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.141 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:19:55.142 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-09 10:19:55.144 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:19:55.163 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:19:55.258 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:19:55.261 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.264 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 10:19:55.265 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.266 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:19:55.269 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:19:55.289 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:19:55.291 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:19:55.308 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:19:55.309 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:19:55.310 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:19:55.311 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:19:55.342 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:19:55.345 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.376 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.379 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:19:55.381 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:19:55.383 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 10:19:55.388 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:19:55.465 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:19:55.513 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:19:55.514 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.518 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-09 10:19:55.527 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.528 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:19:55.529 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:19:55.531 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:19:55.533 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:19:55.539 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:19:55.542 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:19:55.543 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:19:55.544 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:19:55.545 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:19:55.546 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:19:55.548 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 924.6971ms
2025-05-09 10:19:55.560 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:19:55.765 +03:00 [DBG] Connection id "0HNCEOPNJ4T20" completed keep alive response.
2025-05-09 10:19:55.767 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:19:55.769 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:19:55.779 +03:00 [DBG] Disposed connection to database '' on server '' (10ms).
2025-05-09 10:19:55.781 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 1190.4914ms
2025-05-09 10:20:00.136 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1093 - null null
2025-05-09 10:20:00.198 +03:00 [DBG] The request path  does not match the path filter
2025-05-09 10:20:00.199 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1093'
2025-05-09 10:20:00.200 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1093'
2025-05-09 10:20:00.202 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:20:00.547 +03:00 [DBG] Successfully validated the token.
2025-05-09 10:20:00.549 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-09 10:20:00.550 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:20:00.560 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-09 10:20:00.561 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:20:00.562 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:20:00.564 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:20:00.565 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:20:00.566 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:20:00.568 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-09 10:20:00.636 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-09 10:20:00.638 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-09 10:20:00.640 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-09 10:20:00.642 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-09 10:20:00.644 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-09 10:20:00.645 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-09 10:20:00.646 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-09 10:20:00.657 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:20:00.660 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:20:00.667 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:20:00.680 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:20:00.680 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:20:00.681 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:20:00.682 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-09 10:20:00.710 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 142.1626ms
2025-05-09 10:20:00.722 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:20:00.722 +03:00 [DBG] Connection id "0HNCEOPNJ4T20" completed keep alive response.
2025-05-09 10:20:00.725 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1093 - 200 null application/json; charset=utf-8 589.0104ms
2025-05-09 10:21:06.521 +03:00 [DBG] Connection id "0HNCEOPNJ4T20" reset.
2025-05-09 10:21:06.552 +03:00 [DBG] Connection id "0HNCEOPNJ4T20" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 10:21:06.554 +03:00 [DBG] Connection id "0HNCEOPNJ4T20" disconnecting.
2025-05-09 10:21:06.558 +03:00 [DBG] Connection id "0HNCEOPNJ4T20" stopped.
2025-05-09 10:21:26.032 +03:00 [DBG] Connection id "0HNCEOPNJ4T21" accepted.
2025-05-09 10:21:26.039 +03:00 [DBG] Connection id "0HNCEOPNJ4T21" started.
2025-05-09 10:21:26.128 +03:00 [DBG] Connection 0HNCEOPNJ4T21 established using the following protocol: "Tls12"
2025-05-09 10:21:26.463 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:21:26.480 +03:00 [DBG] POST requests are not supported
2025-05-09 10:21:26.482 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:21:26.484 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:21:26.486 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:21:26.488 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:21:26.489 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:21:26.491 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:21:26.495 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:21:26.496 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:21:26.498 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:21:26.500 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:21:26.503 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:21:26.506 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:21:26.511 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:21:26.513 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:21:26.518 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:21:26.520 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:21:26.523 +03:00 [DBG] Connection id "0HNCEOPNJ4T21", Request id "0HNCEOPNJ4T21:00000001": started reading request body.
2025-05-09 10:21:26.525 +03:00 [DBG] Connection id "0HNCEOPNJ4T21", Request id "0HNCEOPNJ4T21:00000001": done reading request body.
2025-05-09 10:21:26.530 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:21:26.532 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:21:26.535 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:21:26.539 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:21:26.544 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:21:26.547 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:21:26.550 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:21:26.551 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 10:21:26.553 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:26.558 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:26.564 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:21:26.567 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:21:26.572 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-05-09 10:21:26.602 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:21:26.621 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:21:26.628 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:21:26.631 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:26.718 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 89ms reading results.
2025-05-09 10:21:26.721 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:26.723 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 10:21:26.738 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:26.740 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:26.742 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:21:26.744 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:21:26.747 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 10:21:26.748 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:21:26.752 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:21:26.755 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:21:26.787 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:21:26.790 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:26.798 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 43ms reading results.
2025-05-09 10:21:26.820 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:26.823 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-09 10:21:26.824 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:21:26.825 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:21:26.831 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:21:26.832 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:21:26.835 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:21:26.890 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:26.917 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:26.918 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:21:26.937 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (19ms).
2025-05-09 10:21:26.939 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (21ms).
2025-05-09 10:21:26.941 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:21:27.668 +03:00 [INF] Executed DbCommand (727ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:21:27.685 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:27.686 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 10:21:27.689 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:27.691 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:21:27.694 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:21:27.698 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:21:27.701 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:21:27.708 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:21:27.721 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:21:27.722 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:21:27.723 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:21:27.724 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:21:27.725 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:27.748 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:27.750 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:21:27.753 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-09 10:21:27.756 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-09 10:21:27.765 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:21:27.785 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:21:27.814 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:21:27.816 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:27.818 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 10:21:27.819 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:27.820 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:21:27.825 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:21:27.833 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:21:27.834 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:21:27.836 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:21:27.839 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:21:27.840 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:21:27.841 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:21:27.842 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:21:27.848 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:21:27.850 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 1343.9989ms
2025-05-09 10:21:27.853 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:21:27.855 +03:00 [DBG] Connection id "0HNCEOPNJ4T21" completed keep alive response.
2025-05-09 10:21:27.856 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:21:27.862 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:21:27.867 +03:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-05-09 10:21:27.869 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 1406.0052ms
2025-05-09 10:21:28.498 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1093 - null null
2025-05-09 10:21:28.544 +03:00 [DBG] The request path  does not match the path filter
2025-05-09 10:21:28.553 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1093'
2025-05-09 10:21:28.555 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1093'
2025-05-09 10:21:28.556 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:21:28.577 +03:00 [DBG] Successfully validated the token.
2025-05-09 10:21:28.579 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-09 10:21:28.580 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:21:28.581 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-09 10:21:28.583 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:21:28.585 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:21:28.587 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:21:28.589 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:21:28.590 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:21:28.592 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-09 10:21:28.595 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-09 10:21:28.597 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-09 10:21:28.599 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-09 10:21:28.600 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-09 10:21:28.602 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-09 10:21:28.603 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-09 10:21:28.604 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-09 10:21:28.606 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:21:28.608 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:21:28.617 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:21:28.629 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:21:28.630 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:21:28.631 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:21:28.632 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-09 10:21:28.633 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 40.9288ms
2025-05-09 10:21:28.634 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:21:28.635 +03:00 [DBG] Connection id "0HNCEOPNJ4T21" completed keep alive response.
2025-05-09 10:21:28.658 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1093 - 200 null application/json; charset=utf-8 159.6653ms
2025-05-09 10:21:45.467 +03:00 [DBG] Connection id "0HNCEOPNJ4T21" reset.
2025-05-09 10:21:45.470 +03:00 [DBG] Connection id "0HNCEOPNJ4T21" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 10:21:45.472 +03:00 [DBG] Connection id "0HNCEOPNJ4T21" disconnecting.
2025-05-09 10:21:45.473 +03:00 [DBG] Connection id "0HNCEOPNJ4T21" stopped.
2025-05-09 10:22:00.589 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-09 10:22:10.634 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-09 10:22:10.646 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0309ms - processed: 0 items - remaining: 1 items
2025-05-09 10:22:14.820 +03:00 [DBG] Connection id "0HNCEOPNJ4T22" accepted.
2025-05-09 10:22:14.824 +03:00 [DBG] Connection id "0HNCEOPNJ4T22" started.
2025-05-09 10:22:14.883 +03:00 [DBG] Connection 0HNCEOPNJ4T22 established using the following protocol: "Tls12"
2025-05-09 10:22:14.985 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:22:15.041 +03:00 [DBG] POST requests are not supported
2025-05-09 10:22:15.043 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:22:15.045 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:22:15.050 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:22:15.053 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:22:15.060 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:22:15.062 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:22:15.067 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:22:15.069 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:22:15.070 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:22:15.073 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:22:15.074 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:22:15.076 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:22:15.078 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:22:15.079 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:22:15.081 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:22:15.083 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:22:15.084 +03:00 [DBG] Connection id "0HNCEOPNJ4T22", Request id "0HNCEOPNJ4T22:00000001": started reading request body.
2025-05-09 10:22:15.086 +03:00 [DBG] Connection id "0HNCEOPNJ4T22", Request id "0HNCEOPNJ4T22:00000001": done reading request body.
2025-05-09 10:22:15.087 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:22:15.088 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:22:15.089 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:22:15.090 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:22:15.092 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:22:15.094 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:22:15.096 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:22:15.096 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 10:22:15.097 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.101 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.103 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:22:15.104 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:22:15.105 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:22:15.106 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:22:15.111 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:22:15.113 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:15.115 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.117 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 10:22:15.119 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.120 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:22:15.122 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.123 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.125 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:22:15.127 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:22:15.128 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:22:15.131 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:22:15.136 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:22:15.139 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:15.140 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:15.141 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.143 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 10:22:15.144 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.146 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:22:15.152 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:22:15.153 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:22:15.154 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:22:15.155 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:15.158 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:22:15.159 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.160 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.162 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:22:15.163 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:22:15.166 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 10:22:15.168 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:22:15.220 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:22:15.223 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.224 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 10:22:15.225 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.226 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:22:15.228 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:15.230 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:22:15.233 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:15.236 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:15.237 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:15.238 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:22:15.239 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:22:15.240 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:22:15.241 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.242 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.243 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:22:15.244 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-09 10:22:15.245 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:22:15.246 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:22:15.253 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:22:15.255 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:22:15.256 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.257 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 10:22:15.259 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.261 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:22:15.264 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:15.268 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:22:15.269 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:22:15.274 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:22:15.276 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:22:15.278 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:22:15.279 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:22:15.280 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:22:15.283 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:22:15.284 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 208.0638ms
2025-05-09 10:22:15.286 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:22:15.287 +03:00 [DBG] Connection id "0HNCEOPNJ4T22" completed keep alive response.
2025-05-09 10:22:15.288 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:22:15.289 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:15.291 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 10:22:15.308 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 322.7444ms
2025-05-09 10:22:19.554 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1093 - null null
2025-05-09 10:22:19.604 +03:00 [DBG] The request path  does not match the path filter
2025-05-09 10:22:19.605 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1093'
2025-05-09 10:22:19.606 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1093'
2025-05-09 10:22:19.608 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:22:19.609 +03:00 [DBG] Successfully validated the token.
2025-05-09 10:22:19.613 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-09 10:22:19.614 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:22:19.615 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-09 10:22:19.617 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:22:19.619 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:22:19.621 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:22:19.624 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:22:19.625 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:22:19.627 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-09 10:22:19.630 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-09 10:22:19.631 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-09 10:22:19.632 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-09 10:22:19.633 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-09 10:22:19.634 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-09 10:22:19.637 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-09 10:22:19.638 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-09 10:22:19.640 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:22:19.641 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:22:19.643 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:22:19.644 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:22:19.645 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:22:19.646 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:22:19.647 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-09 10:22:19.649 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 22.1351ms
2025-05-09 10:22:19.650 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:22:19.653 +03:00 [DBG] Connection id "0HNCEOPNJ4T22" completed keep alive response.
2025-05-09 10:22:19.654 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1093 - 200 null application/json; charset=utf-8 100.2866ms
2025-05-09 10:22:20.651 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-09 10:22:20.652 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0896ms - processed: 1 items - remaining: 0 items
2025-05-09 10:22:51.815 +03:00 [DBG] Connection id "0HNCEOPNJ4T22" reset.
2025-05-09 10:22:51.824 +03:00 [DBG] Connection id "0HNCEOPNJ4T22" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 10:22:51.826 +03:00 [DBG] Connection id "0HNCEOPNJ4T22" disconnecting.
2025-05-09 10:22:51.829 +03:00 [DBG] Connection id "0HNCEOPNJ4T22" stopped.
2025-05-09 10:22:57.476 +03:00 [DBG] Connection id "0HNCEOPNJ4T23" accepted.
2025-05-09 10:22:57.479 +03:00 [DBG] Connection id "0HNCEOPNJ4T23" started.
2025-05-09 10:22:57.635 +03:00 [DBG] Connection 0HNCEOPNJ4T23 established using the following protocol: "Tls12"
2025-05-09 10:22:57.713 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:22:57.721 +03:00 [DBG] POST requests are not supported
2025-05-09 10:22:57.722 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:22:57.723 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:22:57.724 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:22:57.725 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:22:57.726 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:22:57.727 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:22:57.729 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:22:57.731 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:22:57.734 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:22:57.736 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:22:57.737 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:22:57.739 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:22:57.740 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:22:57.741 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:22:57.743 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:22:57.744 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:22:57.745 +03:00 [DBG] Connection id "0HNCEOPNJ4T23", Request id "0HNCEOPNJ4T23:00000001": started reading request body.
2025-05-09 10:22:57.746 +03:00 [DBG] Connection id "0HNCEOPNJ4T23", Request id "0HNCEOPNJ4T23:00000001": done reading request body.
2025-05-09 10:22:57.748 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:22:57.750 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:22:57.752 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:22:57.753 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:22:57.754 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:22:57.756 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:22:57.759 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:22:57.759 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 10:22:57.760 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:57.762 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:57.763 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:22:57.764 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:22:57.766 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:22:57.769 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:22:57.776 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:22:57.780 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:57.802 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:57.803 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 23ms reading results.
2025-05-09 10:22:57.805 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:57.807 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:22:57.809 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:57.810 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:57.812 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:22:57.813 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:22:57.814 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:22:57.816 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:22:57.821 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:22:57.823 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:57.824 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:57.825 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:57.826 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 10:22:57.828 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:57.829 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:22:57.831 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:22:57.832 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:22:57.835 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:22:57.836 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:57.838 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:22:57.840 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:57.841 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:57.843 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:22:57.844 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:22:57.845 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:22:57.847 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:22:57.987 +03:00 [INF] Executed DbCommand (140ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:22:57.991 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:58.059 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 68ms reading results.
2025-05-09 10:22:58.061 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:58.062 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:22:58.110 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:58.113 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:22:58.115 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:58.143 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:58.145 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:58.172 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:22:58.220 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:22:58.221 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:22:58.223 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:58.225 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:58.226 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:22:58.227 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:22:58.229 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:22:58.230 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:22:58.240 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:22:58.242 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:22:58.243 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:58.244 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 10:22:58.246 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:58.247 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:22:58.249 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:22:58.252 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:22:58.256 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:22:58.261 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:22:58.274 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:22:58.276 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:22:58.277 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:22:58.278 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:22:58.279 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:22:58.280 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 541.5498ms
2025-05-09 10:22:58.282 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:22:58.286 +03:00 [DBG] Connection id "0HNCEOPNJ4T23" completed keep alive response.
2025-05-09 10:22:58.288 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:22:58.289 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:22:58.291 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 10:22:58.292 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 579.5782ms
2025-05-09 10:23:48.479 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1093 - null null
2025-05-09 10:23:48.484 +03:00 [DBG] The request path  does not match the path filter
2025-05-09 10:23:48.486 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1093'
2025-05-09 10:23:48.499 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1093'
2025-05-09 10:23:48.502 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:23:48.503 +03:00 [DBG] Successfully validated the token.
2025-05-09 10:23:48.505 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-09 10:23:48.506 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:23:48.509 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-09 10:23:48.510 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:23:48.512 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:23:48.513 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:23:48.515 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:23:48.528 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:23:48.556 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-09 10:23:48.559 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-09 10:23:48.562 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-09 10:23:48.564 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-09 10:23:48.567 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-09 10:23:48.568 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-09 10:23:48.570 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-09 10:23:48.571 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-09 10:23:48.573 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:23:48.577 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:23:48.579 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:23:48.593 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:23:48.594 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:23:48.595 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:23:48.598 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-09 10:23:48.600 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 43.9831ms
2025-05-09 10:23:48.604 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:23:48.609 +03:00 [DBG] Connection id "0HNCEOPNJ4T23" completed keep alive response.
2025-05-09 10:23:48.639 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1093 - 200 null application/json; charset=utf-8 160.5741ms
2025-05-09 10:24:19.647 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-09 10:24:29.655 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-09 10:24:29.660 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0168ms - processed: 1 items - remaining: 0 items
2025-05-09 10:25:26.075 +03:00 [DBG] Connection id "0HNCEOPNJ4T23" received FIN.
2025-05-09 10:25:26.079 +03:00 [DBG] Connection id "0HNCEOPNJ4T23" disconnecting.
2025-05-09 10:25:26.090 +03:00 [DBG] Connection id "0HNCEOPNJ4T23" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 10:25:26.104 +03:00 [DBG] Connection id "0HNCEOPNJ4T23" stopped.
2025-05-09 10:38:29.859 +03:00 [DBG] Connection id "0HNCEOPNJ4T24" accepted.
2025-05-09 10:38:29.862 +03:00 [DBG] Connection id "0HNCEOPNJ4T24" started.
2025-05-09 10:38:29.896 +03:00 [DBG] Connection 0HNCEOPNJ4T24 established using the following protocol: "Tls12"
2025-05-09 10:38:30.046 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - application/json 90
2025-05-09 10:38:30.059 +03:00 [DBG] POST requests are not supported
2025-05-09 10:38:30.060 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-05-09 10:38:30.061 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-05-09 10:38:30.062 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:38:30.064 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 10:38:30.065 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:38:30.066 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO]] RefreshToken(System.String) on controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend).
2025-05-09 10:38:30.068 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:38:30.071 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:38:30.073 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:38:30.075 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:38:30.076 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:38:30.077 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:38:30.079 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.AuthController (Finance_Manager_Backend)
2025-05-09 10:38:30.082 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:38:30.084 +03:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name '' in request data ...
2025-05-09 10:38:30.094 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-09 10:38:30.096 +03:00 [DBG] Connection id "0HNCEOPNJ4T24", Request id "0HNCEOPNJ4T24:00000001": started reading request body.
2025-05-09 10:38:30.111 +03:00 [DBG] Connection id "0HNCEOPNJ4T24", Request id "0HNCEOPNJ4T24:00000001": done reading request body.
2025-05-09 10:38:30.116 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-05-09 10:38:30.131 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:38:30.162 +03:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:38:30.181 +03:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-05-09 10:38:30.183 +03:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-05-09 10:38:30.190 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 10:38:30.205 +03:00 [DBG] Creating DbConnection.
2025-05-09 10:38:30.206 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 10:38:30.212 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.319 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.334 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:38:30.337 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:38:30.341 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-05-09 10:38:30.344 +03:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:38:30.382 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__refreshToken_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[token] = @__refreshToken_0
2025-05-09 10:38:30.390 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:38:30.393 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.395 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-09 10:38:30.398 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.404 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (5ms).
2025-05-09 10:38:30.407 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.411 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.412 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:38:30.413 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:38:30.415 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:38:30.416 +03:00 [DBG] Executing DbCommand [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:38:30.424 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__existingToken_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__existingToken_UserId_0
2025-05-09 10:38:30.426 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:38:30.427 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:38:30.429 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.430 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 4ms reading results.
2025-05-09 10:38:30.432 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.433 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:38:30.437 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:38:30.438 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:38:30.439 +03:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:38:30.441 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:38:30.443 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:38:30.444 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.446 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.447 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:38:30.448 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:38:30.450 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 10:38:30.451 +03:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:38:30.491 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [refresh_tokens] SET [is_revoked] = @p0
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 10:38:30.496 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.498 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 10:38:30.499 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.501 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 10:38:30.504 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:38:30.506 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:38:30.589 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:38:30.593 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:38:30.595 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:38:30.598 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 10:38:30.600 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 10:38:30.601 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 10:38:30.617 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.625 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.628 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 10:38:30.629 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 10:38:30.632 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 10:38:30.634 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:38:30.645 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 10:38:30.647 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 10:38:30.649 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.650 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 10:38:30.677 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.679 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 10:38:30.680 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 10:38:30.682 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 10:38:30.683 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:38:30.687 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:38:30.689 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:38:30.690 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:38:30.691 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:38:30.692 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:38:30.694 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.AuthUserTokensDTO'.
2025-05-09 10:38:30.696 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend) in 619.1483ms
2025-05-09 10:38:30.706 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.AuthController.RefreshToken (Finance_Manager_Backend)'
2025-05-09 10:38:30.712 +03:00 [DBG] Connection id "0HNCEOPNJ4T24" completed keep alive response.
2025-05-09 10:38:30.713 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 10:38:30.714 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 10:38:30.718 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-09 10:38:30.724 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:49464/api/Auth/refresh-token - 200 null application/json; charset=utf-8 677.5315ms
2025-05-09 10:38:58.074 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:49464/api/User/1093 - null null
2025-05-09 10:38:58.097 +03:00 [DBG] The request path  does not match the path filter
2025-05-09 10:38:58.098 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/1093'
2025-05-09 10:38:58.099 +03:00 [DBG] Endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)' with route pattern 'api/User/{id}' is valid for the request path '/api/User/1093'
2025-05-09 10:38:58.102 +03:00 [DBG] Request matched endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:38:58.103 +03:00 [DBG] Successfully validated the token.
2025-05-09 10:38:58.106 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-09 10:38:58.111 +03:00 [INF] Executing endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:38:58.112 +03:00 [INF] Route matched with {action = "GetBalanceById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO]] GetBalanceById(Int32) on controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend).
2025-05-09 10:38:58.115 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-09 10:38:58.118 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-09 10:38:58.120 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Finance_Manager_Backend.Middleware.ValidationFilter"]
2025-05-09 10:38:58.123 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-09 10:38:58.130 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-05-09 10:38:58.133 +03:00 [DBG] Executing controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-09 10:38:58.136 +03:00 [DBG] Executed controller factory for controller Finance_Manager_Backend.Controllers.UserController (Finance_Manager_Backend)
2025-05-09 10:38:58.138 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-05-09 10:38:58.140 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-05-09 10:38:58.144 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-09 10:38:58.145 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-05-09 10:38:58.147 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-05-09 10:38:58.153 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-05-09 10:38:58.154 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-05-09 10:38:58.156 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-05-09 10:38:58.160 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-05-09 10:38:58.162 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-05-09 10:38:58.162 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-05-09 10:38:58.163 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-05-09 10:38:58.165 +03:00 [INF] Executing OkObjectResult, writing value of type 'Finance_Manager_Backend.BusinessLogic.Models.DTOs.UserBalanceDTO'.
2025-05-09 10:38:58.166 +03:00 [INF] Executed action Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend) in 33.6237ms
2025-05-09 10:38:58.170 +03:00 [INF] Executed endpoint 'Finance_Manager_Backend.Controllers.UserController.GetBalanceById (Finance_Manager_Backend)'
2025-05-09 10:38:58.178 +03:00 [DBG] Connection id "0HNCEOPNJ4T24" completed keep alive response.
2025-05-09 10:38:58.182 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:49464/api/User/1093 - 200 null application/json; charset=utf-8 108.3118ms
2025-05-09 10:40:58.137 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'CurrencyConverterService'
2025-05-09 10:41:08.140 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-05-09 10:41:08.141 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0089ms - processed: 1 items - remaining: 0 items
2025-05-09 10:41:09.462 +03:00 [DBG] Connection id "0HNCEOPNJ4T24" disconnecting.
2025-05-09 10:41:09.465 +03:00 [DBG] Connection id "0HNCEOPNJ4T24" stopped.
2025-05-09 10:41:09.466 +03:00 [DBG] Connection id "0HNCEOPNJ4T24" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 11:17:15.314 +03:00 [INF] Application is shutting down...
2025-05-09 11:17:15.317 +03:00 [DBG] Hosting stopping
2025-05-09 11:17:15.394 +03:00 [DBG] Hosting stopped
2025-05-09 22:14:52.314 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-09 22:14:53.611 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:14:54.665 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2025-05-09 22:14:55.135 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<User>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        User entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            User instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(User);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (User)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Email>k__BackingField = dataReader.GetString(2);
                                instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                instance.<Role>k__BackingField = dataReader.GetString(5);
                                instance.<Salt>k__BackingField = dataReader.GetString(6);
                                instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 22:14:55.209 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:14:55.290 +03:00 [DBG] Created DbConnection. (80ms).
2025-05-09 22:14:55.295 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:14:58.868 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:14:58.876 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:14:58.916 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (38ms).
2025-05-09 22:14:58.919 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (47ms).
2025-05-09 22:14:59.003 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 22:15:00.140 +03:00 [INF] Executed DbCommand (1,207ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 22:15:00.190 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:00.304 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:00.314 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:00.316 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:00.322 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:00.329 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 182ms reading results.
2025-05-09 22:15:00.332 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:00.340 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (7ms).
2025-05-09 22:15:00.344 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:15:00.347 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:15:00.365 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:15:00.577 +03:00 [DBG] Executing 2 update commands as a batch.
2025-05-09 22:15:00.584 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:00.587 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:00.592 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 22:15:00.602 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 22:15:00.609 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:15:00.610 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:15:00.614 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-09 22:15:00.618 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 22:15:01.835 +03:00 [INF] Executed DbCommand (1,218ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 22:15:01.848 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:01.851 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 13ms reading results.
2025-05-09 22:15:01.860 +03:00 [DBG] Committing transaction.
2025-05-09 22:15:01.866 +03:00 [DBG] Committed transaction.
2025-05-09 22:15:01.871 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:01.875 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (4ms).
2025-05-09 22:15:01.879 +03:00 [DBG] Disposing transaction.
2025-05-09 22:15:01.887 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:01.891 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:01.894 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-05-09 22:15:01.898 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-09 22:15:01.907 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 22:15:01.914 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:01.918 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:01.919 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:15:01.920 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:15:01.921 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:15:01.925 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 22:15:01.950 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 22:15:02.001 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.013 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.016 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.018 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.020 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.021 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.023 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.025 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.027 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.029 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.031 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:02.032 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 79ms reading results.
2025-05-09 22:15:02.034 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:02.035 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:15:02.037 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:15:02.038 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:15:02.046 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:15:02.050 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 22:15:02.051 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:02.052 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:02.054 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 22:15:02.055 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 22:15:02.058 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:15:02.059 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:15:02.061 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:15:02.062 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 22:15:02.263 +03:00 [INF] Executed DbCommand (201ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 22:15:02.267 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:02.268 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 22:15:02.269 +03:00 [DBG] Committing transaction.
2025-05-09 22:15:02.271 +03:00 [DBG] Committed transaction.
2025-05-09 22:15:02.271 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:02.274 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 22:15:02.277 +03:00 [DBG] Disposing transaction.
2025-05-09 22:15:02.278 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.281 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.283 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.284 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.287 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:02.289 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 22:15:02.293 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:15:02.297 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:02.299 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-09 22:15:02.552 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:15:02.589 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-09 22:15:02.800 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 22:15:02.822 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:15:02.824 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-09 22:15:02.827 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:02.828 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:02.830 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:15:02.832 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:15:02.834 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 22:15:02.836 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:15:02.971 +03:00 [INF] Executed DbCommand (135ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:15:02.979 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:02.981 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-09 22:15:02.983 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:02.988 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (4ms).
2025-05-09 22:15:03.034 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:03.043 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:03.045 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:15:03.047 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:15:03.049 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:15:03.063 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:03.065 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:03.066 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:15:03.068 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:15:03.071 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 22:15:03.072 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:15:03.193 +03:00 [INF] Executed DbCommand (121ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:15:03.202 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:03.206 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:03.208 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 12ms reading results.
2025-05-09 22:15:03.210 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:03.211 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:15:03.217 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:03.219 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 22:15:04.027 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.043 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.047 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.049 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:15:04.051 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:15:04.058 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:15:04.064 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.066 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.069 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:15:04.070 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:15:04.072 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:15:04.073 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 22:15:04.153 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 22:15:04.160 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.163 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.164 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-09 22:15:04.166 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.168 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:15:04.170 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.172 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 22:15:04.175 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __authData_UserDTO_Id_0)'
2025-05-09 22:15:04.184 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 22:15:04.189 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.190 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.193 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:15:04.194 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:15:04.196 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:15:04.197 +03:00 [DBG] Executing DbCommand [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 22:15:04.202 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 22:15:04.205 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.207 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 22:15:04.210 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.212 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:15:04.221 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.224 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.227 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.229 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.231 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.233 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.235 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.240 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.243 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.246 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.247 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:15:04.248 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:15:04.250 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:15:04.255 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 22:15:04.261 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.262 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.264 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:15:04.266 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:15:04.267 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:15:04.269 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:15:04.610 +03:00 [INF] Executed DbCommand (341ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:15:04.614 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.617 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.619 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.620 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.622 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.623 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.626 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 13ms reading results.
2025-05-09 22:15:04.628 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.630 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:15:04.634 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.636 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.638 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.640 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.644 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.646 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 22:15:04.650 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.707 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.712 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.819 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.820 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.823 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.827 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.828 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.830 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.832 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.833 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.835 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.836 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.838 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.839 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.841 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.843 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.845 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.847 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.848 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.850 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.851 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.853 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.855 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.857 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.861 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.863 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.865 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.866 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.868 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.870 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.871 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.873 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.874 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.877 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.879 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.880 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.882 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.884 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.886 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.888 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:15:04.889 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:15:04.893 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:15:04.896 +03:00 [DBG] Executing 20 update commands as a batch.
2025-05-09 22:15:04.897 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.899 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.901 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:15:04.902 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:15:04.904 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:15:04.905 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:15:04.932 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:15:04.938 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.941 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.944 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.946 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.948 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.949 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.950 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.951 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.953 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.954 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.956 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.957 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.960 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.962 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.964 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.965 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.967 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.968 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.970 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.971 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:04.973 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.974 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 37ms reading results.
2025-05-09 22:15:04.978 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:04.979 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:15:04.982 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.983 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.985 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.987 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.993 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.996 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:04.998 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.001 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.003 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.005 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.007 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.011 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.014 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.016 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.018 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.020 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.022 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.024 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.029 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.031 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.033 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 20 entities written to the database.
2025-05-09 22:15:05.036 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.051 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.053 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.054 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.056 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.058 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.061 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.063 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.064 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:15:05.066 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:15:05.070 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:15:05.072 +03:00 [DBG] Executing 4 update commands as a batch.
2025-05-09 22:15:05.074 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.077 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.079 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:15:05.080 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:15:05.081 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:15:05.083 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 22:15:05.118 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 22:15:05.122 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:05.124 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:05.126 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:05.127 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:05.129 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.130 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-09 22:15:05.132 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.133 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:15:05.138 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.140 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.142 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.145 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.147 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 4 entities written to the database.
2025-05-09 22:15:05.148 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:15:05.149 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.151 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 22:15:05.165 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:15:05.189 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:15:05.190 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 22:15:05.192 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.194 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.195 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:15:05.196 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:15:05.198 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:15:05.199 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:15:05.203 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:15:05.206 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.208 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 22:15:05.211 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.213 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:15:05.229 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.231 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.233 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:15:05.234 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:15:05.235 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:15:05.237 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.238 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.242 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:15:05.246 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-05-09 22:15:05.247 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-09 22:15:05.249 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:15:05.255 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:15:05.257 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:15:05.260 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.262 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-09 22:15:05.264 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.266 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:15:05.268 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:15:05.270 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 22:15:05.272 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:15:05.273 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.274 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 22:15:05.633 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-09 22:15:05.747 +03:00 [DBG] Hosting starting
2025-05-09 22:15:05.865 +03:00 [INF] User profile is available. Using 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-09 22:15:05.882 +03:00 [DBG] Reading data from file 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys\key-036e1e5f-5347-47d7-8236-0b64ed0a76a1.xml'.
2025-05-09 22:15:05.885 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:15:05.890 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.ExpiresAt < DateTime.UtcNow)'
2025-05-09 22:15:05.890 +03:00 [DBG] Found key {036e1e5f-5347-47d7-8236-0b64ed0a76a1}.
2025-05-09 22:15:05.900 +03:00 [DBG] Considering key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} with expiration date 2025-07-16 20:11:06Z as default key.
2025-05-09 22:15:05.904 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 22:15:05.905 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-09 22:15:05.908 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 22:15:05.912 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-09 22:15:05.914 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-09 22:15:05.917 +03:00 [DBG] Using key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} as the default key.
2025-05-09 22:15:05.919 +03:00 [DBG] Key ring with default key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} was loaded during application startup.
2025-05-09 22:15:05.957 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<RefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE()) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE(), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        RefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            RefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(RefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (RefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                        {
                            return 
                            {
                                RefreshToken instance;
                                instance = new RefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Token>k__BackingField = dataReader.GetString(4);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(RefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 22:15:05.964 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:15:05.965 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-09 22:15:05.967 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.968 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.969 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:15:05.971 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:15:05.972 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:15:05.973 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 22:15:05.982 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 22:15:05.985 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.986 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 22:15:05.988 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:05.989 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:15:05.991 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:15:05.995 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:15:06.000 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-09 22:15:06.909 +03:00 [INF] Now listening on: https://localhost:49464
2025-05-09 22:15:06.917 +03:00 [INF] Now listening on: http://localhost:49465
2025-05-09 22:15:06.919 +03:00 [DBG] Loaded hosting startup assembly Finance_Manager_Backend
2025-05-09 22:15:06.920 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-09 22:15:06.921 +03:00 [INF] Hosting environment: Development
2025-05-09 22:15:06.922 +03:00 [INF] Content root path: G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend
2025-05-09 22:15:06.923 +03:00 [DBG] Hosting started
2025-05-09 22:15:40.314 +03:00 [DBG] Connection id "0HNCF5NHHR187" accepted.
2025-05-09 22:15:40.326 +03:00 [DBG] Connection id "0HNCF5NHHR188" accepted.
2025-05-09 22:15:40.361 +03:00 [DBG] Connection id "0HNCF5NHHR189" accepted.
2025-05-09 22:15:40.363 +03:00 [DBG] Connection id "0HNCF5NHHR187" started.
2025-05-09 22:15:40.363 +03:00 [DBG] Connection id "0HNCF5NHHR188" started.
2025-05-09 22:15:40.364 +03:00 [DBG] Connection id "0HNCF5NHHR189" started.
2025-05-09 22:15:40.613 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger - null null
2025-05-09 22:15:40.645 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-09 22:15:40.700 +03:00 [DBG] Connection 0HNCF5NHHR188 established using the following protocol: "Tls12"
2025-05-09 22:15:40.918 +03:00 [DBG] Connection id "0HNCF5NHHR189" completed keep alive response.
2025-05-09 22:15:40.933 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger - 301 0 null 321.436ms
2025-05-09 22:15:40.943 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/index.html - null null
2025-05-09 22:15:40.981 +03:00 [DBG] Connection id "0HNCF5NHHR188" received FIN.
2025-05-09 22:15:40.981 +03:00 [DBG] Connection id "0HNCF5NHHR187" received FIN.
2025-05-09 22:15:40.996 +03:00 [DBG] Connection id "0HNCF5NHHR188" is closed. The last processed stream ID was 0.
2025-05-09 22:15:41.010 +03:00 [DBG] The connection queue processing loop for 0HNCF5NHHR188 completed.
2025-05-09 22:15:41.013 +03:00 [DBG] Connection id "0HNCF5NHHR187" disconnecting.
2025-05-09 22:15:41.014 +03:00 [DBG] Connection id "0HNCF5NHHR188" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:15:41.016 +03:00 [DBG] Connection id "0HNCF5NHHR187" stopped.
2025-05-09 22:15:41.020 +03:00 [DBG] Connection id "0HNCF5NHHR187" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:15:41.027 +03:00 [DBG] Connection id "0HNCF5NHHR188" stopped.
2025-05-09 22:15:41.268 +03:00 [DBG] Connection id "0HNCF5NHHR189" completed keep alive response.
2025-05-09 22:15:41.272 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/index.html - 200 null text/html;charset=utf-8 327.804ms
2025-05-09 22:15:42.597 +03:00 [DBG] Connection id "0HNCF5NHHR18A" accepted.
2025-05-09 22:15:42.598 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/swagger-ui.css - null null
2025-05-09 22:15:42.601 +03:00 [DBG] Connection id "0HNCF5NHHR18B" accepted.
2025-05-09 22:15:42.601 +03:00 [DBG] Connection id "0HNCF5NHHR18A" started.
2025-05-09 22:15:42.605 +03:00 [DBG] Connection id "0HNCF5NHHR18C" accepted.
2025-05-09 22:15:42.605 +03:00 [DBG] Connection id "0HNCF5NHHR18B" started.
2025-05-09 22:15:42.608 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/index.css - null null
2025-05-09 22:15:42.610 +03:00 [DBG] Connection id "0HNCF5NHHR18D" accepted.
2025-05-09 22:15:42.611 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/swagger-ui-bundle.js - null null
2025-05-09 22:15:42.614 +03:00 [DBG] Connection id "0HNCF5NHHR18C" started.
2025-05-09 22:15:42.618 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/swagger-ui-standalone-preset.js - null null
2025-05-09 22:15:42.652 +03:00 [INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
2025-05-09 22:15:42.654 +03:00 [DBG] Connection id "0HNCF5NHHR18A" completed keep alive response.
2025-05-09 22:15:42.655 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/index.css - 200 202 text/css 46.4006ms
2025-05-09 22:15:42.660 +03:00 [DBG] Connection id "0HNCF5NHHR18D" started.
2025-05-09 22:15:42.661 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/index.js - null null
2025-05-09 22:15:42.683 +03:00 [DBG] Connection id "0HNCF5NHHR18D" completed keep alive response.
2025-05-09 22:15:42.687 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-05-09 22:15:42.690 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-05-09 22:15:42.695 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/index.js - 200 null application/javascript;charset=utf-8 33.753ms
2025-05-09 22:15:42.703 +03:00 [DBG] Connection id "0HNCF5NHHR189" completed keep alive response.
2025-05-09 22:15:42.704 +03:00 [DBG] Connection id "0HNCF5NHHR18C" completed keep alive response.
2025-05-09 22:15:42.709 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/swagger-ui.css - 200 154949 text/css 111.25ms
2025-05-09 22:15:42.710 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/swagger-ui-standalone-preset.js - 200 229223 text/javascript 91.8733ms
2025-05-09 22:15:43.331 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-05-09 22:15:43.345 +03:00 [DBG] Connection id "0HNCF5NHHR18B" completed keep alive response.
2025-05-09 22:15:43.350 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/swagger-ui-bundle.js - 200 1466908 text/javascript 738.5629ms
2025-05-09 22:15:43.919 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - null null
2025-05-09 22:15:43.961 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/favicon-32x32.png - null null
2025-05-09 22:15:43.965 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-05-09 22:15:43.968 +03:00 [DBG] Connection id "0HNCF5NHHR18C" completed keep alive response.
2025-05-09 22:15:43.970 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/favicon-32x32.png - 200 628 image/png 8.721ms
2025-05-09 22:15:44.433 +03:00 [DBG] Connection id "0HNCF5NHHR18B" completed keep alive response.
2025-05-09 22:15:44.437 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 517.4934ms
2025-05-09 22:15:47.351 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - null null
2025-05-09 22:15:47.529 +03:00 [DBG] Connection id "0HNCF5NHHR18B" completed keep alive response.
2025-05-09 22:15:47.536 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 185.1833ms
2025-05-09 22:15:48.189 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/favicon.ico - null null
2025-05-09 22:15:48.200 +03:00 [DBG] The request path  does not match the path filter
2025-05-09 22:15:48.231 +03:00 [DBG] No candidates found for the request path '/favicon.ico'
2025-05-09 22:15:48.233 +03:00 [DBG] Request did not match any endpoints
2025-05-09 22:15:48.235 +03:00 [DBG] Https port '49464' discovered from server endpoints.
2025-05-09 22:15:48.238 +03:00 [DBG] Redirecting to 'https://localhost:49464/favicon.ico'.
2025-05-09 22:15:48.240 +03:00 [DBG] Connection id "0HNCF5NHHR18B" completed keep alive response.
2025-05-09 22:15:48.242 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/favicon.ico - 307 0 null 53.7774ms
2025-05-09 22:15:48.245 +03:00 [DBG] Connection id "0HNCF5NHHR18E" accepted.
2025-05-09 22:15:48.250 +03:00 [DBG] Connection id "0HNCF5NHHR18E" started.
2025-05-09 22:15:48.259 +03:00 [DBG] Connection 0HNCF5NHHR18E established using the following protocol: "Tls12"
2025-05-09 22:15:48.272 +03:00 [INF] Request starting HTTP/2 GET https://localhost:49464/favicon.ico - null null
2025-05-09 22:15:48.279 +03:00 [DBG] The request path  does not match the path filter
2025-05-09 22:15:48.281 +03:00 [DBG] No candidates found for the request path '/favicon.ico'
2025-05-09 22:15:48.283 +03:00 [DBG] Request did not match any endpoints
2025-05-09 22:15:48.464 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-09 22:15:48.467 +03:00 [INF] Request finished HTTP/2 GET https://localhost:49464/favicon.ico - 404 0 null 195.1247ms
2025-05-09 22:15:48.470 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:49464/favicon.ico, Response status code: 404
2025-05-09 22:15:50.984 +03:00 [DBG] Connection id "0HNCF5NHHR189" received FIN.
2025-05-09 22:15:50.984 +03:00 [DBG] Connection id "0HNCF5NHHR18A" received FIN.
2025-05-09 22:15:50.984 +03:00 [DBG] Connection id "0HNCF5NHHR18D" received FIN.
2025-05-09 22:15:50.984 +03:00 [DBG] Connection id "0HNCF5NHHR18C" received FIN.
2025-05-09 22:15:50.985 +03:00 [DBG] Connection id "0HNCF5NHHR18B" received FIN.
2025-05-09 22:15:50.986 +03:00 [DBG] Connection id "0HNCF5NHHR18E" received FIN.
2025-05-09 22:15:50.988 +03:00 [DBG] Connection id "0HNCF5NHHR189" disconnecting.
2025-05-09 22:15:50.989 +03:00 [DBG] Connection id "0HNCF5NHHR18A" disconnecting.
2025-05-09 22:15:50.991 +03:00 [DBG] Connection id "0HNCF5NHHR18D" disconnecting.
2025-05-09 22:15:50.992 +03:00 [DBG] Connection id "0HNCF5NHHR18C" disconnecting.
2025-05-09 22:15:50.993 +03:00 [DBG] Connection id "0HNCF5NHHR18B" disconnecting.
2025-05-09 22:15:50.994 +03:00 [DBG] Connection id "0HNCF5NHHR18E" is closed. The last processed stream ID was 1.
2025-05-09 22:15:50.995 +03:00 [DBG] Connection id "0HNCF5NHHR18E" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:15:50.997 +03:00 [DBG] Connection id "0HNCF5NHHR189" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:15:50.999 +03:00 [DBG] Connection id "0HNCF5NHHR18A" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:15:51.001 +03:00 [DBG] Connection id "0HNCF5NHHR18D" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:15:51.002 +03:00 [DBG] Connection id "0HNCF5NHHR18C" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:15:51.004 +03:00 [DBG] Connection id "0HNCF5NHHR18B" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:15:51.007 +03:00 [DBG] The connection queue processing loop for 0HNCF5NHHR18E completed.
2025-05-09 22:15:51.018 +03:00 [DBG] Connection id "0HNCF5NHHR18E" stopped.
2025-05-09 22:15:51.019 +03:00 [DBG] Connection id "0HNCF5NHHR189" stopped.
2025-05-09 22:15:51.019 +03:00 [DBG] Connection id "0HNCF5NHHR18D" stopped.
2025-05-09 22:15:51.019 +03:00 [DBG] Connection id "0HNCF5NHHR18A" stopped.
2025-05-09 22:15:51.019 +03:00 [DBG] Connection id "0HNCF5NHHR18C" stopped.
2025-05-09 22:15:51.019 +03:00 [DBG] Connection id "0HNCF5NHHR18B" stopped.
2025-05-09 22:28:31.279 +03:00 [INF] Application is shutting down...
2025-05-09 22:28:31.281 +03:00 [DBG] Hosting stopping
2025-05-09 22:28:31.488 +03:00 [DBG] Hosting stopped
2025-05-09 22:41:19.651 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-09 22:41:20.688 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:41:20.839 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2025-05-09 22:41:21.101 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<User>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        User entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            User instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(User);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (User)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Email>k__BackingField = dataReader.GetString(2);
                                instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                instance.<Role>k__BackingField = dataReader.GetString(5);
                                instance.<Salt>k__BackingField = dataReader.GetString(6);
                                instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 22:41:21.181 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:41:21.259 +03:00 [DBG] Created DbConnection. (106ms).
2025-05-09 22:41:21.269 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:21.708 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:21.714 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:21.722 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-05-09 22:41:21.725 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-05-09 22:41:21.732 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 22:41:21.757 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 22:41:21.801 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:21.887 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:21.902 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:21.904 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:21.910 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:21.921 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 154ms reading results.
2025-05-09 22:41:21.925 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:21.932 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (6ms).
2025-05-09 22:41:21.938 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:41:21.942 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:41:21.965 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:41:22.176 +03:00 [DBG] Executing 2 update commands as a batch.
2025-05-09 22:41:22.186 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.190 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.194 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 22:41:22.205 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 22:41:22.211 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:22.213 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:41:22.218 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-09 22:41:22.223 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 22:41:22.314 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 22:41:22.326 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.329 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 13ms reading results.
2025-05-09 22:41:22.336 +03:00 [DBG] Committing transaction.
2025-05-09 22:41:22.340 +03:00 [DBG] Committed transaction.
2025-05-09 22:41:22.343 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.345 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 22:41:22.349 +03:00 [DBG] Disposing transaction.
2025-05-09 22:41:22.356 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.358 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.362 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-05-09 22:41:22.366 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-09 22:41:22.376 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 22:41:22.382 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.386 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.387 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:22.388 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:41:22.390 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:41:22.392 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 22:41:22.396 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 22:41:22.412 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.428 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.432 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.434 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.437 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.438 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.441 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.442 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.444 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.447 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.451 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.453 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 54ms reading results.
2025-05-09 22:41:22.455 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.457 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:41:22.459 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:41:22.460 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:41:22.472 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:41:22.476 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 22:41:22.478 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.480 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.482 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 22:41:22.484 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 22:41:22.486 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:22.487 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:41:22.489 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:41:22.490 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 22:41:22.516 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 22:41:22.520 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.522 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 22:41:22.524 +03:00 [DBG] Committing transaction.
2025-05-09 22:41:22.525 +03:00 [DBG] Committed transaction.
2025-05-09 22:41:22.526 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.528 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:41:22.530 +03:00 [DBG] Disposing transaction.
2025-05-09 22:41:22.531 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.533 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.536 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.538 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.540 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:22.542 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 22:41:22.544 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:41:22.548 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.550 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-09 22:41:22.793 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:41:22.805 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-09 22:41:22.891 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 22:41:22.940 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:41:22.942 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-09 22:41:22.943 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.945 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.946 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:22.948 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:41:22.952 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-09 22:41:22.954 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:41:22.959 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:41:22.967 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.970 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 7ms reading results.
2025-05-09 22:41:22.972 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:22.973 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:41:23.024 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.035 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.037 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:41:23.038 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:41:23.040 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:41:23.058 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.059 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.061 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:23.062 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:41:23.064 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:41:23.066 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:41:23.072 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:41:23.081 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.085 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.087 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 12ms reading results.
2025-05-09 22:41:23.089 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.090 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:41:23.095 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.097 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 22:41:23.376 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.397 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.403 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.406 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:41:23.407 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:41:23.416 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:41:23.423 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.425 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.427 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:23.429 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:41:23.431 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:41:23.434 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 22:41:23.440 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 22:41:23.447 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.450 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.453 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-09 22:41:23.454 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.456 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:41:23.458 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.461 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 22:41:23.465 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __authData_UserDTO_Id_0)'
2025-05-09 22:41:23.474 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 22:41:23.479 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.480 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.482 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:23.484 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:41:23.486 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 22:41:23.488 +03:00 [DBG] Executing DbCommand [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 22:41:23.493 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 22:41:23.497 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.498 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 22:41:23.502 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.504 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:41:23.514 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.521 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.524 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.526 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.528 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.530 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.532 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.535 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.537 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.540 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.542 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:41:23.543 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:41:23.545 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:41:23.550 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 22:41:23.555 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.557 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.558 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:23.559 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:41:23.561 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:41:23.562 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:41:23.572 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:41:23.576 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.579 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.581 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.582 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.584 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.585 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.587 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 12ms reading results.
2025-05-09 22:41:23.589 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.591 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:41:23.593 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.595 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.597 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.599 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.602 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.604 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 22:41:23.610 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.629 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.631 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.633 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.637 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.639 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.641 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.643 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.645 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.647 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.648 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.652 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.654 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.656 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.658 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.670 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.672 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.674 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.675 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.677 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.678 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.680 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.682 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.686 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.687 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.689 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.691 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.693 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.695 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.698 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.699 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.704 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.706 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.708 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.709 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.712 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.714 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.716 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.719 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.721 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.723 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:41:23.725 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:41:23.731 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:41:23.735 +03:00 [DBG] Executing 20 update commands as a batch.
2025-05-09 22:41:23.737 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.739 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.741 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:23.743 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:41:23.744 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:41:23.746 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:41:23.774 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:41:23.779 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.782 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.784 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.785 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.787 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.791 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.793 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.794 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.796 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.797 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.799 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.802 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.804 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.806 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.807 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.810 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.811 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.813 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.814 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.816 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.818 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.819 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 42ms reading results.
2025-05-09 22:41:23.821 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.823 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:41:23.825 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.827 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.829 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.831 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.834 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.836 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.838 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.841 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.843 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.845 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.847 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.849 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.851 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.854 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.856 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.858 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.860 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.862 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.864 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.866 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.868 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 20 entities written to the database.
2025-05-09 22:41:23.872 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.885 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.886 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.888 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.890 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.892 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.894 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.895 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.897 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:41:23.898 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:41:23.903 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:41:23.906 +03:00 [DBG] Executing 4 update commands as a batch.
2025-05-09 22:41:23.907 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.909 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.911 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:23.912 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:41:23.914 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:41:23.916 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 22:41:23.930 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 22:41:23.937 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.939 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.941 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.943 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:23.945 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.946 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 13ms reading results.
2025-05-09 22:41:23.948 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.950 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:41:23.956 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.959 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.961 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.964 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:23.968 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 4 entities written to the database.
2025-05-09 22:41:23.970 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:41:23.972 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:23.974 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 22:41:23.994 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:41:24.074 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:41:24.075 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 22:41:24.077 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.078 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.080 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:24.081 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:41:24.082 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:41:24.084 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:41:24.088 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:41:24.091 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.092 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 22:41:24.094 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.095 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:41:24.108 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:24.110 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:24.111 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:41:24.112 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:41:24.114 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:41:24.115 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.117 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.118 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:24.119 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:41:24.121 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:41:24.123 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:41:24.143 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:41:24.145 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:41:24.147 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.148 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 22:41:24.150 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.153 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-09 22:41:24.155 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:41:24.158 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 22:41:24.160 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:41:24.161 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.163 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 22:41:24.374 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-09 22:41:24.454 +03:00 [DBG] Hosting starting
2025-05-09 22:41:24.476 +03:00 [INF] User profile is available. Using 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-09 22:41:24.514 +03:00 [DBG] Reading data from file 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys\key-036e1e5f-5347-47d7-8236-0b64ed0a76a1.xml'.
2025-05-09 22:41:24.519 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:41:24.528 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.ExpiresAt < DateTime.UtcNow)'
2025-05-09 22:41:24.533 +03:00 [DBG] Found key {036e1e5f-5347-47d7-8236-0b64ed0a76a1}.
2025-05-09 22:41:24.545 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<RefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE()) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE(), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        RefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            RefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(RefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (RefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                        {
                            return 
                            {
                                RefreshToken instance;
                                instance = new RefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Token>k__BackingField = dataReader.GetString(4);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(RefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 22:41:24.550 +03:00 [DBG] Considering key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} with expiration date 2025-07-16 20:11:06Z as default key.
2025-05-09 22:41:24.556 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:41:24.557 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 22:41:24.558 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 22:41:24.559 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-09 22:41:24.560 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.562 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.562 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 22:41:24.564 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:41:24.567 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:41:24.569 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 22:41:24.570 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-09 22:41:24.570 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 22:41:24.572 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-09 22:41:24.576 +03:00 [DBG] Using key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} as the default key.
2025-05-09 22:41:24.576 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 22:41:24.578 +03:00 [DBG] Key ring with default key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} was loaded during application startup.
2025-05-09 22:41:24.580 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.581 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 22:41:24.583 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.585 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 22:41:24.588 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:41:24.589 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:41:24.590 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 22:41:24.729 +03:00 [INF] Now listening on: https://localhost:49464
2025-05-09 22:41:24.734 +03:00 [INF] Now listening on: http://localhost:49465
2025-05-09 22:41:24.736 +03:00 [DBG] Loaded hosting startup assembly Finance_Manager_Backend
2025-05-09 22:41:24.738 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-09 22:41:24.739 +03:00 [INF] Hosting environment: Development
2025-05-09 22:41:24.740 +03:00 [INF] Content root path: G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend
2025-05-09 22:41:24.742 +03:00 [DBG] Hosting started
2025-05-09 22:41:31.427 +03:00 [DBG] Connection id "0HNCF65VQD3B3" accepted.
2025-05-09 22:41:31.430 +03:00 [DBG] Connection id "0HNCF65VQD3B3" started.
2025-05-09 22:41:31.574 +03:00 [DBG] Connection id "0HNCF65VQD3B4" accepted.
2025-05-09 22:41:31.597 +03:00 [DBG] Connection id "0HNCF65VQD3B4" started.
2025-05-09 22:41:33.353 +03:00 [DBG] Connection id "0HNCF65VQD3B4" received FIN.
2025-05-09 22:41:33.357 +03:00 [DBG] Connection id "0HNCF65VQD3B4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:41:33.366 +03:00 [DBG] Connection id "0HNCF65VQD3B4" disconnecting.
2025-05-09 22:41:33.370 +03:00 [DBG] Connection id "0HNCF65VQD3B4" stopped.
2025-05-09 22:41:33.439 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - null null
2025-05-09 22:41:33.446 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-09 22:41:37.673 +03:00 [DBG] Connection id "0HNCF65VQD3B3" completed keep alive response.
2025-05-09 22:41:37.706 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 4270.5399ms
2025-05-09 22:41:38.367 +03:00 [DBG] Connection id "0HNCF65VQD3B3" received FIN.
2025-05-09 22:41:38.369 +03:00 [DBG] Connection id "0HNCF65VQD3B3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:41:38.372 +03:00 [DBG] Connection id "0HNCF65VQD3B3" disconnecting.
2025-05-09 22:41:38.374 +03:00 [DBG] Connection id "0HNCF65VQD3B3" stopped.
2025-05-09 22:41:50.612 +03:00 [DBG] Connection id "0HNCF65VQD3B5" accepted.
2025-05-09 22:41:50.614 +03:00 [DBG] Connection id "0HNCF65VQD3B5" started.
2025-05-09 22:41:50.783 +03:00 [DBG] Connection id "0HNCF65VQD3B6" accepted.
2025-05-09 22:41:50.798 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - null null
2025-05-09 22:41:50.798 +03:00 [DBG] Connection id "0HNCF65VQD3B6" started.
2025-05-09 22:41:51.372 +03:00 [DBG] Connection id "0HNCF65VQD3B5" completed keep alive response.
2025-05-09 22:41:51.386 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 588.2416ms
2025-05-09 22:41:53.372 +03:00 [DBG] Connection id "0HNCF65VQD3B6" received FIN.
2025-05-09 22:41:53.372 +03:00 [DBG] Connection id "0HNCF65VQD3B5" received FIN.
2025-05-09 22:41:53.376 +03:00 [DBG] Connection id "0HNCF65VQD3B6" disconnecting.
2025-05-09 22:41:53.378 +03:00 [DBG] Connection id "0HNCF65VQD3B5" disconnecting.
2025-05-09 22:41:53.380 +03:00 [DBG] Connection id "0HNCF65VQD3B6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:41:53.381 +03:00 [DBG] Connection id "0HNCF65VQD3B5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:41:53.383 +03:00 [DBG] Connection id "0HNCF65VQD3B6" stopped.
2025-05-09 22:41:53.400 +03:00 [DBG] Connection id "0HNCF65VQD3B5" stopped.
2025-05-09 22:48:52.684 +03:00 [INF] Application is shutting down...
2025-05-09 22:48:52.695 +03:00 [DBG] Hosting stopping
2025-05-09 22:48:52.845 +03:00 [DBG] Hosting stopped
2025-05-09 22:49:06.253 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-09 22:49:07.232 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:49:07.333 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2025-05-09 22:49:07.703 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<User>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        User entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            User instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(User);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (User)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Email>k__BackingField = dataReader.GetString(2);
                                instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                instance.<Role>k__BackingField = dataReader.GetString(5);
                                instance.<Salt>k__BackingField = dataReader.GetString(6);
                                instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 22:49:07.763 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:49:07.792 +03:00 [DBG] Created DbConnection. (27ms).
2025-05-09 22:49:07.800 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.178 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.185 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:08.191 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-05-09 22:49:08.195 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-05-09 22:49:08.204 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 22:49:08.242 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 22:49:08.309 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.367 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.389 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.395 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.400 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.410 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 153ms reading results.
2025-05-09 22:49:08.414 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.420 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (6ms).
2025-05-09 22:49:08.424 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:49:08.429 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:49:08.450 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:49:08.534 +03:00 [DBG] Executing 2 update commands as a batch.
2025-05-09 22:49:08.552 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.558 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.566 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 22:49:08.577 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 22:49:08.585 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:08.587 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:49:08.593 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-05-09 22:49:08.599 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 22:49:08.687 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 22:49:08.702 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.705 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 15ms reading results.
2025-05-09 22:49:08.713 +03:00 [DBG] Committing transaction.
2025-05-09 22:49:08.719 +03:00 [DBG] Committed transaction.
2025-05-09 22:49:08.722 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.723 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:49:08.727 +03:00 [DBG] Disposing transaction.
2025-05-09 22:49:08.734 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.736 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.739 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-05-09 22:49:08.741 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-09 22:49:08.752 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 22:49:08.758 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.761 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.764 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:08.765 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:49:08.767 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:49:08.768 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 22:49:08.772 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 22:49:08.791 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.810 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.814 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.817 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.820 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.822 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.831 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.835 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.839 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.845 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.849 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.852 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 77ms reading results.
2025-05-09 22:49:08.884 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.888 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-09 22:49:08.891 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:49:08.894 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:49:08.907 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:49:08.913 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 22:49:08.915 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.916 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.918 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 22:49:08.919 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 22:49:08.921 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:08.922 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:49:08.923 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:49:08.924 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 22:49:08.945 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 22:49:08.948 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.949 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 22:49:08.951 +03:00 [DBG] Committing transaction.
2025-05-09 22:49:08.952 +03:00 [DBG] Committed transaction.
2025-05-09 22:49:08.953 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.954 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:49:08.956 +03:00 [DBG] Disposing transaction.
2025-05-09 22:49:08.957 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.962 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.965 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.967 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.969 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:08.970 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 22:49:08.973 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:49:08.975 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:08.979 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-09 22:49:09.194 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:49:09.209 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-09 22:49:09.291 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 22:49:09.338 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:49:09.341 +03:00 [DBG] Created DbConnection. (3ms).
2025-05-09 22:49:09.345 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.349 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.352 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:09.355 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:49:09.358 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-09 22:49:09.363 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:49:09.378 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:49:09.394 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.398 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-09 22:49:09.402 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.404 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 22:49:09.445 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.453 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.455 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:49:09.456 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:49:09.457 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:49:09.473 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.475 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.478 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:09.479 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:49:09.481 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:49:09.483 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:49:09.489 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:49:09.500 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:09.504 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.506 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 14ms reading results.
2025-05-09 22:49:09.509 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.513 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-09 22:49:09.520 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.527 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 22:49:09.727 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.745 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.749 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.751 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:49:09.753 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:49:09.764 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:49:09.769 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.773 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.778 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:09.780 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:49:09.783 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-09 22:49:09.789 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 22:49:09.799 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 22:49:09.807 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:09.809 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.813 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 10ms reading results.
2025-05-09 22:49:09.815 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.817 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 22:49:09.820 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.823 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 22:49:09.825 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __authData_UserDTO_Id_0)'
2025-05-09 22:49:09.836 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 22:49:09.842 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.843 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.847 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:09.848 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-09 22:49:09.849 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:49:09.851 +03:00 [DBG] Executing DbCommand [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 22:49:09.856 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 22:49:09.868 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.871 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 22:49:09.874 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.880 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (5ms).
2025-05-09 22:49:09.889 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.895 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.899 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.902 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.905 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.908 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.915 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.918 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.920 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.923 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.925 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:49:09.928 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:49:09.930 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:49:09.935 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 22:49:09.941 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.943 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.946 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:09.947 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:49:09.948 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:49:09.950 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:49:09.964 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:49:09.969 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:09.972 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:09.974 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:09.975 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:09.978 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:09.980 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.981 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 13ms reading results.
2025-05-09 22:49:09.983 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:09.985 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:49:09.987 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.990 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.992 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.995 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:09.998 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.000 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 22:49:10.006 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.036 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.041 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.047 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.050 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.059 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.063 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.066 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.068 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.070 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.072 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.073 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.074 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.078 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.081 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.086 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.089 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.092 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.097 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.101 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.104 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.107 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.109 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.116 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.118 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.122 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.124 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.131 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.134 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.137 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.139 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.142 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.148 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.150 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.153 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.156 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.159 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.165 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.168 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.171 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.174 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:49:10.178 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:49:10.183 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:49:10.186 +03:00 [DBG] Executing 20 update commands as a batch.
2025-05-09 22:49:10.187 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.189 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.191 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:10.192 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:49:10.195 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:49:10.196 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:49:10.220 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:49:10.266 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.270 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.272 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.274 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.275 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.278 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.280 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.282 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.283 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.285 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.288 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.289 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.290 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.292 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.293 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.294 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.297 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.299 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.301 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.303 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.305 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.307 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 41ms reading results.
2025-05-09 22:49:10.308 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.310 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:49:10.314 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.318 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.320 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.322 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.324 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.327 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.331 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.333 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.335 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.337 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.339 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.341 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.342 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.345 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.349 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.351 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.353 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.355 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.357 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.358 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.360 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 20 entities written to the database.
2025-05-09 22:49:10.366 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.387 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.391 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.395 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.399 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.401 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.403 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.406 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.411 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:49:10.414 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:49:10.422 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:49:10.426 +03:00 [DBG] Executing 4 update commands as a batch.
2025-05-09 22:49:10.428 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.430 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.432 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:10.433 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:49:10.435 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:49:10.436 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 22:49:10.447 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 22:49:10.451 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.453 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.455 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.457 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.458 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.459 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-09 22:49:10.462 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.466 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (4ms).
2025-05-09 22:49:10.471 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.473 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.476 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.479 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.481 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 4 entities written to the database.
2025-05-09 22:49:10.482 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:49:10.484 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.485 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 22:49:10.506 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:49:10.510 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:49:10.512 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 22:49:10.513 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.514 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.516 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:10.518 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:49:10.519 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:49:10.521 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:49:10.529 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:49:10.536 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.539 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 22:49:10.543 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.548 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (5ms).
2025-05-09 22:49:10.567 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.571 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.573 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:49:10.575 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:49:10.582 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:49:10.584 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.587 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.590 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:10.593 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:49:10.597 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-05-09 22:49:10.599 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:49:10.607 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:49:10.622 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:49:10.628 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.632 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 9ms reading results.
2025-05-09 22:49:10.634 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.637 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 22:49:10.642 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:49:10.649 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 22:49:10.652 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:49:10.654 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.657 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-09 22:49:10.785 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-09 22:49:10.883 +03:00 [DBG] Hosting starting
2025-05-09 22:49:10.928 +03:00 [INF] User profile is available. Using 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-09 22:49:10.951 +03:00 [DBG] Reading data from file 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys\key-036e1e5f-5347-47d7-8236-0b64ed0a76a1.xml'.
2025-05-09 22:49:10.953 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:49:10.958 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.ExpiresAt < DateTime.UtcNow)'
2025-05-09 22:49:10.959 +03:00 [DBG] Found key {036e1e5f-5347-47d7-8236-0b64ed0a76a1}.
2025-05-09 22:49:10.974 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<RefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE()) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE(), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        RefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            RefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(RefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (RefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                        {
                            return 
                            {
                                RefreshToken instance;
                                instance = new RefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Token>k__BackingField = dataReader.GetString(4);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(RefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 22:49:10.975 +03:00 [DBG] Considering key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} with expiration date 2025-07-16 20:11:06Z as default key.
2025-05-09 22:49:10.982 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:49:10.983 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 22:49:10.983 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 22:49:10.984 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-09 22:49:10.985 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.987 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:10.987 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 22:49:10.988 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:49:10.990 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:49:10.992 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:49:10.993 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 22:49:10.993 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-09 22:49:10.999 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 22:49:11.000 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-09 22:49:11.003 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:11.004 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 22:49:11.004 +03:00 [DBG] Using key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} as the default key.
2025-05-09 22:49:11.006 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:11.008 +03:00 [DBG] Key ring with default key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} was loaded during application startup.
2025-05-09 22:49:11.008 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 22:49:11.012 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:49:11.015 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:49:11.016 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 22:49:11.221 +03:00 [INF] Now listening on: https://localhost:49464
2025-05-09 22:49:11.225 +03:00 [INF] Now listening on: http://localhost:49465
2025-05-09 22:49:11.226 +03:00 [DBG] Loaded hosting startup assembly Finance_Manager_Backend
2025-05-09 22:49:11.229 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-09 22:49:11.230 +03:00 [INF] Hosting environment: Development
2025-05-09 22:49:11.232 +03:00 [INF] Content root path: G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend
2025-05-09 22:49:11.233 +03:00 [DBG] Hosting started
2025-05-09 22:49:14.276 +03:00 [DBG] Connection id "0HNCF6A9OF98L" accepted.
2025-05-09 22:49:14.300 +03:00 [DBG] Connection id "0HNCF6A9OF98M" accepted.
2025-05-09 22:49:14.301 +03:00 [DBG] Connection id "0HNCF6A9OF98L" started.
2025-05-09 22:49:14.301 +03:00 [DBG] Connection id "0HNCF6A9OF98M" started.
2025-05-09 22:49:14.688 +03:00 [DBG] Connection id "0HNCF6A9OF98L" received FIN.
2025-05-09 22:49:14.690 +03:00 [DBG] Connection id "0HNCF6A9OF98M" received FIN.
2025-05-09 22:49:14.702 +03:00 [DBG] Connection id "0HNCF6A9OF98L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:49:14.708 +03:00 [DBG] Connection id "0HNCF6A9OF98M" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:49:14.711 +03:00 [DBG] Connection id "0HNCF6A9OF98L" disconnecting.
2025-05-09 22:49:14.711 +03:00 [DBG] Connection id "0HNCF6A9OF98M" disconnecting.
2025-05-09 22:49:14.715 +03:00 [DBG] Connection id "0HNCF6A9OF98L" stopped.
2025-05-09 22:49:14.716 +03:00 [DBG] Connection id "0HNCF6A9OF98M" stopped.
2025-05-09 22:49:19.190 +03:00 [DBG] Connection id "0HNCF6A9OF98N" accepted.
2025-05-09 22:49:19.194 +03:00 [DBG] Connection id "0HNCF6A9OF98N" started.
2025-05-09 22:49:19.237 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - null null
2025-05-09 22:49:19.242 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-09 22:49:19.741 +03:00 [DBG] Connection id "0HNCF6A9OF98N" completed keep alive response.
2025-05-09 22:49:19.744 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 510.7576ms
2025-05-09 22:49:22.152 +03:00 [DBG] Connection id "0HNCF6A9OF98O" accepted.
2025-05-09 22:49:22.178 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - null null
2025-05-09 22:49:22.201 +03:00 [DBG] Connection id "0HNCF6A9OF98O" started.
2025-05-09 22:49:22.380 +03:00 [DBG] Connection id "0HNCF6A9OF98N" completed keep alive response.
2025-05-09 22:49:22.466 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 287.2187ms
2025-05-09 22:49:24.679 +03:00 [DBG] Connection id "0HNCF6A9OF98O" received FIN.
2025-05-09 22:49:24.679 +03:00 [DBG] Connection id "0HNCF6A9OF98N" received FIN.
2025-05-09 22:49:24.687 +03:00 [DBG] Connection id "0HNCF6A9OF98O" disconnecting.
2025-05-09 22:49:24.688 +03:00 [DBG] Connection id "0HNCF6A9OF98N" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:49:24.692 +03:00 [DBG] Connection id "0HNCF6A9OF98O" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:49:24.695 +03:00 [DBG] Connection id "0HNCF6A9OF98N" disconnecting.
2025-05-09 22:49:24.697 +03:00 [DBG] Connection id "0HNCF6A9OF98N" stopped.
2025-05-09 22:49:24.709 +03:00 [DBG] Connection id "0HNCF6A9OF98O" stopped.
2025-05-09 22:52:36.206 +03:00 [INF] Application is shutting down...
2025-05-09 22:52:36.207 +03:00 [DBG] Hosting stopping
2025-05-09 22:52:36.282 +03:00 [DBG] Hosting stopped
2025-05-09 22:53:34.216 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-09 22:53:35.057 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:53:35.139 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2025-05-09 22:53:35.468 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<User>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        User entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            User instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(User);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (User)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Email>k__BackingField = dataReader.GetString(2);
                                instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                instance.<Role>k__BackingField = dataReader.GetString(5);
                                instance.<Salt>k__BackingField = dataReader.GetString(6);
                                instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 22:53:35.505 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:53:35.526 +03:00 [DBG] Created DbConnection. (19ms).
2025-05-09 22:53:35.531 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:35.953 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:35.962 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:35.969 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2025-05-09 22:53:35.972 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-05-09 22:53:35.986 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 22:53:36.044 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 22:53:36.168 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.311 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.320 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.323 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.329 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.336 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 283ms reading results.
2025-05-09 22:53:36.340 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.347 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (7ms).
2025-05-09 22:53:36.352 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:53:36.356 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:53:36.375 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:53:36.470 +03:00 [DBG] Executing 2 update commands as a batch.
2025-05-09 22:53:36.481 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.488 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.491 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 22:53:36.506 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 22:53:36.514 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:36.515 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:53:36.521 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-05-09 22:53:36.527 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 22:53:36.628 +03:00 [INF] Executed DbCommand (105ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 22:53:36.643 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.648 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 17ms reading results.
2025-05-09 22:53:36.656 +03:00 [DBG] Committing transaction.
2025-05-09 22:53:36.662 +03:00 [DBG] Committed transaction.
2025-05-09 22:53:36.665 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.667 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 22:53:36.671 +03:00 [DBG] Disposing transaction.
2025-05-09 22:53:36.680 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.682 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.686 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-05-09 22:53:36.689 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-09 22:53:36.700 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 22:53:36.707 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.711 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.717 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:36.718 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:53:36.720 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:53:36.721 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 22:53:36.727 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 22:53:36.745 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.763 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.766 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.768 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.770 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.772 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.774 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.776 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.779 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.781 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.783 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.784 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 53ms reading results.
2025-05-09 22:53:36.786 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.788 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:53:36.790 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:53:36.791 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:53:36.803 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:53:36.807 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 22:53:36.808 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.811 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.813 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 22:53:36.814 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 22:53:36.815 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:36.817 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:53:36.818 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:53:36.820 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 22:53:36.837 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 22:53:36.839 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.841 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 22:53:36.844 +03:00 [DBG] Committing transaction.
2025-05-09 22:53:36.845 +03:00 [DBG] Committed transaction.
2025-05-09 22:53:36.846 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.848 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:53:36.850 +03:00 [DBG] Disposing transaction.
2025-05-09 22:53:36.851 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.853 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.855 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.857 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.861 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:36.863 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 22:53:36.866 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:53:36.869 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:36.872 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-09 22:53:37.118 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:53:37.133 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-09 22:53:37.210 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 22:53:37.259 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:53:37.261 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-09 22:53:37.263 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.265 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.267 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:37.268 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:53:37.270 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:53:37.272 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:53:37.279 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:53:37.286 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.288 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-09 22:53:37.290 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.292 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 22:53:37.334 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.340 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.342 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:53:37.344 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:53:37.345 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:53:37.356 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.357 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.359 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:37.360 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:53:37.362 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:53:37.364 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:53:37.369 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:53:37.380 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:37.384 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.386 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 14ms reading results.
2025-05-09 22:53:37.388 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.389 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:53:37.394 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.397 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 22:53:37.587 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.604 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.607 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.609 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:53:37.611 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:53:37.618 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:53:37.624 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.627 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.629 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:37.631 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:53:37.633 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:53:37.634 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 22:53:37.639 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 22:53:37.646 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:37.648 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.650 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 8ms reading results.
2025-05-09 22:53:37.651 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.653 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:53:37.655 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.657 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 22:53:37.661 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __authData_UserDTO_Id_0)'
2025-05-09 22:53:37.667 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 22:53:37.671 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.673 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.674 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:37.677 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:53:37.679 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 22:53:37.680 +03:00 [DBG] Executing DbCommand [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 22:53:37.684 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 22:53:37.690 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.695 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 5ms reading results.
2025-05-09 22:53:37.699 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.701 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 22:53:37.712 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.715 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.718 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.720 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.722 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.724 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.728 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.730 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.732 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.734 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.736 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:53:37.737 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:53:37.739 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:53:37.746 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 22:53:37.750 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.755 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.758 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:37.761 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:53:37.763 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 22:53:37.765 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:53:37.819 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:53:37.824 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:37.828 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:37.830 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:37.832 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:37.835 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:37.837 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.839 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 16ms reading results.
2025-05-09 22:53:37.841 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.844 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 22:53:37.847 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.850 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.852 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.854 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.856 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.858 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 22:53:37.863 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.884 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.886 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.887 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.889 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.891 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.892 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.895 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.897 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.899 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.900 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.902 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.903 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.905 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.907 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.908 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.910 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.912 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.914 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.916 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.917 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.919 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.920 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.922 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.924 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.925 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.928 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.930 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.931 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.933 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.934 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.936 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.938 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.939 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.941 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.945 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.947 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.949 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.950 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.952 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:37.954 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:53:37.955 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:53:37.964 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:53:37.967 +03:00 [DBG] Executing 20 update commands as a batch.
2025-05-09 22:53:37.969 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.971 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:37.972 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:37.974 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:53:37.976 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:53:37.979 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:53:38.032 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 22:53:38.038 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.041 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.044 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.047 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.048 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.050 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.052 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.054 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.056 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.058 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.059 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.063 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.065 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.067 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.069 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.071 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.072 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.074 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.076 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.079 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.081 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.083 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 46ms reading results.
2025-05-09 22:53:38.085 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.087 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 22:53:38.090 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.092 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.096 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.099 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.101 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.103 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.105 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.107 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.109 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.112 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.114 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.117 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.118 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.120 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.122 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.124 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.127 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.130 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.132 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.134 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.136 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 20 entities written to the database.
2025-05-09 22:53:38.139 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.151 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.153 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.155 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.156 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.158 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.159 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.163 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.165 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:53:38.166 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:53:38.170 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:53:38.172 +03:00 [DBG] Executing 4 update commands as a batch.
2025-05-09 22:53:38.174 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.175 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.178 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:38.179 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:53:38.180 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:53:38.182 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 22:53:38.215 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 22:53:38.220 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.222 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.224 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.228 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.230 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.232 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 13ms reading results.
2025-05-09 22:53:38.233 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.235 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:53:38.240 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.242 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.246 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.249 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.251 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 4 entities written to the database.
2025-05-09 22:53:38.253 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:53:38.255 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.259 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-05-09 22:53:38.282 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:53:38.288 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:53:38.289 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 22:53:38.290 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.292 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.294 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:38.296 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:53:38.297 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:53:38.299 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:53:38.304 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 22:53:38.307 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.309 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 22:53:38.312 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.314 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 22:53:38.330 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.332 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.336 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 22:53:38.337 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 22:53:38.339 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 22:53:38.340 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.342 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.346 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:38.347 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 22:53:38.350 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 22:53:38.352 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:53:38.358 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 22:53:38.362 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 22:53:38.363 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.365 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 22:53:38.367 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.368 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:53:38.370 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 22:53:38.372 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 22:53:38.374 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:53:38.375 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.377 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 22:53:38.469 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-09 22:53:38.566 +03:00 [DBG] Hosting starting
2025-05-09 22:53:38.584 +03:00 [INF] User profile is available. Using 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-09 22:53:38.615 +03:00 [DBG] Reading data from file 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys\key-036e1e5f-5347-47d7-8236-0b64ed0a76a1.xml'.
2025-05-09 22:53:38.618 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 22:53:38.623 +03:00 [DBG] Found key {036e1e5f-5347-47d7-8236-0b64ed0a76a1}.
2025-05-09 22:53:38.623 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.ExpiresAt < DateTime.UtcNow)'
2025-05-09 22:53:38.634 +03:00 [DBG] Considering key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} with expiration date 2025-07-16 20:11:06Z as default key.
2025-05-09 22:53:38.638 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 22:53:38.638 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<RefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE()) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE(), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        RefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            RefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(RefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (RefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                        {
                            return 
                            {
                                RefreshToken instance;
                                instance = new RefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Token>k__BackingField = dataReader.GetString(4);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(RefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 22:53:38.639 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-09 22:53:38.645 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 22:53:38.647 +03:00 [DBG] Creating DbConnection.
2025-05-09 22:53:38.648 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 22:53:38.649 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.650 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.650 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-09 22:53:38.651 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 22:53:38.653 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-09 22:53:38.654 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-05-09 22:53:38.656 +03:00 [DBG] Using key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} as the default key.
2025-05-09 22:53:38.656 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-05-09 22:53:38.658 +03:00 [DBG] Key ring with default key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} was loaded during application startup.
2025-05-09 22:53:38.659 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 22:53:38.665 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 22:53:38.668 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.670 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 22:53:38.671 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.672 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 22:53:38.675 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 22:53:38.676 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 22:53:38.679 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-09 22:53:38.807 +03:00 [INF] Now listening on: https://localhost:49464
2025-05-09 22:53:38.812 +03:00 [INF] Now listening on: http://localhost:49465
2025-05-09 22:53:38.813 +03:00 [DBG] Loaded hosting startup assembly Finance_Manager_Backend
2025-05-09 22:53:38.814 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-09 22:53:38.816 +03:00 [INF] Hosting environment: Development
2025-05-09 22:53:38.817 +03:00 [INF] Content root path: G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend
2025-05-09 22:53:38.818 +03:00 [DBG] Hosting started
2025-05-09 22:53:44.073 +03:00 [DBG] Connection id "0HNCF6CQ5ESUE" accepted.
2025-05-09 22:53:44.087 +03:00 [DBG] Connection id "0HNCF6CQ5ESUF" accepted.
2025-05-09 22:53:44.087 +03:00 [DBG] Connection id "0HNCF6CQ5ESUE" started.
2025-05-09 22:53:44.089 +03:00 [DBG] Connection id "0HNCF6CQ5ESUF" started.
2025-05-09 22:53:45.276 +03:00 [DBG] Connection id "0HNCF6CQ5ESUF" received FIN.
2025-05-09 22:53:45.289 +03:00 [DBG] Connection id "0HNCF6CQ5ESUE" received FIN.
2025-05-09 22:53:45.293 +03:00 [DBG] Connection id "0HNCF6CQ5ESUF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:53:45.296 +03:00 [DBG] Connection id "0HNCF6CQ5ESUE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:53:45.300 +03:00 [DBG] Connection id "0HNCF6CQ5ESUF" disconnecting.
2025-05-09 22:53:45.303 +03:00 [DBG] Connection id "0HNCF6CQ5ESUE" disconnecting.
2025-05-09 22:53:45.306 +03:00 [DBG] Connection id "0HNCF6CQ5ESUE" stopped.
2025-05-09 22:53:45.306 +03:00 [DBG] Connection id "0HNCF6CQ5ESUF" stopped.
2025-05-09 22:53:50.040 +03:00 [DBG] Connection id "0HNCF6CQ5ESUG" accepted.
2025-05-09 22:53:50.042 +03:00 [DBG] Connection id "0HNCF6CQ5ESUG" started.
2025-05-09 22:53:50.093 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - null null
2025-05-09 22:53:50.144 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-09 22:53:50.476 +03:00 [DBG] Connection id "0HNCF6CQ5ESUG" completed keep alive response.
2025-05-09 22:53:50.485 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 393.6812ms
2025-05-09 22:53:51.864 +03:00 [DBG] Connection id "0HNCF6CQ5ESUH" accepted.
2025-05-09 22:53:51.887 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - null null
2025-05-09 22:53:51.969 +03:00 [DBG] Connection id "0HNCF6CQ5ESUH" started.
2025-05-09 22:53:52.179 +03:00 [DBG] Connection id "0HNCF6CQ5ESUG" completed keep alive response.
2025-05-09 22:53:52.184 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 294.8708ms
2025-05-09 22:53:55.155 +03:00 [DBG] Connection id "0HNCF6CQ5ESUH" received FIN.
2025-05-09 22:53:55.155 +03:00 [DBG] Connection id "0HNCF6CQ5ESUG" received FIN.
2025-05-09 22:53:55.158 +03:00 [DBG] Connection id "0HNCF6CQ5ESUH" disconnecting.
2025-05-09 22:53:55.160 +03:00 [DBG] Connection id "0HNCF6CQ5ESUG" disconnecting.
2025-05-09 22:53:55.161 +03:00 [DBG] Connection id "0HNCF6CQ5ESUH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:53:55.163 +03:00 [DBG] Connection id "0HNCF6CQ5ESUG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 22:53:55.169 +03:00 [DBG] Connection id "0HNCF6CQ5ESUH" stopped.
2025-05-09 22:53:55.169 +03:00 [DBG] Connection id "0HNCF6CQ5ESUG" stopped.
2025-05-09 22:58:10.647 +03:00 [INF] Application is shutting down...
2025-05-09 22:58:10.652 +03:00 [DBG] Hosting stopping
2025-05-09 22:58:10.673 +03:00 [DBG] Hosting stopped
2025-05-09 23:02:54.547 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-09 23:02:55.284 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 23:02:55.391 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2025-05-09 23:02:55.717 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<User>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
        SELECT u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
        FROM users AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        User entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            User instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(User);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (User)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                instance.<Email>k__BackingField = dataReader.GetString(2);
                                instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                instance.<Role>k__BackingField = dataReader.GetString(5);
                                instance.<Salt>k__BackingField = dataReader.GetString(6);
                                instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 23:02:55.763 +03:00 [DBG] Creating DbConnection.
2025-05-09 23:02:55.797 +03:00 [DBG] Created DbConnection. (33ms).
2025-05-09 23:02:55.805 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.102 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.109 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:56.119 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2025-05-09 23:02:56.122 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2025-05-09 23:02:56.131 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 23:02:56.232 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
2025-05-09 23:02:56.280 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.342 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.353 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.364 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.369 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.376 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 136ms reading results.
2025-05-09 23:02:56.380 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.386 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (5ms).
2025-05-09 23:02:56.390 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 23:02:56.394 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 23:02:56.415 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 23:02:56.477 +03:00 [DBG] Executing 2 update commands as a batch.
2025-05-09 23:02:56.484 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.488 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.491 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 23:02:56.501 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 23:02:56.508 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:56.509 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 23:02:56.514 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-09 23:02:56.519 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 23:02:56.574 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [users]
OUTPUT 1
WHERE [id] = @p1;
2025-05-09 23:02:56.589 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.593 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 15ms reading results.
2025-05-09 23:02:56.600 +03:00 [DBG] Committing transaction.
2025-05-09 23:02:56.605 +03:00 [DBG] Committed transaction.
2025-05-09 23:02:56.607 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.609 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 23:02:56.613 +03:00 [DBG] Disposing transaction.
2025-05-09 23:02:56.619 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.621 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.625 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-05-09 23:02:56.628 +03:00 [DBG] Compiling query expression: 
'DbSet<Category>()'
2025-05-09 23:02:56.638 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Category>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Category.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Category.ColorForBackground (string) Required MaxLength(7), 1], [Property: Category.Icon (string) Required MaxLength(100), 2], [Property: Category.IsIncome (bool) Required, 3], [Property: Category.Name (string) Required MaxLength(50), 4], [Property: Category.ParentCategoryId (int?) FK Index, 5] }
        SELECT c.id, c.background_color, c.icon_path, c.is_income, c.name, c.parent_category_fk
        FROM categories AS c, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Category entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Category instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Category);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Category.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Category)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]: 
                        {
                            return 
                            {
                                Category instance;
                                instance = new Category();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<ColorForBackground>k__BackingField = dataReader.GetString(1);
                                instance.<Icon>k__BackingField = dataReader.GetString(2);
                                instance.<IsIncome>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Name>k__BackingField = dataReader.GetString(4);
                                instance.<ParentCategoryId>k__BackingField = dataReader.IsDBNull(5) ? default(int?) : (int?)dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Category | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.Category")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Category)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 23:02:56.642 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.644 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.645 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:56.647 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 23:02:56.648 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 23:02:56.650 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 23:02:56.653 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[background_color], [c].[icon_path], [c].[is_income], [c].[name], [c].[parent_category_fk]
FROM [categories] AS [c]
2025-05-09 23:02:56.669 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.682 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.685 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.686 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.689 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.690 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.692 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.693 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.696 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.697 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.699 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.701 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 45ms reading results.
2025-05-09 23:02:56.703 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.704 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 23:02:56.706 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 23:02:56.707 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 23:02:56.716 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 23:02:56.719 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 23:02:56.720 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.722 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.723 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-09 23:02:56.725 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-09 23:02:56.726 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:56.727 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 23:02:56.729 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 23:02:56.730 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 23:02:56.763 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p0;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p1;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p2;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p3;
DELETE FROM [categories]
OUTPUT 1
WHERE [id] = @p4;
2025-05-09 23:02:56.766 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.767 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 23:02:56.769 +03:00 [DBG] Committing transaction.
2025-05-09 23:02:56.771 +03:00 [DBG] Committed transaction.
2025-05-09 23:02:56.772 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.773 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 23:02:56.775 +03:00 [DBG] Disposing transaction.
2025-05-09 23:02:56.777 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.779 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.781 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.783 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.786 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:56.788 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 23:02:56.790 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 23:02:56.793 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:56.796 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-09 23:02:56.979 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 23:02:56.993 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Email == __email_0)'
2025-05-09 23:02:57.060 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.email == @__email_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 23:02:57.105 +03:00 [DBG] Creating DbConnection.
2025-05-09 23:02:57.107 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 23:02:57.109 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.111 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.113 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:57.115 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 23:02:57.117 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 23:02:57.119 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 23:02:57.124 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 23:02:57.133 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.135 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-09 23:02:57.136 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.138 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 23:02:57.186 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.194 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.198 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 23:02:57.199 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 23:02:57.201 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 23:02:57.213 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.214 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.216 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:57.217 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 23:02:57.220 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 23:02:57.221 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 23:02:57.275 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 23:02:57.285 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.289 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.291 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 13ms reading results.
2025-05-09 23:02:57.293 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.296 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (2ms).
2025-05-09 23:02:57.302 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.304 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 23:02:57.488 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.502 +03:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.506 +03:00 [DBG] Context 'AppDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.508 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 23:02:57.509 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 23:02:57.519 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 23:02:57.525 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.527 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.530 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:57.531 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 23:02:57.533 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 23:02:57.534 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 23:02:57.592 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 200), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [refresh_tokens] ([created_at], [expires_at], [is_revoked], [token], [user_fk])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-09 23:02:57.599 +03:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.601 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.603 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 6ms reading results.
2025-05-09 23:02:57.604 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.606 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 23:02:57.608 +03:00 [DBG] An entity of type 'RefreshToken' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.610 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 23:02:57.614 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __authData_UserDTO_Id_0)'
2025-05-09 23:02:57.621 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Balance (decimal) Required, 1], [Property: User.Email (string) Required Index MaxLength(50), 2], [Property: User.PasswordHash (string) Required MaxLength(50), 3], [Property: User.PrimaryCurrency (string) Required ValueGenerated.OnAdd MaxLength(3), 4], [Property: User.Role (string) Required ValueGenerated.OnAdd MaxLength(5), 5], [Property: User.Salt (string) Required MaxLength(30), 6], [Property: User.SecondaryCurrency1 (string) MaxLength(3), 7], [Property: User.SecondaryCurrency2 (string) MaxLength(3), 8] }
            SELECT TOP(1) u.id, u.balance, u.email, u.password_hash, u.primary_currency, u.role, u.salt, u.secondary_currency_1, u.secondary_currency_2
            FROM users AS u
            WHERE u.id == @__authData_UserDTO_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Balance>k__BackingField = dataReader.GetDecimal(1);
                                    instance.<Email>k__BackingField = dataReader.GetString(2);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(3);
                                    instance.<PrimaryCurrency>k__BackingField = dataReader.GetString(4);
                                    instance.<Role>k__BackingField = dataReader.GetString(5);
                                    instance.<Salt>k__BackingField = dataReader.GetString(6);
                                    instance.<SecondaryCurrency1>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<SecondaryCurrency2>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-09 23:02:57.625 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.628 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.631 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:57.632 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 23:02:57.633 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 23:02:57.635 +03:00 [DBG] Executing DbCommand [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 23:02:57.639 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__authData_UserDTO_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[id] = @__authData_UserDTO_Id_0
2025-05-09 23:02:57.643 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.644 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 23:02:57.648 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.650 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 23:02:57.656 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.661 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.665 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.667 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.669 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.671 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.673 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.675 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.676 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Category.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.680 +03:00 [DBG] Context 'AppDbContext' started tracking 'Category' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.682 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 23:02:57.684 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 23:02:57.686 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 23:02:57.690 +03:00 [DBG] Executing 5 update commands as a batch.
2025-05-09 23:02:57.694 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.697 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.700 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:57.701 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 23:02:57.702 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 23:02:57.704 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 23:02:57.733 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 100), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 7), @p6='?' (Size = 100), @p7='?' (DbType = Boolean), @p8='?' (Size = 50), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (Size = 100), @p12='?' (DbType = Boolean), @p13='?' (Size = 50), @p14='?' (DbType = Int32), @p15='?' (Size = 7), @p16='?' (Size = 100), @p17='?' (DbType = Boolean), @p18='?' (Size = 50), @p19='?' (DbType = Int32), @p20='?' (Size = 7), @p21='?' (Size = 100), @p22='?' (DbType = Boolean), @p23='?' (Size = 50), @p24='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [categories] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3),
(@p20, @p21, @p22, @p23, @p24, 4)) AS i ([background_color], [icon_path], [is_income], [name], [parent_category_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([background_color], [icon_path], [is_income], [name], [parent_category_fk])
VALUES (i.[background_color], i.[icon_path], i.[is_income], i.[name], i.[parent_category_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 23:02:57.737 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.740 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.742 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.743 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.744 +03:00 [DBG] The foreign key property 'Category.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.746 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.748 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 11ms reading results.
2025-05-09 23:02:57.749 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.751 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 23:02:57.753 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.755 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.757 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.759 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.761 +03:00 [DBG] An entity of type 'Category' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.765 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 5 entities written to the database.
2025-05-09 23:02:57.770 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.792 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.793 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.796 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.797 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.799 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.801 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.803 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.805 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.806 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.808 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.810 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.811 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.813 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.814 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.816 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.818 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.820 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.822 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.824 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.826 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.827 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.831 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.833 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.835 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.837 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.839 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.841 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.842 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.844 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.848 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.851 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.853 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.855 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.857 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.860 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.863 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.865 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.868 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Transaction.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.870 +03:00 [DBG] Context 'AppDbContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:57.872 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 23:02:57.874 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 23:02:57.884 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 23:02:57.890 +03:00 [DBG] Executing 20 update commands as a batch.
2025-05-09 23:02:57.892 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.894 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.897 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:57.899 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 23:02:57.901 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 23:02:57.903 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 23:02:57.945 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 50), @p4='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (Size = 50), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (Size = 50), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Int32), @p33='?' (Size = 50), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = DateTime2), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 50), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (DbType = Int32), @p51='?' (Size = 50), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = DateTime2), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (DbType = Int32), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (DbType = Int32), @p63='?' (Size = 50), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (Size = 50), @p70='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p77='?' (DbType = Int32), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (DbType = Int32), @p81='?' (Size = 50), @p82='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = DateTime2), @p86='?' (DbType = Int32), @p87='?' (Size = 50), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (DbType = Int32), @p90='?' (DbType = Int32), @p91='?' (DbType = DateTime2), @p92='?' (DbType = Int32), @p93='?' (Size = 50), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (DbType = Int32), @p99='?' (Size = 50), @p100='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (DbType = DateTime2), @p104='?' (DbType = Int32), @p105='?' (Size = 50), @p106='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p107='?' (DbType = Int32), @p108='?' (DbType = Int32), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Int32), @p111='?' (Size = 50), @p112='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p113='?' (DbType = Int32), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (DbType = Int32), @p117='?' (Size = 50), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, 0),
(@p6, @p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, @p17, 2),
(@p18, @p19, @p20, @p21, @p22, @p23, 3),
(@p24, @p25, @p26, @p27, @p28, @p29, 4),
(@p30, @p31, @p32, @p33, @p34, @p35, 5),
(@p36, @p37, @p38, @p39, @p40, @p41, 6),
(@p42, @p43, @p44, @p45, @p46, @p47, 7),
(@p48, @p49, @p50, @p51, @p52, @p53, 8),
(@p54, @p55, @p56, @p57, @p58, @p59, 9),
(@p60, @p61, @p62, @p63, @p64, @p65, 10),
(@p66, @p67, @p68, @p69, @p70, @p71, 11),
(@p72, @p73, @p74, @p75, @p76, @p77, 12),
(@p78, @p79, @p80, @p81, @p82, @p83, 13),
(@p84, @p85, @p86, @p87, @p88, @p89, 14),
(@p90, @p91, @p92, @p93, @p94, @p95, 15),
(@p96, @p97, @p98, @p99, @p100, @p101, 16),
(@p102, @p103, @p104, @p105, @p106, @p107, 17),
(@p108, @p109, @p110, @p111, @p112, @p113, 18),
(@p114, @p115, @p116, @p117, @p118, @p119, 19)) AS i ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([category_fk], [date], [inner_category_fk], [name], [price], [user_fk])
VALUES (i.[category_fk], i.[date], i.[inner_category_fk], i.[name], i.[price], i.[user_fk])
OUTPUT INSERTED.[id], i._Position;
2025-05-09 23:02:57.951 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.954 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.955 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.957 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.960 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.964 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.966 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.968 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.969 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.971 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.973 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.976 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.978 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.981 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.983 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.985 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.986 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.988 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.990 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.991 +03:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:57.993 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.994 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 45ms reading results.
2025-05-09 23:02:57.996 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:57.998 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 23:02:58.000 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.002 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.004 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.006 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.008 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.010 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.013 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.015 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.017 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.019 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.021 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.024 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.026 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.028 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.030 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.032 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.034 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.036 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.038 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.041 +03:00 [DBG] An entity of type 'Transaction' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.043 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 20 entities written to the database.
2025-05-09 23:02:58.047 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.061 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.064 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.066 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.067 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.069 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.071 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Saving.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.073 +03:00 [DBG] Context 'AppDbContext' started tracking 'Saving' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.074 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 23:02:58.075 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 23:02:58.080 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 23:02:58.082 +03:00 [DBG] Executing 4 update commands as a batch.
2025-05-09 23:02:58.084 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.085 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.087 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:58.089 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 23:02:58.091 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 23:02:58.093 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 23:02:58.104 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 50), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Size = 50), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 50), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [savings] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([goal], [name], [user_fk], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([goal], [name], [user_fk])
VALUES (i.[goal], i.[name], i.[user_fk])
OUTPUT INSERTED.[id], INSERTED.[current_amount], i._Position;
2025-05-09 23:02:58.108 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:58.110 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:58.113 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:58.115 +03:00 [DBG] The foreign key property 'Saving.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:58.117 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.119 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 12ms reading results.
2025-05-09 23:02:58.121 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.123 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 23:02:58.127 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.131 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.135 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.138 +03:00 [DBG] An entity of type 'Saving' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.140 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 4 entities written to the database.
2025-05-09 23:02:58.142 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 23:02:58.143 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.145 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 23:02:58.167 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 23:02:58.172 +03:00 [DBG] Creating DbConnection.
2025-05-09 23:02:58.173 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-09 23:02:58.174 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.175 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.177 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:58.178 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 23:02:58.181 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-05-09 23:02:58.182 +03:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 23:02:58.187 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[balance], [u].[email], [u].[password_hash], [u].[primary_currency], [u].[role], [u].[salt], [u].[secondary_currency_1], [u].[secondary_currency_2]
FROM [users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-09 23:02:58.190 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.191 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 1ms reading results.
2025-05-09 23:02:58.193 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.197 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-09 23:02:58.208 +03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.211 +03:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.214 +03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-05-09 23:02:58.215 +03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-05-09 23:02:58.216 +03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-05-09 23:02:58.218 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.220 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.221 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:58.223 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 23:02:58.224 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-05-09 23:02:58.226 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 23:02:58.233 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Precision = 12) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 3), @p4='?' (Size = 5), @p5='?' (Size = 30), @p6='?' (Size = 3), @p7='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [users] ([balance], [email], [password_hash], [primary_currency], [role], [salt], [secondary_currency_1], [secondary_currency_2])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-09 23:02:58.236 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-09 23:02:58.238 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.240 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 3ms reading results.
2025-05-09 23:02:58.242 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.245 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (3ms).
2025-05-09 23:02:58.248 +03:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-09 23:02:58.251 +03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-05-09 23:02:58.253 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 23:02:58.254 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.255 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 23:02:58.379 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-09 23:02:58.448 +03:00 [DBG] Hosting starting
2025-05-09 23:02:58.466 +03:00 [INF] User profile is available. Using 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-09 23:02:58.488 +03:00 [DBG] Reading data from file 'C:\Users\ebtyx\AppData\Local\ASP.NET\DataProtection-Keys\key-036e1e5f-5347-47d7-8236-0b64ed0a76a1.xml'.
2025-05-09 23:02:58.491 +03:00 [DBG] Entity Framework Core 9.0.4 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.4' with options: EngineType=SqlServer 
2025-05-09 23:02:58.496 +03:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.ExpiresAt < DateTime.UtcNow)'
2025-05-09 23:02:58.497 +03:00 [DBG] Found key {036e1e5f-5347-47d7-8236-0b64ed0a76a1}.
2025-05-09 23:02:58.509 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<RefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE()) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.CreatedAt (DateTime) Required, 1], [Property: RefreshToken.ExpiresAt (DateTime) Required, 2], [Property: RefreshToken.IsRevoked (bool) Required, 3], [Property: RefreshToken.Token (string) Required Index MaxLength(200), 4], [Property: RefreshToken.UserId (int) Required FK Index, 5] }
        SELECT r.id, r.created_at, r.expires_at, r.is_revoked, r.token, r.user_fk
        FROM refresh_tokens AS r
        WHERE r.expires_at < GETUTCDATE(), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        RefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            RefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(RefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (RefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]: 
                        {
                            return 
                            {
                                RefreshToken instance;
                                instance = new RefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                instance.<ExpiresAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(3);
                                instance.<Token>k__BackingField = dataReader.GetString(4);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(5);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Finance_Manager_Backend.BusinessLogic.Models.RefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(RefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Finance_Manager_Backend.DataBase.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-05-09 23:02:58.510 +03:00 [DBG] Considering key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} with expiration date 2025-07-16 20:11:06Z as default key.
2025-05-09 23:02:58.516 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 23:02:58.516 +03:00 [DBG] Creating DbConnection.
2025-05-09 23:02:58.518 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-09 23:02:58.519 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-09 23:02:58.520 +03:00 [DBG] Opening connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.521 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-09 23:02:58.522 +03:00 [DBG] Opened connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.524 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-09 23:02:58.525 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-09 23:02:58.526 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-09 23:02:58.527 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-09 23:02:58.529 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-09 23:02:58.530 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 23:02:58.533 +03:00 [DBG] Using key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} as the default key.
2025-05-09 23:02:58.535 +03:00 [DBG] Key ring with default key {036e1e5f-5347-47d7-8236-0b64ed0a76a1} was loaded during application startup.
2025-05-09 23:02:58.536 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[id], [r].[created_at], [r].[expires_at], [r].[is_revoked], [r].[token], [r].[user_fk]
FROM [refresh_tokens] AS [r]
WHERE [r].[expires_at] < GETUTCDATE()
2025-05-09 23:02:58.539 +03:00 [DBG] Closing data reader to 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.540 +03:00 [DBG] A data reader for 'FinanceManagerDB' on server 'localhost' is being disposed after spending 2ms reading results.
2025-05-09 23:02:58.542 +03:00 [DBG] Closing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.543 +03:00 [DBG] Closed connection to database 'FinanceManagerDB' on server 'localhost' (1ms).
2025-05-09 23:02:58.545 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-09 23:02:58.547 +03:00 [DBG] Disposing connection to database 'FinanceManagerDB' on server 'localhost'.
2025-05-09 23:02:58.548 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-09 23:02:58.663 +03:00 [INF] Now listening on: https://localhost:49464
2025-05-09 23:02:58.669 +03:00 [INF] Now listening on: http://localhost:49465
2025-05-09 23:02:58.670 +03:00 [DBG] Loaded hosting startup assembly Finance_Manager_Backend
2025-05-09 23:02:58.672 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-09 23:02:58.673 +03:00 [INF] Hosting environment: Development
2025-05-09 23:02:58.674 +03:00 [INF] Content root path: G:\ARTEM\Проэкты С++, C#\Visual Studio projects\C# Projects\Finance_Manager_Backend\Finance_Manager_Backend
2025-05-09 23:02:58.675 +03:00 [DBG] Hosting started
2025-05-09 23:03:11.969 +03:00 [DBG] Connection id "0HNCF6I3DAV8U" accepted.
2025-05-09 23:03:11.972 +03:00 [DBG] Connection id "0HNCF6I3DAV8U" started.
2025-05-09 23:03:11.972 +03:00 [DBG] Connection id "0HNCF6I3DAV8V" accepted.
2025-05-09 23:03:11.980 +03:00 [DBG] Connection id "0HNCF6I3DAV8V" started.
2025-05-09 23:03:12.028 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/index.html - null null
2025-05-09 23:03:12.035 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-09 23:03:12.274 +03:00 [DBG] Connection id "0HNCF6I3DAV8U" completed keep alive response.
2025-05-09 23:03:12.282 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/index.html - 200 null text/html;charset=utf-8 255.8067ms
2025-05-09 23:03:12.731 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - null null
2025-05-09 23:03:13.002 +03:00 [DBG] Connection id "0HNCF6I3DAV8U" completed keep alive response.
2025-05-09 23:03:13.022 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 291.2787ms
2025-05-09 23:03:16.097 +03:00 [DBG] Connection id "0HNCF6I3DAV8V" received FIN.
2025-05-09 23:03:16.099 +03:00 [DBG] Connection id "0HNCF6I3DAV8U" received FIN.
2025-05-09 23:03:16.107 +03:00 [DBG] Connection id "0HNCF6I3DAV8V" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 23:03:16.107 +03:00 [DBG] Connection id "0HNCF6I3DAV8U" disconnecting.
2025-05-09 23:03:16.109 +03:00 [DBG] Connection id "0HNCF6I3DAV8V" disconnecting.
2025-05-09 23:03:16.114 +03:00 [DBG] Connection id "0HNCF6I3DAV8U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 23:03:16.116 +03:00 [DBG] Connection id "0HNCF6I3DAV8V" stopped.
2025-05-09 23:03:16.120 +03:00 [DBG] Connection id "0HNCF6I3DAV8U" stopped.
2025-05-09 23:03:18.750 +03:00 [DBG] Connection id "0HNCF6I3DAV90" accepted.
2025-05-09 23:03:18.767 +03:00 [DBG] Connection id "0HNCF6I3DAV91" accepted.
2025-05-09 23:03:18.768 +03:00 [DBG] Connection id "0HNCF6I3DAV90" started.
2025-05-09 23:03:18.769 +03:00 [DBG] Connection id "0HNCF6I3DAV91" started.
2025-05-09 23:03:20.182 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - null null
2025-05-09 23:03:20.326 +03:00 [DBG] Connection id "0HNCF6I3DAV91" completed keep alive response.
2025-05-09 23:03:20.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 152.5286ms
2025-05-09 23:03:21.087 +03:00 [DBG] Connection id "0HNCF6I3DAV90" received FIN.
2025-05-09 23:03:21.087 +03:00 [DBG] Connection id "0HNCF6I3DAV91" received FIN.
2025-05-09 23:03:21.094 +03:00 [DBG] Connection id "0HNCF6I3DAV90" disconnecting.
2025-05-09 23:03:21.105 +03:00 [DBG] Connection id "0HNCF6I3DAV91" disconnecting.
2025-05-09 23:03:21.108 +03:00 [DBG] Connection id "0HNCF6I3DAV90" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 23:03:21.112 +03:00 [DBG] Connection id "0HNCF6I3DAV91" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 23:03:21.119 +03:00 [DBG] Connection id "0HNCF6I3DAV92" accepted.
2025-05-09 23:03:21.122 +03:00 [DBG] Connection id "0HNCF6I3DAV91" stopped.
2025-05-09 23:03:21.123 +03:00 [DBG] Connection id "0HNCF6I3DAV90" stopped.
2025-05-09 23:03:21.124 +03:00 [DBG] Connection id "0HNCF6I3DAV92" started.
2025-05-09 23:03:21.245 +03:00 [DBG] Connection id "0HNCF6I3DAV93" accepted.
2025-05-09 23:03:21.251 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - null null
2025-05-09 23:03:21.255 +03:00 [DBG] Connection id "0HNCF6I3DAV93" started.
2025-05-09 23:03:21.345 +03:00 [DBG] Connection id "0HNCF6I3DAV92" completed keep alive response.
2025-05-09 23:03:21.347 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:49465/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 95.7726ms
2025-05-09 23:03:26.088 +03:00 [DBG] Connection id "0HNCF6I3DAV93" received FIN.
2025-05-09 23:03:26.088 +03:00 [DBG] Connection id "0HNCF6I3DAV92" received FIN.
2025-05-09 23:03:26.101 +03:00 [DBG] Connection id "0HNCF6I3DAV93" disconnecting.
2025-05-09 23:03:26.107 +03:00 [DBG] Connection id "0HNCF6I3DAV92" disconnecting.
2025-05-09 23:03:26.109 +03:00 [DBG] Connection id "0HNCF6I3DAV93" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 23:03:26.110 +03:00 [DBG] Connection id "0HNCF6I3DAV92" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-09 23:03:26.128 +03:00 [DBG] Connection id "0HNCF6I3DAV93" stopped.
2025-05-09 23:03:26.128 +03:00 [DBG] Connection id "0HNCF6I3DAV92" stopped.
2025-05-09 23:04:09.944 +03:00 [INF] Application is shutting down...
2025-05-09 23:04:09.945 +03:00 [DBG] Hosting stopping
2025-05-09 23:04:09.957 +03:00 [DBG] Hosting stopped
